(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Pi(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const $e={},Kn=[],Dt=()=>{},lc=()=>!1,bo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Si=e=>e.startsWith("onUpdate:"),Qe=Object.assign,wi=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},ac=Object.prototype.hasOwnProperty,De=(e,t)=>ac.call(e,t),ge=Array.isArray,Xn=e=>Is(e)==="[object Map]",Po=e=>Is(e)==="[object Set]",el=e=>Is(e)==="[object Date]",Se=e=>typeof e=="function",We=e=>typeof e=="string",$t=e=>typeof e=="symbol",qe=e=>e!==null&&typeof e=="object",ga=e=>(qe(e)||Se(e))&&Se(e.then)&&Se(e.catch),va=Object.prototype.toString,Is=e=>va.call(e),rc=e=>Is(e).slice(8,-1),ma=e=>Is(e)==="[object Object]",_i=e=>We(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ps=Pi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),So=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},cc=/-(\w)/g,un=So(e=>e.replace(cc,(t,n)=>n?n.toUpperCase():"")),uc=/\B([A-Z])/g,vn=So(e=>e.replace(uc,"-$1").toLowerCase()),ya=So(e=>e.charAt(0).toUpperCase()+e.slice(1)),Bo=So(e=>e?`on${ya(e)}`:""),rn=(e,t)=>!Object.is(e,t),Xs=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},ba=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},ei=e=>{const t=parseFloat(e);return isNaN(t)?e:t},dc=e=>{const t=We(e)?Number(e):NaN;return isNaN(t)?e:t};let tl;const wo=()=>tl||(tl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ls(e){if(ge(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=We(s)?gc(s):ls(s);if(o)for(const i in o)t[i]=o[i]}return t}else if(We(e)||qe(e))return e}const fc=/;(?![^(]*\))/g,hc=/:([^]+)/,pc=/\/\*[^]*?\*\//g;function gc(e){const t={};return e.replace(pc,"").split(fc).forEach(n=>{if(n){const s=n.split(hc);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Me(e){let t="";if(We(e))t=e;else if(ge(e))for(let n=0;n<e.length;n++){const s=Me(e[n]);s&&(t+=s+" ")}else if(qe(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const vc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",mc=Pi(vc);function Pa(e){return!!e||e===""}function yc(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=_o(e[s],t[s]);return n}function _o(e,t){if(e===t)return!0;let n=el(e),s=el(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=$t(e),s=$t(t),n||s)return e===t;if(n=ge(e),s=ge(t),n||s)return n&&s?yc(e,t):!1;if(n=qe(e),s=qe(t),n||s){if(!n||!s)return!1;const o=Object.keys(e).length,i=Object.keys(t).length;if(o!==i)return!1;for(const l in e){const a=e.hasOwnProperty(l),r=t.hasOwnProperty(l);if(a&&!r||!a&&r||!_o(e[l],t[l]))return!1}}return String(e)===String(t)}function Sa(e,t){return e.findIndex(n=>_o(n,t))}const wa=e=>!!(e&&e.__v_isRef===!0),Ee=e=>We(e)?e:e==null?"":ge(e)||qe(e)&&(e.toString===va||!Se(e.toString))?wa(e)?Ee(e.value):JSON.stringify(e,_a,2):String(e),_a=(e,t)=>wa(t)?_a(e,t.value):Xn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,o],i)=>(n[No(s,i)+" =>"]=o,n),{})}:Po(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>No(n))}:$t(t)?No(t):qe(t)&&!ge(t)&&!ma(t)?String(t):t,No=(e,t="")=>{var n;return $t(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let st;class Ca{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=st,!t&&st&&(this.index=(st.scopes||(st.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=st;try{return st=this,t()}finally{st=n}}}on(){++this._on===1&&(this.prevScope=st,st=this)}off(){this._on>0&&--this._on===0&&(st=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function xa(e){return new Ca(e)}function Ta(){return st}function bc(e,t=!1){st&&st.cleanups.push(e)}let Le;const Ho=new WeakSet;class Ea{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,st&&st.active&&st.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ho.has(this)&&(Ho.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Aa(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,nl(this),Ma(this);const t=Le,n=wt;Le=this,wt=!0;try{return this.fn()}finally{Ra(this),Le=t,wt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ti(t);this.deps=this.depsTail=void 0,nl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ho.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ti(this)&&this.run()}get dirty(){return ti(this)}}let ka=0,gs,vs;function Aa(e,t=!1){if(e.flags|=8,t){e.next=vs,vs=e;return}e.next=gs,gs=e}function Ci(){ka++}function xi(){if(--ka>0)return;if(vs){let t=vs;for(vs=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;gs;){let t=gs;for(gs=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Ma(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ra(e){let t,n=e.depsTail,s=n;for(;s;){const o=s.prevDep;s.version===-1?(s===n&&(n=o),Ti(s),Pc(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=o}e.deps=t,e.depsTail=n}function ti(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Da(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Da(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Cs)||(e.globalVersion=Cs,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!ti(e))))return;e.flags|=2;const t=e.dep,n=Le,s=wt;Le=e,wt=!0;try{Ma(e);const o=e.fn(e._value);(t.version===0||rn(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{Le=n,wt=s,Ra(e),e.flags&=-3}}function Ti(e,t=!1){const{dep:n,prevSub:s,nextSub:o}=e;if(s&&(s.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Ti(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Pc(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let wt=!0;const Oa=[];function Ut(){Oa.push(wt),wt=!1}function zt(){const e=Oa.pop();wt=e===void 0?!0:e}function nl(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Le;Le=void 0;try{t()}finally{Le=n}}}let Cs=0;class Sc{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ei{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Le||!wt||Le===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Le)n=this.activeLink=new Sc(Le,this),Le.deps?(n.prevDep=Le.depsTail,Le.depsTail.nextDep=n,Le.depsTail=n):Le.deps=Le.depsTail=n,Ia(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Le.depsTail,n.nextDep=void 0,Le.depsTail.nextDep=n,Le.depsTail=n,Le.deps===n&&(Le.deps=s)}return n}trigger(t){this.version++,Cs++,this.notify(t)}notify(t){Ci();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{xi()}}}function Ia(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Ia(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const no=new WeakMap,Mn=Symbol(""),ni=Symbol(""),xs=Symbol("");function ot(e,t,n){if(wt&&Le){let s=no.get(e);s||no.set(e,s=new Map);let o=s.get(n);o||(s.set(n,o=new Ei),o.map=s,o.key=n),o.track()}}function Wt(e,t,n,s,o,i){const l=no.get(e);if(!l){Cs++;return}const a=r=>{r&&r.trigger()};if(Ci(),t==="clear")l.forEach(a);else{const r=ge(e),u=r&&_i(n);if(r&&n==="length"){const c=Number(s);l.forEach((p,v)=>{(v==="length"||v===xs||!$t(v)&&v>=c)&&a(p)})}else switch((n!==void 0||l.has(void 0))&&a(l.get(n)),u&&a(l.get(xs)),t){case"add":r?u&&a(l.get("length")):(a(l.get(Mn)),Xn(e)&&a(l.get(ni)));break;case"delete":r||(a(l.get(Mn)),Xn(e)&&a(l.get(ni)));break;case"set":Xn(e)&&a(l.get(Mn));break}}xi()}function wc(e,t){const n=no.get(e);return n&&n.get(t)}function Wn(e){const t=Ae(e);return t===e?t:(ot(t,"iterate",xs),yt(e)?t:t.map(tt))}function Co(e){return ot(e=Ae(e),"iterate",xs),e}const _c={__proto__:null,[Symbol.iterator](){return Wo(this,Symbol.iterator,tt)},concat(...e){return Wn(this).concat(...e.map(t=>ge(t)?Wn(t):t))},entries(){return Wo(this,"entries",e=>(e[1]=tt(e[1]),e))},every(e,t){return Bt(this,"every",e,t,void 0,arguments)},filter(e,t){return Bt(this,"filter",e,t,n=>n.map(tt),arguments)},find(e,t){return Bt(this,"find",e,t,tt,arguments)},findIndex(e,t){return Bt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Bt(this,"findLast",e,t,tt,arguments)},findLastIndex(e,t){return Bt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Bt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Vo(this,"includes",e)},indexOf(...e){return Vo(this,"indexOf",e)},join(e){return Wn(this).join(e)},lastIndexOf(...e){return Vo(this,"lastIndexOf",e)},map(e,t){return Bt(this,"map",e,t,void 0,arguments)},pop(){return rs(this,"pop")},push(...e){return rs(this,"push",e)},reduce(e,...t){return sl(this,"reduce",e,t)},reduceRight(e,...t){return sl(this,"reduceRight",e,t)},shift(){return rs(this,"shift")},some(e,t){return Bt(this,"some",e,t,void 0,arguments)},splice(...e){return rs(this,"splice",e)},toReversed(){return Wn(this).toReversed()},toSorted(e){return Wn(this).toSorted(e)},toSpliced(...e){return Wn(this).toSpliced(...e)},unshift(...e){return rs(this,"unshift",e)},values(){return Wo(this,"values",tt)}};function Wo(e,t,n){const s=Co(e),o=s[t]();return s!==e&&!yt(e)&&(o._next=o.next,o.next=()=>{const i=o._next();return i.value&&(i.value=n(i.value)),i}),o}const Cc=Array.prototype;function Bt(e,t,n,s,o,i){const l=Co(e),a=l!==e&&!yt(e),r=l[t];if(r!==Cc[t]){const p=r.apply(e,i);return a?tt(p):p}let u=n;l!==e&&(a?u=function(p,v){return n.call(this,tt(p),v,e)}:n.length>2&&(u=function(p,v){return n.call(this,p,v,e)}));const c=r.call(l,u,s);return a&&o?o(c):c}function sl(e,t,n,s){const o=Co(e);let i=n;return o!==e&&(yt(e)?n.length>3&&(i=function(l,a,r){return n.call(this,l,a,r,e)}):i=function(l,a,r){return n.call(this,l,tt(a),r,e)}),o[t](i,...s)}function Vo(e,t,n){const s=Ae(e);ot(s,"iterate",xs);const o=s[t](...n);return(o===-1||o===!1)&&Mi(n[0])?(n[0]=Ae(n[0]),s[t](...n)):o}function rs(e,t,n=[]){Ut(),Ci();const s=Ae(e)[t].apply(e,n);return xi(),zt(),s}const xc=Pi("__proto__,__v_isRef,__isVue"),$a=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter($t));function Tc(e){$t(e)||(e=String(e));const t=Ae(this);return ot(t,"has",e),t.hasOwnProperty(e)}class Fa{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const o=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(o?i?Fc:Na:i?Ba:La).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const l=ge(t);if(!o){let r;if(l&&(r=_c[n]))return r;if(n==="hasOwnProperty")return Tc}const a=Reflect.get(t,n,Ue(t)?t:s);return($t(n)?$a.has(n):xc(n))||(o||ot(t,"get",n),i)?a:Ue(a)?l&&_i(n)?a:a.value:qe(a)?o?Ha(a):Fn(a):a}}class qa extends Fa{constructor(t=!1){super(!1,t)}set(t,n,s,o){let i=t[n];if(!this._isShallow){const r=dn(i);if(!yt(s)&&!dn(s)&&(i=Ae(i),s=Ae(s)),!ge(t)&&Ue(i)&&!Ue(s))return r?!1:(i.value=s,!0)}const l=ge(t)&&_i(n)?Number(n)<t.length:De(t,n),a=Reflect.set(t,n,s,Ue(t)?t:o);return t===Ae(o)&&(l?rn(s,i)&&Wt(t,"set",n,s):Wt(t,"add",n,s)),a}deleteProperty(t,n){const s=De(t,n);t[n];const o=Reflect.deleteProperty(t,n);return o&&s&&Wt(t,"delete",n,void 0),o}has(t,n){const s=Reflect.has(t,n);return(!$t(n)||!$a.has(n))&&ot(t,"has",n),s}ownKeys(t){return ot(t,"iterate",ge(t)?"length":Mn),Reflect.ownKeys(t)}}class Ec extends Fa{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const kc=new qa,Ac=new Ec,Mc=new qa(!0);const si=e=>e,Hs=e=>Reflect.getPrototypeOf(e);function Rc(e,t,n){return function(...s){const o=this.__v_raw,i=Ae(o),l=Xn(i),a=e==="entries"||e===Symbol.iterator&&l,r=e==="keys"&&l,u=o[e](...s),c=n?si:t?so:tt;return!t&&ot(i,"iterate",r?ni:Mn),{next(){const{value:p,done:v}=u.next();return v?{value:p,done:v}:{value:a?[c(p[0]),c(p[1])]:c(p),done:v}},[Symbol.iterator](){return this}}}}function Ws(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Dc(e,t){const n={get(o){const i=this.__v_raw,l=Ae(i),a=Ae(o);e||(rn(o,a)&&ot(l,"get",o),ot(l,"get",a));const{has:r}=Hs(l),u=t?si:e?so:tt;if(r.call(l,o))return u(i.get(o));if(r.call(l,a))return u(i.get(a));i!==l&&i.get(o)},get size(){const o=this.__v_raw;return!e&&ot(Ae(o),"iterate",Mn),Reflect.get(o,"size",o)},has(o){const i=this.__v_raw,l=Ae(i),a=Ae(o);return e||(rn(o,a)&&ot(l,"has",o),ot(l,"has",a)),o===a?i.has(o):i.has(o)||i.has(a)},forEach(o,i){const l=this,a=l.__v_raw,r=Ae(a),u=t?si:e?so:tt;return!e&&ot(r,"iterate",Mn),a.forEach((c,p)=>o.call(i,u(c),u(p),l))}};return Qe(n,e?{add:Ws("add"),set:Ws("set"),delete:Ws("delete"),clear:Ws("clear")}:{add(o){!t&&!yt(o)&&!dn(o)&&(o=Ae(o));const i=Ae(this);return Hs(i).has.call(i,o)||(i.add(o),Wt(i,"add",o,o)),this},set(o,i){!t&&!yt(i)&&!dn(i)&&(i=Ae(i));const l=Ae(this),{has:a,get:r}=Hs(l);let u=a.call(l,o);u||(o=Ae(o),u=a.call(l,o));const c=r.call(l,o);return l.set(o,i),u?rn(i,c)&&Wt(l,"set",o,i):Wt(l,"add",o,i),this},delete(o){const i=Ae(this),{has:l,get:a}=Hs(i);let r=l.call(i,o);r||(o=Ae(o),r=l.call(i,o)),a&&a.call(i,o);const u=i.delete(o);return r&&Wt(i,"delete",o,void 0),u},clear(){const o=Ae(this),i=o.size!==0,l=o.clear();return i&&Wt(o,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=Rc(o,e,t)}),n}function ki(e,t){const n=Dc(e,t);return(s,o,i)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(De(n,o)&&o in s?n:s,o,i)}const Oc={get:ki(!1,!1)},Ic={get:ki(!1,!0)},$c={get:ki(!0,!1)};const La=new WeakMap,Ba=new WeakMap,Na=new WeakMap,Fc=new WeakMap;function qc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Lc(e){return e.__v_skip||!Object.isExtensible(e)?0:qc(rc(e))}function Fn(e){return dn(e)?e:Ai(e,!1,kc,Oc,La)}function Bc(e){return Ai(e,!1,Mc,Ic,Ba)}function Ha(e){return Ai(e,!0,Ac,$c,Na)}function Ai(e,t,n,s,o){if(!qe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=Lc(e);if(i===0)return e;const l=o.get(e);if(l)return l;const a=new Proxy(e,i===2?s:n);return o.set(e,a),a}function cn(e){return dn(e)?cn(e.__v_raw):!!(e&&e.__v_isReactive)}function dn(e){return!!(e&&e.__v_isReadonly)}function yt(e){return!!(e&&e.__v_isShallow)}function Mi(e){return e?!!e.__v_raw:!1}function Ae(e){const t=e&&e.__v_raw;return t?Ae(t):e}function Ri(e){return!De(e,"__v_skip")&&Object.isExtensible(e)&&ba(e,"__v_skip",!0),e}const tt=e=>qe(e)?Fn(e):e,so=e=>qe(e)?Ha(e):e;function Ue(e){return e?e.__v_isRef===!0:!1}function te(e){return Nc(e,!1)}function Nc(e,t){return Ue(e)?e:new Hc(e,t)}class Hc{constructor(t,n){this.dep=new Ei,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Ae(t),this._value=n?t:tt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||yt(t)||dn(t);t=s?t:Ae(t),rn(t,n)&&(this._rawValue=t,this._value=s?t:tt(t),this.dep.trigger())}}function tn(e){return Ue(e)?e.value:e}const Wc={get:(e,t,n)=>t==="__v_raw"?e:tn(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return Ue(o)&&!Ue(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function Wa(e){return cn(e)?e:new Proxy(e,Wc)}function Vc(e){const t=ge(e)?new Array(e.length):{};for(const n in e)t[n]=Uc(e,n);return t}class jc{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return wc(Ae(this._object),this._key)}}function Uc(e,t,n){const s=e[t];return Ue(s)?s:new jc(e,t,n)}class zc{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Ei(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Cs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Le!==this)return Aa(this,!0),!0}get value(){const t=this.dep.track();return Da(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Yc(e,t,n=!1){let s,o;return Se(e)?s=e:(s=e.get,o=e.set),new zc(s,o,n)}const Vs={},oo=new WeakMap;let xn;function Kc(e,t=!1,n=xn){if(n){let s=oo.get(n);s||oo.set(n,s=[]),s.push(e)}}function Xc(e,t,n=$e){const{immediate:s,deep:o,once:i,scheduler:l,augmentJob:a,call:r}=n,u=F=>o?F:yt(F)||o===!1||o===0?Vt(F,1):Vt(F);let c,p,v,y,P=!1,C=!1;if(Ue(e)?(p=()=>e.value,P=yt(e)):cn(e)?(p=()=>u(e),P=!0):ge(e)?(C=!0,P=e.some(F=>cn(F)||yt(F)),p=()=>e.map(F=>{if(Ue(F))return F.value;if(cn(F))return u(F);if(Se(F))return r?r(F,2):F()})):Se(e)?t?p=r?()=>r(e,2):e:p=()=>{if(v){Ut();try{v()}finally{zt()}}const F=xn;xn=c;try{return r?r(e,3,[y]):e(y)}finally{xn=F}}:p=Dt,t&&o){const F=p,O=o===!0?1/0:o;p=()=>Vt(F(),O)}const L=Ta(),R=()=>{c.stop(),L&&L.active&&wi(L.effects,c)};if(i&&t){const F=t;t=(...O)=>{F(...O),R()}}let $=C?new Array(e.length).fill(Vs):Vs;const J=F=>{if(!(!(c.flags&1)||!c.dirty&&!F))if(t){const O=c.run();if(o||P||(C?O.some((oe,re)=>rn(oe,$[re])):rn(O,$))){v&&v();const oe=xn;xn=c;try{const re=[O,$===Vs?void 0:C&&$[0]===Vs?[]:$,y];$=O,r?r(t,3,re):t(...re)}finally{xn=oe}}}else c.run()};return a&&a(J),c=new Ea(p),c.scheduler=l?()=>l(J,!1):J,y=F=>Kc(F,!1,c),v=c.onStop=()=>{const F=oo.get(c);if(F){if(r)r(F,4);else for(const O of F)O();oo.delete(c)}},t?s?J(!0):$=c.run():l?l(J.bind(null,!0),!0):c.run(),R.pause=c.pause.bind(c),R.resume=c.resume.bind(c),R.stop=R,R}function Vt(e,t=1/0,n){if(t<=0||!qe(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Ue(e))Vt(e.value,t,n);else if(ge(e))for(let s=0;s<e.length;s++)Vt(e[s],t,n);else if(Po(e)||Xn(e))e.forEach(s=>{Vt(s,t,n)});else if(ma(e)){for(const s in e)Vt(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Vt(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function $s(e,t,n,s){try{return s?e(...s):e()}catch(o){xo(o,t,n)}}function _t(e,t,n,s){if(Se(e)){const o=$s(e,t,n,s);return o&&ga(o)&&o.catch(i=>{xo(i,t,n)}),o}if(ge(e)){const o=[];for(let i=0;i<e.length;i++)o.push(_t(e[i],t,n,s));return o}}function xo(e,t,n,s=!0){const o=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||$e;if(t){let a=t.parent;const r=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const c=a.ec;if(c){for(let p=0;p<c.length;p++)if(c[p](e,r,u)===!1)return}a=a.parent}if(i){Ut(),$s(i,null,10,[e,r,u]),zt();return}}Jc(e,n,o,s,l)}function Jc(e,t,n,s=!0,o=!1){if(o)throw e;console.error(e)}const rt=[];let Mt=-1;const Jn=[];let on=null,zn=0;const Va=Promise.resolve();let io=null;function Ot(e){const t=io||Va;return e?t.then(this?e.bind(this):e):t}function Gc(e){let t=Mt+1,n=rt.length;for(;t<n;){const s=t+n>>>1,o=rt[s],i=Ts(o);i<e||i===e&&o.flags&2?t=s+1:n=s}return t}function Di(e){if(!(e.flags&1)){const t=Ts(e),n=rt[rt.length-1];!n||!(e.flags&2)&&t>=Ts(n)?rt.push(e):rt.splice(Gc(t),0,e),e.flags|=1,ja()}}function ja(){io||(io=Va.then(za))}function Zc(e){ge(e)?Jn.push(...e):on&&e.id===-1?on.splice(zn+1,0,e):e.flags&1||(Jn.push(e),e.flags|=1),ja()}function ol(e,t,n=Mt+1){for(;n<rt.length;n++){const s=rt[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;rt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Ua(e){if(Jn.length){const t=[...new Set(Jn)].sort((n,s)=>Ts(n)-Ts(s));if(Jn.length=0,on){on.push(...t);return}for(on=t,zn=0;zn<on.length;zn++){const n=on[zn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}on=null,zn=0}}const Ts=e=>e.id==null?e.flags&2?-1:1/0:e.id;function za(e){try{for(Mt=0;Mt<rt.length;Mt++){const t=rt[Mt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),$s(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Mt<rt.length;Mt++){const t=rt[Mt];t&&(t.flags&=-2)}Mt=-1,rt.length=0,Ua(),io=null,(rt.length||Jn.length)&&za()}}let dt=null,Ya=null;function lo(e){const t=dt;return dt=e,Ya=e&&e.type.__scopeId||null,t}function Yt(e,t=dt,n){if(!t||e._n)return e;const s=(...o)=>{s._d&&ml(-1);const i=lo(t);let l;try{l=e(...o)}finally{lo(i),s._d&&ml(1)}return l};return s._n=!0,s._c=!0,s._d=!0,s}function Js(e,t){if(dt===null)return e;const n=Ro(dt),s=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[i,l,a,r=$e]=t[o];i&&(Se(i)&&(i={mounted:i,updated:i}),i.deep&&Vt(l),s.push({dir:i,instance:n,value:l,oldValue:void 0,arg:a,modifiers:r}))}return e}function Sn(e,t,n,s){const o=e.dirs,i=t&&t.dirs;for(let l=0;l<o.length;l++){const a=o[l];i&&(a.oldValue=i[l].value);let r=a.dir[s];r&&(Ut(),_t(r,n,8,[e.el,a,e,t]),zt())}}const Ka=Symbol("_vte"),Xa=e=>e.__isTeleport,ms=e=>e&&(e.disabled||e.disabled===""),il=e=>e&&(e.defer||e.defer===""),ll=e=>typeof SVGElement<"u"&&e instanceof SVGElement,al=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,oi=(e,t)=>{const n=e&&e.to;return We(n)?t?t(n):null:n},Ja={name:"Teleport",__isTeleport:!0,process(e,t,n,s,o,i,l,a,r,u){const{mc:c,pc:p,pbc:v,o:{insert:y,querySelector:P,createText:C,createComment:L}}=u,R=ms(t.props);let{shapeFlag:$,children:J,dynamicChildren:F}=t;if(e==null){const O=t.el=C(""),oe=t.anchor=C("");y(O,n,s),y(oe,n,s);const re=(N,_)=>{$&16&&(o&&o.isCE&&(o.ce._teleportTarget=N),c(J,N,_,o,i,l,a,r))},B=()=>{const N=t.target=oi(t.props,P),_=Ga(N,t,C,y);N&&(l!=="svg"&&ll(N)?l="svg":l!=="mathml"&&al(N)&&(l="mathml"),R||(re(N,_),Gs(t,!1)))};R&&(re(n,oe),Gs(t,!0)),il(t.props)?(t.el.__isMounted=!1,at(()=>{B(),delete t.el.__isMounted},i)):B()}else{if(il(t.props)&&e.el.__isMounted===!1){at(()=>{Ja.process(e,t,n,s,o,i,l,a,r,u)},i);return}t.el=e.el,t.targetStart=e.targetStart;const O=t.anchor=e.anchor,oe=t.target=e.target,re=t.targetAnchor=e.targetAnchor,B=ms(e.props),N=B?n:oe,_=B?O:re;if(l==="svg"||ll(oe)?l="svg":(l==="mathml"||al(oe))&&(l="mathml"),F?(v(e.dynamicChildren,F,N,o,i,l,a),Fi(e,t,!0)):r||p(e,t,N,_,o,i,l,a,!1),R)B?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):js(t,n,O,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const V=t.target=oi(t.props,P);V&&js(t,V,null,u,0)}else B&&js(t,oe,re,u,1);Gs(t,R)}},remove(e,t,n,{um:s,o:{remove:o}},i){const{shapeFlag:l,children:a,anchor:r,targetStart:u,targetAnchor:c,target:p,props:v}=e;if(p&&(o(u),o(c)),i&&o(r),l&16){const y=i||!ms(v);for(let P=0;P<a.length;P++){const C=a[P];s(C,t,n,y,!!C.dynamicChildren)}}},move:js,hydrate:Qc};function js(e,t,n,{o:{insert:s},m:o},i=2){i===0&&s(e.targetAnchor,t,n);const{el:l,anchor:a,shapeFlag:r,children:u,props:c}=e,p=i===2;if(p&&s(l,t,n),(!p||ms(c))&&r&16)for(let v=0;v<u.length;v++)o(u[v],t,n,2);p&&s(a,t,n)}function Qc(e,t,n,s,o,i,{o:{nextSibling:l,parentNode:a,querySelector:r,insert:u,createText:c}},p){const v=t.target=oi(t.props,r);if(v){const y=ms(t.props),P=v._lpa||v.firstChild;if(t.shapeFlag&16)if(y)t.anchor=p(l(e),t,a(e),n,s,o,i),t.targetStart=P,t.targetAnchor=P&&l(P);else{t.anchor=l(e);let C=P;for(;C;){if(C&&C.nodeType===8){if(C.data==="teleport start anchor")t.targetStart=C;else if(C.data==="teleport anchor"){t.targetAnchor=C,v._lpa=t.targetAnchor&&l(t.targetAnchor);break}}C=l(C)}t.targetAnchor||Ga(v,t,c,u),p(P&&l(P),t,v,n,s,o,i)}Gs(t,y)}return t.anchor&&l(t.anchor)}const Oi=Ja;function Gs(e,t){const n=e.ctx;if(n&&n.ut){let s,o;for(t?(s=e.el,o=e.anchor):(s=e.targetStart,o=e.targetAnchor);s&&s!==o;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function Ga(e,t,n,s){const o=t.targetStart=n(""),i=t.targetAnchor=n("");return o[Ka]=i,e&&(s(o,e),s(i,e)),i}const ln=Symbol("_leaveCb"),Us=Symbol("_enterCb");function eu(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Jt(()=>{e.isMounted=!0}),ir(()=>{e.isUnmounting=!0}),e}const mt=[Function,Array],Za={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:mt,onEnter:mt,onAfterEnter:mt,onEnterCancelled:mt,onBeforeLeave:mt,onLeave:mt,onAfterLeave:mt,onLeaveCancelled:mt,onBeforeAppear:mt,onAppear:mt,onAfterAppear:mt,onAppearCancelled:mt},Qa=e=>{const t=e.subTree;return t.component?Qa(t.component):t},tu={name:"BaseTransition",props:Za,setup(e,{slots:t}){const n=Zu(),s=eu();return()=>{const o=t.default&&nr(t.default(),!0);if(!o||!o.length)return;const i=er(o),l=Ae(e),{mode:a}=l;if(s.isLeaving)return jo(i);const r=rl(i);if(!r)return jo(i);let u=ii(r,l,s,n,p=>u=p);r.type!==ct&&Es(r,u);let c=n.subTree&&rl(n.subTree);if(c&&c.type!==ct&&!Tn(r,c)&&Qa(n).type!==ct){let p=ii(c,l,s,n);if(Es(c,p),a==="out-in"&&r.type!==ct)return s.isLeaving=!0,p.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,c=void 0},jo(i);a==="in-out"&&r.type!==ct?p.delayLeave=(v,y,P)=>{const C=tr(s,c);C[String(c.key)]=c,v[ln]=()=>{y(),v[ln]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{P(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return i}}};function er(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==ct){t=n;break}}return t}const nu=tu;function tr(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function ii(e,t,n,s,o){const{appear:i,mode:l,persisted:a=!1,onBeforeEnter:r,onEnter:u,onAfterEnter:c,onEnterCancelled:p,onBeforeLeave:v,onLeave:y,onAfterLeave:P,onLeaveCancelled:C,onBeforeAppear:L,onAppear:R,onAfterAppear:$,onAppearCancelled:J}=t,F=String(e.key),O=tr(n,e),oe=(N,_)=>{N&&_t(N,s,9,_)},re=(N,_)=>{const V=_[1];oe(N,_),ge(N)?N.every(k=>k.length<=1)&&V():N.length<=1&&V()},B={mode:l,persisted:a,beforeEnter(N){let _=r;if(!n.isMounted)if(i)_=L||r;else return;N[ln]&&N[ln](!0);const V=O[F];V&&Tn(e,V)&&V.el[ln]&&V.el[ln](),oe(_,[N])},enter(N){let _=u,V=c,k=p;if(!n.isMounted)if(i)_=R||u,V=$||c,k=J||p;else return;let ne=!1;const se=N[Us]=g=>{ne||(ne=!0,g?oe(k,[N]):oe(V,[N]),B.delayedLeave&&B.delayedLeave(),N[Us]=void 0)};_?re(_,[N,se]):se()},leave(N,_){const V=String(e.key);if(N[Us]&&N[Us](!0),n.isUnmounting)return _();oe(v,[N]);let k=!1;const ne=N[ln]=se=>{k||(k=!0,_(),se?oe(C,[N]):oe(P,[N]),N[ln]=void 0,O[V]===e&&delete O[V])};O[V]=e,y?re(y,[N,ne]):ne()},clone(N){const _=ii(N,t,n,s,o);return o&&o(_),_}};return B}function jo(e){if(To(e))return e=fn(e),e.children=null,e}function rl(e){if(!To(e))return Xa(e.type)&&e.children?er(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Se(n.default))return n.default()}}function Es(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Es(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function nr(e,t=!1,n){let s=[],o=0;for(let i=0;i<e.length;i++){let l=e[i];const a=n==null?l.key:String(n)+String(l.key!=null?l.key:i);l.type===Ke?(l.patchFlag&128&&o++,s=s.concat(nr(l.children,t,a))):(t||l.type!==ct)&&s.push(a!=null?fn(l,{key:a}):l)}if(o>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function ut(e,t){return Se(e)?Qe({name:e.name},t,{setup:e}):e}function sr(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function ao(e,t,n,s,o=!1){if(ge(e)){e.forEach((P,C)=>ao(P,t&&(ge(t)?t[C]:t),n,s,o));return}if(ys(s)&&!o){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&ao(e,t,n,s.component.subTree);return}const i=s.shapeFlag&4?Ro(s.component):s.el,l=o?null:i,{i:a,r}=e,u=t&&t.r,c=a.refs===$e?a.refs={}:a.refs,p=a.setupState,v=Ae(p),y=p===$e?()=>!1:P=>De(v,P);if(u!=null&&u!==r&&(We(u)?(c[u]=null,y(u)&&(p[u]=null)):Ue(u)&&(u.value=null)),Se(r))$s(r,a,12,[l,c]);else{const P=We(r),C=Ue(r);if(P||C){const L=()=>{if(e.f){const R=P?y(r)?p[r]:c[r]:r.value;o?ge(R)&&wi(R,i):ge(R)?R.includes(i)||R.push(i):P?(c[r]=[i],y(r)&&(p[r]=c[r])):(r.value=[i],e.k&&(c[e.k]=r.value))}else P?(c[r]=l,y(r)&&(p[r]=l)):C&&(r.value=l,e.k&&(c[e.k]=l))};l?(L.id=-1,at(L,n)):L()}}}wo().requestIdleCallback;wo().cancelIdleCallback;const ys=e=>!!e.type.__asyncLoader,To=e=>e.type.__isKeepAlive;function su(e,t){or(e,"a",t)}function ou(e,t){or(e,"da",t)}function or(e,t,n=nt){const s=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(Eo(t,s,n),n){let o=n.parent;for(;o&&o.parent;)To(o.parent.vnode)&&iu(s,t,n,o),o=o.parent}}function iu(e,t,n,s){const o=Eo(t,e,s,!0);Bn(()=>{wi(s[t],o)},n)}function Eo(e,t,n=nt,s=!1){if(n){const o=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...l)=>{Ut();const a=qs(n),r=_t(t,n,e,l);return a(),zt(),r});return s?o.unshift(i):o.push(i),i}}const Xt=e=>(t,n=nt)=>{(!As||e==="sp")&&Eo(e,(...s)=>t(...s),n)},lu=Xt("bm"),Jt=Xt("m"),au=Xt("bu"),ru=Xt("u"),ir=Xt("bum"),Bn=Xt("um"),cu=Xt("sp"),uu=Xt("rtg"),du=Xt("rtc");function fu(e,t=nt){Eo("ec",e,t)}const hu=Symbol.for("v-ndc");function Fs(e,t,n,s){let o;const i=n,l=ge(e);if(l||We(e)){const a=l&&cn(e);let r=!1,u=!1;a&&(r=!yt(e),u=dn(e),e=Co(e)),o=new Array(e.length);for(let c=0,p=e.length;c<p;c++)o[c]=t(r?u?so(tt(e[c])):tt(e[c]):e[c],c,void 0,i)}else if(typeof e=="number"){o=new Array(e);for(let a=0;a<e;a++)o[a]=t(a+1,a,void 0,i)}else if(qe(e))if(e[Symbol.iterator])o=Array.from(e,(a,r)=>t(a,r,void 0,i));else{const a=Object.keys(e);o=new Array(a.length);for(let r=0,u=a.length;r<u;r++){const c=a[r];o[r]=t(e[c],c,r,i)}}else o=[];return o}const li=e=>e?Cr(e)?Ro(e):li(e.parent):null,bs=Qe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>li(e.parent),$root:e=>li(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ar(e),$forceUpdate:e=>e.f||(e.f=()=>{Di(e.update)}),$nextTick:e=>e.n||(e.n=Ot.bind(e.proxy)),$watch:e=>Fu.bind(e)}),Uo=(e,t)=>e!==$e&&!e.__isScriptSetup&&De(e,t),pu={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:o,props:i,accessCache:l,type:a,appContext:r}=e;let u;if(t[0]!=="$"){const y=l[t];if(y!==void 0)switch(y){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return i[t]}else{if(Uo(s,t))return l[t]=1,s[t];if(o!==$e&&De(o,t))return l[t]=2,o[t];if((u=e.propsOptions[0])&&De(u,t))return l[t]=3,i[t];if(n!==$e&&De(n,t))return l[t]=4,n[t];ai&&(l[t]=0)}}const c=bs[t];let p,v;if(c)return t==="$attrs"&&ot(e.attrs,"get",""),c(e);if((p=a.__cssModules)&&(p=p[t]))return p;if(n!==$e&&De(n,t))return l[t]=4,n[t];if(v=r.config.globalProperties,De(v,t))return v[t]},set({_:e},t,n){const{data:s,setupState:o,ctx:i}=e;return Uo(o,t)?(o[t]=n,!0):s!==$e&&De(s,t)?(s[t]=n,!0):De(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:o,propsOptions:i}},l){let a;return!!n[l]||e!==$e&&De(e,l)||Uo(t,l)||(a=i[0])&&De(a,l)||De(s,l)||De(bs,l)||De(o.config.globalProperties,l)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:De(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function cl(e){return ge(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ai=!0;function gu(e){const t=ar(e),n=e.proxy,s=e.ctx;ai=!1,t.beforeCreate&&ul(t.beforeCreate,e,"bc");const{data:o,computed:i,methods:l,watch:a,provide:r,inject:u,created:c,beforeMount:p,mounted:v,beforeUpdate:y,updated:P,activated:C,deactivated:L,beforeDestroy:R,beforeUnmount:$,destroyed:J,unmounted:F,render:O,renderTracked:oe,renderTriggered:re,errorCaptured:B,serverPrefetch:N,expose:_,inheritAttrs:V,components:k,directives:ne,filters:se}=t;if(u&&vu(u,s,null),l)for(const M in l){const j=l[M];Se(j)&&(s[M]=j.bind(n))}if(o){const M=o.call(n,n);qe(M)&&(e.data=Fn(M))}if(ai=!0,i)for(const M in i){const j=i[M],Z=Se(j)?j.bind(n,n):Se(j.get)?j.get.bind(n,n):Dt,m=!Se(j)&&Se(j.set)?j.set.bind(n):Dt,D=Te({get:Z,set:m});Object.defineProperty(s,M,{enumerable:!0,configurable:!0,get:()=>D.value,set:G=>D.value=G})}if(a)for(const M in a)lr(a[M],s,n,M);if(r){const M=Se(r)?r.call(n):r;Reflect.ownKeys(M).forEach(j=>{wu(j,M[j])})}c&&ul(c,e,"c");function A(M,j){ge(j)?j.forEach(Z=>M(Z.bind(n))):j&&M(j.bind(n))}if(A(lu,p),A(Jt,v),A(au,y),A(ru,P),A(su,C),A(ou,L),A(fu,B),A(du,oe),A(uu,re),A(ir,$),A(Bn,F),A(cu,N),ge(_))if(_.length){const M=e.exposed||(e.exposed={});_.forEach(j=>{Object.defineProperty(M,j,{get:()=>n[j],set:Z=>n[j]=Z})})}else e.exposed||(e.exposed={});O&&e.render===Dt&&(e.render=O),V!=null&&(e.inheritAttrs=V),k&&(e.components=k),ne&&(e.directives=ne),N&&sr(e)}function vu(e,t,n=Dt){ge(e)&&(e=ri(e));for(const s in e){const o=e[s];let i;qe(o)?"default"in o?i=Ps(o.from||s,o.default,!0):i=Ps(o.from||s):i=Ps(o),Ue(i)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:l=>i.value=l}):t[s]=i}}function ul(e,t,n){_t(ge(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function lr(e,t,n,s){let o=s.includes(".")?br(n,s):()=>n[s];if(We(e)){const i=t[e];Se(i)&&Xe(o,i)}else if(Se(e))Xe(o,e.bind(n));else if(qe(e))if(ge(e))e.forEach(i=>lr(i,t,n,s));else{const i=Se(e.handler)?e.handler.bind(n):t[e.handler];Se(i)&&Xe(o,i,e)}}function ar(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:o,optionsCache:i,config:{optionMergeStrategies:l}}=e.appContext,a=i.get(t);let r;return a?r=a:!o.length&&!n&&!s?r=t:(r={},o.length&&o.forEach(u=>ro(r,u,l,!0)),ro(r,t,l)),qe(t)&&i.set(t,r),r}function ro(e,t,n,s=!1){const{mixins:o,extends:i}=t;i&&ro(e,i,n,!0),o&&o.forEach(l=>ro(e,l,n,!0));for(const l in t)if(!(s&&l==="expose")){const a=mu[l]||n&&n[l];e[l]=a?a(e[l],t[l]):t[l]}return e}const mu={data:dl,props:fl,emits:fl,methods:hs,computed:hs,beforeCreate:lt,created:lt,beforeMount:lt,mounted:lt,beforeUpdate:lt,updated:lt,beforeDestroy:lt,beforeUnmount:lt,destroyed:lt,unmounted:lt,activated:lt,deactivated:lt,errorCaptured:lt,serverPrefetch:lt,components:hs,directives:hs,watch:bu,provide:dl,inject:yu};function dl(e,t){return t?e?function(){return Qe(Se(e)?e.call(this,this):e,Se(t)?t.call(this,this):t)}:t:e}function yu(e,t){return hs(ri(e),ri(t))}function ri(e){if(ge(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function lt(e,t){return e?[...new Set([].concat(e,t))]:t}function hs(e,t){return e?Qe(Object.create(null),e,t):t}function fl(e,t){return e?ge(e)&&ge(t)?[...new Set([...e,...t])]:Qe(Object.create(null),cl(e),cl(t??{})):t}function bu(e,t){if(!e)return t;if(!t)return e;const n=Qe(Object.create(null),e);for(const s in t)n[s]=lt(e[s],t[s]);return n}function rr(){return{app:null,config:{isNativeTag:lc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Pu=0;function Su(e,t){return function(s,o=null){Se(s)||(s=Qe({},s)),o!=null&&!qe(o)&&(o=null);const i=rr(),l=new WeakSet,a=[];let r=!1;const u=i.app={_uid:Pu++,_component:s,_props:o,_container:null,_context:i,_instance:null,version:id,get config(){return i.config},set config(c){},use(c,...p){return l.has(c)||(c&&Se(c.install)?(l.add(c),c.install(u,...p)):Se(c)&&(l.add(c),c(u,...p))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,p){return p?(i.components[c]=p,u):i.components[c]},directive(c,p){return p?(i.directives[c]=p,u):i.directives[c]},mount(c,p,v){if(!r){const y=u._ceVNode||_e(s,o);return y.appContext=i,v===!0?v="svg":v===!1&&(v=void 0),e(y,c,v),r=!0,u._container=c,c.__vue_app__=u,Ro(y.component)}},onUnmount(c){a.push(c)},unmount(){r&&(_t(a,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,p){return i.provides[c]=p,u},runWithContext(c){const p=Rn;Rn=u;try{return c()}finally{Rn=p}}};return u}}let Rn=null;function wu(e,t){if(nt){let n=nt.provides;const s=nt.parent&&nt.parent.provides;s===n&&(n=nt.provides=Object.create(s)),n[e]=t}}function Ps(e,t,n=!1){const s=nt||dt;if(s||Rn){let o=Rn?Rn._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return n&&Se(t)?t.call(s&&s.proxy):t}}function _u(){return!!(nt||dt||Rn)}const cr={},ur=()=>Object.create(cr),dr=e=>Object.getPrototypeOf(e)===cr;function Cu(e,t,n,s=!1){const o={},i=ur();e.propsDefaults=Object.create(null),fr(e,t,o,i);for(const l in e.propsOptions[0])l in o||(o[l]=void 0);n?e.props=s?o:Bc(o):e.type.props?e.props=o:e.props=i,e.attrs=i}function xu(e,t,n,s){const{props:o,attrs:i,vnode:{patchFlag:l}}=e,a=Ae(o),[r]=e.propsOptions;let u=!1;if((s||l>0)&&!(l&16)){if(l&8){const c=e.vnode.dynamicProps;for(let p=0;p<c.length;p++){let v=c[p];if(ko(e.emitsOptions,v))continue;const y=t[v];if(r)if(De(i,v))y!==i[v]&&(i[v]=y,u=!0);else{const P=un(v);o[P]=ci(r,a,P,y,e,!1)}else y!==i[v]&&(i[v]=y,u=!0)}}}else{fr(e,t,o,i)&&(u=!0);let c;for(const p in a)(!t||!De(t,p)&&((c=vn(p))===p||!De(t,c)))&&(r?n&&(n[p]!==void 0||n[c]!==void 0)&&(o[p]=ci(r,a,p,void 0,e,!0)):delete o[p]);if(i!==a)for(const p in i)(!t||!De(t,p))&&(delete i[p],u=!0)}u&&Wt(e.attrs,"set","")}function fr(e,t,n,s){const[o,i]=e.propsOptions;let l=!1,a;if(t)for(let r in t){if(ps(r))continue;const u=t[r];let c;o&&De(o,c=un(r))?!i||!i.includes(c)?n[c]=u:(a||(a={}))[c]=u:ko(e.emitsOptions,r)||(!(r in s)||u!==s[r])&&(s[r]=u,l=!0)}if(i){const r=Ae(n),u=a||$e;for(let c=0;c<i.length;c++){const p=i[c];n[p]=ci(o,r,p,u[p],e,!De(u,p))}}return l}function ci(e,t,n,s,o,i){const l=e[n];if(l!=null){const a=De(l,"default");if(a&&s===void 0){const r=l.default;if(l.type!==Function&&!l.skipFactory&&Se(r)){const{propsDefaults:u}=o;if(n in u)s=u[n];else{const c=qs(o);s=u[n]=r.call(null,t),c()}}else s=r;o.ce&&o.ce._setProp(n,s)}l[0]&&(i&&!a?s=!1:l[1]&&(s===""||s===vn(n))&&(s=!0))}return s}const Tu=new WeakMap;function hr(e,t,n=!1){const s=n?Tu:t.propsCache,o=s.get(e);if(o)return o;const i=e.props,l={},a=[];let r=!1;if(!Se(e)){const c=p=>{r=!0;const[v,y]=hr(p,t,!0);Qe(l,v),y&&a.push(...y)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!i&&!r)return qe(e)&&s.set(e,Kn),Kn;if(ge(i))for(let c=0;c<i.length;c++){const p=un(i[c]);hl(p)&&(l[p]=$e)}else if(i)for(const c in i){const p=un(c);if(hl(p)){const v=i[c],y=l[p]=ge(v)||Se(v)?{type:v}:Qe({},v),P=y.type;let C=!1,L=!0;if(ge(P))for(let R=0;R<P.length;++R){const $=P[R],J=Se($)&&$.name;if(J==="Boolean"){C=!0;break}else J==="String"&&(L=!1)}else C=Se(P)&&P.name==="Boolean";y[0]=C,y[1]=L,(C||De(y,"default"))&&a.push(p)}}const u=[l,a];return qe(e)&&s.set(e,u),u}function hl(e){return e[0]!=="$"&&!ps(e)}const Ii=e=>e[0]==="_"||e==="$stable",$i=e=>ge(e)?e.map(Rt):[Rt(e)],Eu=(e,t,n)=>{if(t._n)return t;const s=Yt((...o)=>$i(t(...o)),n);return s._c=!1,s},pr=(e,t,n)=>{const s=e._ctx;for(const o in e){if(Ii(o))continue;const i=e[o];if(Se(i))t[o]=Eu(o,i,s);else if(i!=null){const l=$i(i);t[o]=()=>l}}},gr=(e,t)=>{const n=$i(t);e.slots.default=()=>n},vr=(e,t,n)=>{for(const s in t)(n||!Ii(s))&&(e[s]=t[s])},ku=(e,t,n)=>{const s=e.slots=ur();if(e.vnode.shapeFlag&32){const o=t._;o?(vr(s,t,n),n&&ba(s,"_",o,!0)):pr(t,s)}else t&&gr(e,t)},Au=(e,t,n)=>{const{vnode:s,slots:o}=e;let i=!0,l=$e;if(s.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:vr(o,t,n):(i=!t.$stable,pr(t,o)),l=t}else t&&(gr(e,t),l={default:1});if(i)for(const a in o)!Ii(a)&&l[a]==null&&delete o[a]},at=Vu;function Mu(e){return Ru(e)}function Ru(e,t){const n=wo();n.__VUE__=!0;const{insert:s,remove:o,patchProp:i,createElement:l,createText:a,createComment:r,setText:u,setElementText:c,parentNode:p,nextSibling:v,setScopeId:y=Dt,insertStaticContent:P}=e,C=(d,f,b,w=null,E=null,q=null,U=void 0,Y=null,X=!!f.dynamicChildren)=>{if(d===f)return;d&&!Tn(d,f)&&(w=z(d),G(d,E,q,!0),d=null),f.patchFlag===-2&&(X=!1,f.dynamicChildren=null);const{type:K,ref:fe,shapeFlag:ie}=f;switch(K){case Ao:L(d,f,b,w);break;case ct:R(d,f,b,w);break;case Zs:d==null&&$(f,b,w,U);break;case Ke:k(d,f,b,w,E,q,U,Y,X);break;default:ie&1?O(d,f,b,w,E,q,U,Y,X):ie&6?ne(d,f,b,w,E,q,U,Y,X):(ie&64||ie&128)&&K.process(d,f,b,w,E,q,U,Y,X,T)}fe!=null&&E&&ao(fe,d&&d.ref,q,f||d,!f)},L=(d,f,b,w)=>{if(d==null)s(f.el=a(f.children),b,w);else{const E=f.el=d.el;f.children!==d.children&&u(E,f.children)}},R=(d,f,b,w)=>{d==null?s(f.el=r(f.children||""),b,w):f.el=d.el},$=(d,f,b,w)=>{[d.el,d.anchor]=P(d.children,f,b,w,d.el,d.anchor)},J=({el:d,anchor:f},b,w)=>{let E;for(;d&&d!==f;)E=v(d),s(d,b,w),d=E;s(f,b,w)},F=({el:d,anchor:f})=>{let b;for(;d&&d!==f;)b=v(d),o(d),d=b;o(f)},O=(d,f,b,w,E,q,U,Y,X)=>{f.type==="svg"?U="svg":f.type==="math"&&(U="mathml"),d==null?oe(f,b,w,E,q,U,Y,X):N(d,f,E,q,U,Y,X)},oe=(d,f,b,w,E,q,U,Y)=>{let X,K;const{props:fe,shapeFlag:ie,transition:he,dirs:ve}=d;if(X=d.el=l(d.type,q,fe&&fe.is,fe),ie&8?c(X,d.children):ie&16&&B(d.children,X,null,w,E,zo(d,q),U,Y),ve&&Sn(d,null,w,"created"),re(X,d,d.scopeId,U,w),fe){for(const ke in fe)ke!=="value"&&!ps(ke)&&i(X,ke,null,fe[ke],q,w);"value"in fe&&i(X,"value",null,fe.value,q),(K=fe.onVnodeBeforeMount)&&kt(K,w,d)}ve&&Sn(d,null,w,"beforeMount");const ye=Du(E,he);ye&&he.beforeEnter(X),s(X,f,b),((K=fe&&fe.onVnodeMounted)||ye||ve)&&at(()=>{K&&kt(K,w,d),ye&&he.enter(X),ve&&Sn(d,null,w,"mounted")},E)},re=(d,f,b,w,E)=>{if(b&&y(d,b),w)for(let q=0;q<w.length;q++)y(d,w[q]);if(E){let q=E.subTree;if(f===q||Sr(q.type)&&(q.ssContent===f||q.ssFallback===f)){const U=E.vnode;re(d,U,U.scopeId,U.slotScopeIds,E.parent)}}},B=(d,f,b,w,E,q,U,Y,X=0)=>{for(let K=X;K<d.length;K++){const fe=d[K]=Y?an(d[K]):Rt(d[K]);C(null,fe,f,b,w,E,q,U,Y)}},N=(d,f,b,w,E,q,U)=>{const Y=f.el=d.el;let{patchFlag:X,dynamicChildren:K,dirs:fe}=f;X|=d.patchFlag&16;const ie=d.props||$e,he=f.props||$e;let ve;if(b&&wn(b,!1),(ve=he.onVnodeBeforeUpdate)&&kt(ve,b,f,d),fe&&Sn(f,d,b,"beforeUpdate"),b&&wn(b,!0),(ie.innerHTML&&he.innerHTML==null||ie.textContent&&he.textContent==null)&&c(Y,""),K?_(d.dynamicChildren,K,Y,b,w,zo(f,E),q):U||j(d,f,Y,null,b,w,zo(f,E),q,!1),X>0){if(X&16)V(Y,ie,he,b,E);else if(X&2&&ie.class!==he.class&&i(Y,"class",null,he.class,E),X&4&&i(Y,"style",ie.style,he.style,E),X&8){const ye=f.dynamicProps;for(let ke=0;ke<ye.length;ke++){const we=ye[ke],He=ie[we],Ve=he[we];(Ve!==He||we==="value")&&i(Y,we,He,Ve,E,b)}}X&1&&d.children!==f.children&&c(Y,f.children)}else!U&&K==null&&V(Y,ie,he,b,E);((ve=he.onVnodeUpdated)||fe)&&at(()=>{ve&&kt(ve,b,f,d),fe&&Sn(f,d,b,"updated")},w)},_=(d,f,b,w,E,q,U)=>{for(let Y=0;Y<f.length;Y++){const X=d[Y],K=f[Y],fe=X.el&&(X.type===Ke||!Tn(X,K)||X.shapeFlag&198)?p(X.el):b;C(X,K,fe,null,w,E,q,U,!0)}},V=(d,f,b,w,E)=>{if(f!==b){if(f!==$e)for(const q in f)!ps(q)&&!(q in b)&&i(d,q,f[q],null,E,w);for(const q in b){if(ps(q))continue;const U=b[q],Y=f[q];U!==Y&&q!=="value"&&i(d,q,Y,U,E,w)}"value"in b&&i(d,"value",f.value,b.value,E)}},k=(d,f,b,w,E,q,U,Y,X)=>{const K=f.el=d?d.el:a(""),fe=f.anchor=d?d.anchor:a("");let{patchFlag:ie,dynamicChildren:he,slotScopeIds:ve}=f;ve&&(Y=Y?Y.concat(ve):ve),d==null?(s(K,b,w),s(fe,b,w),B(f.children||[],b,fe,E,q,U,Y,X)):ie>0&&ie&64&&he&&d.dynamicChildren?(_(d.dynamicChildren,he,b,E,q,U,Y),(f.key!=null||E&&f===E.subTree)&&Fi(d,f,!0)):j(d,f,b,fe,E,q,U,Y,X)},ne=(d,f,b,w,E,q,U,Y,X)=>{f.slotScopeIds=Y,d==null?f.shapeFlag&512?E.ctx.activate(f,b,w,U,X):se(f,b,w,E,q,U,X):g(d,f,X)},se=(d,f,b,w,E,q,U)=>{const Y=d.component=Gu(d,w,E);if(To(d)&&(Y.ctx.renderer=T),Qu(Y,!1,U),Y.asyncDep){if(E&&E.registerDep(Y,A,U),!d.el){const X=Y.subTree=_e(ct);R(null,X,f,b)}}else A(Y,d,f,b,E,q,U)},g=(d,f,b)=>{const w=f.component=d.component;if(Hu(d,f,b))if(w.asyncDep&&!w.asyncResolved){M(w,f,b);return}else w.next=f,w.update();else f.el=d.el,w.vnode=f},A=(d,f,b,w,E,q,U)=>{const Y=()=>{if(d.isMounted){let{next:ie,bu:he,u:ve,parent:ye,vnode:ke}=d;{const Ye=mr(d);if(Ye){ie&&(ie.el=ke.el,M(d,ie,U)),Ye.asyncDep.then(()=>{d.isUnmounted||Y()});return}}let we=ie,He;wn(d,!1),ie?(ie.el=ke.el,M(d,ie,U)):ie=ke,he&&Xs(he),(He=ie.props&&ie.props.onVnodeBeforeUpdate)&&kt(He,ye,ie,ke),wn(d,!0);const Ve=gl(d),Je=d.subTree;d.subTree=Ve,C(Je,Ve,p(Je.el),z(Je),d,E,q),ie.el=Ve.el,we===null&&Wu(d,Ve.el),ve&&at(ve,E),(He=ie.props&&ie.props.onVnodeUpdated)&&at(()=>kt(He,ye,ie,ke),E)}else{let ie;const{el:he,props:ve}=f,{bm:ye,m:ke,parent:we,root:He,type:Ve}=d,Je=ys(f);wn(d,!1),ye&&Xs(ye),!Je&&(ie=ve&&ve.onVnodeBeforeMount)&&kt(ie,we,f),wn(d,!0);{He.ce&&He.ce._injectChildStyle(Ve);const Ye=d.subTree=gl(d);C(null,Ye,b,w,d,E,q),f.el=Ye.el}if(ke&&at(ke,E),!Je&&(ie=ve&&ve.onVnodeMounted)){const Ye=f;at(()=>kt(ie,we,Ye),E)}(f.shapeFlag&256||we&&ys(we.vnode)&&we.vnode.shapeFlag&256)&&d.a&&at(d.a,E),d.isMounted=!0,f=b=w=null}};d.scope.on();const X=d.effect=new Ea(Y);d.scope.off();const K=d.update=X.run.bind(X),fe=d.job=X.runIfDirty.bind(X);fe.i=d,fe.id=d.uid,X.scheduler=()=>Di(fe),wn(d,!0),K()},M=(d,f,b)=>{f.component=d;const w=d.vnode.props;d.vnode=f,d.next=null,xu(d,f.props,w,b),Au(d,f.children,b),Ut(),ol(d),zt()},j=(d,f,b,w,E,q,U,Y,X=!1)=>{const K=d&&d.children,fe=d?d.shapeFlag:0,ie=f.children,{patchFlag:he,shapeFlag:ve}=f;if(he>0){if(he&128){m(K,ie,b,w,E,q,U,Y,X);return}else if(he&256){Z(K,ie,b,w,E,q,U,Y,X);return}}ve&8?(fe&16&&Pe(K,E,q),ie!==K&&c(b,ie)):fe&16?ve&16?m(K,ie,b,w,E,q,U,Y,X):Pe(K,E,q,!0):(fe&8&&c(b,""),ve&16&&B(ie,b,w,E,q,U,Y,X))},Z=(d,f,b,w,E,q,U,Y,X)=>{d=d||Kn,f=f||Kn;const K=d.length,fe=f.length,ie=Math.min(K,fe);let he;for(he=0;he<ie;he++){const ve=f[he]=X?an(f[he]):Rt(f[he]);C(d[he],ve,b,null,E,q,U,Y,X)}K>fe?Pe(d,E,q,!0,!1,ie):B(f,b,w,E,q,U,Y,X,ie)},m=(d,f,b,w,E,q,U,Y,X)=>{let K=0;const fe=f.length;let ie=d.length-1,he=fe-1;for(;K<=ie&&K<=he;){const ve=d[K],ye=f[K]=X?an(f[K]):Rt(f[K]);if(Tn(ve,ye))C(ve,ye,b,null,E,q,U,Y,X);else break;K++}for(;K<=ie&&K<=he;){const ve=d[ie],ye=f[he]=X?an(f[he]):Rt(f[he]);if(Tn(ve,ye))C(ve,ye,b,null,E,q,U,Y,X);else break;ie--,he--}if(K>ie){if(K<=he){const ve=he+1,ye=ve<fe?f[ve].el:w;for(;K<=he;)C(null,f[K]=X?an(f[K]):Rt(f[K]),b,ye,E,q,U,Y,X),K++}}else if(K>he)for(;K<=ie;)G(d[K],E,q,!0),K++;else{const ve=K,ye=K,ke=new Map;for(K=ye;K<=he;K++){const Ze=f[K]=X?an(f[K]):Rt(f[K]);Ze.key!=null&&ke.set(Ze.key,K)}let we,He=0;const Ve=he-ye+1;let Je=!1,Ye=0;const Ge=new Array(Ve);for(K=0;K<Ve;K++)Ge[K]=0;for(K=ve;K<=ie;K++){const Ze=d[K];if(He>=Ve){G(Ze,E,q,!0);continue}let et;if(Ze.key!=null)et=ke.get(Ze.key);else for(we=ye;we<=he;we++)if(Ge[we-ye]===0&&Tn(Ze,f[we])){et=we;break}et===void 0?G(Ze,E,q,!0):(Ge[et-ye]=K+1,et>=Ye?Ye=et:Je=!0,C(Ze,f[et],b,null,E,q,U,Y,X),He++)}const Pt=Je?Ou(Ge):Kn;for(we=Pt.length-1,K=Ve-1;K>=0;K--){const Ze=ye+K,et=f[Ze],Hn=Ze+1<fe?f[Ze+1].el:w;Ge[K]===0?C(null,et,b,Hn,E,q,U,Y,X):Je&&(we<0||K!==Pt[we]?D(et,b,Hn,2):we--)}}},D=(d,f,b,w,E=null)=>{const{el:q,type:U,transition:Y,children:X,shapeFlag:K}=d;if(K&6){D(d.component.subTree,f,b,w);return}if(K&128){d.suspense.move(f,b,w);return}if(K&64){U.move(d,f,b,T);return}if(U===Ke){s(q,f,b);for(let ie=0;ie<X.length;ie++)D(X[ie],f,b,w);s(d.anchor,f,b);return}if(U===Zs){J(d,f,b);return}if(w!==2&&K&1&&Y)if(w===0)Y.beforeEnter(q),s(q,f,b),at(()=>Y.enter(q),E);else{const{leave:ie,delayLeave:he,afterLeave:ve}=Y,ye=()=>{d.ctx.isUnmounted?o(q):s(q,f,b)},ke=()=>{ie(q,()=>{ye(),ve&&ve()})};he?he(q,ye,ke):ke()}else s(q,f,b)},G=(d,f,b,w=!1,E=!1)=>{const{type:q,props:U,ref:Y,children:X,dynamicChildren:K,shapeFlag:fe,patchFlag:ie,dirs:he,cacheIndex:ve}=d;if(ie===-2&&(E=!1),Y!=null&&(Ut(),ao(Y,null,b,d,!0),zt()),ve!=null&&(f.renderCache[ve]=void 0),fe&256){f.ctx.deactivate(d);return}const ye=fe&1&&he,ke=!ys(d);let we;if(ke&&(we=U&&U.onVnodeBeforeUnmount)&&kt(we,f,d),fe&6)de(d.component,b,w);else{if(fe&128){d.suspense.unmount(b,w);return}ye&&Sn(d,null,f,"beforeUnmount"),fe&64?d.type.remove(d,f,b,T,w):K&&!K.hasOnce&&(q!==Ke||ie>0&&ie&64)?Pe(K,f,b,!1,!0):(q===Ke&&ie&384||!E&&fe&16)&&Pe(X,f,b),w&&ee(d)}(ke&&(we=U&&U.onVnodeUnmounted)||ye)&&at(()=>{we&&kt(we,f,d),ye&&Sn(d,null,f,"unmounted")},b)},ee=d=>{const{type:f,el:b,anchor:w,transition:E}=d;if(f===Ke){W(b,w);return}if(f===Zs){F(d);return}const q=()=>{o(b),E&&!E.persisted&&E.afterLeave&&E.afterLeave()};if(d.shapeFlag&1&&E&&!E.persisted){const{leave:U,delayLeave:Y}=E,X=()=>U(b,q);Y?Y(d.el,q,X):X()}else q()},W=(d,f)=>{let b;for(;d!==f;)b=v(d),o(d),d=b;o(f)},de=(d,f,b)=>{const{bum:w,scope:E,job:q,subTree:U,um:Y,m:X,a:K,parent:fe,slots:{__:ie}}=d;pl(X),pl(K),w&&Xs(w),fe&&ge(ie)&&ie.forEach(he=>{fe.renderCache[he]=void 0}),E.stop(),q&&(q.flags|=8,G(U,d,f,b)),Y&&at(Y,f),at(()=>{d.isUnmounted=!0},f),f&&f.pendingBranch&&!f.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===f.pendingId&&(f.deps--,f.deps===0&&f.resolve())},Pe=(d,f,b,w=!1,E=!1,q=0)=>{for(let U=q;U<d.length;U++)G(d[U],f,b,w,E)},z=d=>{if(d.shapeFlag&6)return z(d.component.subTree);if(d.shapeFlag&128)return d.suspense.next();const f=v(d.anchor||d.el),b=f&&f[Ka];return b?v(b):f};let x=!1;const pe=(d,f,b)=>{d==null?f._vnode&&G(f._vnode,null,null,!0):C(f._vnode||null,d,f,null,null,null,b),f._vnode=d,x||(x=!0,ol(),Ua(),x=!1)},T={p:C,um:G,m:D,r:ee,mt:se,mc:B,pc:j,pbc:_,n:z,o:e};return{render:pe,hydrate:void 0,createApp:Su(pe)}}function zo({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function wn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Du(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Fi(e,t,n=!1){const s=e.children,o=t.children;if(ge(s)&&ge(o))for(let i=0;i<s.length;i++){const l=s[i];let a=o[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=o[i]=an(o[i]),a.el=l.el),!n&&a.patchFlag!==-2&&Fi(l,a)),a.type===Ao&&(a.el=l.el),a.type===ct&&!a.el&&(a.el=l.el)}}function Ou(e){const t=e.slice(),n=[0];let s,o,i,l,a;const r=e.length;for(s=0;s<r;s++){const u=e[s];if(u!==0){if(o=n[n.length-1],e[o]<u){t[s]=o,n.push(s);continue}for(i=0,l=n.length-1;i<l;)a=i+l>>1,e[n[a]]<u?i=a+1:l=a;u<e[n[i]]&&(i>0&&(t[s]=n[i-1]),n[i]=s)}}for(i=n.length,l=n[i-1];i-- >0;)n[i]=l,l=t[l];return n}function mr(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:mr(t)}function pl(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Iu=Symbol.for("v-scx"),$u=()=>Ps(Iu);function Xe(e,t,n){return yr(e,t,n)}function yr(e,t,n=$e){const{immediate:s,deep:o,flush:i,once:l}=n,a=Qe({},n),r=t&&s||!t&&i!=="post";let u;if(As){if(i==="sync"){const y=$u();u=y.__watcherHandles||(y.__watcherHandles=[])}else if(!r){const y=()=>{};return y.stop=Dt,y.resume=Dt,y.pause=Dt,y}}const c=nt;a.call=(y,P,C)=>_t(y,c,P,C);let p=!1;i==="post"?a.scheduler=y=>{at(y,c&&c.suspense)}:i!=="sync"&&(p=!0,a.scheduler=(y,P)=>{P?y():Di(y)}),a.augmentJob=y=>{t&&(y.flags|=4),p&&(y.flags|=2,c&&(y.id=c.uid,y.i=c))};const v=Xc(e,t,a);return As&&(u?u.push(v):r&&v()),v}function Fu(e,t,n){const s=this.proxy,o=We(e)?e.includes(".")?br(s,e):()=>s[e]:e.bind(s,s);let i;Se(t)?i=t:(i=t.handler,n=t);const l=qs(this),a=yr(o,i.bind(s),n);return l(),a}function br(e,t){const n=t.split(".");return()=>{let s=e;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}const qu=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${un(t)}Modifiers`]||e[`${vn(t)}Modifiers`];function Lu(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||$e;let o=n;const i=t.startsWith("update:"),l=i&&qu(s,t.slice(7));l&&(l.trim&&(o=n.map(c=>We(c)?c.trim():c)),l.number&&(o=n.map(ei)));let a,r=s[a=Bo(t)]||s[a=Bo(un(t))];!r&&i&&(r=s[a=Bo(vn(t))]),r&&_t(r,e,6,o);const u=s[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,_t(u,e,6,o)}}function Pr(e,t,n=!1){const s=t.emitsCache,o=s.get(e);if(o!==void 0)return o;const i=e.emits;let l={},a=!1;if(!Se(e)){const r=u=>{const c=Pr(u,t,!0);c&&(a=!0,Qe(l,c))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return!i&&!a?(qe(e)&&s.set(e,null),null):(ge(i)?i.forEach(r=>l[r]=null):Qe(l,i),qe(e)&&s.set(e,l),l)}function ko(e,t){return!e||!bo(t)?!1:(t=t.slice(2).replace(/Once$/,""),De(e,t[0].toLowerCase()+t.slice(1))||De(e,vn(t))||De(e,t))}function gl(e){const{type:t,vnode:n,proxy:s,withProxy:o,propsOptions:[i],slots:l,attrs:a,emit:r,render:u,renderCache:c,props:p,data:v,setupState:y,ctx:P,inheritAttrs:C}=e,L=lo(e);let R,$;try{if(n.shapeFlag&4){const F=o||s,O=F;R=Rt(u.call(O,F,c,p,y,v,P)),$=a}else{const F=t;R=Rt(F.length>1?F(p,{attrs:a,slots:l,emit:r}):F(p,null)),$=t.props?a:Bu(a)}}catch(F){Ss.length=0,xo(F,e,1),R=_e(ct)}let J=R;if($&&C!==!1){const F=Object.keys($),{shapeFlag:O}=J;F.length&&O&7&&(i&&F.some(Si)&&($=Nu($,i)),J=fn(J,$,!1,!0))}return n.dirs&&(J=fn(J,null,!1,!0),J.dirs=J.dirs?J.dirs.concat(n.dirs):n.dirs),n.transition&&Es(J,n.transition),R=J,lo(L),R}const Bu=e=>{let t;for(const n in e)(n==="class"||n==="style"||bo(n))&&((t||(t={}))[n]=e[n]);return t},Nu=(e,t)=>{const n={};for(const s in e)(!Si(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function Hu(e,t,n){const{props:s,children:o,component:i}=e,{props:l,children:a,patchFlag:r}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&r>=0){if(r&1024)return!0;if(r&16)return s?vl(s,l,u):!!l;if(r&8){const c=t.dynamicProps;for(let p=0;p<c.length;p++){const v=c[p];if(l[v]!==s[v]&&!ko(u,v))return!0}}}else return(o||a)&&(!a||!a.$stable)?!0:s===l?!1:s?l?vl(s,l,u):!0:!!l;return!1}function vl(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const i=s[o];if(t[i]!==e[i]&&!ko(n,i))return!0}return!1}function Wu({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const Sr=e=>e.__isSuspense;function Vu(e,t){t&&t.pendingBranch?ge(e)?t.effects.push(...e):t.effects.push(e):Zc(e)}const Ke=Symbol.for("v-fgt"),Ao=Symbol.for("v-txt"),ct=Symbol.for("v-cmt"),Zs=Symbol.for("v-stc"),Ss=[];let ht=null;function le(e=!1){Ss.push(ht=e?null:[])}function ju(){Ss.pop(),ht=Ss[Ss.length-1]||null}let ks=1;function ml(e,t=!1){ks+=e,e<0&&ht&&t&&(ht.hasOnce=!0)}function wr(e){return e.dynamicChildren=ks>0?ht||Kn:null,ju(),ks>0&&ht&&ht.push(e),e}function ae(e,t,n,s,o,i){return wr(h(e,t,n,s,o,i,!0))}function Mo(e,t,n,s,o){return wr(_e(e,t,n,s,o,!0))}function co(e){return e?e.__v_isVNode===!0:!1}function Tn(e,t){return e.type===t.type&&e.key===t.key}const _r=({key:e})=>e??null,Qs=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?We(e)||Ue(e)||Se(e)?{i:dt,r:e,k:t,f:!!n}:e:null);function h(e,t=null,n=null,s=0,o=null,i=e===Ke?0:1,l=!1,a=!1){const r={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&_r(t),ref:t&&Qs(t),scopeId:Ya,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:dt};return a?(qi(r,n),i&128&&e.normalize(r)):n&&(r.shapeFlag|=We(n)?8:16),ks>0&&!l&&ht&&(r.patchFlag>0||i&6)&&r.patchFlag!==32&&ht.push(r),r}const _e=Uu;function Uu(e,t=null,n=null,s=0,o=null,i=!1){if((!e||e===hu)&&(e=ct),co(e)){const a=fn(e,t,!0);return n&&qi(a,n),ks>0&&!i&&ht&&(a.shapeFlag&6?ht[ht.indexOf(e)]=a:ht.push(a)),a.patchFlag=-2,a}if(sd(e)&&(e=e.__vccOpts),t){t=zu(t);let{class:a,style:r}=t;a&&!We(a)&&(t.class=Me(a)),qe(r)&&(Mi(r)&&!ge(r)&&(r=Qe({},r)),t.style=ls(r))}const l=We(e)?1:Sr(e)?128:Xa(e)?64:qe(e)?4:Se(e)?2:0;return h(e,t,n,s,o,l,i,!0)}function zu(e){return e?Mi(e)||dr(e)?Qe({},e):e:null}function fn(e,t,n=!1,s=!1){const{props:o,ref:i,patchFlag:l,children:a,transition:r}=e,u=t?Ku(o||{},t):o,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&_r(u),ref:t&&t.ref?n&&i?ge(i)?i.concat(Qs(t)):[i,Qs(t)]:Qs(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ke?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:r,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&fn(e.ssContent),ssFallback:e.ssFallback&&fn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return r&&s&&Es(c,r.clone(c)),c}function ze(e=" ",t=0){return _e(Ao,null,e,t)}function Yu(e,t){const n=_e(Zs,null,e);return n.staticCount=t,n}function Ce(e="",t=!1){return t?(le(),Mo(ct,null,e)):_e(ct,null,e)}function Rt(e){return e==null||typeof e=="boolean"?_e(ct):ge(e)?_e(Ke,null,e.slice()):co(e)?an(e):_e(Ao,null,String(e))}function an(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:fn(e)}function qi(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(ge(t))n=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),qi(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!dr(t)?t._ctx=dt:o===3&&dt&&(dt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Se(t)?(t={default:t,_ctx:dt},n=32):(t=String(t),s&64?(n=16,t=[ze(t)]):n=8);e.children=t,e.shapeFlag|=n}function Ku(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=Me([t.class,s.class]));else if(o==="style")t.style=ls([t.style,s.style]);else if(bo(o)){const i=t[o],l=s[o];l&&i!==l&&!(ge(i)&&i.includes(l))&&(t[o]=i?[].concat(i,l):l)}else o!==""&&(t[o]=s[o])}return t}function kt(e,t,n,s=null){_t(e,t,7,[n,s])}const Xu=rr();let Ju=0;function Gu(e,t,n){const s=e.type,o=(t?t.appContext:e.appContext)||Xu,i={uid:Ju++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ca(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:hr(s,o),emitsOptions:Pr(s,o),emit:null,emitted:null,propsDefaults:$e,inheritAttrs:s.inheritAttrs,ctx:$e,data:$e,props:$e,attrs:$e,slots:$e,refs:$e,setupState:$e,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Lu.bind(null,i),e.ce&&e.ce(i),i}let nt=null;const Zu=()=>nt||dt;let uo,ui;{const e=wo(),t=(n,s)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(s),i=>{o.length>1?o.forEach(l=>l(i)):o[0](i)}};uo=t("__VUE_INSTANCE_SETTERS__",n=>nt=n),ui=t("__VUE_SSR_SETTERS__",n=>As=n)}const qs=e=>{const t=nt;return uo(e),e.scope.on(),()=>{e.scope.off(),uo(t)}},yl=()=>{nt&&nt.scope.off(),uo(null)};function Cr(e){return e.vnode.shapeFlag&4}let As=!1;function Qu(e,t=!1,n=!1){t&&ui(t);const{props:s,children:o}=e.vnode,i=Cr(e);Cu(e,s,i,t),ku(e,o,n||t);const l=i?ed(e,t):void 0;return t&&ui(!1),l}function ed(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,pu);const{setup:s}=n;if(s){Ut();const o=e.setupContext=s.length>1?nd(e):null,i=qs(e),l=$s(s,e,0,[e.props,o]),a=ga(l);if(zt(),i(),(a||e.sp)&&!ys(e)&&sr(e),a){if(l.then(yl,yl),t)return l.then(r=>{bl(e,r)}).catch(r=>{xo(r,e,0)});e.asyncDep=l}else bl(e,l)}else xr(e)}function bl(e,t,n){Se(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:qe(t)&&(e.setupState=Wa(t)),xr(e)}function xr(e,t,n){const s=e.type;e.render||(e.render=s.render||Dt);{const o=qs(e);Ut();try{gu(e)}finally{zt(),o()}}}const td={get(e,t){return ot(e,"get",""),e[t]}};function nd(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,td),slots:e.slots,emit:e.emit,expose:t}}function Ro(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Wa(Ri(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in bs)return bs[n](e)},has(t,n){return n in t||n in bs}})):e.proxy}function sd(e){return Se(e)&&"__vccOpts"in e}const Te=(e,t)=>Yc(e,t,As);function od(e,t,n){const s=arguments.length;return s===2?qe(t)&&!ge(t)?co(t)?_e(e,null,[t]):_e(e,t):_e(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&co(n)&&(n=[n]),_e(e,t,n))}const id="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let di;const Pl=typeof window<"u"&&window.trustedTypes;if(Pl)try{di=Pl.createPolicy("vue",{createHTML:e=>e})}catch{}const Tr=di?e=>di.createHTML(e):e=>e,ld="http://www.w3.org/2000/svg",ad="http://www.w3.org/1998/Math/MathML",Ht=typeof document<"u"?document:null,Sl=Ht&&Ht.createElement("template"),rd={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const o=t==="svg"?Ht.createElementNS(ld,e):t==="mathml"?Ht.createElementNS(ad,e):n?Ht.createElement(e,{is:n}):Ht.createElement(e);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>Ht.createTextNode(e),createComment:e=>Ht.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ht.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,o,i){const l=n?n.previousSibling:t.lastChild;if(o&&(o===i||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===i||!(o=o.nextSibling)););else{Sl.innerHTML=Tr(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=Sl.content;if(s==="svg"||s==="mathml"){const r=a.firstChild;for(;r.firstChild;)a.appendChild(r.firstChild);a.removeChild(r)}t.insertBefore(a,n)}return[l?l.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},en="transition",cs="animation",Ms=Symbol("_vtc"),Er={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},cd=Qe({},Za,Er),ud=e=>(e.displayName="Transition",e.props=cd,e),hn=ud((e,{slots:t})=>od(nu,dd(e),t)),_n=(e,t=[])=>{ge(e)?e.forEach(n=>n(...t)):e&&e(...t)},wl=e=>e?ge(e)?e.some(t=>t.length>1):e.length>1:!1;function dd(e){const t={};for(const k in e)k in Er||(t[k]=e[k]);if(e.css===!1)return t;const{name:n="v",type:s,duration:o,enterFromClass:i=`${n}-enter-from`,enterActiveClass:l=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:r=i,appearActiveClass:u=l,appearToClass:c=a,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:v=`${n}-leave-active`,leaveToClass:y=`${n}-leave-to`}=e,P=fd(o),C=P&&P[0],L=P&&P[1],{onBeforeEnter:R,onEnter:$,onEnterCancelled:J,onLeave:F,onLeaveCancelled:O,onBeforeAppear:oe=R,onAppear:re=$,onAppearCancelled:B=J}=t,N=(k,ne,se,g)=>{k._enterCancelled=g,Cn(k,ne?c:a),Cn(k,ne?u:l),se&&se()},_=(k,ne)=>{k._isLeaving=!1,Cn(k,p),Cn(k,y),Cn(k,v),ne&&ne()},V=k=>(ne,se)=>{const g=k?re:$,A=()=>N(ne,k,se);_n(g,[ne,A]),_l(()=>{Cn(ne,k?r:i),Nt(ne,k?c:a),wl(g)||Cl(ne,s,C,A)})};return Qe(t,{onBeforeEnter(k){_n(R,[k]),Nt(k,i),Nt(k,l)},onBeforeAppear(k){_n(oe,[k]),Nt(k,r),Nt(k,u)},onEnter:V(!1),onAppear:V(!0),onLeave(k,ne){k._isLeaving=!0;const se=()=>_(k,ne);Nt(k,p),k._enterCancelled?(Nt(k,v),El()):(El(),Nt(k,v)),_l(()=>{k._isLeaving&&(Cn(k,p),Nt(k,y),wl(F)||Cl(k,s,L,se))}),_n(F,[k,se])},onEnterCancelled(k){N(k,!1,void 0,!0),_n(J,[k])},onAppearCancelled(k){N(k,!0,void 0,!0),_n(B,[k])},onLeaveCancelled(k){_(k),_n(O,[k])}})}function fd(e){if(e==null)return null;if(qe(e))return[Yo(e.enter),Yo(e.leave)];{const t=Yo(e);return[t,t]}}function Yo(e){return dc(e)}function Nt(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Ms]||(e[Ms]=new Set)).add(t)}function Cn(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[Ms];n&&(n.delete(t),n.size||(e[Ms]=void 0))}function _l(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let hd=0;function Cl(e,t,n,s){const o=e._endId=++hd,i=()=>{o===e._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:l,timeout:a,propCount:r}=pd(e,t);if(!l)return s();const u=l+"end";let c=0;const p=()=>{e.removeEventListener(u,v),i()},v=y=>{y.target===e&&++c>=r&&p()};setTimeout(()=>{c<r&&p()},a+1),e.addEventListener(u,v)}function pd(e,t){const n=window.getComputedStyle(e),s=P=>(n[P]||"").split(", "),o=s(`${en}Delay`),i=s(`${en}Duration`),l=xl(o,i),a=s(`${cs}Delay`),r=s(`${cs}Duration`),u=xl(a,r);let c=null,p=0,v=0;t===en?l>0&&(c=en,p=l,v=i.length):t===cs?u>0&&(c=cs,p=u,v=r.length):(p=Math.max(l,u),c=p>0?l>u?en:cs:null,v=c?c===en?i.length:r.length:0);const y=c===en&&/\b(transform|all)(,|$)/.test(s(`${en}Property`).toString());return{type:c,timeout:p,propCount:v,hasTransform:y}}function xl(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>Tl(n)+Tl(e[s])))}function Tl(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function El(){return document.body.offsetHeight}function gd(e,t,n){const s=e[Ms];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const fo=Symbol("_vod"),kr=Symbol("_vsh"),vd={beforeMount(e,{value:t},{transition:n}){e[fo]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):us(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),us(e,!0),s.enter(e)):s.leave(e,()=>{us(e,!1)}):us(e,t))},beforeUnmount(e,{value:t}){us(e,t)}};function us(e,t){e.style.display=t?e[fo]:"none",e[kr]=!t}const md=Symbol(""),yd=/(^|;)\s*display\s*:/;function bd(e,t,n){const s=e.style,o=We(n);let i=!1;if(n&&!o){if(t)if(We(t))for(const l of t.split(";")){const a=l.slice(0,l.indexOf(":")).trim();n[a]==null&&eo(s,a,"")}else for(const l in t)n[l]==null&&eo(s,l,"");for(const l in n)l==="display"&&(i=!0),eo(s,l,n[l])}else if(o){if(t!==n){const l=s[md];l&&(n+=";"+l),s.cssText=n,i=yd.test(n)}}else t&&e.removeAttribute("style");fo in e&&(e[fo]=i?s.display:"",e[kr]&&(s.display="none"))}const kl=/\s*!important$/;function eo(e,t,n){if(ge(n))n.forEach(s=>eo(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=Pd(e,t);kl.test(n)?e.setProperty(vn(s),n.replace(kl,""),"important"):e[s]=n}}const Al=["Webkit","Moz","ms"],Ko={};function Pd(e,t){const n=Ko[t];if(n)return n;let s=un(t);if(s!=="filter"&&s in e)return Ko[t]=s;s=ya(s);for(let o=0;o<Al.length;o++){const i=Al[o]+s;if(i in e)return Ko[t]=i}return t}const Ml="http://www.w3.org/1999/xlink";function Rl(e,t,n,s,o,i=mc(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Ml,t.slice(6,t.length)):e.setAttributeNS(Ml,t,n):n==null||i&&!Pa(n)?e.removeAttribute(t):e.setAttribute(t,i?"":$t(n)?String(n):n)}function Dl(e,t,n,s,o){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Tr(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?e.getAttribute("value")||"":e.value,r=n==null?e.type==="checkbox"?"on":"":String(n);(a!==r||!("_value"in e))&&(e.value=r),n==null&&e.removeAttribute(t),e._value=n;return}let l=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=Pa(n):n==null&&a==="string"?(n="",l=!0):a==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(o||t)}function En(e,t,n,s){e.addEventListener(t,n,s)}function Sd(e,t,n,s){e.removeEventListener(t,n,s)}const Ol=Symbol("_vei");function wd(e,t,n,s,o=null){const i=e[Ol]||(e[Ol]={}),l=i[t];if(s&&l)l.value=s;else{const[a,r]=_d(t);if(s){const u=i[t]=Td(s,o);En(e,a,u,r)}else l&&(Sd(e,a,l,r),i[t]=void 0)}}const Il=/(?:Once|Passive|Capture)$/;function _d(e){let t;if(Il.test(e)){t={};let s;for(;s=e.match(Il);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):vn(e.slice(2)),t]}let Xo=0;const Cd=Promise.resolve(),xd=()=>Xo||(Cd.then(()=>Xo=0),Xo=Date.now());function Td(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;_t(Ed(s,n.value),t,5,[s])};return n.value=e,n.attached=xd(),n}function Ed(e,t){if(ge(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const $l=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,kd=(e,t,n,s,o,i)=>{const l=o==="svg";t==="class"?gd(e,s,l):t==="style"?bd(e,n,s):bo(t)?Si(t)||wd(e,t,n,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Ad(e,t,s,l))?(Dl(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Rl(e,t,s,l,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!We(s))?Dl(e,un(t),s,i,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Rl(e,t,s,l))};function Ad(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&$l(t)&&Se(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return $l(t)&&We(n)?!1:t in e}const ho=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ge(t)?n=>Xs(t,n):t};function Md(e){e.target.composing=!0}function Fl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Gn=Symbol("_assign"),Ar={created(e,{modifiers:{lazy:t,trim:n,number:s}},o){e[Gn]=ho(o);const i=s||o.props&&o.props.type==="number";En(e,t?"change":"input",l=>{if(l.target.composing)return;let a=e.value;n&&(a=a.trim()),i&&(a=ei(a)),e[Gn](a)}),n&&En(e,"change",()=>{e.value=e.value.trim()}),t||(En(e,"compositionstart",Md),En(e,"compositionend",Fl),En(e,"change",Fl))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:o,number:i}},l){if(e[Gn]=ho(l),e.composing)return;const a=(i||e.type==="number")&&!/^0\d/.test(e.value)?ei(e.value):e.value,r=t??"";a!==r&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||o&&e.value.trim()===r)||(e.value=r))}},Rd={deep:!0,created(e,t,n){e[Gn]=ho(n),En(e,"change",()=>{const s=e._modelValue,o=Dd(e),i=e.checked,l=e[Gn];if(ge(s)){const a=Sa(s,o),r=a!==-1;if(i&&!r)l(s.concat(o));else if(!i&&r){const u=[...s];u.splice(a,1),l(u)}}else if(Po(s)){const a=new Set(s);i?a.add(o):a.delete(o),l(a)}else l(Mr(e,i))})},mounted:ql,beforeUpdate(e,t,n){e[Gn]=ho(n),ql(e,t,n)}};function ql(e,{value:t,oldValue:n},s){e._modelValue=t;let o;if(ge(t))o=Sa(t,s.props.value)>-1;else if(Po(t))o=t.has(s.props.value);else{if(t===n)return;o=_o(t,Mr(e,!0))}e.checked!==o&&(e.checked=o)}function Dd(e){return"_value"in e?e._value:e.value}function Mr(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Od=["ctrl","shift","alt","meta"],Id={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Od.some(n=>e[`${n}Key`]&&!t.includes(n))},Rr=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(o,...i)=>{for(let l=0;l<t.length;l++){const a=Id[t[l]];if(a&&a(o,t))return}return e(o,...i)})},$d={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},fi=(e,t)=>{const n=e._withKeys||(e._withKeys={}),s=t.join(".");return n[s]||(n[s]=o=>{if(!("key"in o))return;const i=vn(o.key);if(t.some(l=>l===i||$d[l]===i))return e(o)})},Fd=Qe({patchProp:kd},rd);let Ll;function qd(){return Ll||(Ll=Mu(Fd))}const Ld=(...e)=>{const t=qd().createApp(...e),{mount:n}=t;return t.mount=s=>{const o=Nd(s);if(!o)return;const i=t._component;!Se(i)&&!i.render&&!i.template&&(i.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const l=n(o,!1,Bd(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),l},t};function Bd(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Nd(e){return We(e)?document.querySelector(e):e}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Dr;const Do=e=>Dr=e,Or=Symbol();function hi(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var ws;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(ws||(ws={}));function Hd(){const e=xa(!0),t=e.run(()=>te({}));let n=[],s=[];const o=Ri({install(i){Do(o),o._a=i,i.provide(Or,o),i.config.globalProperties.$pinia=o,s.forEach(l=>n.push(l)),s=[]},use(i){return this._a?n.push(i):s.push(i),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return o}const Ir=()=>{};function Bl(e,t,n,s=Ir){e.push(t);const o=()=>{const i=e.indexOf(t);i>-1&&(e.splice(i,1),s())};return!n&&Ta()&&bc(o),o}function Vn(e,...t){e.slice().forEach(n=>{n(...t)})}const Wd=e=>e(),Nl=Symbol(),Jo=Symbol();function pi(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,s)=>e.set(s,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const s=t[n],o=e[n];hi(o)&&hi(s)&&e.hasOwnProperty(n)&&!Ue(s)&&!cn(s)?e[n]=pi(o,s):e[n]=s}return e}const Vd=Symbol();function jd(e){return!hi(e)||!Object.prototype.hasOwnProperty.call(e,Vd)}const{assign:nn}=Object;function Ud(e){return!!(Ue(e)&&e.effect)}function zd(e,t,n,s){const{state:o,actions:i,getters:l}=t,a=n.state.value[e];let r;function u(){a||(n.state.value[e]=o?o():{});const c=Vc(n.state.value[e]);return nn(c,i,Object.keys(l||{}).reduce((p,v)=>(p[v]=Ri(Te(()=>{Do(n);const y=n._s.get(e);return l[v].call(y,y)})),p),{}))}return r=$r(e,u,t,n,s,!0),r}function $r(e,t,n={},s,o,i){let l;const a=nn({actions:{}},n),r={deep:!0};let u,c,p=[],v=[],y;const P=s.state.value[e];!i&&!P&&(s.state.value[e]={}),te({});let C;function L(B){let N;u=c=!1,typeof B=="function"?(B(s.state.value[e]),N={type:ws.patchFunction,storeId:e,events:y}):(pi(s.state.value[e],B),N={type:ws.patchObject,payload:B,storeId:e,events:y});const _=C=Symbol();Ot().then(()=>{C===_&&(u=!0)}),c=!0,Vn(p,N,s.state.value[e])}const R=i?function(){const{state:N}=n,_=N?N():{};this.$patch(V=>{nn(V,_)})}:Ir;function $(){l.stop(),p=[],v=[],s._s.delete(e)}const J=(B,N="")=>{if(Nl in B)return B[Jo]=N,B;const _=function(){Do(s);const V=Array.from(arguments),k=[],ne=[];function se(M){k.push(M)}function g(M){ne.push(M)}Vn(v,{args:V,name:_[Jo],store:O,after:se,onError:g});let A;try{A=B.apply(this&&this.$id===e?this:O,V)}catch(M){throw Vn(ne,M),M}return A instanceof Promise?A.then(M=>(Vn(k,M),M)).catch(M=>(Vn(ne,M),Promise.reject(M))):(Vn(k,A),A)};return _[Nl]=!0,_[Jo]=N,_},F={_p:s,$id:e,$onAction:Bl.bind(null,v),$patch:L,$reset:R,$subscribe(B,N={}){const _=Bl(p,B,N.detached,()=>V()),V=l.run(()=>Xe(()=>s.state.value[e],k=>{(N.flush==="sync"?c:u)&&B({storeId:e,type:ws.direct,events:y},k)},nn({},r,N)));return _},$dispose:$},O=Fn(F);s._s.set(e,O);const re=(s._a&&s._a.runWithContext||Wd)(()=>s._e.run(()=>(l=xa()).run(()=>t({action:J}))));for(const B in re){const N=re[B];if(Ue(N)&&!Ud(N)||cn(N))i||(P&&jd(N)&&(Ue(N)?N.value=P[B]:pi(N,P[B])),s.state.value[e][B]=N);else if(typeof N=="function"){const _=J(N,B);re[B]=_,a.actions[B]=N}}return nn(O,re),nn(Ae(O),re),Object.defineProperty(O,"$state",{get:()=>s.state.value[e],set:B=>{L(N=>{nn(N,B)})}}),s._p.forEach(B=>{nn(O,l.run(()=>B({store:O,app:s._a,pinia:s,options:a})))}),P&&i&&n.hydrate&&n.hydrate(O.$state,P),u=!0,c=!0,O}/*! #__NO_SIDE_EFFECTS__ */function Fr(e,t,n){let s;const o=typeof t=="function";s=o?n:t;function i(l,a){const r=_u();return l=l||(r?Ps(Or,null):null),l&&Do(l),l=Dr,l._s.has(e)||(o?$r(e,t,s,l):zd(e,s,l)),l._s.get(e)}return i.$id=e,i}const St={BASE_WIDTH:1e3,FIELD_RATIO:70/100,PLAYER_RADIUS_RATIO:.02,BALL_RADIUS_RATIO:.015},Dn=(e,t)=>{const n=e/1.4,s=t,o=Math.min(n/70,s/100),i=o*70,l=o*100,a=(e-i)/2,r=(t-l)/2;return{fieldWidth:n,fieldHeight:s,actualFieldWidth:i,actualFieldHeight:l,fieldX:a,fieldY:r,squareSize:o,toRelativeX:u=>(u-a)/i,toRelativeY:u=>(u-r)/l,toAbsoluteX:u=>a+u*i,toAbsoluteY:u=>r+u*l}},Yd=(e,t,n=20)=>{const s=e-n*2,o=t-n*2,i=St.FIELD_RATIO;let l,a;s/o>i?(a=o,l=a*i):(l=s,a=l/i);const r=n+(s-l)/2,u=n+(o-a)/2;return{fieldWidth:l,fieldHeight:a,fieldX:r,fieldY:u,toRelativeX:c=>(c-r)/l,toRelativeY:c=>(c-u)/a,toAbsoluteX:c=>r+c*l,toAbsoluteY:c=>u+c*a}},Hl={BASE_SPEED:100},At={ATTACKING:{PRIMARY:"#D84B4B",SECONDARY:"#E46363",LIGHT:"#F28C8C"},DEFENSIVE:{PRIMARY:"#3A57A5",SECONDARY:"#4867B5",LIGHT:"#6E86C9"},BALL:{PRIMARY:"#FFB300"},UI:{SELECTED:"#0D3B66"}},Kd=["width","height"],Xd=300,Jd=5,Gd=500,Zd=ut({__name:"RugbyCanvas",props:{players:{},ball:{},canvasConfig:{},uiState:{},isSequenceMode:{type:Boolean},isPlayRunning:{type:Boolean},currentPath:{},isDrawingPath:{type:Boolean},zoom:{},panMode:{type:Boolean}},emits:["player-click","player-double-click","player-long-press","ball-click","canvas-click","player-drag","ball-drag","path-draw","attach-ball"],setup(e,{expose:t,emit:n}){const s=e,o=n,i=te(null);let l=null;const a=te({isDown:!1,lastPosition:{x:0,y:0},lastClient:{x:0,y:0}}),r=te({count:0,timer:null,lastPlayer:null,lastClickTime:0,dragStartPosition:null,longPressTimer:null});Jt(()=>{i.value&&(l=i.value.getContext("2d"),R()),window.addEventListener("keydown",C),window.addEventListener("keyup",L)}),Bn(()=>{r.value.timer&&clearTimeout(r.value.timer),window.removeEventListener("keydown",C),window.removeEventListener("keyup",L)}),Xe([()=>s.players,()=>s.ball,()=>s.currentPath],()=>{Ot(()=>R())},{deep:!0}),Xe(()=>s.zoom,()=>{P(),Ot(()=>R())}),Xe(()=>[s.canvasConfig.width,s.canvasConfig.height],()=>{P(),Ot(()=>R())});const u=te({x:0,y:0}),c=te(!1),p=te(!1),v=Te(()=>p.value||!!s.panMode),y=(g,A,M)=>Math.max(A,Math.min(M,g)),P=()=>{if(v.value||!l)return;const g=s.canvasConfig.width,A=s.canvasConfig.height,M=s.zoom??1,j=Dn(g,A),Z=j.actualFieldWidth,m=j.actualFieldHeight,D=j.fieldX,G=j.fieldY;if(Z*M>g){const ee=g-(D+Z)*M,W=-D*M;u.value.x=y(u.value.x,ee,W)}if(m*M>A){const ee=A-(G+m)*M,W=-G*M;u.value.y=y(u.value.y,ee,W)}},C=g=>{g.code==="Space"?p.value||(g.preventDefault(),p.value=!0):/^[0-9]$/.test(g.key)&&s.uiState.selectedPlayer&&o("attach-ball",s.uiState.selectedPlayer)},L=g=>{g.code==="Space"&&(g.preventDefault(),p.value=!1)},R=()=>{if(!i.value||!l)return;const{width:g,height:A}=s.canvasConfig,M=window.devicePixelRatio||1;(i.value.width!==Math.floor(g*M)||i.value.height!==Math.floor(A*M))&&(i.value.width=Math.floor(g*M),i.value.height=Math.floor(A*M),i.value.style.width=`${Math.round(g)}px`,i.value.style.height=`${Math.round(A)}px`),l.setTransform(M,0,0,M,0,0),l.clearRect(0,0,g,A),$(l,g,A),l.save();const j=s.zoom??1;P(),l.translate(u.value.x,u.value.y),l.scale(j,j),J(l),F(l),O(l),s.isSequenceMode&&oe(l),l.restore()},$=(g,A,M)=>{g.fillStyle="#0F172A",g.fillRect(0,0,A,M)},J=(g,A,M,j,Z)=>{const m=Dn(s.canvasConfig.width,s.canvasConfig.height),{actualFieldWidth:D,actualFieldHeight:G,fieldX:ee,fieldY:W,squareSize:de}=m,Pe=g.createLinearGradient(0,W,0,W+G);Pe.addColorStop(0,"#FFFFFF"),Pe.addColorStop(1,"#F5F7FA"),g.fillStyle=Pe,g.fillRect(ee,W,D,G),g.shadowColor="rgba(0, 0, 0, 0.25)",g.shadowBlur=8,g.shadowOffsetY=2,g.strokeStyle="rgba(0, 0, 0, 0.12)",g.lineWidth=2,g.strokeRect(ee+6,W+6,D-12,G-12),g.shadowColor="transparent",g.shadowBlur=0,g.shadowOffsetY=0,g.strokeStyle="rgba(0, 0, 0, 0.35)",g.lineWidth=1.5,g.beginPath(),g.setLineDash([20,14]),g.moveTo(ee,W+G/2),g.lineTo(ee+D,W+G/2),g.stroke(),g.setLineDash([]);const z=G*.22;g.beginPath(),g.setLineDash([20,14]),g.moveTo(ee,W+z),g.lineTo(ee+D,W+z),g.moveTo(ee,W+G-z),g.lineTo(ee+D,W+G-z),g.stroke(),g.setLineDash([]),g.beginPath(),g.lineWidth=2,g.moveTo(ee,W),g.lineTo(ee,W+G),g.moveTo(ee+D,W),g.lineTo(ee+D,W+G),g.stroke(),g.strokeStyle="rgba(0, 0, 0, 0.08)",g.lineWidth=1;for(let x=ee;x<=ee+D;x+=de)g.beginPath(),g.moveTo(x,W),g.lineTo(x,W+G),g.stroke();for(let x=W;x<=W+G;x+=de)g.beginPath(),g.moveTo(ee,x),g.lineTo(ee+D,x),g.stroke()},F=g=>{const A=s.canvasConfig.playerRadius;s.players.forEach(M=>{const j=M.isAnimating?A*1.15:A;g.shadowColor="rgba(0, 0, 0, 0.18)",g.shadowBlur=6,g.shadowOffsetY=3,g.beginPath(),g.arc(M.x,M.y+1.5,j,0,Math.PI*2),g.fillStyle="rgba(0, 0, 0, 0.14)",g.fill();const Z=M.type==="attacking"?At.ATTACKING:At.DEFENSIVE,m=g.createRadialGradient(M.x-j/2,M.y-j/2,0,M.x,M.y,j);m.addColorStop(0,Z.LIGHT),m.addColorStop(.5,Z.SECONDARY),m.addColorStop(1,Z.PRIMARY),g.shadowColor="transparent",g.beginPath(),g.arc(M.x,M.y,j,0,Math.PI*2),g.fillStyle=m,g.fill(),M.isSelected||M===s.uiState.selectedPlayer?(g.strokeStyle=At.UI.SELECTED,g.lineWidth=3,g.shadowColor="rgba(13, 59, 102, 0.35)",g.shadowBlur=6):(g.strokeStyle="rgba(255, 255, 255, 0.92)",g.lineWidth=1.25,g.shadowColor="transparent",g.shadowBlur=0),g.stroke(),g.shadowColor="transparent",g.shadowBlur=0,g.fillStyle="rgba(255, 255, 255, 1)";const D=Math.max(j*.8,12);g.font=`600 ${D}px -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif`,g.textAlign="center",g.textBaseline="middle",g.shadowColor="rgba(0, 0, 0, 0.2)",g.shadowBlur=2,g.shadowOffsetY=1;const G=M.assignedNumber!==void 0?M.assignedNumber.toString():M.id.toString();g.fillText(G,M.x,M.y),g.shadowColor="transparent",g.shadowBlur=0,g.shadowOffsetY=0,M.isLooping&&s.isSequenceMode&&(g.beginPath(),g.arc(M.x,M.y,j+6,0,Math.PI*2),g.strokeStyle=M.type==="attacking"?"rgba(255, 68, 68, 0.4)":"rgba(68, 68, 255, 0.4)",g.lineWidth=2,g.stroke())})},O=g=>{const A=s.canvasConfig.ballRadius;g.shadowColor="rgba(0, 0, 0, 0.2)",g.shadowBlur=8,g.shadowOffsetY=3,g.beginPath(),g.arc(s.ball.x,s.ball.y+1.5,A,0,Math.PI*2),g.fillStyle="rgba(0, 0, 0, 0.12)",g.fill(),g.shadowColor="transparent",g.beginPath(),g.arc(s.ball.x,s.ball.y,A,0,Math.PI*2),g.fillStyle=At.BALL.PRIMARY,g.fill(),g.beginPath(),g.arc(s.ball.x-A*.35,s.ball.y-A*.35,A*.2,0,Math.PI*2),g.fillStyle="rgba(255,255,255,0.25)",g.fill(),g.strokeStyle=s.uiState.selectedBall?"rgba(13,59,102,1)":"rgba(255,255,255,0.92)",g.lineWidth=s.uiState.selectedBall?2:1.25,g.stroke()},oe=g=>{if(!s.isPlayRunning&&(s.players.forEach(A=>{if(A.path&&A.path.length>0&&A.pathVisible!==!1){const M=A.type==="attacking"?At.ATTACKING.PRIMARY:At.DEFENSIVE.PRIMARY;g.beginPath(),g.strokeStyle=M,g.globalAlpha=.7,g.lineWidth=2,g.setLineDash([10,6]);const j=A.path[0];g.moveTo(j.x,j.y);for(let Z=1;Z<A.path.length;Z++){const m=A.path[Z];g.lineTo(m.x,m.y)}if(g.stroke(),g.globalAlpha=1,g.setLineDash([]),A.path.length>1){const Z=A.path[A.path.length-1],m=A.path[A.path.length-2],D=Z.x-m.x,G=Z.y-m.y,ee=Math.atan2(G,D),W=15,de=Math.PI/6;g.beginPath(),g.moveTo(Z.x,Z.y),g.lineTo(Z.x-W*Math.cos(ee-de),Z.y-W*Math.sin(ee-de)),g.moveTo(Z.x,Z.y),g.lineTo(Z.x-W*Math.cos(ee+de),Z.y-W*Math.sin(ee+de)),g.strokeStyle=M,g.lineWidth=2,g.stroke()}if(A.timedPass&&A.timedPass.position){const Z=A.timedPass.position,m=8;g.beginPath(),g.arc(Z.x,Z.y,m,0,Math.PI*2),g.fillStyle=At.BALL.PRIMARY,g.fill(),g.beginPath(),g.arc(Z.x,Z.y,m+3,0,Math.PI*2),g.strokeStyle=At.BALL.PRIMARY,g.lineWidth=2,g.stroke(),g.strokeStyle="#FFFFFF",g.lineWidth=1.5,g.beginPath(),g.moveTo(Z.x,Z.y),g.lineTo(Z.x,Z.y-m*.5),g.stroke(),g.beginPath(),g.moveTo(Z.x,Z.y),g.lineTo(Z.x+m*.4,Z.y-m*.2),g.stroke()}if(A.speed&&A.speed!==100){g.font='12px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',g.fillStyle=M,g.textAlign="center";const Z=A.isAnimating?s.canvasConfig.playerRadius*1.15:s.canvasConfig.playerRadius;g.fillText(`${A.speed}%`,A.x,A.y-Z-10)}}}),s.isDrawingPath&&s.currentPath.length>1)){const A=s.uiState.selectedPlayer;if(A){const M=A.type==="attacking"?At.ATTACKING.PRIMARY:At.DEFENSIVE.PRIMARY;g.beginPath(),g.strokeStyle=M,g.globalAlpha=.9,g.lineWidth=3,g.setLineDash([8,6]),g.moveTo(s.currentPath[0].x,s.currentPath[0].y),s.currentPath.slice(1).forEach(j=>{g.lineTo(j.x,j.y)}),g.stroke(),g.globalAlpha=1,g.setLineDash([]),s.currentPath.forEach((j,Z)=>{Z>0&&(g.beginPath(),g.arc(j.x,j.y,3,0,Math.PI*2),g.fillStyle=M,g.fill())})}}},re=g=>{if(!i.value)return;const A=V(g);if(a.value.isDown=!0,a.value.lastPosition=A,a.value.lastClient={x:g.clientX,y:g.clientY},p.value||s.panMode){c.value=!0;return}if(k(A)){o("ball-click",s.ball,g);return}const M=ne(A);if(M){_(M,g);return}o("canvas-click",A,g)},B=g=>{if(!i.value||!a.value.isDown)return;const A=V(g);if(r.value.longPressTimer&&r.value.dragStartPosition){const M=A.x-r.value.dragStartPosition.x,j=A.y-r.value.dragStartPosition.y;Math.sqrt(M*M+j*j)>Jd&&(clearTimeout(r.value.longPressTimer),r.value.longPressTimer=null)}if(c.value){const M=i.value.getBoundingClientRect(),j=s.canvasConfig.width/M.width,Z=s.canvasConfig.height/M.height,m=g.clientX-a.value.lastClient.x,D=g.clientY-a.value.lastClient.y;u.value.x+=m*j,u.value.y+=D*Z,P(),requestAnimationFrame(R),a.value.lastPosition=A,a.value.lastClient={x:g.clientX,y:g.clientY};return}s.uiState.selectedBall?o("ball-drag",s.ball,A):s.uiState.selectedPlayer&&o("player-drag",s.uiState.selectedPlayer,A),a.value.lastPosition=A},N=()=>{a.value.isDown=!1,c.value=!1,r.value.longPressTimer&&(clearTimeout(r.value.longPressTimer),r.value.longPressTimer=null),s.isDrawingPath&&s.uiState.selectedPlayer&&s.currentPath.length>1&&o("path-draw",s.uiState.selectedPlayer,[...s.currentPath])},_=(g,A)=>{const M=Date.now(),j=V(A);if(r.value.lastPlayer===g&&M-r.value.lastClickTime<Xd){r.value.timer&&clearTimeout(r.value.timer),r.value.longPressTimer&&clearTimeout(r.value.longPressTimer),o("player-double-click",g,A),r.value.count=0,r.value.lastPlayer=null;return}r.value.lastPlayer=g,r.value.lastClickTime=M,r.value.dragStartPosition=j,o("player-click",g,A),r.value.longPressTimer=window.setTimeout(()=>{o("player-long-press",g,A)},Gd)},V=g=>{if(!i.value)return{x:0,y:0};const A=i.value.getBoundingClientRect(),M=s.canvasConfig.width/A.width,j=s.canvasConfig.height/A.height,Z=(g.clientX-A.left)*M,m=(g.clientY-A.top)*j,D=s.zoom??1;return{x:(Z-u.value.x)/D,y:(m-u.value.y)/D}},k=g=>{const A=s.ball.x-g.x,M=s.ball.y-g.y;return Math.sqrt(A*A+M*M)<=s.canvasConfig.ballRadius},ne=g=>s.players.find(A=>{const M=A.x-g.x,j=A.y-g.y;return Math.sqrt(M*M+j*j)<=20})||null;return t({redraw:()=>{R()}}),(g,A)=>(le(),ae("div",{class:Me(["canvas-container",{panning:p.value||s.panMode,"panning-active":c.value}])},[h("canvas",{ref_key:"canvas",ref:i,width:g.canvasConfig.width,height:g.canvasConfig.height,onMousedown:re,onMousemove:B,onMouseup:N,onMouseleave:N},null,40,Kd)],2))}}),vt=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n},Qd=vt(Zd,[["__scopeId","data-v-5d0642eb"]]),ef={key:1,class:"dialog","data-cy":"confirm-dialog"},tf={class:"dialog-content"},nf={class:"dialog-title"},sf={class:"dialog-description"},of={class:"dialog-actions"},lf=ut({__name:"ConfirmDialog",props:{show:{type:Boolean},title:{},message:{},confirmText:{default:"Confirm"}},emits:["confirm","cancel"],setup(e,{emit:t}){const n=t,s=()=>{n("confirm")},o=()=>{n("cancel")};return(i,l)=>(le(),ae(Ke,null,[i.show?(le(),ae("div",{key:0,class:"dialog-backdrop",onClick:o})):Ce("",!0),i.show?(le(),ae("div",ef,[h("div",tf,[h("h3",nf,Ee(i.title),1),h("p",sf,Ee(i.message),1),h("div",of,[h("button",{class:"dialog-btn cancel",onClick:o}," Cancel "),h("button",{"data-cy":"confirm-btn",class:"dialog-btn confirm",onClick:s},Ee(i.confirmText),1)])])])):Ce("",!0)],64))}}),Ls=vt(lf,[["__scopeId","data-v-7b17ec67"]]),af={key:1,class:"dialog","data-cy":"player-dialog"},rf={class:"dialog-content"},cf={class:"dialog-title"},uf={class:"number-input"},df=["value"],ff={class:"formation-section"},hf={class:"formation-tabs"},pf={class:"formation-preview"},gf={class:"preview-header"},vf={class:"show-existing-toggle"},mf={key:0,class:"saved-formations"},yf={key:0,class:"no-formations"},bf={key:1,class:"formations-list"},Pf=["onClick"],Sf={class:"formation-info"},wf={class:"formation-name"},_f={class:"formation-details"},Cf=["onClick"],xf={key:1,class:"save-formation-wrapper"},Tf=["aria-expanded"],Ef={id:"save-formation-panel",class:"save-formation-section"},kf=["disabled"],Af={class:"dialog-actions"},Wl=280,Vl=200,Mf=20,Rf=ut({__name:"PlayerDialog",props:{showAttackingCount:{type:Boolean},showDefensiveCount:{type:Boolean},selectedAttackingCount:{},selectedDefensiveCount:{},existingPlayers:{default:()=>[]},canvasConfig:{default:()=>({fieldWidth:1e3,fieldHeight:1428,width:1400,height:1428})}},emits:["close-dialog","confirm-player-count","update:selectedAttackingCount","update:selectedDefensiveCount"],setup(e,{emit:t}){const n=e,s=t,o=te(!1),i=te("attacking"),l=te(1),a=te("default"),r=te(!0),u=te(null),c=te([]),p=te(!1),v=te(-1),y=te(""),P=te([]),C=te(!1),L=te(!1),R=te(null),$=te(null),J=()=>Yd(Wl,Vl,Mf),F=Te(()=>{var d;return((d=n.existingPlayers)==null?void 0:d.filter(f=>f.type===i.value))||[]}),O=Te(()=>a.value==="custom"&&c.value.length>0),oe=Te(()=>O.value&&y.value.trim().length>0);Xe(()=>n.showAttackingCount,d=>{d?(o.value=!0,i.value="attacking",l.value=n.selectedAttackingCount):n.showDefensiveCount||(o.value=!1)}),Xe(()=>n.showDefensiveCount,d=>{d?(o.value=!0,i.value="defensive",l.value=n.selectedDefensiveCount):n.showAttackingCount||(o.value=!1)});const re=()=>{l.value<16&&(l.value++,_())},B=()=>{l.value>1&&(l.value--,_())},N=d=>{const f=d.target;let b=parseInt(f.value);isNaN(b)&&(b=1),b<1&&(b=1),b>16&&(b=16),l.value=b,_()},_=()=>{i.value==="attacking"?s("update:selectedAttackingCount",l.value):s("update:selectedDefensiveCount",l.value),Ot(()=>W())},V=d=>{const b=F.value.length+d,w=Math.floor(b/5),E=b%5,q=.5,U=i.value==="attacking"?.75:.25,Y=.08,X=.05;return{x:q+(E-2)*Y,y:i.value==="attacking"?U+w*X:U-w*X}},k=()=>{const d=[];for(let f=0;f<l.value;f++)d.push(V(f));return d},ne=()=>{var d;switch(a.value){case"custom":return c.value.length>0?c.value:k();case"saved":return((d=$.value)==null?void 0:d.positions)||k();default:return k()}},se=()=>{if(a.value!=="custom")return;const d=l.value,f=c.value.length;if(f<d)for(let b=f;b<d;b++)c.value.push(V(b));else f>d&&(c.value=c.value.slice(0,d))},g=()=>{try{const d=localStorage.getItem(`formations_${i.value}`);P.value=d?JSON.parse(d):[]}catch(d){console.error("Failed to load saved formations:",d),P.value=[]}},A=()=>{if(!oe.value)return;const d={id:Date.now().toString(),name:y.value.trim(),positions:[...c.value],playerCount:l.value,type:i.value,createdAt:new Date};P.value.push(d);try{localStorage.setItem(`formations_${i.value}`,JSON.stringify(P.value)),y.value="",alert(`Formation "${d.name}" saved successfully!`)}catch(f){console.error("Failed to save formation:",f),alert("Failed to save formation. Please try again.")}},M=d=>{$.value=d,l.value=d.playerCount,_()},j=d=>{const f=P.value.find(b=>b.id===d);f&&(R.value=f,L.value=!0)},Z=()=>{var f;if(!R.value)return;const d=P.value.findIndex(b=>b.id===R.value.id);d!==-1&&(P.value.splice(d,1),localStorage.setItem(`formations_${i.value}`,JSON.stringify(P.value)),((f=$.value)==null?void 0:f.id)===R.value.id&&($.value=null)),L.value=!1,R.value=null},m=d=>{if(a.value!=="custom")return;const f=u.value;if(!f)return;const b=f.getBoundingClientRect(),w=d.clientX-b.left,E=d.clientY-b.top,q=ee(w,E);q!==-1&&(p.value=!0,v.value=q,f.style.cursor="grabbing")},D=d=>{if(a.value!=="custom")return;const f=u.value;if(!f)return;const b=f.getBoundingClientRect(),w=d.clientX-b.left,E=d.clientY-b.top;if(p.value&&v.value!==-1){const{fieldWidth:q,fieldHeight:U,fieldX:Y,fieldY:X}=J(),K=Math.max(0,Math.min(1,(w-Y)/q)),fe=Math.max(0,Math.min(1,(E-X)/U));c.value[v.value]={x:K,y:fe},W()}else{const q=ee(w,E);f.style.cursor=q!==-1?"grab":"default"}},G=()=>{p.value=!1,v.value=-1,u.value&&(u.value.style.cursor="default")},ee=(d,f)=>{if(a.value!=="custom")return-1;const b=ne();for(let w=0;w<b.length;w++){const E=T(b[w].x,b[w].y);if(Math.sqrt(Math.pow(d-E.x,2)+Math.pow(f-E.y,2))<=10)return w}return-1},W=()=>{if(!u.value)return;const f=u.value.getContext("2d");f&&(f.clearRect(0,0,Wl,Vl),de(f),r.value&&Pe(f),z(f))},de=d=>{const{fieldWidth:f,fieldHeight:b,fieldX:w,fieldY:E}=J();d.fillStyle="rgba(34, 139, 34, 0.15)",d.fillRect(w,E,f,b),d.strokeStyle="rgba(255, 255, 255, 0.4)",d.lineWidth=1,d.strokeRect(w,E,f,b),d.beginPath(),d.setLineDash([3,2]),d.strokeStyle="rgba(255, 255, 255, 0.3)",d.moveTo(w,E+b/2),d.lineTo(w+f,E+b/2),d.stroke(),d.setLineDash([])},Pe=d=>{var f;(f=n.existingPlayers)==null||f.forEach(b=>{const w=I(0,0,b.x,b.y);d.beginPath(),d.arc(w.x+1,w.y+1,5,0,Math.PI*2),d.fillStyle="rgba(0, 0, 0, 0.2)",d.fill(),d.beginPath(),d.arc(w.x,w.y,5,0,Math.PI*2),d.fillStyle=b.type==="attacking"?"rgba(255, 68, 68, 0.4)":"rgba(68, 68, 255, 0.4)",d.fill(),d.strokeStyle="rgba(255, 255, 255, 0.6)",d.lineWidth=1,d.stroke(),d.fillStyle="rgba(255, 255, 255, 0.8)",d.font="8px -apple-system, BlinkMacSystemFont, sans-serif",d.textAlign="center",d.textBaseline="middle",d.fillText(b.id.toString(),w.x,w.y)})},z=d=>{ne().forEach((b,w)=>{const E=T(b.x,b.y),q=F.value.length;d.beginPath(),d.arc(E.x+1,E.y+1,7,0,Math.PI*2),d.fillStyle="rgba(0, 0, 0, 0.3)",d.fill(),d.beginPath(),d.arc(E.x,E.y,7,0,Math.PI*2);const U=p.value&&v.value===w;d.fillStyle=U?i.value==="attacking"?"#FF6666":"#6666FF":i.value==="attacking"?"#FF4444":"#4444FF",d.fill(),d.strokeStyle="white",d.lineWidth=U?3:2,d.stroke(),d.fillStyle="white",d.font="bold 9px -apple-system, BlinkMacSystemFont, sans-serif",d.textAlign="center",d.textBaseline="middle",d.fillText((q+w+1).toString(),E.x,E.y),a.value==="custom"&&!p.value&&(d.font="6px -apple-system, BlinkMacSystemFont, sans-serif",d.fillStyle="rgba(255, 255, 255, 0.7)",d.fillText("drag",E.x,E.y+15))})};Xe([l,a,r,i,c,$],()=>{a.value==="custom"&&se(),Ot(()=>W())},{deep:!0}),Xe(o,d=>{d&&(g(),Ot(()=>{se(),W()}))}),Xe(a,d=>{d==="custom"?se():d==="saved"&&g()});const x=()=>{c.value=[],$.value=null,y.value="",p.value=!1,v.value=-1,C.value=!1,s("close-dialog")},pe=()=>{const d=ne();s("confirm-player-count",{type:i.value,count:l.value,formation:{type:a.value,positions:d}}),x()},T=(d,f)=>{const{fieldWidth:b,fieldHeight:w,fieldX:E,fieldY:q}=J();return{x:E+d*b,y:q+f*w}},I=(d,f,b,w)=>{var Y,X;const E=Dn(((Y=n.canvasConfig)==null?void 0:Y.width)||1400,((X=n.canvasConfig)==null?void 0:X.height)||1428),q=E.toRelativeX(b),U=E.toRelativeY(w);return T(q,U)};return(d,f)=>{var b;return le(),ae(Ke,null,[o.value?(le(),ae("div",{key:0,class:"dialog-backdrop",onClick:x})):Ce("",!0),o.value?(le(),ae("div",af,[h("div",rf,[h("h3",cf,Ee(i.value==="attacking"?"Add Red Players":"Add Blue Players"),1),h("div",uf,[h("button",{class:"number-btn",onClick:B,"data-cy":"player-count-decrement"},"-"),h("input",{type:"number",value:l.value,onInput:N,min:"1",max:"16"},null,40,df),h("button",{class:"number-btn",onClick:re,"data-cy":"player-count-increment"},"+")]),h("div",ff,[f[12]||(f[12]=h("h4",{class:"section-title"},"Formation",-1)),f[13]||(f[13]=h("p",{class:"section-description"}," Choose starting positions for new players ",-1)),h("div",hf,[h("button",{onClick:f[0]||(f[0]=w=>a.value="default"),class:Me([{active:a.value==="default"},"formation-tab"])}," Default ",2),h("button",{onClick:f[1]||(f[1]=w=>a.value="custom"),class:Me([{active:a.value==="custom"},"formation-tab"])}," Custom ",2),h("button",{onClick:f[2]||(f[2]=w=>a.value="saved"),class:Me([{active:a.value==="saved"},"formation-tab"]),disabled:!0}," Saved ",2)]),h("div",pf,[h("div",gf,[f[8]||(f[8]=h("span",{class:"preview-title"},"Field Preview",-1)),h("label",vf,[Js(h("input",{type:"checkbox","onUpdate:modelValue":f[3]||(f[3]=w=>r.value=w),onChange:W},null,544),[[Rd,r.value]]),f[7]||(f[7]=h("span",{class:"toggle-text"},"Show existing players",-1))])]),h("canvas",{ref_key:"previewCanvas",ref:u,width:"280",height:"200",class:"mini-field",onMousedown:m,onMousemove:D,onMouseup:G,onMouseleave:G,style:ls({cursor:a.value==="custom"?"grab":"default"})},null,36)]),a.value==="saved"?(le(),ae("div",mf,[P.value.length===0?(le(),ae("div",yf,f[9]||(f[9]=[h("p",null,"No saved formations yet.",-1),h("p",{class:"hint"},"Create custom formations and save them to use here.",-1)]))):(le(),ae("div",bf,[(le(!0),ae(Ke,null,Fs(P.value,w=>{var E;return le(),ae("div",{key:w.id,class:Me(["formation-item",{active:((E=$.value)==null?void 0:E.id)===w.id}]),onClick:q=>M(w)},[h("div",Sf,[h("span",wf,Ee(w.name),1),h("span",_f,Ee(w.playerCount)+" players",1)]),h("button",{onClick:Rr(q=>j(w.id),["stop"]),class:"delete-formation-btn",title:"Delete formation"},"  ",8,Cf)],10,Pf)}),128))]))])):Ce("",!0),O.value?(le(),ae("div",xf,[h("button",{class:"save-formation-toggle",onClick:f[4]||(f[4]=w=>C.value=!C.value),"aria-expanded":C.value?"true":"false","aria-controls":"save-formation-panel"},[h("span",{class:Me(["chevron",{open:C.value}])},"",2),f[10]||(f[10]=ze(" Looking to save formation?? "))],8,Tf),_e(hn,{name:"fade-collapse"},{default:Yt(()=>[Js(h("div",Ef,[Js(h("input",{"onUpdate:modelValue":f[5]||(f[5]=w=>y.value=w),placeholder:"Formation name (e.g., 'Attacking Line', 'Defensive Wall')",class:"formation-name-input",onKeyup:fi(A,["enter"])},null,544),[[Ar,y.value]]),h("button",{onClick:A,class:"save-formation-btn",disabled:!oe.value},f[11]||(f[11]=[h("span",{class:"icon"},"",-1),ze(" Save Formation ")]),8,kf)],512),[[vd,C.value]])]),_:1})])):Ce("",!0)]),h("div",Af,[h("button",{class:"dialog-btn cancel",onClick:x},"Cancel"),h("button",{class:"dialog-btn confirm",onClick:pe,"data-cy":"confirm-add-players"}," Add "+Ee(l.value)+" Player"+Ee(l.value>1?"s":""),1)])])])):Ce("",!0),_e(Ls,{show:L.value,title:"Delete Formation",message:`Are you sure you want to delete formation '${(b=R.value)==null?void 0:b.name}'? This action cannot be undone.`,"confirm-text":"Delete Formation",onConfirm:Z,onCancel:f[6]||(f[6]=w=>L.value=!1)},null,8,["show","message"])],64)}}}),Df=vt(Rf,[["__scopeId","data-v-49b0a0b6"]]);function Of(){const e="squiggle_draft",t=te([]),n=te({x:0,y:0,attachedTo:null}),s=te((()=>{try{const T=typeof window<"u"?localStorage.getItem("squiggle_attackingType"):null;return T==="defensive"||T==="attacking"?T:"attacking"}catch{return"attacking"}})()),o=te([{id:1,name:"Phase 1",playerStates:[],ballState:{x:0,y:0,attachedTo:null},sequences:[{id:1,name:"Sequence 1",activePlayerIds:[],ballEvents:[],isActive:!1,playerData:{},ballState:{x:0,y:0,attachedTo:null},finalPlayerPositions:{},startingPlayerPositions:{}}]}]),i=te(1),l=te(1),a=te(!0),r=te(!1),u=te(!1),c=Fn({width:St.BASE_WIDTH*1.4,height:St.BASE_WIDTH/St.FIELD_RATIO,fieldWidth:St.BASE_WIDTH,fieldHeight:St.BASE_WIDTH/St.FIELD_RATIO,playerRadius:0,ballRadius:0}),p=Te(()=>o.value.find(T=>T.id===i.value)),v=Te(()=>{const T=p.value;return!T||!T.sequences?null:T.sequences.find(I=>I.id===l.value)}),y=Te(()=>{const T=p.value;return(T==null?void 0:T.sequences)||[]}),P=Te(()=>t.value.filter(T=>T.path&&T.path.length>0)),C=Te(()=>t.value.some(T=>T.path&&T.path.length>0)),L=Te(()=>{const T=p.value;return(T==null?void 0:T.sequences)&&T.sequences.length>0&&T.sequences.some(I=>I.activePlayerIds.length>0)}),R=()=>{try{const T={players:t.value,ball:n.value,phases:o.value,currentPhase:i.value,currentSequence:l.value};localStorage.setItem(e,JSON.stringify(T))}catch{}},$=()=>{console.log("[loadDraftIfPresent] CALLED");try{const T=localStorage.getItem(e);if(!T){console.log("[loadDraftIfPresent] No draft found");return}const I=JSON.parse(T);if(I&&I.players&&I.phases&&I.ball){console.log("[loadDraftIfPresent] Loading draft",{ballFromDraft:I.ball}),t.value=JSON.parse(JSON.stringify(I.players)),n.value=JSON.parse(JSON.stringify(I.ball)),o.value=JSON.parse(JSON.stringify(I.phases)),i.value=I.currentPhase||1,l.value=I.currentSequence||1,console.log("[loadDraftIfPresent] Ball after load",{x:n.value.x,y:n.value.y}),t.value.forEach(f=>{(!f.mode||f.mode==="drag")&&(f.mode="path")});const d=o.value.find(f=>f.id===1);d&&(!d.sequences||d.sequences.length===0)&&(d.sequences=[{id:1,name:"Sequence 1",activePlayerIds:[],ballEvents:[],isActive:!1,playerData:{},ballState:JSON.parse(JSON.stringify(n.value)),finalPlayerPositions:{},startingPlayerPositions:{}}])}}catch{}},J=()=>{try{localStorage.removeItem(e)}catch{}},F=T=>{s.value=T;try{localStorage.setItem("squiggle_attackingType",T)}catch{}},O=()=>{F(s.value==="attacking"?"defensive":"attacking")},oe=T=>{const I=p.value;if(!I||!I.sequences)return;const d=`${T.type}-${T.id}`;I.sequences.forEach(f=>{f.startingPlayerPositions||(f.startingPlayerPositions={}),f.startingPlayerPositions[d]={x:T.x,y:T.y}})},re=(T,I)=>{const d=t.value.filter(E=>E.type===T),f=d.length>0?Math.max(...d.map(E=>E.id))+1:1,b=_(T),w={...I,type:T,id:f,assignedNumber:b,isSelected:!1,speed:100,mode:"path",sequenceDelay:0,pathVisible:!0,originalPosition:{x:I.x,y:I.y},playStartPosition:{x:I.x,y:I.y}};t.value.push(w),oe(w),de()},B=(T,I)=>{const d=t.value.findIndex(f=>f.id===T&&f.type===I);if(d!==-1){const f=p.value,b=`${I}-${T}`;f&&f.sequences&&f.sequences.forEach(w=>{w.startingPlayerPositions&&delete w.startingPlayerPositions[b]}),t.value.splice(d,1)}},N=T=>{const I={x:T.x,y:T.y};T.originalPosition={...I},T.playStartPosition={...I},oe(T)},_=T=>{const I=t.value.filter(d=>d.type===T).map(d=>d.assignedNumber).filter(d=>d!==void 0);for(let d=1;d<=9;d++)if(!I.includes(d))return d;if(!I.includes(0))return 0},V=T=>{n.value.x=T.x,n.value.y=T.y},k=(T,I={})=>{console.log("[setBallCarrier] CALLED",{player:T?`${T.type}-${T.id}`:null,playerPos:T?{x:T.x,y:T.y}:null,ballPosBefore:{x:n.value.x,y:n.value.y},opts:I});const d=I.updateTimedPassSource??!0,f=n.value.attachedTo,b=f&&t.value.find(w=>w.id===f.id&&w.type===f.type)||null;if(t.value.forEach(w=>{w.isCarryingBall=!1}),T){T.isCarryingBall=!0,n.value.attachedTo={type:T.type,id:T.id};const w=c.playerRadius;n.value.x=T.x+w*.8,n.value.y=T.y+w*.4}else{const w=n.value.x,E=n.value.y;n.value.attachedTo=null,n.value.x=w,n.value.y=E,console.log("[setBallCarrier] Ball detached, position preserved:",{x:n.value.x,y:n.value.y})}console.log("[setBallCarrier] AFTER",{ballPosAfter:{x:n.value.x,y:n.value.y},attachedTo:n.value.attachedTo}),d&&b&&T&&(b.id!==T.id||b.type!==T.type)&&t.value.forEach(w=>{if(w.timedPass&&w.timedPass.fromPlayerId===b.id&&w.timedPass.fromPlayerType===b.type){w.timedPass.fromPlayerId=T.id,w.timedPass.fromPlayerType=T.type;const E=v.value;if(E){const q=`${w.type}-${w.id}`,U=E.playerData[q];U!=null&&U.timedPass&&U.timedPass.fromPlayerId===b.id&&U.timedPass.fromPlayerType===b.type&&(U.timedPass.fromPlayerId=T.id,U.timedPass.fromPlayerType=T.type)}}})},ne=(T,I)=>{k(T,I)},se=T=>{k(null,T)},g=T=>{j(),i.value=T,Z(T)},A=()=>{j();const T=o.value.length>0?Math.max(...o.value.map(I=>I.id))+1:1;o.value.push({id:T,name:`Phase ${T}`,playerStates:[],ballState:JSON.parse(JSON.stringify(n.value)),sequences:[]}),g(T),D()},M=T=>{if(o.value.length<=1)return!1;const I=o.value.findIndex(d=>d.id===T);if(I!==-1){o.value.splice(I,1);const d=Math.max(0,I-1);return o.value.length>0&&g(o.value[d].id),!0}return!1},j=()=>{const T=o.value.find(I=>I.id===i.value);T&&(T.playerStates=JSON.parse(JSON.stringify(t.value)),T.ballState=JSON.parse(JSON.stringify(n.value)),T.currentSequenceId=l.value)},Z=T=>{const I=o.value.find(d=>d.id===T);if(I){if(I.currentSequenceId&&I.sequences.some(d=>d.id===I.currentSequenceId)?l.value=I.currentSequenceId:l.value=I.sequences.length>0?I.sequences[0].id:1,I.playerStates.length>0)t.value=JSON.parse(JSON.stringify(I.playerStates)),n.value=JSON.parse(JSON.stringify(I.ballState));else if(T>1){const d=o.value.find(f=>f.id===T-1);d&&d.playerStates.length>0&&(t.value=JSON.parse(JSON.stringify(d.playerStates)),n.value=JSON.parse(JSON.stringify(d.ballState)),t.value.forEach(f=>{f.originalPosition={x:f.x,y:f.y},f.path=[],f.mode="path",f.isSelected=!1,f.timedPass=void 0}))}if(I.sequences&&I.sequences.length>0){const d=I.sequences.find(f=>f.id===l.value);d&&d.activePlayerIds&&t.value.forEach(f=>{const b=`${f.type}-${f.id}`;f.isLooping=d.activePlayerIds.includes(b)})}}},m=T=>{l.value=T;const I=v.value;I&&(ee(I),t.value.forEach(d=>{const f=`${d.type}-${d.id}`;d.isLooping=I.activePlayerIds.includes(f)}))},D=()=>{const T=p.value;if(!T)return;const I=T.sequences.length>0?Math.max(...T.sequences.map(b=>b.id))+1:1,d={x:n.value.x,y:n.value.y,attachedTo:n.value.attachedTo?{...n.value.attachedTo}:null};console.log("[addSequence] Creating new sequence with ball state:",d);const f={id:I,name:`Sequence ${I}`,activePlayerIds:[],ballEvents:[],isActive:!1,playerData:{},ballState:d,finalPlayerPositions:{},startingPlayerPositions:{}};t.value.forEach(b=>{const w=`${b.type}-${b.id}`;f.startingPlayerPositions[w]={x:b.x,y:b.y}}),T.sequences.push(f),m(I)},G=T=>{const I=p.value;if(!I||I.sequences.length===0)return!1;const d=I.sequences.findIndex(f=>f.id===T);if(d!==-1){if(I.sequences.splice(d,1),I.sequences.length>0){const f=Math.max(0,d-1);m(I.sequences[f].id)}else l.value=1;return!0}return!1},ee=T=>{console.log("[loadPlayerDataFromSequence] CALLED",{sequenceName:T.name,hasBallState:!!T.ballState,ballStateSaved:T.ballState,ballPosBefore:{x:n.value.x,y:n.value.y}}),T.playerData&&(t.value.forEach(I=>{const d=`${I.type}-${I.id}`,f=T.playerData[d];f?(I.path=f.path?[...f.path]:[],I.speed=f.speed||100,I.sequenceDelay=f.sequenceDelay||0,I.mode=f.mode||"path",I.isLooping=T.activePlayerIds.includes(d),I.timedPass=f.timedPass?JSON.parse(JSON.stringify(f.timedPass)):void 0):(I.path=[],I.originalPosition={x:I.x,y:I.y},I.speed=100,I.sequenceDelay=0,I.mode="path",I.isLooping=!1,I.timedPass=void 0)}),T.ballState&&(console.log("[loadPlayerDataFromSequence] Restoring ball state from sequence",T.ballState),n.value.x=T.ballState.x,n.value.y=T.ballState.y,n.value.attachedTo=T.ballState.attachedTo?{...T.ballState.attachedTo}:null),console.log("[loadPlayerDataFromSequence] AFTER",{ballPosAfter:{x:n.value.x,y:n.value.y}}))},W=(T,I)=>{c.width=T,c.height=I,c.fieldWidth=T/1.4,c.fieldHeight=I,de(),n.value.x=c.fieldWidth*.5,n.value.y=c.fieldHeight*.5,o.value.forEach(d=>{d.sequences&&d.sequences.forEach(f=>{f.ballState&&f.ballState.x===0&&f.ballState.y===0&&(f.ballState.x=n.value.x,f.ballState.y=n.value.y)})})},de=()=>{c.playerRadius=Math.min(c.width,c.height)*St.PLAYER_RADIUS_RATIO,c.ballRadius=Math.min(c.width,c.height)*St.BALL_RADIUS_RATIO},Pe=()=>{const T=t.value.map(f=>({...f,relativeX:f.x/c.fieldWidth,relativeY:f.y/c.fieldHeight}));u.value=!u.value;const I=c.width/1.4,d=c.height;t.value=T.map(f=>({...f,x:f.relativeX*I,y:f.relativeY*d}))},z=()=>{const T=Date.now(),{width:I,fieldWidth:d,fieldHeight:f}=c,b=(I-d)/2,w=(c.height-f)/2;return[{playerId:"ball",position:{x:n.value.x,y:n.value.y},relativePosition:{x:(n.value.x-b)/d,y:(n.value.y-w)/f},timestamp:T,ballState:{position:{x:n.value.x,y:n.value.y},attachedTo:n.value.attachedTo?{...n.value.attachedTo}:null}},...t.value.map(E=>({playerId:`${E.type}-${E.id}`,position:{x:E.x,y:E.y},relativePosition:{x:(E.x-b)/d,y:(E.y-w)/f},timestamp:T}))]},x=async T=>{try{j();const I={name:T,phases:o.value,players:t.value,ball:n.value,currentPhase:i.value,currentSequence:l.value,canvasConfig:{...c}};return(await fetch("http://localhost:8080/api/plays",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:T,playerStates:z(),gameData:I})})).ok}catch(I){return console.error("Failed to save game state:",I),!1}},pe=()=>{t.value=[],n.value={x:c.fieldWidth*.5,y:c.fieldHeight*.5,attachedTo:null},o.value=[{id:1,name:"Phase 1",playerStates:[],ballState:{x:0,y:0,attachedTo:null},sequences:[{id:1,name:"Sequence 1",activePlayerIds:[],ballEvents:[],isActive:!1,playerData:{},ballState:{x:0,y:0,attachedTo:null},finalPlayerPositions:{},startingPlayerPositions:{}}]}],i.value=1,l.value=1,a.value=!0,r.value=!1,J()};return $(),Xe([t,o,n,i,l],R,{deep:!0}),{players:t,ball:n,phases:o,currentPhase:i,currentSequence:l,isSequenceMode:a,isRecording:r,isFullscreen:u,canvasConfig:c,attackingType:s,currentPhaseData:p,currentSequenceData:v,availableSequences:y,playersWithPaths:P,hasAnyPaths:C,hasAnySequencesInCurrentPhase:L,addPlayer:re,removePlayer:B,updateBallPosition:V,setBallCarrier:k,attachBallToPlayer:ne,detachBall:se,selectPhase:g,addPhase:A,removePhase:M,selectSequence:m,addSequence:D,removeSequence:G,updateCanvasSize:W,toggleFullscreen:Pe,getPlayerStates:z,resetToDefaults:pe,capturePlayerStartingPosition:N,saveGameState:x,clearDraft:J,persistDraft:R,setAttackingType:F,toggleAttackingType:O}}function If(e,t,n,s,o,i){const l=te({isRunning:!1,type:"none",currentStep:0,totalSteps:0}),a=Te(()=>l.value.isRunning),r=Te(()=>l.value.type==="phase"),u=Te(()=>l.value.type==="fullPlay"),c=_=>{let V=0;for(let k=1;k<_.length;k++){const ne=_[k].x-_[k-1].x,se=_[k].y-_[k-1].y;V+=Math.sqrt(ne*ne+se*se)}return V},p=(_,V)=>{const k=[];let ne=0;k.push({..._[0],timestamp:0});for(let se=1;se<_.length;se++){const g=_[se-1],A=_[se],M=A.x-g.x,j=A.y-g.y,Z=Math.sqrt(M*M+j*j);ne+=Z;const m=c(_),D=ne/m*V;k.push({x:A.x,y:A.y,timestamp:D})}return k},v=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`ball_evt_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,y="easeOutCubic",P=(_,V,k,ne)=>{var se,g,A,M;return{id:v(),type:k.eventType??"pass",fromPlayerId:((se=k.fromPlayer)==null?void 0:se.id)??null,fromPlayerType:((g=k.fromPlayer)==null?void 0:g.type)??null,toPlayerId:((A=k.toPlayer)==null?void 0:A.id)??null,toPlayerType:((M=k.toPlayer)==null?void 0:M.type)??null,startPosition:{..._},endPosition:{...V},startTimestamp:Date.now(),durationMs:ne,easing:k.easing??y}},C=(_,V)=>e.value.find(k=>k.type===_&&k.id===V)||null,L=()=>{const _=t.value.attachedTo;return _?C(_.type,_.id):null},R=_=>_.fromPlayerId===void 0||_.fromPlayerType===void 0?null:C(_.fromPlayerType,_.fromPlayerId),$=(_,V={})=>new Promise(k=>{if(!_.path||_.path.length===0||!_.originalPosition||!_.speed){k();return}if(V.hasTimedPass&&!_.timedPass){k();return}_.isAnimating=!0;const ne=Date.now(),se=c(_.path),g=Hl.BASE_SPEED*_.speed/100,A=se/g*1e3,M=p(_.path,A);let j=0,Z=ne;const m=n.value.playerRadius;let D=!1;const G=()=>{const ee=Date.now()-ne;if(ee>=A||j>=M.length-1){_.isAnimating=!1;const W=M[M.length-1];_.x=W.x,_.y=W.y,_.isCarryingBall&&(t.value.x=_.x+m*.8,t.value.y=_.y+m*.4),V.isRecording&&N(!0),k();return}for(;j<M.length-1&&M[j+1].timestamp!==void 0&&ee>=M[j+1].timestamp;)j++;if(V.hasTimedPass&&!D&&_.timedPass&&j>=_.timedPass.pathIndex){const W=R(_.timedPass),de=L();if(!W||de&&de.id===W.id&&de.type===W.type){D=!0;const z=de||W;z&&(z.isCarryingBall=!1);const x=z?O(z):{x:t.value.x,y:t.value.y};F(x,_,{fromPlayer:z??void 0,toPlayer:_,recordEvent:V.isRecording}).then(()=>{_.isCarryingBall=!0})}}if(j<M.length-1){const W=M[j],de=M[j+1];if(W.timestamp!==void 0&&de.timestamp!==void 0){const Pe=(ee-W.timestamp)/(de.timestamp-W.timestamp),z=Math.max(0,Math.min(1,Pe));if(_.x=W.x+(de.x-W.x)*z,_.y=W.y+(de.y-W.y)*z,_.isCarryingBall){const x=_.x+m*.8,pe=_.y+m*.4;j===0&&ee<100&&console.log("[animatePlayerPath] Ball following player",{player:`${_.type}-${_.id}`,playerPos:{x:_.x,y:_.y},ballPos:{x,y:pe}}),t.value.x=x,t.value.y=pe}}}V.isRecording&&Date.now()-Z>100&&(N(V.isRecording),Z=Date.now()),requestAnimationFrame(G)};G()}),J=(_,V)=>{switch(V){case"linear":return _;case"easeOutCubic":default:return 1-Math.pow(1-_,3)}},F=(_,V,k={})=>new Promise(ne=>{console.log("[animateBallPass] START",{fromPos:_,toPlayer:`${V.type}-${V.id}`,toPlayerPos:{x:V.x,y:V.y},currentBallPos:{x:t.value.x,y:t.value.y},options:k}),o(null,{updateTimedPassSource:!1}),k.fromPlayer&&(k.fromPlayer.isCarryingBall=!1);const se=Date.now(),g=k.duration??600,A=k.easing??y,M=O(V);if(console.log("[animateBallPass] Target hand position",M),k.recordEvent&&i){const m=P(_,M,{...k,toPlayer:V},g);i(m)}let j=se;const Z=()=>{const m=Date.now()-se,D=Math.min(m/g,1),G=J(D,A);t.value.x=_.x+(M.x-_.x)*G,t.value.y=_.y+(M.y-_.y)*G,D===0&&console.log("[animateBallPass] First frame",{elapsed:m,progress:D,easeProgress:G,ballPos:{x:t.value.x,y:t.value.y}}),Date.now()-j>100&&(N(!0),j=Date.now()),D<1?requestAnimationFrame(Z):(console.log("[animateBallPass] END",{finalBallPos:{x:t.value.x,y:t.value.y},toPlayer:`${V.type}-${V.id}`}),o(V,{updateTimedPassSource:!1}),N(!0),ne())};Z()}),O=_=>({x:_.x+n.value.playerRadius*.8,y:_.y+n.value.playerRadius*.4}),oe=async(_,V={})=>{if(console.log("[animateBallToPlayer] START",{targetPlayer:`${_.type}-${_.id}`,targetPlayerPos:{x:_.x,y:_.y},currentBallPos:{x:t.value.x,y:t.value.y},ballAttachedTo:t.value.attachedTo}),t.value.attachedTo){const g=e.value.find(A=>A.type===t.value.attachedTo.type&&A.id===t.value.attachedTo.id);if(g&&g!==_){console.log("[animateBallToPlayer] Passing from existing carrier",{fromPlayer:`${g.type}-${g.id}`,fromPlayerPos:{x:g.x,y:g.y}}),await F(O(g),_,{fromPlayer:g,toPlayer:_,recordEvent:V.recordEvent!==!1});return}}const k={x:t.value.x,y:t.value.y},ne=O(_);console.log("[animateBallToPlayer] Moving ball",{currentPos:k,targetPos:ne});const se=Math.hypot(ne.x-k.x,ne.y-k.y);if(console.log("[animateBallToPlayer] Distance to target",se),se<5){console.log("[animateBallToPlayer] Distance < 5, setting carrier immediately"),o(_,{updateTimedPassSource:!1});return}return new Promise(g=>{const A=Date.now(),M=600;let j=A;const Z=()=>{const m=Date.now()-A,D=Math.min(m/M,1),G=1-Math.pow(1-D,3);t.value.x=k.x+(ne.x-k.x)*G,t.value.y=k.y+(ne.y-k.y)*G,D===0&&console.log("[animateBallToPlayer] First frame",{ballPos:{x:t.value.x,y:t.value.y}}),Date.now()-j>100&&(N(!0),j=Date.now()),D<1?requestAnimationFrame(Z):(console.log("[animateBallToPlayer] END",{finalBallPos:{x:t.value.x,y:t.value.y}}),o(_,{updateTimedPassSource:!1}),N(!0),g())};Z()})},re=()=>{e.value.forEach(_=>{_.isLooping&&(_.isLooping=!1,_.loopStartTime=void 0,_.originalPosition&&(_.x=_.originalPosition.x,_.y=_.originalPosition.y))})},B=async(_,V,k,ne=!1,se=!1)=>{var m;console.log("[executeSequence] START",{sequenceName:_.name,ballPosAtStart:{x:t.value.x,y:t.value.y},ballAttachedTo:t.value.attachedTo,activePlayerIds:_.activePlayerIds,isMultiSequenceExecution:ne,isRecording:se});const g=_.activePlayerIds.length>0,A=_.ballEvents&&_.ballEvents.length>0;if(!g&&!A){console.log("[executeSequence] No active players or ball events, exiting");return}if(l.value.isRunning=!0,se&&N(!0),!g&&A){for(const D of _.ballEvents){const G=V.find(W=>W.id===D.fromPlayerId),ee=V.find(W=>W.id===D.toPlayerId);if(ee){const W=D.startPosition||(G?{x:G.x,y:G.y}:{x:t.value.x,y:t.value.y});await F(W,ee,{recordEvent:!1,duration:D.durationMs,easing:D.easing}),se&&N(!0),await new Promise(de=>setTimeout(de,500))}}l.value.isRunning=!1;return}const M=V.filter(D=>{const G=`${D.type}-${D.id}`;return _.activePlayerIds.includes(G)&&D.path&&D.path.length>0});if(M.length===0){l.value.isRunning=!1;return}if(M.forEach(D=>{D.originalPosition&&(D.x=D.originalPosition.x,D.y=D.originalPosition.y)}),V.forEach(D=>{D.isCarryingBall=!1}),console.log("[executeSequence] Ball state restoration check",{hasBallState:!!_.ballState,ballStateAttachedTo:(m=_.ballState)==null?void 0:m.attachedTo,currentBallPos:{x:t.value.x,y:t.value.y},currentBallAttachedTo:t.value.attachedTo,isMultiSequenceExecution:ne}),_.ballState&&_.ballState.attachedTo){const D=V.find(ee=>{var W,de;return ee.type===((W=_.ballState.attachedTo)==null?void 0:W.type)&&ee.id===((de=_.ballState.attachedTo)==null?void 0:de.id)}),G=t.value.attachedTo?V.find(ee=>{var W,de;return ee.type===((W=t.value.attachedTo)==null?void 0:W.type)&&ee.id===((de=t.value.attachedTo)==null?void 0:de.id)}):null;D&&D!==G?ne?(console.log("[executeSequence] Multi-sequence: Animating ball from current to saved carrier",{from:G?`${G.type}-${G.id}`:"detached",to:`${D.type}-${D.id}`}),await oe(D,{recordEvent:se}),o(D,{updateTimedPassSource:!1}),se&&N(!0)):(console.log("[executeSequence] Single sequence: Setting ball carrier directly (no animation)",{to:`${D.type}-${D.id}`}),o(D,{updateTimedPassSource:!1}),t.value.x=D.x+n.value.playerRadius*.8,t.value.y=D.y+n.value.playerRadius*.4):console.log("[executeSequence] Ball already with correct carrier, no action needed")}let j=t.value.attachedTo?V.find(D=>{var G,ee;return D.type===((G=t.value.attachedTo)==null?void 0:G.type)&&D.id===((ee=t.value.attachedTo)==null?void 0:ee.id)}):null;j&&(j.isCarryingBall=!0);const Z=M.map(async D=>{var W,de;const G=D.sequenceDelay||0;G>0&&await new Promise(Pe=>setTimeout(Pe,G)),c(D.path),Hl.BASE_SPEED*(D.speed||100)/100;const ee=((W=t.value.attachedTo)==null?void 0:W.type)===D.type&&((de=t.value.attachedTo)==null?void 0:de.id)===D.id;return D.timedPass?$(D,{isRecording:se,hasTimedPass:!0}):ee?(D.isCarryingBall=!0,$(D,{isRecording:se})):$(D,{isRecording:se})});await Promise.all(Z),M.forEach(D=>{if(D.path&&D.path.length>0){const G=D.path[D.path.length-1];D.x=G.x,D.y=G.y}}),se&&N(!0),l.value.isRunning=!1},N=_=>{if(!_)return;const V=Date.now(),k=n.value.width,ne=n.value.height,se=n.value.fieldWidth,g=n.value.fieldHeight,A=(k-se)/2,M=(ne-g)/2,j=[{playerId:"ball",position:{x:t.value.x,y:t.value.y},relativePosition:{x:(t.value.x-A)/se,y:(t.value.y-M)/g},timestamp:V,ballState:{position:{x:t.value.x,y:t.value.y},attachedTo:t.value.attachedTo?{...t.value.attachedTo}:null}},...e.value.map(Z=>({playerId:`${Z.type}-${Z.id}`,position:{x:Z.x,y:Z.y},relativePosition:{x:(Z.x-A)/se,y:(Z.y-M)/g},timestamp:V}))];s("update:playerStates",j)};return{animationState:l,isPlayRunning:a,isRunningCurrentPhase:r,isRunningFullPlay:u,animatePlayerPath:$,animateBallPass:F,animateBallToPlayer:oe,stopAllPlayerLoops:re,executeSequence:B,calculatePathLength:c,emitPlayerStates:N}}const sn=Fr("plays",()=>{const e=te([]),t=()=>{try{const r=localStorage.getItem("squiggle_plays");if(r){const u=JSON.parse(r);e.value=Array.isArray(u)?u.map(c=>({...c,ballEvents:Array.isArray(c.ballEvents)?c.ballEvents:[]})):[]}}catch(r){console.error("Failed to load plays from local storage:",r),e.value=[]}},n=()=>{try{localStorage.setItem("squiggle_plays",JSON.stringify(e.value))}catch(r){throw r}},s=r=>{const u={id:`play_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:r.name,createdAt:new Date().toISOString(),playerStates:r.playerStates,ballEvents:r.ballEvents},c=[...e.value,u],p=JSON.stringify(c);try{return localStorage.setItem("squiggle_plays",p),e.value=c,u}catch(v){const y=(v==null?void 0:v.name)||"";throw y==="QuotaExceededError"||y==="NS_ERROR_DOM_QUOTA_REACHED"||y==="SecurityError"?new Error("STORAGE_QUOTA_EXCEEDED"):v instanceof Error?v:new Error("Failed to save play")}},o=()=>e.value,i=r=>e.value.find(u=>u.id===r)||null,l=r=>{const u=e.value.findIndex(c=>c.id===r);if(u!==-1){e.value.splice(u,1);try{n()}catch(c){console.error("Failed to persist deletion:",c)}}},a=()=>{e.value=[],localStorage.removeItem("squiggle_plays")};return t(),{plays:e,createPlay:s,listPlays:o,getPlay:i,deletePlay:l,clearPlays:a}}),zs={async createPlay(e){const t=sn();try{return t.createPlay(e)}catch(n){throw new Error(n instanceof Error?n.message:"Failed to create play")}},async listPlays(){const e=sn();try{return e.listPlays()}catch(t){throw new Error(t instanceof Error?t.message:"Failed to fetch plays")}},async getPlay(e){const t=sn();try{const n=t.getPlay(e);if(!n)throw new Error("Play not found");return n}catch(n){throw new Error(n instanceof Error?n.message:"Failed to fetch play")}},async deletePlay(e){const t=sn();try{t.deletePlay(e)}catch(n){throw new Error(n instanceof Error?n.message:"Failed to delete play")}},async exportPlays(){const t=sn().listPlays();if(t.length===0)throw new Error("No plays to export");const n={version:"1.0",exportedAt:new Date().toISOString(),plays:t,metadata:{totalPlays:t.length,appName:"Squiggle Rugby Play Designer"}},s=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),o=URL.createObjectURL(s),i=document.createElement("a");i.href=o;const l=new Date,a=r=>String(r).padStart(2,"0");i.download=`squiggle-plays-${l.getFullYear()}${a(l.getMonth()+1)}${a(l.getDate())}-${a(l.getHours())}${a(l.getMinutes())}${a(l.getSeconds())}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)},async importPlays(e){const t=sn();return new Promise((n,s)=>{const o=new FileReader;o.onload=i=>{var l;try{const a=(l=i.target)==null?void 0:l.result,r=JSON.parse(a);if(!r.plays||!Array.isArray(r.plays))throw new Error("Invalid file format: missing plays array");if(r.plays.length===0)throw new Error("No plays found in the file");let u=0;const c=[];r.plays.forEach((p,v)=>{try{if(!p.name||typeof p.name!="string"){c.push(`Play ${v+1}: Missing or invalid name`);return}if(!p.playerStates||!Array.isArray(p.playerStates)){c.push(`Play ${v+1}: Missing or invalid player states`);return}const y=p.playerStates.filter(L=>L&&L.playerId&&L.position&&typeof L.position.x=="number"&&typeof L.position.y=="number"&&L.timestamp);if(y.length===0){c.push(`Play ${v+1}: No valid player states found`);return}const P=Array.isArray(p.ballEvents)?p.ballEvents.filter(L=>L&&typeof L.id=="string"&&typeof L.startTimestamp=="number"&&L.startPosition&&typeof L.startPosition.x=="number"&&typeof L.startPosition.y=="number"&&L.endPosition&&typeof L.endPosition.x=="number"&&typeof L.endPosition.y=="number"&&typeof L.durationMs=="number"&&typeof L.type=="string"):[],C={name:p.name,playerStates:y,ballEvents:P};t.createPlay(C),u++}catch(y){c.push(`Play ${v+1}: ${y instanceof Error?y.message:"Unknown error"}`)}}),n({success:u,errors:c})}catch(a){s(new Error(`Failed to parse JSON file: ${a instanceof Error?a.message:"Unknown error"}`))}},o.onerror=()=>{s(new Error("Failed to read file"))},o.readAsText(e)})},async clearAllPlays(){sn().clearPlays()}},$f={class:"canvas-wrapper"},Ff={class:"zoom-pan-content"},qf={class:"control-section"},Lf={class:"zoom-controls"},Bf=["disabled"],Nf={class:"zoom-display"},Hf=["disabled"],Wf={class:"control-section"},Vf=ut({__name:"RugbyPitch",props:{zoom:{default:1},panMode:{type:Boolean,default:!1},zoomMin:{default:.5},zoomMax:{default:2},zoomStep:{default:.1},isRecording:{type:Boolean,default:!1},playbackData:{default:()=>[]}},emits:["update:playerStates","update:is-recording","update:zoom","update:panMode","record:ball-event","open-player-menu"],setup(e,{expose:t,emit:n}){const s=e,o=n,i=Of(),l=S=>{s.isRecording&&o("record:ball-event",S)},a=If(i.players,i.ball,Te(()=>i.canvasConfig),(S,...H)=>{S==="update:playerStates"?o("update:playerStates",H[0]):S==="update:is-recording"&&o("update:is-recording",H[0])},i.setBallCarrier,l),r=Fn({showAttackingCount:!1,showDefensiveCount:!1,selectedPlayer:null,selectedBall:!1,isDragging:!1,isDrawingPath:!1,currentPath:[],dragOffset:{x:0,y:0},isSettingTimedPass:!1}),u=Fn({showPlayerDialog:!1,playerDialogType:"attacking",playerDialogCount:1}),c=te(null),p=te(null),v=S=>i.setAttackingType(S),y=te(!1),P=te(!1),C=te(null),L=Te(()=>({...i,isMinimized:!1,hasAnySequencesInCurrentPhase:i.hasAnySequencesInCurrentPhase.value,hasAnyPaths:i.hasAnyPaths.value,availableSequences:i.availableSequences.value,currentPhaseData:i.currentPhaseData.value,currentSequenceData:i.currentSequenceData.value,playersWithPaths:i.playersWithPaths.value})),R=()=>{const S={};return i.players.value.forEach(H=>{const Q=`${H.type}-${H.id}`,ce=H.playStartPosition||H.originalPosition;ce&&(S[Q]={x:ce.x,y:ce.y})}),S},$=S=>({x:S.x+i.canvasConfig.playerRadius*.8,y:S.y+i.canvasConfig.playerRadius*.4}),J=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`seq_evt_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,F=(S,H)=>{i.players.value.forEach(Q=>{var me;const ce=`${Q.type}-${Q.id}`;if((me=S.startingPlayerPositions)!=null&&me[ce]){const ue=S.startingPlayerPositions[ce];Q.x=ue.x,Q.y=ue.y}else H[ce]&&(Q.x=H[ce].x,Q.y=H[ce].y)})},O=S=>{if(!S.ballState){console.log("[resetSequenceBallState] No saved ball state");return}if(console.log("[resetSequenceBallState] Restoring ball state",S.ballState),i.ball.value.x=S.ballState.x,i.ball.value.y=S.ballState.y,S.ballState.attachedTo){const H=i.players.value.find(Q=>{var ce,me;return Q.type===((ce=S.ballState.attachedTo)==null?void 0:ce.type)&&Q.id===((me=S.ballState.attachedTo)==null?void 0:me.id)});H?i.setBallCarrier(H,{updateTimedPassSource:!1}):(console.log("[resetSequenceBallState] Carrier not found, ball detached"),i.ball.value.attachedTo=null)}else i.ball.value.attachedTo=null},oe=()=>{const S=Math.min(s.zoom+s.zoomStep,s.zoomMax);o("update:zoom",S)},re=()=>{const S=Math.max(s.zoom-s.zoomStep,s.zoomMin);o("update:zoom",S)},B=()=>{o("update:panMode",!s.panMode)},N=S=>{P.value&&C.value&&!C.value.contains(S.target)&&(P.value=!1)},_=S=>{u.showPlayerDialog=!0,u.playerDialogType=S,u.playerDialogCount=1},V=()=>{if(!s.isRecording&&i.isSequenceMode.value&&i.availableSequences.value.length>0){k();return}const S=!s.isRecording;if(o("update:is-recording",S),S){const H=i.getPlayerStates();o("update:playerStates",H)}},k=async()=>{if(a.isRunningFullPlay.value||s.isRecording)return;o("update:is-recording",!0);const S=i.getPlayerStates();o("update:playerStates",S);try{await ne({recordStates:!0})}finally{o("update:is-recording",!1)}},ne=async({recordStates:S=!1}={})=>{var me;const H=()=>{if(!S)return;const ue=i.getPlayerStates();o("update:playerStates",ue)};a.stopAllPlayerLoops();const Q=[...i.phases.value].sort((ue,be)=>ue.id-be.id).filter(ue=>ue.sequences&&ue.sequences.length>0),ce=R();for(let ue=0;ue<Q.length;ue++){const xe=[...Q[ue].sequences||[]].sort((Ie,Ne)=>Ie.id-Ne.id);for(const Ie of xe)F(Ie,ce),Ie.playerData&&Object.entries(Ie.playerData).forEach(([Ne,Et])=>{const[oc,ic]=Ne.split("-"),Pn=i.players.value.find(Qi=>Qi.type===oc&&Qi.id===parseInt(ic));Pn&&(Pn.path=Et.path?[...Et.path]:[],Pn.speed=Et.speed,Pn.sequenceDelay=Et.sequenceDelay,Pn.mode=Et.mode,Pn.timedPass=Et.timedPass?JSON.parse(JSON.stringify(Et.timedPass)):void 0,Pn.isLooping=Ie.activePlayerIds.includes(Ne))}),(me=c.value)==null||me.redraw(),H(),await a.executeSequence(Ie,i.players.value,()=>{var Ne;return(Ne=c.value)==null?void 0:Ne.redraw()},!0,S),H(),await new Promise(Ne=>setTimeout(Ne,800)),H();ue===Q.length-1||(await new Promise(Ie=>setTimeout(Ie,1500)),H())}},se=async()=>{const S=i.currentPhaseData.value;if(!S||!S.sequences||S.sequences.length===0)return;a.stopAllPlayerLoops();const H=[...S.sequences].sort((ue,be)=>ue.id-be.id),Q=H[0];i.selectSequence(Q.id);const ce=R();let me=0;try{for(const ue of H)me++,F(ue,ce),ue.playerData&&Object.entries(ue.playerData).forEach(([be,xe])=>{const[Re,Ie]=be.split("-"),Ne=i.players.value.find(Et=>Et.type===Re&&Et.id===parseInt(Ie));Ne&&(Ne.path=xe.path?[...xe.path]:[],Ne.speed=xe.speed,Ne.sequenceDelay=xe.sequenceDelay,Ne.mode=xe.mode,Ne.timedPass=xe.timedPass?JSON.parse(JSON.stringify(xe.timedPass)):void 0,Ne.isLooping=ue.activePlayerIds.includes(be))}),await a.executeSequence(ue,i.players.value,()=>{var be;return(be=c.value)==null?void 0:be.redraw()},!0),await new Promise(be=>setTimeout(be,500))}finally{}},g=async()=>{await ne()},A=()=>{var H;const S=i.currentSequenceData.value;S&&(i.players.value.forEach(Q=>{if(Q.path&&Q.path.length>0){Q.isLooping=!0;const ce=`${Q.type}-${Q.id}`;S.activePlayerIds.includes(ce)||S.activePlayerIds.push(ce),S.playerData[ce]={path:Q.path?[...Q.path]:[],originalPosition:Q.originalPosition||{x:Q.x,y:Q.y},speed:Q.speed||100,sequenceDelay:Q.sequenceDelay||0,mode:Q.mode||"drag",position:{x:Q.x,y:Q.y},timedPass:Q.timedPass?JSON.parse(JSON.stringify(Q.timedPass)):void 0}}}),(H=c.value)==null||H.redraw())},M=()=>{var H;const S=i.currentSequenceData.value;S&&(i.players.value.forEach(Q=>{Q.isLooping=!1;const ce=`${Q.type}-${Q.id}`,me=S.activePlayerIds.indexOf(ce);me>-1&&S.activePlayerIds.splice(me,1),delete S.playerData[ce]}),(H=c.value)==null||H.redraw())},j=S=>{i.selectPhase(S)},Z=()=>{i.addPhase()},m=S=>{i.removePhase(S)},D=S=>{i.selectSequence(S)},G=()=>{i.addSequence()},ee=S=>{i.removeSequence(S)},W=async S=>{var ce;const H=i.availableSequences.value.find(me=>me.id===S);if(!H)return;a.stopAllPlayerLoops();const Q=R();F(H,Q),H.playerData&&Object.entries(H.playerData).forEach(([me,ue])=>{const[be,xe]=me.split("-"),Re=i.players.value.find(Ie=>Ie.type===be&&Ie.id===parseInt(xe));Re&&(Re.path=ue.path?[...ue.path]:[],Re.speed=ue.speed,Re.sequenceDelay=ue.sequenceDelay,Re.mode=ue.mode,Re.timedPass=ue.timedPass?JSON.parse(JSON.stringify(ue.timedPass)):void 0,Re.isLooping=H.activePlayerIds.includes(me))}),(ce=c.value)==null||ce.redraw(),await a.executeSequence(H,i.players.value,()=>{var me;return(me=c.value)==null?void 0:me.redraw()})},de=()=>{var H;a.stopAllPlayerLoops(),i.players.value.forEach(Q=>{Q.originalPosition&&(Q.x=Q.originalPosition.x,Q.y=Q.originalPosition.y),Q.isLooping=!1});const S=i.currentSequenceData.value;S&&O(S),(H=c.value)==null||H.redraw()},Pe=()=>{var S;y.value=!1,i.resetToDefaults(),(S=c.value)==null||S.redraw()},z=S=>{var Q;if(!S.path||S.path.length===0)return;S.isLooping=!S.isLooping;const H=i.currentSequenceData.value;if(H){const ce=`${S.type}-${S.id}`;if(S.isLooping)H.activePlayerIds.includes(ce)||H.activePlayerIds.push(ce),H.playerData[ce]={path:S.path?[...S.path]:[],originalPosition:S.originalPosition||{x:S.x,y:S.y},speed:S.speed||100,sequenceDelay:S.sequenceDelay||0,mode:S.mode||"drag",position:{x:S.x,y:S.y},timedPass:S.timedPass?JSON.parse(JSON.stringify(S.timedPass)):void 0};else{S.timedPass=void 0;const me=H.activePlayerIds.indexOf(ce);me>-1&&H.activePlayerIds.splice(me,1),delete H.playerData[ce]}}(Q=c.value)==null||Q.redraw()},x=(S,H)=>{const Q=H.target.getBoundingClientRect(),ce=i.canvasConfig.width/Q.width,me=i.canvasConfig.height/Q.height,ue=(H.clientX-Q.left)*ce,be=(H.clientY-Q.top)*me;if(i.players.value.forEach(xe=>xe.isSelected=!1),r.selectedPlayer=S,S.isSelected=!0,r.selectedBall=!1,S.mode==="path"){if(S.path&&S.path.length>0){r.isDrawingPath=!1,r.isDragging=!1;return}r.isDragging||(r.isDragging=!0,r.isDrawingPath=!0,S.path||(S.path=[]),S.originalPosition={x:S.x,y:S.y},r.currentPath=[{x:S.x,y:S.y}],r.dragOffset={x:ue-S.x,y:be-S.y})}else r.isDragging||(r.isDragging=!0,r.isDrawingPath=!1,r.dragOffset={x:ue-S.x,y:be-S.y})},pe=S=>{S.mode||(S.mode="path"),S.speed||(S.speed=100),S.pathVisible===void 0&&(S.pathVisible=!0),S.originalPosition||(S.originalPosition={x:S.x,y:S.y}),i.players.value.forEach(H=>H.isSelected=!1),S.isSelected=!0,r.selectedPlayer=S,o("open-player-menu")},T=S=>{i.setBallCarrier(S)},I=(S,H)=>{pe(S)},d=(S,H)=>{pe(S)},f=(S,H)=>{r.selectedBall=!0,r.selectedPlayer=null,r.isDragging=!0;const Q=H.target.getBoundingClientRect(),ce=i.canvasConfig.width/Q.width,me=i.canvasConfig.height/Q.height,ue=(H.clientX-Q.left)*ce,be=(H.clientY-Q.top)*me;r.dragOffset={x:ue-S.x,y:be-S.y}},b=(S,H)=>{var Q;if(r.isSettingTimedPass&&r.selectedPlayer&&r.selectedPlayer.path){const ce=r.selectedPlayer.path;let me=0,ue=1/0;for(let be=0;be<ce.length;be++){const xe=ce[be].x-S.x,Re=ce[be].y-S.y,Ie=Math.sqrt(xe*xe+Re*Re);Ie<ue&&(ue=Ie,me=be)}if(ue<30){const be=i.ball.value.attachedTo,xe=be?{id:be.id,type:be.type}:null;if(!xe){console.warn("Attach the ball to the intended passer before setting a timed pass.");return}const Re={pathIndex:me,position:{x:ce[me].x,y:ce[me].y},fromPlayerId:xe==null?void 0:xe.id,fromPlayerType:xe==null?void 0:xe.type},Ie=i.currentSequenceData.value;if(Ie){const Ne=`${r.selectedPlayer.type}-${r.selectedPlayer.id}`;Ie.playerData[Ne]||(Ie.playerData[Ne]={path:r.selectedPlayer.path?[...r.selectedPlayer.path]:[],originalPosition:r.selectedPlayer.originalPosition||{x:r.selectedPlayer.x,y:r.selectedPlayer.y},speed:r.selectedPlayer.speed||100,sequenceDelay:r.selectedPlayer.sequenceDelay||0,mode:r.selectedPlayer.mode||"drag",position:{x:r.selectedPlayer.x,y:r.selectedPlayer.y},timedPass:void 0}),Ie.playerData[Ne].timedPass=JSON.parse(JSON.stringify(Re))}r.selectedPlayer.timedPass=Re,r.isSettingTimedPass=!1,(Q=c.value)==null||Q.redraw()}return}i.players.value.forEach(ce=>ce.isSelected=!1),r.selectedPlayer=null,r.selectedBall=!1,r.isSettingTimedPass=!1},w=(S,H)=>{if(r.isDrawingPath&&S.mode==="path"){const Q={x:H.x,y:H.y},ce=r.currentPath[r.currentPath.length-1];(!ce||Math.sqrt(Math.pow(Q.x-ce.x,2)+Math.pow(Q.y-ce.y,2))>15)&&r.currentPath.push(Q)}else S.x=H.x-r.dragOffset.x,S.y=H.y-r.dragOffset.y,p.value=S,S.isCarryingBall&&i.setBallCarrier(S,{updateTimedPassSource:!a.isPlayRunning.value});if(s.isRecording){const Q=i.getPlayerStates();o("update:playerStates",Q)}},E=(S,H)=>{i.updateBallPosition({x:H.x-r.dragOffset.x,y:H.y-r.dragOffset.y});const Q=i.canvasConfig.playerRadius*1.2;let ce=null,me=1/0;if(i.players.value.forEach(ue=>{const be=ue.x-S.x,xe=ue.y-S.y,Re=Math.sqrt(be*be+xe*xe);Re<me&&Re<Q&&(me=Re,ce=ue)}),ce?i.attachBallToPlayer(ce,{updateTimedPassSource:!a.isPlayRunning.value}):i.detachBall({updateTimedPassSource:!a.isPlayRunning.value}),s.isRecording){const ue=i.getPlayerStates();o("update:playerStates",ue)}},q=(S,H)=>{if(S.path=[...H],S.timedPass=void 0,H.length>0){S.isLooping=!0;const Q=i.currentSequenceData.value;if(Q){const ce=`${S.type}-${S.id}`;Q.activePlayerIds.includes(ce)||Q.activePlayerIds.push(ce),Q.playerData[ce]={path:[...H],originalPosition:S.originalPosition||{x:S.x,y:S.y},speed:S.speed||100,sequenceDelay:S.sequenceDelay||0,mode:S.mode||"drag",position:{x:S.x,y:S.y},timedPass:S.timedPass?JSON.parse(JSON.stringify(S.timedPass)):void 0}}}r.currentPath=[],r.isDrawingPath=!1,r.selectedPlayer=null},U=S=>{var ue;const{type:H,count:Q,formation:ce}=S,me=Dn(i.canvasConfig.width,i.canvasConfig.height);for(let be=0;be<Q;be++){const xe=ce.positions[be],Re={x:me.toAbsoluteX(xe.x),y:me.toAbsoluteY(xe.y)};i.addPlayer(H,Re)}u.showPlayerDialog=!1,(ue=c.value)==null||ue.redraw()},Y=()=>{u.showPlayerDialog=!1},X=S=>{var H;r.selectedPlayer&&(r.selectedPlayer.mode=S,S==="path"&&!r.selectedPlayer.path&&(r.selectedPlayer.path=[]),(H=c.value)==null||H.redraw())},K=S=>{var H;r.selectedPlayer&&(r.selectedPlayer.speed=S,(H=c.value)==null||H.redraw())},fe=S=>{var H;r.selectedPlayer&&(r.selectedPlayer.sequenceDelay=S,(H=c.value)==null||H.redraw())},ie=()=>{var S;r.selectedPlayer&&(r.selectedPlayer.sequenceDelay=0,(S=c.value)==null||S.redraw())},he=()=>{var S;r.selectedPlayer&&(r.selectedPlayer.path=[],r.selectedPlayer.mode="drag",r.selectedPlayer.timedPass=void 0,(S=c.value)==null||S.redraw())},ve=()=>{var S;r.selectedPlayer&&(r.selectedPlayer.pathVisible=r.selectedPlayer.pathVisible===!1,(S=c.value)==null||S.redraw())},ye=()=>{if(r.selectedPlayer&&r.selectedPlayer.path&&r.selectedPlayer.path.length>0){const H=i.players.value.filter(Q=>Q.isLooping).find(Q=>{var ce,me;return Q.timedPass&&Q.id!==((ce=r.selectedPlayer)==null?void 0:ce.id)&&Q.type===((me=r.selectedPlayer)==null?void 0:me.type)});if(H){alert(`Only one timed pass is allowed per sequence. Player ${H.assignedNumber||H.id} already has a timed pass set. Clear it first to set a new one.`);return}r.isSettingTimedPass=!0}},ke=()=>{var S;r.selectedPlayer&&(r.selectedPlayer.timedPass=void 0,(S=c.value)==null||S.redraw())},we=()=>{r.isDragging&&(r.isDragging=!1,!r.isDrawingPath&&p.value&&i.capturePlayerStartingPosition(p.value),p.value=null)},He=S=>{if(!/^[0-9]$/.test(S.key))return;const H=parseInt(S.key),Q=i.attackingType.value,me=i.players.value.filter(ue=>ue.assignedNumber===H&&ue.type===Q).sort((ue,be)=>ue.id-be.id)[0]||i.players.value.find(ue=>ue.assignedNumber===H);if(me){const ue=i.ball.value.attachedTo?i.players.value.find(be=>{var xe,Re;return be.type===((xe=i.ball.value.attachedTo)==null?void 0:xe.type)&&be.id===((Re=i.ball.value.attachedTo)==null?void 0:Re.id)}):null;if(a.animateBallToPlayer(me),ue&&ue!==me){const be=i.currentSequenceData.value;if(be){be.ballEvents||(be.ballEvents=[]);const xe=$(ue),Re=$(me),Ie={id:J(),type:"pass",fromPlayerId:ue.id,fromPlayerType:ue.type,toPlayerId:me.id,toPlayerType:me.type,startPosition:xe,endPosition:Re,startTimestamp:Date.now(),durationMs:600,easing:"easeOutCubic"};be.ballEvents.push(Ie),i.setBallCarrier(me),be.ballState=JSON.parse(JSON.stringify(i.ball.value))}}S.preventDefault()}},Ve=async()=>{const S=prompt("Enter a name for this play:");if(!S)return;const H=await i.saveGameState(S);alert(H?"Play saved successfully!":"Failed to save play. Please try again.")};Jt(()=>{window.addEventListener("resize",Je),window.addEventListener("keydown",He),window.addEventListener("mouseup",we),document.addEventListener("click",N),Ye(),i.isSequenceMode.value&&i.availableSequences.value.length===0&&i.addSequence(),Xe(()=>s.playbackData,S=>{S.length>0?Ze():et()},{immediate:!0})}),Bn(()=>{window.removeEventListener("resize",Je),window.removeEventListener("keydown",He),window.removeEventListener("mouseup",we),document.removeEventListener("click",N),et(),a.stopAllPlayerLoops()});const Je=()=>{Ye()},Ye=()=>{var Re,Ie,Ne;const S=(Ie=(Re=c.value)==null?void 0:Re.$el)==null?void 0:Ie.parentElement;if(!S)return;const H=S.clientWidth,Q=70/100;let ce,me;const ue=Math.min(H-40,1e3);ce=Math.round(ue*1.4);const be=Math.round(ue/Q),xe=Math.round(ue*.2);me=be+xe*2,i.updateCanvasSize(ce,me),(Ne=c.value)==null||Ne.redraw()};let Ge=null,Pt=0;const Ze=()=>{s.playbackData.length!==0&&(i.resetToDefaults(),Pt=0,Ge=window.setInterval(()=>{if(Pt>=s.playbackData.length){et();return}s.playbackData[Pt],Pt++},100))},et=()=>{Ge&&(clearInterval(Ge),Ge=null),Pt=0};return t({openAddPlayersDialog:S=>{_(S)},setAttacking:v,toggleRecording:()=>{V()},saveCurrentPlay:()=>{Ve()},openClearPlayConfirm:()=>{y.value=!0},gameState:i,animationState:a,computedGameState:L,uiState:r,handleRunCurrentPhase:se,handleRunFullPlay:g,handleSequenceRun:W,handleSequenceReset:de,handleRecordFullPlay:k,handlePhaseSelect:j,handlePhaseAdd:Z,handlePhaseRemove:m,handleSequenceSelect:D,handleSequenceAdd:G,handleSequenceRemove:ee,handlePlayerToggleLoop:z,handleSelectAllPlayers:A,handleDeselectAllPlayers:M,handlePlayerOptionsMode:X,handlePlayerOptionsPathVisibility:ve,handlePlayerOptionsSpeed:K,handlePlayerOptionsDelay:fe,handlePlayerOptionsDelayReset:ie,handlePlayerOptionsClearPath:he,handleSetTimedPass:ye,handleClearTimedPass:ke}),(S,H)=>(le(),ae("div",{class:Me(["rugby-pitch-container",{minimized:!1}])},[_e(Df,{"show-attacking-count":u.showPlayerDialog&&u.playerDialogType==="attacking","show-defensive-count":u.showPlayerDialog&&u.playerDialogType==="defensive","selected-attacking-count":u.playerDialogCount,"selected-defensive-count":u.playerDialogCount,"existing-players":tn(i).players.value,"canvas-config":tn(i).canvasConfig,onCloseDialog:Y,onConfirmPlayerCount:U},null,8,["show-attacking-count","show-defensive-count","selected-attacking-count","selected-defensive-count","existing-players","canvas-config"]),h("div",$f,[h("div",{class:"zoom-pan-container",ref_key:"zoomPanContainer",ref:C},[h("button",{class:Me(["zoom-pan-trigger",{active:P.value}]),onClick:H[0]||(H[0]=Q=>P.value=!P.value),title:"Zoom & Pan Controls"},H[3]||(H[3]=[h("svg",{width:"18",height:"18",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[h("circle",{cx:"7",cy:"7",r:"5",stroke:"currentColor","stroke-width":"1.5"}),h("path",{d:"M11 11L14 14",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1)]),2),_e(hn,{name:"popup"},{default:Yt(()=>[P.value?(le(),ae("div",{key:0,class:"zoom-pan-menu",onClick:H[1]||(H[1]=Rr(()=>{},["stop"]))},[h("div",Ff,[h("div",qf,[H[6]||(H[6]=h("div",{class:"section-label"},"Zoom",-1)),h("div",Lf,[h("button",{class:"control-btn",onClick:re,disabled:s.zoom<=s.zoomMin,title:"Zoom Out"},H[4]||(H[4]=[h("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[h("path",{d:"M4 8H12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)]),8,Bf),h("div",Nf,Ee(Math.round(s.zoom*100))+"% ",1),h("button",{class:"control-btn",onClick:oe,disabled:s.zoom>=s.zoomMax,title:"Zoom In"},H[5]||(H[5]=[h("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[h("path",{d:"M8 4V12M4 8H12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)]),8,Hf)])]),h("div",Wf,[H[8]||(H[8]=h("div",{class:"section-label"},"Pan Mode",-1)),h("button",{class:Me(["pan-toggle-btn",{active:s.panMode}]),onClick:B},[H[7]||(H[7]=h("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[h("path",{d:"M9 3L5 7M5 7L9 11M5 7H15M15 21L19 17M19 17L15 13M19 17H9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),h("span",null,Ee(s.panMode?"Pan On":"Pan Off"),1)],2)])])])):Ce("",!0)]),_:1})],512),_e(Qd,{ref_key:"rugbyCanvas",ref:c,players:tn(i).players.value,ball:tn(i).ball.value,"canvas-config":tn(i).canvasConfig,"ui-state":r,"is-sequence-mode":tn(i).isSequenceMode.value,"is-play-running":tn(a).isPlayRunning.value,"current-path":r.currentPath,"is-drawing-path":r.isDrawingPath,zoom:s.zoom,"pan-mode":s.panMode,onPlayerClick:x,onPlayerDoubleClick:I,onPlayerLongPress:d,onBallClick:f,onCanvasClick:b,onPlayerDrag:w,onBallDrag:E,onPathDraw:q,onAttachBall:T},null,8,["players","ball","canvas-config","ui-state","is-sequence-mode","is-play-running","current-path","is-drawing-path","zoom","pan-mode"])]),_e(Ls,{show:y.value,title:"Start from scratch",message:"Are you sure you want to clear the current play? This will remove players, paths, and sequences for the in-progress play.","confirm-text":"Clear Current Play",onConfirm:Pe,onCancel:H[2]||(H[2]=Q=>y.value=!1)},null,8,["show"])]))}}),jf=vt(Vf,[["__scopeId","data-v-e4597d34"]]),Uf={class:"playback-controls"},zf={class:"control-group"},Yf={class:"icon",viewBox:"0 0 24 24","aria-hidden":"true"},Kf={key:0,d:"M9 3H3v6M15 3h6v6M9 21H3v-6M21 15v6h-6",stroke:"currentColor","stroke-linecap":"round"},Xf=["disabled"],Jf={key:0,class:"icon",viewBox:"0 0 24 24","aria-hidden":"true"},Gf={key:0,class:"pb-timeline"},Zf={class:"pb-timeline__track"},Qf={class:"pb-timeline__labels"},eh={class:"canvas-container"},th=["width","height"],nh=10,sh=ut({__name:"PlaybackViewer",props:{playbackData:{},ballEvents:{}},emits:["sequenceComplete"],setup(e,{emit:t}){const n=e,s=t,o=te(null),i=te(800),l=te(600),a=te(!1),r=te([]),u=te(new Map),c=te({x:0,y:0,attachedTo:null});let p=[],v=0,y=null,P=0;const C=te(null),L=te(0),R=te(!1),$=(m,D="easeOutCubic")=>{switch(D){case"linear":return m;case"easeOutCubic":default:return 1-Math.pow(1-m,3)}},J=()=>{p=[...n.ballEvents??[]].sort((m,D)=>m.startTimestamp-D.startTimestamp),v=0,y=null,P=0},F=(m,D)=>{for(;!y&&v<p.length&&p[v].startTimestamp<=m;)y=p[v++],P=y.startTimestamp+y.durationMs;if(y){if(m>=P){const G={...y.endPosition};return y=null,P=0,F(m,G)}if(m>=y.startTimestamp){const G=Math.max(0,Math.min(1,(m-y.startTimestamp)/y.durationMs)),ee=$(G,y.easing);return{x:y.startPosition.x+(y.endPosition.x-y.startPosition.x)*ee,y:y.startPosition.y+(y.endPosition.y-y.startPosition.y)*ee}}}return D},O=Te(()=>{const m=n.playbackData.length||1;return Math.min(100,Math.max(0,L.value/m*100))}),oe=Te(()=>{if(n.playbackData.length===0)return"0s";const m=n.playbackData[0].timestamp,D=n.playbackData[n.playbackData.length-1].timestamp;return`${Math.max(0,Math.round((D-m)/1e3))}s`}),re=te(!1),B=te(null),N=te([]),_=()=>{const m=window.innerWidth,D=window.innerHeight,G=St.FIELD_RATIO,ee=Math.round(D*.9),W=Math.round(ee*G),de=Math.round(W*1.4);if(de>Math.round(m*.9)){const x=Math.round(m*.9),pe=Math.round(x/1.4),T=Math.round(pe/G),d=Math.round(pe*.2)*2;return{width:x,height:T+d}}const z=Math.round(W*.2)*2;return{width:de,height:ee+z}},V=()=>{if(a.value){const m=_();i.value=Math.round(m.width),l.value=Math.round(m.height)}else{const m=St.FIELD_RATIO,D=Math.round(Math.min(window.innerWidth*.96,1400)),G=Math.round(D/1.4);i.value=D;const ee=Math.round(G*.2),W=Math.round(G/m);l.value=W+ee*2}requestAnimationFrame(se)},k=()=>{a.value=!a.value,V()},ne=()=>{a.value&&V()},se=()=>{if(!o.value)return;const m=o.value.getContext("2d");if(!m)return;const D=window.devicePixelRatio||1;(o.value.width!==Math.floor(i.value*D)||o.value.height!==Math.floor(l.value*D))&&(o.value.width=Math.floor(i.value*D),o.value.height=Math.floor(l.value*D),o.value.style.width=`${Math.round(i.value)}px`,o.value.style.height=`${Math.round(l.value)}px`),m.setTransform(D,0,0,D,0,0),m.clearRect(0,0,i.value,l.value);const G=Dn(i.value,l.value),ee=G.fieldX,W=G.fieldY,de=G.actualFieldWidth,Pe=G.actualFieldHeight,z=G.squareSize,x=G.squareSize;m.fillStyle="#000000",m.fillRect(0,0,i.value,l.value),m.imageSmoothingEnabled=!0,m.imageSmoothingQuality="high";const pe=m.createLinearGradient(0,W,0,W+Pe);pe.addColorStop(0,"#FFFFFF"),pe.addColorStop(1,"#F5F7FA"),m.fillStyle=pe,m.fillRect(ee,W,de,Pe),m.shadowColor="rgba(0, 0, 0, 0.25)",m.shadowBlur=8,m.shadowOffsetY=3,m.strokeStyle="rgba(0, 0, 0, 0.12)",m.lineWidth=2,m.strokeRect(ee+6,W+6,de-12,Pe-12),m.shadowColor="transparent",m.shadowBlur=0,m.shadowOffsetY=0,m.strokeStyle="rgba(0, 0, 0, 0.35)",m.lineWidth=1.5,m.beginPath(),m.setLineDash([20,14]),m.moveTo(ee,W+Pe/2),m.lineTo(ee+de,W+Pe/2),m.stroke(),m.setLineDash([]);const T=Pe*.22;m.beginPath(),m.setLineDash([20,14]),m.moveTo(ee,W+T),m.lineTo(ee+de,W+T),m.moveTo(ee,W+Pe-T),m.lineTo(ee+de,W+Pe-T),m.stroke(),m.setLineDash([]),m.beginPath(),m.lineWidth=2,m.moveTo(ee,W),m.lineTo(ee,W+Pe),m.moveTo(ee+de,W),m.lineTo(ee+de,W+Pe),m.stroke(),m.strokeStyle="rgba(0, 0, 0, 0.08)",m.lineWidth=1;for(let f=ee;f<=ee+de;f+=z)m.beginPath(),m.moveTo(f,W),m.lineTo(f,W+Pe),m.stroke();for(let f=W;f<=W+Pe;f+=x)m.beginPath(),m.moveTo(ee,f),m.lineTo(ee+de,f),m.stroke();r.value.forEach(f=>{const b=`${f.type}-${f.id}`,w=u.value.get(b)||[];for(let E=1;E<w.length;E++){const q=w[E-1],U=w[E];m.beginPath(),m.moveTo(q.x,q.y),m.lineTo(U.x,U.y);const Y=f.type==="attacking"?"#D84B4B":"#3A57A5";m.strokeStyle=Y,m.globalAlpha=E/w.length*.35,m.lineWidth=2,m.stroke(),m.globalAlpha=1}});const I=Math.min(de,Pe)*.02;r.value.forEach(f=>{const b=f.x,w=f.y;m.shadowColor="rgba(0, 0, 0, 0.25)",m.shadowBlur=12,m.shadowOffsetY=4,m.beginPath(),m.arc(b,w+2,I,0,Math.PI*2),m.fillStyle="rgba(0, 0, 0, 0.15)",m.fill();const E=m.createRadialGradient(b-I/2,w-I/2,0,b,w,I);f.type==="attacking"?(E.addColorStop(0,"#F28C8C"),E.addColorStop(.5,"#E46363"),E.addColorStop(1,"#D84B4B")):(E.addColorStop(0,"#6E86C9"),E.addColorStop(.5,"#4867B5"),E.addColorStop(1,"#3A57A5")),m.shadowColor="transparent",m.beginPath(),m.arc(b,w,I,0,Math.PI*2),m.fillStyle=E,m.fill(),m.strokeStyle="rgba(255, 255, 255, 0.98)",m.lineWidth=1.5,m.stroke(),m.textRendering="geometricPrecision",m.imageSmoothingEnabled=!0,m.imageSmoothingQuality="high",m.fillStyle="rgba(255, 255, 255, 1)";const q=Math.max(I*.8,12);if(m.font=`600 ${q}px -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif`,m.textAlign="center",m.textBaseline="middle",m.shadowColor="rgba(0, 0, 0, 0.2)",m.shadowBlur=2,m.shadowOffsetY=1,m.fillText(f.id.toString(),b,w),m.shadowColor="transparent",m.shadowBlur=0,m.shadowOffsetY=0,c.value.attachedTo&&c.value.attachedTo.type===f.type&&c.value.attachedTo.id===f.id){const U=f.type==="attacking"?"rgba(216,75,75,0.9)":"rgba(58,87,165,0.9)";m.shadowColor=U,m.shadowBlur=14,m.beginPath(),m.arc(b,w,I*1.35,0,Math.PI*2),m.strokeStyle=U,m.lineWidth=3,m.stroke(),m.shadowBlur=0}});const d=I*.75;m.shadowColor="rgba(0, 0, 0, 0.25)",m.shadowBlur=12,m.shadowOffsetY=4,m.beginPath(),m.arc(c.value.x,c.value.y+2,d,0,Math.PI*2),m.fillStyle="rgba(0, 0, 0, 0.15)",m.fill(),m.shadowColor="transparent",m.beginPath(),m.arc(c.value.x,c.value.y,d,0,Math.PI*2),m.fillStyle="#FFB300",m.fill(),m.beginPath(),m.arc(c.value.x-d*.35,c.value.y-d*.35,d*.2,0,Math.PI*2),m.fillStyle="rgba(255,255,255,0.25)",m.fill(),m.strokeStyle="rgba(255, 255, 255, 0.98)",m.lineWidth=1.5,m.stroke()},g=()=>{if(n.playbackData.length===0||R.value)return;R.value=!0,r.value=[],u.value.clear();const m=Dn(i.value,l.value);c.value={x:m.fieldX+m.actualFieldWidth*.5,y:m.fieldY+m.actualFieldHeight*.5,attachedTo:null},new Set(n.playbackData.filter(z=>z.playerId!=="ball").map(z=>z.playerId)).forEach(z=>{const[x,pe]=z.split("-"),T=n.playbackData.find(I=>I.playerId===z);if(T){const I=T.relativePosition?m.fieldX+T.relativePosition.x*m.actualFieldWidth:T.position.x,d=T.relativePosition?m.fieldY+T.relativePosition.y*m.actualFieldHeight:T.position.y;r.value.push({x:I,y:d,type:x,id:parseInt(pe)})}}),J();const G=Array.from(new Set(n.playbackData.map(z=>z.timestamp))).sort((z,x)=>z-x);let ee=0;const W=z=>{const x=new Map;return z.forEach(pe=>{if(pe.playerId==="ball")return;const T=pe.relativePosition?pe.relativePosition.x:(pe.position.x-m.fieldX)/m.actualFieldWidth,I=pe.relativePosition?pe.relativePosition.y:(pe.position.y-m.fieldY)/m.actualFieldHeight;x.set(pe.playerId,{rx:T,ry:I,hasRel:!!pe.relativePosition,px:pe.position.x,py:pe.position.y})}),x},de=z=>{if(!z)return{rx:.5,ry:.5,hasRel:!1,px:c.value.x,py:c.value.y};const x=z.relativePosition?z.relativePosition.x:(z.position.x-m.fieldX)/m.actualFieldWidth,pe=z.relativePosition?z.relativePosition.y:(z.position.y-m.fieldY)/m.actualFieldHeight;return{rx:x,ry:pe,hasRel:!!z.relativePosition,px:z.position.x,py:z.position.y}},Pe=z=>{if(z>=G.length-1){A(),s("sequenceComplete");return}const x=G[z],pe=G[z+1],T=n.playbackData.filter(Y=>Y.timestamp===x),I=n.playbackData.filter(Y=>Y.timestamp===pe),d=W(T),f=W(I),b=de(T.find(Y=>Y.playerId==="ball")),w=de(I.find(Y=>Y.playerId==="ball")),E=performance.now(),q=Math.max(1,pe-x),U=Y=>{const X=Math.min(1,(Y-E)/q);r.value.forEach(ye=>{const ke=`${ye.type}-${ye.id}`,we=d.get(ke),He=f.get(ke);if(we&&He){const Ve=we.rx+(He.rx-we.rx)*X,Je=we.ry+(He.ry-we.ry)*X;ye.x=m.fieldX+Ve*m.actualFieldWidth,ye.y=m.fieldY+Je*m.actualFieldHeight;const Ye=`${ye.type}-${ye.id}`,Ge=u.value.get(Ye)||[];Ge.push({x:ye.x,y:ye.y}),Ge.length>nh&&Ge.shift(),u.value.set(Ye,Ge)}});const K=b.rx+(w.rx-b.rx)*X,fe=b.ry+(w.ry-b.ry)*X,ie={x:m.fieldX+K*m.actualFieldWidth,y:m.fieldY+fe*m.actualFieldHeight},he=x+(pe-x)*X,ve=F(he,ie);c.value.x=ve.x,c.value.y=ve.y,requestAnimationFrame(se),X<1&&R.value?C.value=requestAnimationFrame(U):(L.value=n.playbackData.findIndex(ye=>ye.timestamp===pe),ee=z+1,Pe(ee))};C.value=requestAnimationFrame(U)};Pe(0)},A=()=>{C.value&&(cancelAnimationFrame(C.value),C.value=null),R.value=!1,L.value=0,p=[],v=0,y=null,P=0,re.value&&Z()},M=async()=>{if(re.value)return;const m=window.innerHeight>=window.innerWidth;await j({orientation:m?"portrait":"landscape"}),R.value||g()},j=async m=>{if(!o.value)return;const D={w:i.value,h:l.value,fs:a.value};if((m==null?void 0:m.orientation)==="portrait"){a.value=!1;const W=m.width??1080,de=m.height??1920;i.value=W,l.value=de,await new Promise(Pe=>requestAnimationFrame(()=>{se(),Pe(null)}))}const G=o.value.captureStream?o.value.captureStream(60):null;if(!G){alert("Recording not supported in this browser");return}let ee="video/webm;codecs=vp9";(!window.MediaRecorder||!MediaRecorder.isTypeSupported(ee))&&(ee=MediaRecorder.isTypeSupported("video/webm;codecs=vp8")?"video/webm;codecs=vp8":"video/webm"),N.value=[],B.value=new MediaRecorder(G,{mimeType:ee,videoBitsPerSecond:8e6}),B.value.ondataavailable=W=>{W.data&&W.data.size>0&&N.value.push(W.data)},B.value.onstop=()=>{const W=new Date,de=T=>String(T).padStart(2,"0"),Pe=`squiggle-playback-${W.getFullYear()}${de(W.getMonth()+1)}${de(W.getDate())}-${de(W.getHours())}${de(W.getMinutes())}${de(W.getSeconds())}.webm`,z=new Blob(N.value,{type:ee}),x=URL.createObjectURL(z),pe=document.createElement("a");pe.href=x,pe.download=Pe,document.body.appendChild(pe),pe.click(),document.body.removeChild(pe),URL.revokeObjectURL(x),re.value=!1,a.value=D.fs,i.value=D.w,l.value=D.h,requestAnimationFrame(se)},B.value.start(100),re.value=!0},Z=()=>{var m;(m=B.value)==null||m.stop()};return Jt(()=>{window.addEventListener("resize",ne),V();const m=Dn(i.value,l.value);c.value={x:m.fieldX+m.actualFieldWidth*.5,y:m.fieldY+m.actualFieldHeight*.5,attachedTo:null},se()}),Bn(()=>{window.removeEventListener("resize",ne),A()}),Xe(r,()=>{requestAnimationFrame(se)},{deep:!0}),(m,D)=>(le(),ae("div",{class:Me(["playback-viewer",{fullscreen:a.value}])},[h("div",Uf,[h("div",zf,[h("button",{onClick:k,class:Me(["pb-btn ghost minimize",{"fullscreen-btn":a.value}])},[(le(),ae("svg",Yf,[a.value?Ce("",!0):(le(),ae("path",Kf))])),ze(" "+Ee(a.value?"Exit Fullscreen":"Fullscreen"),1)],2),h("button",{onClick:g,class:"pb-btn primary run-sequence",disabled:R.value||n.playbackData.length===0},[R.value?Ce("",!0):(le(),ae("svg",Jf,D[0]||(D[0]=[h("path",{d:"M8 5v14l11-7z",fill:"currentColor"},null,-1)]))),ze(" "+Ee(R.value?"Running...":"Run Sequence"),1)],8,Xf),h("button",{onClick:M,class:"pb-btn primary"},D[1]||(D[1]=[h("svg",{class:"icon",viewBox:"0 0 24 24","aria-hidden":"true"},[h("path",{d:"M12 3v12m0 0l-4-4m4 4l4-4M5 21h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2z",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"})],-1),ze(" Download ")]))])]),n.playbackData.length>0?(le(),ae("div",Gf,[h("div",Zf,[h("div",{class:"pb-timeline__progress",style:ls({width:O.value+"%"})},null,4)]),h("div",Qf,[D[2]||(D[2]=h("span",null,"0s",-1)),h("span",null,Ee(oe.value),1)])])):Ce("",!0),h("div",eh,[h("canvas",{ref_key:"pitchCanvas",ref:o,width:i.value,height:l.value},null,8,th)])],2))}}),oh=vt(sh,[["__scopeId","data-v-ccc453c9"]]),ih={key:1,class:"dialog"},lh={class:"dialog-content"},ah={class:"input-section"},rh={class:"input-hint"},ch={class:"dialog-actions"},uh=["disabled"],dh=ut({__name:"SavePlayDialog",props:{show:{type:Boolean}},emits:["save","cancel"],setup(e,{emit:t}){const n=e,s=t,o=te(""),i=te(null),l=Te(()=>o.value.trim().length>0),a=()=>{l.value&&(s("save",o.value.trim()),r())},r=()=>{o.value="",s("cancel")};return Xe(()=>n.show,u=>{u&&Ot(()=>{var c;(c=i.value)==null||c.focus()})}),(u,c)=>(le(),ae(Ke,null,[u.show?(le(),ae("div",{key:0,class:"dialog-backdrop",onClick:r})):Ce("",!0),u.show?(le(),ae("div",ih,[h("div",lh,[c[3]||(c[3]=h("h3",{class:"dialog-title"}," Save Recorded Play ",-1)),c[4]||(c[4]=h("p",{class:"dialog-description"}," Your play has been recorded successfully! Give it a name to save it to your collection. ",-1)),h("div",ah,[c[1]||(c[1]=h("label",{class:"input-label"},"Play Name",-1)),Js(h("input",{ref_key:"playNameInput",ref:i,"onUpdate:modelValue":c[0]||(c[0]=p=>o.value=p),type:"text",placeholder:"Enter a name for this play...",class:"play-name-input",onKeyup:[fi(a,["enter"]),fi(r,["escape"])],maxlength:"50"},null,544),[[Ar,o.value]]),h("div",rh,Ee(o.value.length)+"/50 characters ",1)]),h("div",ch,[h("button",{class:"dialog-btn cancel",onClick:r}," Cancel "),h("button",{class:"dialog-btn save",onClick:a,disabled:!l.value},c[2]||(c[2]=[h("svg",{class:"icon",viewBox:"0 0 24 24","aria-hidden":"true"},[h("path",{d:"M12 3v12m0 0l-4-4m4 4l4-4M5 21h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2z",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"})],-1),ze(" Save Play ")]),8,uh)])])])):Ce("",!0)],64))}}),fh=vt(dh,[["__scopeId","data-v-703e2531"]]),Li=Fr("session",()=>{const e=typeof window<"u"&&parseInt(localStorage.getItem("squiggle_lastActivity")||"",10)||Date.now(),t=te(e),n=20*60*1e3,s=()=>{t.value=Date.now();try{localStorage.setItem("squiggle_lastActivity",String(t.value))}catch{}},o=Te(()=>Date.now()-t.value<n),i=Te(()=>{const l=n-(Date.now()-t.value);return Math.max(0,Math.floor(l/1e3))});return{updateActivity:s,isSessionValid:o,remainingTime:i}}),hh={key:0,class:"session-warning"},ph=ut({__name:"SessionStatus",setup(e){const t=Li(),n=Te(()=>t.remainingTime),s=Te(()=>n.value<=120&&n.value>0),o=i=>{const l=Math.floor(i/60),a=i%60;return`${l}:${a.toString().padStart(2,"0")}`};return(i,l)=>s.value?(le(),ae("div",hh,"  Session expires in "+Ee(o(n.value)),1)):Ce("",!0)}}),gh=vt(ph,[["__scopeId","data-v-16fc07d7"]]);/*! shepherd.js 14.4.0 */function vh(e){return e instanceof Element}function es(e){return e instanceof HTMLElement}function pn(e){return typeof e=="function"}function Rs(e){return typeof e=="string"}function it(e){return e===void 0}class Bi{on(t,n,s,o=!1){var i;return it(this.bindings)&&(this.bindings={}),it(this.bindings[t])&&(this.bindings[t]=[]),(i=this.bindings[t])==null||i.push({handler:n,ctx:s,once:o}),this}once(t,n,s){return this.on(t,n,s,!0)}off(t,n){if(it(this.bindings)||it(this.bindings[t]))return this;if(it(n))delete this.bindings[t];else{var s;(s=this.bindings[t])==null||s.forEach((o,i)=>{if(o.handler===n){var l;(l=this.bindings[t])==null||l.splice(i,1)}})}return this}trigger(t,...n){if(!it(this.bindings)&&this.bindings[t]){var s;(s=this.bindings[t])==null||s.forEach((o,i)=>{const{ctx:l,handler:a,once:r}=o,u=l||this;if(a.apply(u,n),r){var c;(c=this.bindings[t])==null||c.splice(i,1)}})}return this}}function ft(){return ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ft.apply(null,arguments)}function Ni(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.includes(s))continue;n[s]=e[s]}return n}const mn={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")};mn.defaultMerge;function mh(e,t){return t}function yh(e,t){return e.filter(n=>n!==void 0)}var jl;(function(e){e[e.NOT=0]="NOT",e[e.RECORD=1]="RECORD",e[e.ARRAY=2]="ARRAY",e[e.SET=3]="SET",e[e.MAP=4]="MAP",e[e.OTHER=5]="OTHER"})(jl||(jl={}));function Ul(e){return typeof e!="object"||e===null?0:Array.isArray(e)?2:Sh(e)?1:e instanceof Set?3:e instanceof Map?4:5}function bh(e){const t=new Set;for(const n of e)for(const s of[...Object.keys(n),...Object.getOwnPropertySymbols(n)])t.add(s);return t}function Ph(e,t){return typeof e=="object"&&Object.prototype.propertyIsEnumerable.call(e,t)}function qr(e){return{*[Symbol.iterator](){for(const t of e)for(const n of t)yield n}}}const zl=new Set(["[object Object]","[object Module]"]);function Sh(e){if(!zl.has(Object.prototype.toString.call(e)))return!1;const{constructor:t}=e;if(t===void 0)return!0;const n=t.prototype;return!(n===null||typeof n!="object"||!zl.has(Object.prototype.toString.call(n))||!n.hasOwnProperty("isPrototypeOf"))}function wh(e,t,n){const s={};for(const o of bh(e)){const i=[];for(const r of e)Ph(r,o)&&i.push(r[o]);if(i.length===0)continue;const l=t.metaDataUpdater(n,{key:o,parents:e}),a=Lr(i,t,l);a!==mn.skip&&(o==="__proto__"?Object.defineProperty(s,o,{value:a,configurable:!0,enumerable:!0,writable:!0}):s[o]=a)}return s}function _h(e){return e.flat()}function Ch(e){return new Set(qr(e))}function xh(e){return new Map(qr(e))}function Th(e){return e.at(-1)}const Ys={mergeRecords:wh,mergeArrays:_h,mergeSets:Ch,mergeMaps:xh,mergeOthers:Th};function Hi(...e){return Eh({})(...e)}function Eh(e,t){const n=kh(e,s);function s(...o){return Lr(o,n,t)}return s}function kh(e,t){var n,s,o;return{defaultMergeFunctions:Ys,mergeFunctions:ft({},Ys,Object.fromEntries(Object.entries(e).filter(([i,l])=>Object.hasOwn(Ys,i)).map(([i,l])=>l===!1?[i,Ys.mergeOthers]:[i,l]))),metaDataUpdater:(n=e.metaDataUpdater)!=null?n:mh,deepmerge:t,useImplicitDefaultMerging:(s=e.enableImplicitDefaultMerging)!=null?s:!1,filterValues:e.filterValues===!1?void 0:(o=e.filterValues)!=null?o:yh,actions:mn}}function Lr(e,t,n){var s;const o=(s=t.filterValues==null?void 0:t.filterValues(e,n))!=null?s:e;if(o.length===0)return;if(o.length===1)return Go(o,t,n);const i=Ul(o[0]);if(i!==0&&i!==5){for(let l=1;l<o.length;l++)if(Ul(o[l])!==i)return Go(o,t,n)}switch(i){case 1:return Ah(o,t,n);case 2:return Mh(o,t,n);case 3:return Rh(o,t,n);case 4:return Dh(o,t,n);default:return Go(o,t,n)}}function Ah(e,t,n){const s=t.mergeFunctions.mergeRecords(e,t,n);return s===mn.defaultMerge||t.useImplicitDefaultMerging&&s===void 0&&t.mergeFunctions.mergeRecords!==t.defaultMergeFunctions.mergeRecords?t.defaultMergeFunctions.mergeRecords(e,t,n):s}function Mh(e,t,n){const s=t.mergeFunctions.mergeArrays(e,t,n);return s===mn.defaultMerge||t.useImplicitDefaultMerging&&s===void 0&&t.mergeFunctions.mergeArrays!==t.defaultMergeFunctions.mergeArrays?t.defaultMergeFunctions.mergeArrays(e):s}function Rh(e,t,n){const s=t.mergeFunctions.mergeSets(e,t,n);return s===mn.defaultMerge||t.useImplicitDefaultMerging&&s===void 0&&t.mergeFunctions.mergeSets!==t.defaultMergeFunctions.mergeSets?t.defaultMergeFunctions.mergeSets(e):s}function Dh(e,t,n){const s=t.mergeFunctions.mergeMaps(e,t,n);return s===mn.defaultMerge||t.useImplicitDefaultMerging&&s===void 0&&t.mergeFunctions.mergeMaps!==t.defaultMergeFunctions.mergeMaps?t.defaultMergeFunctions.mergeMaps(e):s}function Go(e,t,n){const s=t.mergeFunctions.mergeOthers(e,t,n);return s===mn.defaultMerge||t.useImplicitDefaultMerging&&s===void 0&&t.mergeFunctions.mergeOthers!==t.defaultMergeFunctions.mergeOthers?t.defaultMergeFunctions.mergeOthers(e):s}function Wi(e){const t=Object.getOwnPropertyNames(e.constructor.prototype);for(let n=0;n<t.length;n++){const s=t[n],o=e[s];s!=="constructor"&&typeof o=="function"&&(e[s]=o.bind(e))}return e}function Oh(e,t){return n=>{if(e.isOpen()){const s=e.el&&n.currentTarget===e.el;(!it(t)&&n.currentTarget.matches(t)||s)&&e.tour.next()}}}function Ih(e){const{event:t,selector:n}=e.options.advanceOn||{};if(t){const s=Oh(e,n);let o=null;if(!it(n)&&(o=document.querySelector(n),!o))return console.error(`No element was found for the selector supplied to advanceOn: ${n}`);o?(o.addEventListener(t,s),e.on("destroy",()=>o.removeEventListener(t,s))):(document.body.addEventListener(t,s,!0),e.on("destroy",()=>document.body.removeEventListener(t,s,!0)))}else return console.error("advanceOn was defined, but no event name was passed.")}class $h{constructor(t){}}class Fh{constructor(t,n){}}function Br(e){return!Rs(e)||e===""?"":e.charAt(e.length-1)!=="-"?`${e}-`:e}function qh(e){const t=e.options.attachTo||{},n=Object.assign({},t);if(pn(n.element)&&(n.element=n.element.call(e)),Rs(n.element)){try{n.element=document.querySelector(n.element)}catch{}n.element||console.error(`The element for this Shepherd step was not found ${t.element}`)}return n}function Lh(e){return e.options.extraHighlights?e.options.extraHighlights.flatMap(t=>Array.from(document.querySelectorAll(t))):[]}function Nr(e){return e==null?!0:!e.element||!e.on}function Hr(){let e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const n=(e+Math.random()*16)%16|0;return e=Math.floor(e/16),(t=="x"?n:n&3|8).toString(16)})}const Bh=["top","right","bottom","left"],Yl=["start","end"],Kl=Bh.reduce((e,t)=>e.concat(t,t+"-"+Yl[0],t+"-"+Yl[1]),[]),ts=Math.min,On=Math.max,po=Math.round,Ks=Math.floor,It=e=>({x:e,y:e}),Nh={left:"right",right:"left",bottom:"top",top:"bottom"},Hh={start:"end",end:"start"};function gi(e,t,n){return On(e,ts(t,n))}function qn(e,t){return typeof e=="function"?e(t):e}function Kt(e){return e.split("-")[0]}function jt(e){return e.split("-")[1]}function Vi(e){return e==="x"?"y":"x"}function ji(e){return e==="y"?"height":"width"}function ns(e){return["top","bottom"].includes(Kt(e))?"y":"x"}function Ui(e){return Vi(ns(e))}function Wr(e,t,n){n===void 0&&(n=!1);const s=jt(e),o=Ui(e),i=ji(o);let l=o==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(l=vo(l)),[l,vo(l)]}function Wh(e){const t=vo(e);return[go(e),t,go(t)]}function go(e){return e.replace(/start|end/g,t=>Hh[t])}function Vh(e,t,n){const s=["left","right"],o=["right","left"],i=["top","bottom"],l=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:s:t?s:o;case"left":case"right":return t?i:l;default:return[]}}function jh(e,t,n,s){const o=jt(e);let i=Vh(Kt(e),n==="start",s);return o&&(i=i.map(l=>l+"-"+o),t&&(i=i.concat(i.map(go)))),i}function vo(e){return e.replace(/left|right|bottom|top/g,t=>Nh[t])}function Uh(e){return ft({top:0,right:0,bottom:0,left:0},e)}function Vr(e){return typeof e!="number"?Uh(e):{top:e,right:e,bottom:e,left:e}}function mo(e){const{x:t,y:n,width:s,height:o}=e;return{width:s,height:o,top:n,left:t,right:t+s,bottom:n+o,x:t,y:n}}const zh=["crossAxis","alignment","allowedPlacements","autoAlignment"],Yh=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],Kh=["mainAxis","crossAxis","limiter"];function Xl(e,t,n){let{reference:s,floating:o}=e;const i=ns(t),l=Ui(t),a=ji(l),r=Kt(t),u=i==="y",c=s.x+s.width/2-o.width/2,p=s.y+s.height/2-o.height/2,v=s[a]/2-o[a]/2;let y;switch(r){case"top":y={x:c,y:s.y-o.height};break;case"bottom":y={x:c,y:s.y+s.height};break;case"right":y={x:s.x+s.width,y:p};break;case"left":y={x:s.x-o.width,y:p};break;default:y={x:s.x,y:s.y}}switch(jt(t)){case"start":y[l]-=v*(n&&u?-1:1);break;case"end":y[l]+=v*(n&&u?-1:1);break}return y}const Xh=async(e,t,n)=>{const{placement:s="bottom",strategy:o="absolute",middleware:i=[],platform:l}=n,a=i.filter(Boolean),r=await(l.isRTL==null?void 0:l.isRTL(t));let u=await l.getElementRects({reference:e,floating:t,strategy:o}),{x:c,y:p}=Xl(u,s,r),v=s,y={},P=0;for(let C=0;C<a.length;C++){const{name:L,fn:R}=a[C],{x:$,y:J,data:F,reset:O}=await R({x:c,y:p,initialPlacement:s,placement:v,strategy:o,middlewareData:y,rects:u,platform:l,elements:{reference:e,floating:t}});c=$??c,p=J??p,y=ft({},y,{[L]:ft({},y[L],F)}),O&&P<=50&&(P++,typeof O=="object"&&(O.placement&&(v=O.placement),O.rects&&(u=O.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:o}):O.rects),{x:c,y:p}=Xl(u,v,r)),C=-1)}return{x:c,y:p,placement:v,strategy:o,middlewareData:y}};async function zi(e,t){var n;t===void 0&&(t={});const{x:s,y:o,platform:i,rects:l,elements:a,strategy:r}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:p="floating",altBoundary:v=!1,padding:y=0}=qn(t,e),P=Vr(y),L=a[v?p==="floating"?"reference":"floating":p],R=mo(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(L)))==null||n?L:L.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:r})),$=p==="floating"?{x:s,y:o,width:l.floating.width,height:l.floating.height}:l.reference,J=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),F=await(i.isElement==null?void 0:i.isElement(J))?await(i.getScale==null?void 0:i.getScale(J))||{x:1,y:1}:{x:1,y:1},O=mo(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:$,offsetParent:J,strategy:r}):$);return{top:(R.top-O.top+P.top)/F.y,bottom:(O.bottom-R.bottom+P.bottom)/F.y,left:(R.left-O.left+P.left)/F.x,right:(O.right-R.right+P.right)/F.x}}const Jh=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:o,rects:i,platform:l,elements:a,middlewareData:r}=t,{element:u,padding:c=0}=qn(e,t)||{};if(u==null)return{};const p=Vr(c),v={x:n,y:s},y=Ui(o),P=ji(y),C=await l.getDimensions(u),L=y==="y",R=L?"top":"left",$=L?"bottom":"right",J=L?"clientHeight":"clientWidth",F=i.reference[P]+i.reference[y]-v[y]-i.floating[P],O=v[y]-i.reference[y],oe=await(l.getOffsetParent==null?void 0:l.getOffsetParent(u));let re=oe?oe[J]:0;(!re||!await(l.isElement==null?void 0:l.isElement(oe)))&&(re=a.floating[J]||i.floating[P]);const B=F/2-O/2,N=re/2-C[P]/2-1,_=ts(p[R],N),V=ts(p[$],N),k=_,ne=re-C[P]-V,se=re/2-C[P]/2+B,g=gi(k,se,ne),A=!r.arrow&&jt(o)!=null&&se!==g&&i.reference[P]/2-(se<k?_:V)-C[P]/2<0,M=A?se<k?se-k:se-ne:0;return{[y]:v[y]+M,data:ft({[y]:g,centerOffset:se-g-M},A&&{alignmentOffset:M}),reset:A}}});function Gh(e,t,n){return(e?[...n.filter(o=>jt(o)===e),...n.filter(o=>jt(o)!==e)]:n.filter(o=>Kt(o)===o)).filter(o=>e?jt(o)===e||(t?go(o)!==o:!1):!0)}const Zh=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(n){var s,o,i;const{rects:l,middlewareData:a,placement:r,platform:u,elements:c}=n,p=qn(t,n),{crossAxis:v=!1,alignment:y,allowedPlacements:P=Kl,autoAlignment:C=!0}=p,L=Ni(p,zh),R=y!==void 0||P===Kl?Gh(y||null,C,P):P,$=await zi(n,L),J=((s=a.autoPlacement)==null?void 0:s.index)||0,F=R[J];if(F==null)return{};const O=Wr(F,l,await(u.isRTL==null?void 0:u.isRTL(c.floating)));if(r!==F)return{reset:{placement:R[0]}};const oe=[$[Kt(F)],$[O[0]],$[O[1]]],re=[...((o=a.autoPlacement)==null?void 0:o.overflows)||[],{placement:F,overflows:oe}],B=R[J+1];if(B)return{data:{index:J+1,overflows:re},reset:{placement:B}};const N=re.map(k=>{const ne=jt(k.placement);return[k.placement,ne&&v?k.overflows.slice(0,2).reduce((se,g)=>se+g,0):k.overflows[0],k.overflows]}).sort((k,ne)=>k[1]-ne[1]),V=((i=N.filter(k=>k[2].slice(0,jt(k[0])?2:3).every(ne=>ne<=0))[0])==null?void 0:i[0])||N[0][0];return V!==r?{data:{index:J+1,overflows:re},reset:{placement:V}}:{}}}},Qh=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(n){var s,o;const{placement:i,middlewareData:l,rects:a,initialPlacement:r,platform:u,elements:c}=n,p=qn(t,n),{mainAxis:v=!0,crossAxis:y=!0,fallbackPlacements:P,fallbackStrategy:C="bestFit",fallbackAxisSideDirection:L="none",flipAlignment:R=!0}=p,$=Ni(p,Yh);if((s=l.arrow)!=null&&s.alignmentOffset)return{};const J=Kt(i),F=ns(r),O=Kt(r)===r,oe=await(u.isRTL==null?void 0:u.isRTL(c.floating)),re=P||(O||!R?[vo(r)]:Wh(r)),B=L!=="none";!P&&B&&re.push(...jh(r,R,L,oe));const N=[r,...re],_=await zi(n,$),V=[];let k=((o=l.flip)==null?void 0:o.overflows)||[];if(v&&V.push(_[J]),y){const A=Wr(i,a,oe);V.push(_[A[0]],_[A[1]])}if(k=[...k,{placement:i,overflows:V}],!V.every(A=>A<=0)){var ne,se;const A=(((ne=l.flip)==null?void 0:ne.index)||0)+1,M=N[A];if(M)return{data:{index:A,overflows:k},reset:{placement:M}};let j=(se=k.filter(Z=>Z.overflows[0]<=0).sort((Z,m)=>Z.overflows[1]-m.overflows[1])[0])==null?void 0:se.placement;if(!j)switch(C){case"bestFit":{var g;const Z=(g=k.filter(m=>{if(B){const D=ns(m.placement);return D===F||D==="y"}return!0}).map(m=>[m.placement,m.overflows.filter(D=>D>0).reduce((D,G)=>D+G,0)]).sort((m,D)=>m[1]-D[1])[0])==null?void 0:g[0];Z&&(j=Z);break}case"initialPlacement":j=r;break}if(i!==j)return{reset:{placement:j}}}return{}}}},ep=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(n){const{x:s,y:o,placement:i}=n,l=qn(t,n),{mainAxis:a=!0,crossAxis:r=!1,limiter:u={fn:$=>{let{x:J,y:F}=$;return{x:J,y:F}}}}=l,c=Ni(l,Kh),p={x:s,y:o},v=await zi(n,c),y=ns(Kt(i)),P=Vi(y);let C=p[P],L=p[y];if(a){const $=P==="y"?"top":"left",J=P==="y"?"bottom":"right",F=C+v[$],O=C-v[J];C=gi(F,C,O)}if(r){const $=y==="y"?"top":"left",J=y==="y"?"bottom":"right",F=L+v[$],O=L-v[J];L=gi(F,L,O)}const R=u.fn(ft({},n,{[P]:C,[y]:L}));return ft({},R,{data:{x:R.x-s,y:R.y-o}})}}},tp=function(t){return t===void 0&&(t={}),{options:t,fn(n){const{x:s,y:o,placement:i,rects:l,middlewareData:a}=n,{offset:r=0,mainAxis:u=!0,crossAxis:c=!0}=qn(t,n),p={x:s,y:o},v=ns(i),y=Vi(v);let P=p[y],C=p[v];const L=qn(r,n),R=typeof L=="number"?{mainAxis:L,crossAxis:0}:ft({mainAxis:0,crossAxis:0},L);if(u){const F=y==="y"?"height":"width",O=l.reference[y]-l.floating[F]+R.mainAxis,oe=l.reference[y]+l.reference[F]-R.mainAxis;P<O?P=O:P>oe&&(P=oe)}if(c){var $,J;const F=y==="y"?"width":"height",O=["top","left"].includes(Kt(i)),oe=l.reference[v]-l.floating[F]+(O&&(($=a.offset)==null?void 0:$[v])||0)+(O?0:R.crossAxis),re=l.reference[v]+l.reference[F]+(O?0:((J=a.offset)==null?void 0:J[v])||0)-(O?R.crossAxis:0);C<oe?C=oe:C>re&&(C=re)}return{[y]:P,[v]:C}}}};function Oo(){return typeof window<"u"}function as(e){return jr(e)?(e.nodeName||"").toLowerCase():"#document"}function pt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Lt(e){var t;return(t=(jr(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function jr(e){return Oo()?e instanceof Node||e instanceof pt(e).Node:!1}function Ct(e){return Oo()?e instanceof Element||e instanceof pt(e).Element:!1}function Ft(e){return Oo()?e instanceof HTMLElement||e instanceof pt(e).HTMLElement:!1}function Jl(e){return!Oo()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof pt(e).ShadowRoot}function Bs(e){const{overflow:t,overflowX:n,overflowY:s,display:o}=xt(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!["inline","contents"].includes(o)}function np(e){return["table","td","th"].includes(as(e))}function Io(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Yi(e){const t=Ki(),n=Ct(e)?xt(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(s=>(n.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(n.contain||"").includes(s))}function sp(e){let t=gn(e);for(;Ft(t)&&!ss(t);){if(Yi(t))return t;if(Io(t))return null;t=gn(t)}return null}function Ki(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ss(e){return["html","body","#document"].includes(as(e))}function xt(e){return pt(e).getComputedStyle(e)}function $o(e){return Ct(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function gn(e){if(as(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Jl(e)&&e.host||Lt(e);return Jl(t)?t.host:t}function Ur(e){const t=gn(e);return ss(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ft(t)&&Bs(t)?t:Ur(t)}function Ds(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=Ur(e),i=o===((s=e.ownerDocument)==null?void 0:s.body),l=pt(o);if(i){const a=vi(l);return t.concat(l,l.visualViewport||[],Bs(o)?o:[],a&&n?Ds(a):[])}return t.concat(o,Ds(o,[],n))}function vi(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function zr(e){const t=xt(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const o=Ft(e),i=o?e.offsetWidth:n,l=o?e.offsetHeight:s,a=po(n)!==i||po(s)!==l;return a&&(n=i,s=l),{width:n,height:s,$:a}}function Xi(e){return Ct(e)?e:e.contextElement}function Zn(e){const t=Xi(e);if(!Ft(t))return It(1);const n=t.getBoundingClientRect(),{width:s,height:o,$:i}=zr(t);let l=(i?po(n.width):n.width)/s,a=(i?po(n.height):n.height)/o;return(!l||!Number.isFinite(l))&&(l=1),(!a||!Number.isFinite(a))&&(a=1),{x:l,y:a}}const op=It(0);function Yr(e){const t=pt(e);return!Ki()||!t.visualViewport?op:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function ip(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==pt(e)?!1:t}function Ln(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),i=Xi(e);let l=It(1);t&&(s?Ct(s)&&(l=Zn(s)):l=Zn(e));const a=ip(i,n,s)?Yr(i):It(0);let r=(o.left+a.x)/l.x,u=(o.top+a.y)/l.y,c=o.width/l.x,p=o.height/l.y;if(i){const v=pt(i),y=s&&Ct(s)?pt(s):s;let P=v,C=vi(P);for(;C&&s&&y!==P;){const L=Zn(C),R=C.getBoundingClientRect(),$=xt(C),J=R.left+(C.clientLeft+parseFloat($.paddingLeft))*L.x,F=R.top+(C.clientTop+parseFloat($.paddingTop))*L.y;r*=L.x,u*=L.y,c*=L.x,p*=L.y,r+=J,u+=F,P=pt(C),C=vi(P)}}return mo({width:c,height:p,x:r,y:u})}function Ji(e,t){const n=$o(e).scrollLeft;return t?t.left+n:Ln(Lt(e)).left+n}function Kr(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),o=s.left+t.scrollLeft-(n?0:Ji(e,s)),i=s.top+t.scrollTop;return{x:o,y:i}}function lp(e){let{elements:t,rect:n,offsetParent:s,strategy:o}=e;const i=o==="fixed",l=Lt(s),a=t?Io(t.floating):!1;if(s===l||a&&i)return n;let r={scrollLeft:0,scrollTop:0},u=It(1);const c=It(0),p=Ft(s);if((p||!p&&!i)&&((as(s)!=="body"||Bs(l))&&(r=$o(s)),Ft(s))){const y=Ln(s);u=Zn(s),c.x=y.x+s.clientLeft,c.y=y.y+s.clientTop}const v=l&&!p&&!i?Kr(l,r,!0):It(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-r.scrollLeft*u.x+c.x+v.x,y:n.y*u.y-r.scrollTop*u.y+c.y+v.y}}function ap(e){return Array.from(e.getClientRects())}function rp(e){const t=Lt(e),n=$o(e),s=e.ownerDocument.body,o=On(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),i=On(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let l=-n.scrollLeft+Ji(e);const a=-n.scrollTop;return xt(s).direction==="rtl"&&(l+=On(t.clientWidth,s.clientWidth)-o),{width:o,height:i,x:l,y:a}}function cp(e,t){const n=pt(e),s=Lt(e),o=n.visualViewport;let i=s.clientWidth,l=s.clientHeight,a=0,r=0;if(o){i=o.width,l=o.height;const u=Ki();(!u||u&&t==="fixed")&&(a=o.offsetLeft,r=o.offsetTop)}return{width:i,height:l,x:a,y:r}}function up(e,t){const n=Ln(e,!0,t==="fixed"),s=n.top+e.clientTop,o=n.left+e.clientLeft,i=Ft(e)?Zn(e):It(1),l=e.clientWidth*i.x,a=e.clientHeight*i.y,r=o*i.x,u=s*i.y;return{width:l,height:a,x:r,y:u}}function Gl(e,t,n){let s;if(t==="viewport")s=cp(e,n);else if(t==="document")s=rp(Lt(e));else if(Ct(t))s=up(t,n);else{const o=Yr(e);s={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return mo(s)}function Xr(e,t){const n=gn(e);return n===t||!Ct(n)||ss(n)?!1:xt(n).position==="fixed"||Xr(n,t)}function dp(e,t){const n=t.get(e);if(n)return n;let s=Ds(e,[],!1).filter(a=>Ct(a)&&as(a)!=="body"),o=null;const i=xt(e).position==="fixed";let l=i?gn(e):e;for(;Ct(l)&&!ss(l);){const a=xt(l),r=Yi(l);!r&&a.position==="fixed"&&(o=null),(i?!r&&!o:!r&&a.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Bs(l)&&!r&&Xr(e,l))?s=s.filter(c=>c!==l):o=a,l=gn(l)}return t.set(e,s),s}function fp(e){let{element:t,boundary:n,rootBoundary:s,strategy:o}=e;const l=[...n==="clippingAncestors"?Io(t)?[]:dp(t,this._c):[].concat(n),s],a=l[0],r=l.reduce((u,c)=>{const p=Gl(t,c,o);return u.top=On(p.top,u.top),u.right=ts(p.right,u.right),u.bottom=ts(p.bottom,u.bottom),u.left=On(p.left,u.left),u},Gl(t,a,o));return{width:r.right-r.left,height:r.bottom-r.top,x:r.left,y:r.top}}function hp(e){const{width:t,height:n}=zr(e);return{width:t,height:n}}function pp(e,t,n){const s=Ft(t),o=Lt(t),i=n==="fixed",l=Ln(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const r=It(0);if(s||!s&&!i)if((as(t)!=="body"||Bs(o))&&(a=$o(t)),s){const v=Ln(t,!0,i,t);r.x=v.x+t.clientLeft,r.y=v.y+t.clientTop}else o&&(r.x=Ji(o));const u=o&&!s&&!i?Kr(o,a):It(0),c=l.left+a.scrollLeft-r.x-u.x,p=l.top+a.scrollTop-r.y-u.y;return{x:c,y:p,width:l.width,height:l.height}}function Zo(e){return xt(e).position==="static"}function Zl(e,t){if(!Ft(e)||xt(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Lt(e)===n&&(n=n.ownerDocument.body),n}function Jr(e,t){const n=pt(e);if(Io(e))return n;if(!Ft(e)){let o=gn(e);for(;o&&!ss(o);){if(Ct(o)&&!Zo(o))return o;o=gn(o)}return n}let s=Zl(e,t);for(;s&&np(s)&&Zo(s);)s=Zl(s,t);return s&&ss(s)&&Zo(s)&&!Yi(s)?n:s||sp(e)||n}const gp=async function(t){const n=this.getOffsetParent||Jr,s=this.getDimensions,o=await s(t.floating);return{reference:pp(t.reference,await n(t.floating),t.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function vp(e){return xt(e).direction==="rtl"}const mp={convertOffsetParentRelativeRectToViewportRelativeRect:lp,getDocumentElement:Lt,getClippingRect:fp,getOffsetParent:Jr,getElementRects:gp,getClientRects:ap,getDimensions:hp,getScale:Zn,isElement:Ct,isRTL:vp};function yp(e,t){let n=null,s;const o=Lt(e);function i(){var a;clearTimeout(s),(a=n)==null||a.disconnect(),n=null}function l(a,r){a===void 0&&(a=!1),r===void 0&&(r=1),i();const{left:u,top:c,width:p,height:v}=e.getBoundingClientRect();if(a||t(),!p||!v)return;const y=Ks(c),P=Ks(o.clientWidth-(u+p)),C=Ks(o.clientHeight-(c+v)),L=Ks(u),$={rootMargin:-y+"px "+-P+"px "+-C+"px "+-L+"px",threshold:On(0,ts(1,r))||1};let J=!0;function F(O){const oe=O[0].intersectionRatio;if(oe!==r){if(!J)return l();oe?l(!1,oe):s=setTimeout(()=>{l(!1,1e-7)},1e3)}J=!1}try{n=new IntersectionObserver(F,ft({},$,{root:o.ownerDocument}))}catch{n=new IntersectionObserver(F,$)}n.observe(e)}return l(!0),i}function bp(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:r=!1}=s,u=Xi(e),c=o||i?[...u?Ds(u):[],...Ds(t)]:[];c.forEach(R=>{o&&R.addEventListener("scroll",n,{passive:!0}),i&&R.addEventListener("resize",n)});const p=u&&a?yp(u,n):null;let v=-1,y=null;l&&(y=new ResizeObserver(R=>{let[$]=R;$&&$.target===u&&y&&(y.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var J;(J=y)==null||J.observe(t)})),n()}),u&&!r&&y.observe(u),y.observe(t));let P,C=r?Ln(e):null;r&&L();function L(){const R=Ln(e);C&&(R.x!==C.x||R.y!==C.y||R.width!==C.width||R.height!==C.height)&&n(),C=R,P=requestAnimationFrame(L)}return n(),()=>{var R;c.forEach($=>{o&&$.removeEventListener("scroll",n),i&&$.removeEventListener("resize",n)}),p==null||p(),(R=y)==null||R.disconnect(),y=null,r&&cancelAnimationFrame(P)}}const Pp=Zh,Sp=ep,wp=Qh,_p=Jh,Cp=tp,xp=(e,t,n)=>{const s=new Map,o=ft({platform:mp},n),i=ft({},o.platform,{_c:s});return Xh(e,t,ft({},o,{platform:i}))};function Tp(e){e.cleanup&&e.cleanup();const t=e._getResolvedAttachToOptions();let n=t.element;const s=Dp(t,e),o=Nr(t);return o&&(n=document.body,e.shepherdElementComponent.getElement().classList.add("shepherd-centered")),e.cleanup=bp(n,e.el,()=>{if(!e.el){e.cleanup==null||e.cleanup();return}Ap(n,e,s,o)}),e.target=t.element,s}function Ep(e,t){return{floatingUIOptions:Hi(e.floatingUIOptions||{},t.floatingUIOptions||{})}}function kp(e){e.cleanup&&e.cleanup(),e.cleanup=null}function Ap(e,t,n,s){return xp(e,t.el,n).then(Mp(t,s)).then(o=>new Promise(i=>{setTimeout(()=>i(o),300)})).then(o=>{o!=null&&o.el&&o.el.focus({preventScroll:!0})})}function Mp(e,t){return({x:n,y:s,placement:o,middlewareData:i})=>(e.el&&(t?Object.assign(e.el.style,{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}):Object.assign(e.el.style,{position:"absolute",left:`${n}px`,top:`${s}px`}),e.el.dataset.popperPlacement=o,Rp(e.el,i)),e)}function Rp(e,t){const n=e.querySelector(".shepherd-arrow");if(es(n)&&t.arrow){const{x:s,y:o}=t.arrow;Object.assign(n.style,{left:s!=null?`${s}px`:"",top:o!=null?`${o}px`:""})}}function Dp(e,t){var n,s,o;const i={strategy:"absolute"};i.middleware=[];const l=Op(t),a=Nr(e),r=(n=e.on)==null?void 0:n.includes("auto"),u=(e==null||(s=e.on)==null?void 0:s.includes("-start"))||(e==null||(o=e.on)==null?void 0:o.includes("-end"));if(!a){if(r){var c;i.middleware.push(Pp({crossAxis:!0,alignment:u?e==null||(c=e.on)==null?void 0:c.split("-").pop():null}))}else i.middleware.push(wp());i.middleware.push(Sp({limiter:Cp(),crossAxis:!0})),l&&i.middleware.push(_p({element:l,padding:u?4:0})),r||(i.placement=e.on)}return Hi(i,t.options.floatingUIOptions||{})}function Op(e){return e.options.arrow&&e.el?e.el.querySelector(".shepherd-arrow"):!1}function gt(){}function Ip(e,t){for(const n in t)e[n]=t[n];return e}function Gr(e){return e()}function Ql(){return Object.create(null)}function Ns(e){e.forEach(Gr)}function Gi(e){return typeof e=="function"}function Gt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function $p(e){return Object.keys(e).length===0}function os(e,t){e.appendChild(t)}function Tt(e,t,n){e.insertBefore(t,n||null)}function bt(e){e.parentNode&&e.parentNode.removeChild(e)}function Fp(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function qt(e){return document.createElement(e)}function ea(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Zr(e){return document.createTextNode(e)}function yo(){return Zr(" ")}function qp(){return Zr("")}function Fo(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function Fe(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const Lp=["width","height"];function ta(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const s in t)t[s]==null?e.removeAttribute(s):s==="style"?e.style.cssText=t[s]:s==="__value"?e.value=e[s]=t[s]:n[s]&&n[s].set&&Lp.indexOf(s)===-1?e[s]=t[s]:Fe(e,s,t[s])}function Bp(e){return Array.from(e.childNodes)}function jn(e,t,n){e.classList.toggle(t,!!n)}let Os;function _s(e){Os=e}function Qr(){if(!Os)throw new Error("Function called outside component initialization");return Os}function Np(e){Qr().$$.on_mount.push(e)}function Zi(e){Qr().$$.after_update.push(e)}const Yn=[],is=[];let Qn=[];const na=[],Hp=Promise.resolve();let mi=!1;function Wp(){mi||(mi=!0,Hp.then(ec))}function yi(e){Qn.push(e)}const Qo=new Set;let Un=0;function ec(){if(Un!==0)return;const e=Os;do{try{for(;Un<Yn.length;){const t=Yn[Un];Un++,_s(t),Vp(t.$$)}}catch(t){throw Yn.length=0,Un=0,t}for(_s(null),Yn.length=0,Un=0;is.length;)is.pop()();for(let t=0;t<Qn.length;t+=1){const n=Qn[t];Qo.has(n)||(Qo.add(n),n())}Qn.length=0}while(Yn.length);for(;na.length;)na.pop()();mi=!1,Qo.clear(),_s(e)}function Vp(e){if(e.fragment!==null){e.update(),Ns(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(yi)}}function jp(e){const t=[],n=[];Qn.forEach(s=>e.indexOf(s)===-1?t.push(s):n.push(s)),n.forEach(s=>s()),Qn=t}const to=new Set;let kn;function In(){kn={r:0,c:[],p:kn}}function $n(){kn.r||Ns(kn.c),kn=kn.p}function Oe(e,t){e&&e.i&&(to.delete(e),e.i(t))}function je(e,t,n,s){if(e&&e.o){if(to.has(e))return;to.add(e),kn.c.push(()=>{to.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}else s&&s()}function sa(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Up(e,t){const n={},s={},o={$$scope:1};let i=e.length;for(;i--;){const l=e[i],a=t[i];if(a){for(const r in l)r in a||(s[r]=1);for(const r in a)o[r]||(n[r]=a[r],o[r]=1);e[i]=a}else for(const r in l)o[r]=1}for(const l in s)l in n||(n[l]=void 0);return n}function Nn(e){e&&e.c()}function yn(e,t,n){const{fragment:s,after_update:o}=e.$$;s&&s.m(t,n),yi(()=>{const i=e.$$.on_mount.map(Gr).filter(Gi);e.$$.on_destroy?e.$$.on_destroy.push(...i):Ns(i),e.$$.on_mount=[]}),o.forEach(yi)}function bn(e,t){const n=e.$$;n.fragment!==null&&(jp(n.after_update),Ns(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function zp(e,t){e.$$.dirty[0]===-1&&(Yn.push(e),Wp(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Zt(e,t,n,s,o,i,l=null,a=[-1]){const r=Os;_s(e);const u=e.$$={fragment:null,ctx:[],props:i,update:gt,not_equal:o,bound:Ql(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(r?r.$$.context:[])),callbacks:Ql(),dirty:a,skip_bound:!1,root:t.target||r.$$.root};l&&l(u.root);let c=!1;if(u.ctx=n?n(e,t.props||{},(p,v,...y)=>{const P=y.length?y[0]:v;return u.ctx&&o(u.ctx[p],u.ctx[p]=P)&&(!u.skip_bound&&u.bound[p]&&u.bound[p](P),c&&zp(e,p)),v}):[],u.update(),c=!0,Ns(u.before_update),u.fragment=s?s(u.ctx):!1,t.target){if(t.hydrate){const p=Bp(t.target);u.fragment&&u.fragment.l(p),p.forEach(bt)}else u.fragment&&u.fragment.c();t.intro&&Oe(e.$$.fragment),yn(e,t.target,t.anchor),ec()}_s(r)}class Qt{constructor(){this.$$=void 0,this.$$set=void 0}$destroy(){bn(this,1),this.$destroy=gt}$on(t,n){if(!Gi(n))return gt;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const o=s.indexOf(n);o!==-1&&s.splice(o,1)}}$set(t){this.$$set&&!$p(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Yp="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Yp);function Kp(e){let t,n,s,o,i;return{c(){t=qt("button"),Fe(t,"aria-label",n=e[3]?e[3]:null),Fe(t,"class",s=`${e[1]||""} shepherd-button ${e[4]?"shepherd-button-secondary":""}`),t.disabled=e[2],Fe(t,"tabindex","0"),Fe(t,"type","button")},m(l,a){Tt(l,t,a),t.innerHTML=e[5],o||(i=Fo(t,"click",function(){Gi(e[0])&&e[0].apply(this,arguments)}),o=!0)},p(l,[a]){e=l,a&32&&(t.innerHTML=e[5]),a&8&&n!==(n=e[3]?e[3]:null)&&Fe(t,"aria-label",n),a&18&&s!==(s=`${e[1]||""} shepherd-button ${e[4]?"shepherd-button-secondary":""}`)&&Fe(t,"class",s),a&4&&(t.disabled=e[2])},i:gt,o:gt,d(l){l&&bt(t),o=!1,i()}}}function Xp(e,t,n){let{config:s,step:o}=t,i,l,a,r,u,c;function p(v){return pn(v)?v=v.call(o):v}return e.$$set=v=>{"config"in v&&n(6,s=v.config),"step"in v&&n(7,o=v.step)},e.$$.update=()=>{e.$$.dirty&192&&(n(0,i=s.action?s.action.bind(o.tour):null),n(1,l=s.classes),n(2,a=s.disabled?p(s.disabled):!1),n(3,r=s.label?p(s.label):null),n(4,u=s.secondary),n(5,c=s.text?p(s.text):null))},[i,l,a,r,u,c,s,o]}class Jp extends Qt{constructor(t){super(),Zt(this,t,Xp,Kp,Gt,{config:6,step:7})}}function oa(e,t,n){const s=e.slice();return s[2]=t[n],s}function ia(e){let t,n,s=sa(e[1]),o=[];for(let l=0;l<s.length;l+=1)o[l]=la(oa(e,s,l));const i=l=>je(o[l],1,1,()=>{o[l]=null});return{c(){for(let l=0;l<o.length;l+=1)o[l].c();t=qp()},m(l,a){for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(l,a);Tt(l,t,a),n=!0},p(l,a){if(a&3){s=sa(l[1]);let r;for(r=0;r<s.length;r+=1){const u=oa(l,s,r);o[r]?(o[r].p(u,a),Oe(o[r],1)):(o[r]=la(u),o[r].c(),Oe(o[r],1),o[r].m(t.parentNode,t))}for(In(),r=s.length;r<o.length;r+=1)i(r);$n()}},i(l){if(!n){for(let a=0;a<s.length;a+=1)Oe(o[a]);n=!0}},o(l){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)je(o[a]);n=!1},d(l){l&&bt(t),Fp(o,l)}}}function la(e){let t,n;return t=new Jp({props:{config:e[2],step:e[0]}}),{c(){Nn(t.$$.fragment)},m(s,o){yn(t,s,o),n=!0},p(s,o){const i={};o&2&&(i.config=s[2]),o&1&&(i.step=s[0]),t.$set(i)},i(s){n||(Oe(t.$$.fragment,s),n=!0)},o(s){je(t.$$.fragment,s),n=!1},d(s){bn(t,s)}}}function Gp(e){let t,n,s=e[1]&&ia(e);return{c(){t=qt("footer"),s&&s.c(),Fe(t,"class","shepherd-footer")},m(o,i){Tt(o,t,i),s&&s.m(t,null),n=!0},p(o,[i]){o[1]?s?(s.p(o,i),i&2&&Oe(s,1)):(s=ia(o),s.c(),Oe(s,1),s.m(t,null)):s&&(In(),je(s,1,1,()=>{s=null}),$n())},i(o){n||(Oe(s),n=!0)},o(o){je(s),n=!1},d(o){o&&bt(t),s&&s.d()}}}function Zp(e,t,n){let s,{step:o}=t;return e.$$set=i=>{"step"in i&&n(0,o=i.step)},e.$$.update=()=>{e.$$.dirty&1&&n(1,s=o.options.buttons)},[o,s]}class Qp extends Qt{constructor(t){super(),Zt(this,t,Zp,Gp,Gt,{step:0})}}function eg(e){let t,n,s,o,i;return{c(){t=qt("button"),n=qt("span"),n.textContent="",Fe(n,"aria-hidden","true"),Fe(t,"aria-label",s=e[0].label?e[0].label:"Close Tour"),Fe(t,"class","shepherd-cancel-icon"),Fe(t,"type","button")},m(l,a){Tt(l,t,a),os(t,n),o||(i=Fo(t,"click",e[1]),o=!0)},p(l,[a]){a&1&&s!==(s=l[0].label?l[0].label:"Close Tour")&&Fe(t,"aria-label",s)},i:gt,o:gt,d(l){l&&bt(t),o=!1,i()}}}function tg(e,t,n){let{cancelIcon:s,step:o}=t;const i=l=>{l.preventDefault(),o.cancel()};return e.$$set=l=>{"cancelIcon"in l&&n(0,s=l.cancelIcon),"step"in l&&n(2,o=l.step)},[s,i,o]}class ng extends Qt{constructor(t){super(),Zt(this,t,tg,eg,Gt,{cancelIcon:0,step:2})}}function sg(e){let t;return{c(){t=qt("h3"),Fe(t,"id",e[1]),Fe(t,"class","shepherd-title")},m(n,s){Tt(n,t,s),e[3](t)},p(n,[s]){s&2&&Fe(t,"id",n[1])},i:gt,o:gt,d(n){n&&bt(t),e[3](null)}}}function og(e,t,n){let{labelId:s,element:o,title:i}=t;Zi(()=>{pn(i)&&n(2,i=i()),n(0,o.innerHTML=i,o)});function l(a){is[a?"unshift":"push"](()=>{o=a,n(0,o)})}return e.$$set=a=>{"labelId"in a&&n(1,s=a.labelId),"element"in a&&n(0,o=a.element),"title"in a&&n(2,i=a.title)},[o,s,i,l]}class ig extends Qt{constructor(t){super(),Zt(this,t,og,sg,Gt,{labelId:1,element:0,title:2})}}function aa(e){let t,n;return t=new ig({props:{labelId:e[0],title:e[2]}}),{c(){Nn(t.$$.fragment)},m(s,o){yn(t,s,o),n=!0},p(s,o){const i={};o&1&&(i.labelId=s[0]),o&4&&(i.title=s[2]),t.$set(i)},i(s){n||(Oe(t.$$.fragment,s),n=!0)},o(s){je(t.$$.fragment,s),n=!1},d(s){bn(t,s)}}}function ra(e){let t,n;return t=new ng({props:{cancelIcon:e[3],step:e[1]}}),{c(){Nn(t.$$.fragment)},m(s,o){yn(t,s,o),n=!0},p(s,o){const i={};o&8&&(i.cancelIcon=s[3]),o&2&&(i.step=s[1]),t.$set(i)},i(s){n||(Oe(t.$$.fragment,s),n=!0)},o(s){je(t.$$.fragment,s),n=!1},d(s){bn(t,s)}}}function lg(e){let t,n,s,o=e[2]&&aa(e),i=e[3]&&e[3].enabled&&ra(e);return{c(){t=qt("header"),o&&o.c(),n=yo(),i&&i.c(),Fe(t,"class","shepherd-header")},m(l,a){Tt(l,t,a),o&&o.m(t,null),os(t,n),i&&i.m(t,null),s=!0},p(l,[a]){l[2]?o?(o.p(l,a),a&4&&Oe(o,1)):(o=aa(l),o.c(),Oe(o,1),o.m(t,n)):o&&(In(),je(o,1,1,()=>{o=null}),$n()),l[3]&&l[3].enabled?i?(i.p(l,a),a&8&&Oe(i,1)):(i=ra(l),i.c(),Oe(i,1),i.m(t,null)):i&&(In(),je(i,1,1,()=>{i=null}),$n())},i(l){s||(Oe(o),Oe(i),s=!0)},o(l){je(o),je(i),s=!1},d(l){l&&bt(t),o&&o.d(),i&&i.d()}}}function ag(e,t,n){let{labelId:s,step:o}=t,i,l;return e.$$set=a=>{"labelId"in a&&n(0,s=a.labelId),"step"in a&&n(1,o=a.step)},e.$$.update=()=>{e.$$.dirty&2&&(n(2,i=o.options.title),n(3,l=o.options.cancelIcon))},[s,o,i,l]}class rg extends Qt{constructor(t){super(),Zt(this,t,ag,lg,Gt,{labelId:0,step:1})}}function cg(e){let t;return{c(){t=qt("div"),Fe(t,"class","shepherd-text"),Fe(t,"id",e[1])},m(n,s){Tt(n,t,s),e[3](t)},p(n,[s]){s&2&&Fe(t,"id",n[1])},i:gt,o:gt,d(n){n&&bt(t),e[3](null)}}}function ug(e,t,n){let{descriptionId:s,element:o,step:i}=t;Zi(()=>{let{text:a}=i.options;pn(a)&&(a=a.call(i)),es(a)?o.appendChild(a):n(0,o.innerHTML=a,o)});function l(a){is[a?"unshift":"push"](()=>{o=a,n(0,o)})}return e.$$set=a=>{"descriptionId"in a&&n(1,s=a.descriptionId),"element"in a&&n(0,o=a.element),"step"in a&&n(2,i=a.step)},[o,s,i,l]}class dg extends Qt{constructor(t){super(),Zt(this,t,ug,cg,Gt,{descriptionId:1,element:0,step:2})}}function ca(e){let t,n;return t=new rg({props:{labelId:e[1],step:e[2]}}),{c(){Nn(t.$$.fragment)},m(s,o){yn(t,s,o),n=!0},p(s,o){const i={};o&2&&(i.labelId=s[1]),o&4&&(i.step=s[2]),t.$set(i)},i(s){n||(Oe(t.$$.fragment,s),n=!0)},o(s){je(t.$$.fragment,s),n=!1},d(s){bn(t,s)}}}function ua(e){let t,n;return t=new dg({props:{descriptionId:e[0],step:e[2]}}),{c(){Nn(t.$$.fragment)},m(s,o){yn(t,s,o),n=!0},p(s,o){const i={};o&1&&(i.descriptionId=s[0]),o&4&&(i.step=s[2]),t.$set(i)},i(s){n||(Oe(t.$$.fragment,s),n=!0)},o(s){je(t.$$.fragment,s),n=!1},d(s){bn(t,s)}}}function da(e){let t,n;return t=new Qp({props:{step:e[2]}}),{c(){Nn(t.$$.fragment)},m(s,o){yn(t,s,o),n=!0},p(s,o){const i={};o&4&&(i.step=s[2]),t.$set(i)},i(s){n||(Oe(t.$$.fragment,s),n=!0)},o(s){je(t.$$.fragment,s),n=!1},d(s){bn(t,s)}}}function fg(e){let t,n=!it(e[2].options.title)||e[2].options.cancelIcon&&e[2].options.cancelIcon.enabled,s,o=!it(e[2].options.text),i,l=Array.isArray(e[2].options.buttons)&&e[2].options.buttons.length,a,r=n&&ca(e),u=o&&ua(e),c=l&&da(e);return{c(){t=qt("div"),r&&r.c(),s=yo(),u&&u.c(),i=yo(),c&&c.c(),Fe(t,"class","shepherd-content")},m(p,v){Tt(p,t,v),r&&r.m(t,null),os(t,s),u&&u.m(t,null),os(t,i),c&&c.m(t,null),a=!0},p(p,[v]){v&4&&(n=!it(p[2].options.title)||p[2].options.cancelIcon&&p[2].options.cancelIcon.enabled),n?r?(r.p(p,v),v&4&&Oe(r,1)):(r=ca(p),r.c(),Oe(r,1),r.m(t,s)):r&&(In(),je(r,1,1,()=>{r=null}),$n()),v&4&&(o=!it(p[2].options.text)),o?u?(u.p(p,v),v&4&&Oe(u,1)):(u=ua(p),u.c(),Oe(u,1),u.m(t,i)):u&&(In(),je(u,1,1,()=>{u=null}),$n()),v&4&&(l=Array.isArray(p[2].options.buttons)&&p[2].options.buttons.length),l?c?(c.p(p,v),v&4&&Oe(c,1)):(c=da(p),c.c(),Oe(c,1),c.m(t,null)):c&&(In(),je(c,1,1,()=>{c=null}),$n())},i(p){a||(Oe(r),Oe(u),Oe(c),a=!0)},o(p){je(r),je(u),je(c),a=!1},d(p){p&&bt(t),r&&r.d(),u&&u.d(),c&&c.d()}}}function hg(e,t,n){let{descriptionId:s,labelId:o,step:i}=t;return e.$$set=l=>{"descriptionId"in l&&n(0,s=l.descriptionId),"labelId"in l&&n(1,o=l.labelId),"step"in l&&n(2,i=l.step)},[s,o,i]}class pg extends Qt{constructor(t){super(),Zt(this,t,hg,fg,Gt,{descriptionId:0,labelId:1,step:2})}}function fa(e){let t;return{c(){t=qt("div"),Fe(t,"class","shepherd-arrow"),Fe(t,"data-popper-arrow","")},m(n,s){Tt(n,t,s)},d(n){n&&bt(t)}}}function gg(e){let t,n,s,o,i,l,a,r,u=e[4].options.arrow&&e[4].options.attachTo&&e[4].options.attachTo.element&&e[4].options.attachTo.on&&fa();s=new pg({props:{descriptionId:e[2],labelId:e[3],step:e[4]}});let c=[{"aria-describedby":o=it(e[4].options.text)?null:e[2]},{"aria-labelledby":i=e[4].options.title?e[3]:null},e[1],{open:"true"}],p={};for(let v=0;v<c.length;v+=1)p=Ip(p,c[v]);return{c(){t=qt("dialog"),u&&u.c(),n=yo(),Nn(s.$$.fragment),ta(t,p),jn(t,"shepherd-has-cancel-icon",e[5]),jn(t,"shepherd-has-title",e[6]),jn(t,"shepherd-element",!0)},m(v,y){Tt(v,t,y),u&&u.m(t,null),os(t,n),yn(s,t,null),e[13](t),l=!0,a||(r=Fo(t,"keydown",e[7]),a=!0)},p(v,[y]){v[4].options.arrow&&v[4].options.attachTo&&v[4].options.attachTo.element&&v[4].options.attachTo.on?u||(u=fa(),u.c(),u.m(t,n)):u&&(u.d(1),u=null);const P={};y&4&&(P.descriptionId=v[2]),y&8&&(P.labelId=v[3]),y&16&&(P.step=v[4]),s.$set(P),ta(t,p=Up(c,[(!l||y&20&&o!==(o=it(v[4].options.text)?null:v[2]))&&{"aria-describedby":o},(!l||y&24&&i!==(i=v[4].options.title?v[3]:null))&&{"aria-labelledby":i},y&2&&v[1],{open:"true"}])),jn(t,"shepherd-has-cancel-icon",v[5]),jn(t,"shepherd-has-title",v[6]),jn(t,"shepherd-element",!0)},i(v){l||(Oe(s.$$.fragment,v),l=!0)},o(v){je(s.$$.fragment,v),l=!1},d(v){v&&bt(t),u&&u.d(),bn(s),e[13](null),a=!1,r()}}}const vg=9,mg=27,yg=37,bg=39;function ha(e){return e.split(" ").filter(t=>!!t.length)}function Pg(e,t,n){let{classPrefix:s,element:o,descriptionId:i,firstFocusableElement:l,focusableElements:a,labelId:r,lastFocusableElement:u,step:c,dataStepId:p}=t,v,y,P;const C=()=>o;Np(()=>{n(1,p={[`data-${s}shepherd-step-id`]:c.id}),n(9,a=o.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')),n(8,l=a[0]),n(10,u=a[a.length-1])}),Zi(()=>{P!==c.options.classes&&L()});function L(){R(P),P=c.options.classes,$(P)}function R(O){if(Rs(O)){const oe=ha(O);oe.length&&o.classList.remove(...oe)}}function $(O){if(Rs(O)){const oe=ha(O);oe.length&&o.classList.add(...oe)}}const J=O=>{const{tour:oe}=c;switch(O.keyCode){case vg:if(a.length===0){O.preventDefault();break}O.shiftKey?(document.activeElement===l||document.activeElement.classList.contains("shepherd-element"))&&(O.preventDefault(),u.focus()):document.activeElement===u&&(O.preventDefault(),l.focus());break;case mg:oe.options.exitOnEsc&&(O.preventDefault(),O.stopPropagation(),c.cancel());break;case yg:oe.options.keyboardNavigation&&(O.preventDefault(),O.stopPropagation(),oe.back());break;case bg:oe.options.keyboardNavigation&&(O.preventDefault(),O.stopPropagation(),oe.next());break}};function F(O){is[O?"unshift":"push"](()=>{o=O,n(0,o)})}return e.$$set=O=>{"classPrefix"in O&&n(11,s=O.classPrefix),"element"in O&&n(0,o=O.element),"descriptionId"in O&&n(2,i=O.descriptionId),"firstFocusableElement"in O&&n(8,l=O.firstFocusableElement),"focusableElements"in O&&n(9,a=O.focusableElements),"labelId"in O&&n(3,r=O.labelId),"lastFocusableElement"in O&&n(10,u=O.lastFocusableElement),"step"in O&&n(4,c=O.step),"dataStepId"in O&&n(1,p=O.dataStepId)},e.$$.update=()=>{e.$$.dirty&16&&(n(5,v=c.options&&c.options.cancelIcon&&c.options.cancelIcon.enabled),n(6,y=c.options&&c.options.title))},[o,p,i,r,c,v,y,J,l,a,u,s,C,F]}class Sg extends Qt{constructor(t){super(),Zt(this,t,Pg,gg,Gt,{classPrefix:11,element:0,descriptionId:2,firstFocusableElement:8,focusableElements:9,labelId:3,lastFocusableElement:10,step:4,dataStepId:1,getElement:12})}get getElement(){return this.$$.ctx[12]}}class bi extends Bi{constructor(t,n={}){return super(),this._resolvedAttachTo=void 0,this._resolvedExtraHighlightElements=void 0,this.classPrefix=void 0,this.el=void 0,this.target=void 0,this.tour=void 0,this.tour=t,this.classPrefix=this.tour.options?Br(this.tour.options.classPrefix):"",this.styles=t.styles,this._resolvedAttachTo=null,Wi(this),this._setOptions(n),this}cancel(){this.tour.cancel(),this.trigger("cancel")}complete(){this.tour.complete(),this.trigger("complete")}destroy(){kp(this),es(this.el)&&(this.el.remove(),this.el=null),this._updateStepTargetOnHide(),this.trigger("destroy")}getTour(){return this.tour}hide(){var t;(t=this.tour.modal)==null||t.hide(),this.trigger("before-hide"),this.el&&(this.el.hidden=!0),this._updateStepTargetOnHide(),this.trigger("hide")}_resolveExtraHiglightElements(){return this._resolvedExtraHighlightElements=Lh(this),this._resolvedExtraHighlightElements}_resolveAttachToOptions(){return this._resolvedAttachTo=qh(this),this._resolvedAttachTo}_getResolvedAttachToOptions(){return this._resolvedAttachTo===null?this._resolveAttachToOptions():this._resolvedAttachTo}isOpen(){return!!(this.el&&!this.el.hidden)}show(){return pn(this.options.beforeShowPromise)?Promise.resolve(this.options.beforeShowPromise()).then(()=>this._show()):Promise.resolve(this._show())}updateStepOptions(t){Object.assign(this.options,t),this.shepherdElementComponent&&this.shepherdElementComponent.$set({step:this})}getElement(){return this.el}getTarget(){return this.target}_createTooltipContent(){const t=`${this.id}-description`,n=`${this.id}-label`;return this.shepherdElementComponent=new Sg({target:this.tour.options.stepsContainer||document.body,props:{classPrefix:this.classPrefix,descriptionId:t,labelId:n,step:this,styles:this.styles}}),this.shepherdElementComponent.getElement()}_scrollTo(t){const{element:n}=this._getResolvedAttachToOptions();pn(this.options.scrollToHandler)?this.options.scrollToHandler(n):vh(n)&&typeof n.scrollIntoView=="function"&&n.scrollIntoView(t)}_getClassOptions(t){const n=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions,s=t.classes?t.classes:"",o=n&&n.classes?n.classes:"",i=[...s.split(" "),...o.split(" ")],l=new Set(i);return Array.from(l).join(" ").trim()}_setOptions(t={}){let n=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions;n=Hi({},n||{}),this.options=Object.assign({arrow:!0},n,t,Ep(n,t));const{when:s}=this.options;this.options.classes=this._getClassOptions(t),this.destroy(),this.id=this.options.id||`step-${Hr()}`,s&&Object.keys(s).forEach(o=>{this.on(o,s[o],this)})}_setupElements(){it(this.el)||this.destroy(),this.el=this._createTooltipContent(),this.options.advanceOn&&Ih(this),Tp(this)}_show(){var t;this.trigger("before-show"),this._resolveAttachToOptions(),this._resolveExtraHiglightElements(),this._setupElements(),this.tour.modal||this.tour.setupModal(),(t=this.tour.modal)==null||t.setupForStep(this),this._styleTargetElementForStep(this),this.el&&(this.el.hidden=!1),this.options.scrollTo&&setTimeout(()=>{this._scrollTo(this.options.scrollTo)}),this.el&&(this.el.hidden=!1);const n=this.shepherdElementComponent.getElement(),s=this.target||document.body,o=this._resolvedExtraHighlightElements;s.classList.add(`${this.classPrefix}shepherd-enabled`),s.classList.add(`${this.classPrefix}shepherd-target`),n.classList.add("shepherd-enabled"),o==null||o.forEach(i=>{i.classList.add(`${this.classPrefix}shepherd-enabled`),i.classList.add(`${this.classPrefix}shepherd-target`)}),this.trigger("show")}_styleTargetElementForStep(t){const n=t.target,s=t._resolvedExtraHighlightElements;if(!n)return;const o=t.options.highlightClass;o&&(n.classList.add(o),s==null||s.forEach(i=>i.classList.add(o))),n.classList.remove("shepherd-target-click-disabled"),s==null||s.forEach(i=>i.classList.remove("shepherd-target-click-disabled")),t.options.canClickTarget===!1&&(n.classList.add("shepherd-target-click-disabled"),s==null||s.forEach(i=>i.classList.add("shepherd-target-click-disabled")))}_updateStepTargetOnHide(){const t=this.target||document.body,n=this._resolvedExtraHighlightElements,s=this.options.highlightClass;s&&(t.classList.remove(s),n==null||n.forEach(o=>o.classList.remove(s))),t.classList.remove("shepherd-target-click-disabled",`${this.classPrefix}shepherd-enabled`,`${this.classPrefix}shepherd-target`),n==null||n.forEach(o=>{o.classList.remove("shepherd-target-click-disabled",`${this.classPrefix}shepherd-enabled`,`${this.classPrefix}shepherd-target`)})}}function wg(e){if(e){const{steps:t}=e;t.forEach(n=>{n.options&&n.options.canClickTarget===!1&&n.options.attachTo&&(es(n.target)&&n.target.classList.remove("shepherd-target-click-disabled"),n._resolvedExtraHighlightElements&&n._resolvedExtraHighlightElements.forEach(s=>{es(s)&&s.classList.remove("shepherd-target-click-disabled")}))})}}function _g(e){let t="";const{innerWidth:n,innerHeight:s}=window;return e.forEach(o=>{const{width:i,height:l,x:a=0,y:r=0,r:u=0}=o,{topLeft:c=0,topRight:p=0,bottomRight:v=0,bottomLeft:y=0}=typeof u=="number"?{topLeft:u,topRight:u,bottomRight:u,bottomLeft:u}:u;t+=`M${a+c},${r}      a${c},${c},0,0,0-${c},${c}      V${l+r-y}      a${y},${y},0,0,0,${y},${y}      H${i+a-v}      a${v},${v},0,0,0,${v}-${v}      V${r+p}      a${p},${p},0,0,0-${p}-${p}      Z`}),`M${n},${s}          H0          V0          H${n}          V${s}          Z          ${t}`.replace(/\s/g,"")}function Cg(e){let t,n,s,o,i;return{c(){t=ea("svg"),n=ea("path"),Fe(n,"d",e[2]),Fe(t,"class",s=`${e[1]?"shepherd-modal-is-visible":""} shepherd-modal-overlay-container`)},m(l,a){Tt(l,t,a),os(t,n),e[11](t),o||(i=Fo(t,"touchmove",e[3]),o=!0)},p(l,[a]){a&4&&Fe(n,"d",l[2]),a&2&&s!==(s=`${l[1]?"shepherd-modal-is-visible":""} shepherd-modal-overlay-container`)&&Fe(t,"class",s)},i:gt,o:gt,d(l){l&&bt(t),e[11](null),o=!1,i()}}}function tc(e){if(!e)return null;const n=e instanceof HTMLElement&&window.getComputedStyle(e).overflowY;return n!=="hidden"&&n!=="visible"&&e.scrollHeight>=e.clientHeight?e:tc(e.parentElement)}function xg(e){let t={top:0,left:0};if(!e)return t;let n=e.ownerDocument.defaultView;for(;n!==window.top;){var s;const l=(s=n)==null?void 0:s.frameElement;if(l){var o,i;const a=l.getBoundingClientRect();t.top+=a.top+((o=a.scrollTop)!=null?o:0),t.left+=a.left+((i=a.scrollLeft)!=null?i:0)}n=n.parent}return t}function Tg(e,t){const n=e.getBoundingClientRect();let s=n.y||n.top,o=n.bottom||s+n.height;if(t){const l=t.getBoundingClientRect(),a=l.y||l.top,r=l.bottom||a+l.height;s=Math.max(s,a),o=Math.min(o,r)}const i=Math.max(o-s,0);return{y:s,height:i}}function Eg(e,t,n){let{element:s,openingProperties:o}=t,i=!1,l,a;u();const r=()=>s;function u(){n(4,o=[{width:0,height:0,x:0,y:0,r:0}])}function c(){n(1,i=!1),R()}function p(F=0,O=0,oe=0,re=0,B,N,_){if(N){const V=[N,..._||[]];n(4,o=[]);for(const k of V){if(!k||V.indexOf(k)!==V.lastIndexOf(k))continue;const{y:ne,height:se}=Tg(k,B),{x:g,width:A,left:M}=k.getBoundingClientRect();V.some(Z=>{if(Z===k)return!1;const m=Z.getBoundingClientRect();return g>=m.left&&g+A<=m.right&&ne>=m.top&&ne+se<=m.bottom})||o.push({width:A+F*2,height:se+F*2,x:(g||M)+oe-F,y:ne+re-F,r:O})}}else u()}function v(F){R(),F.tour.options.useModalOverlay?($(F),y()):c()}function y(){n(1,i=!0)}const P=F=>{F.preventDefault()},C=F=>{F.stopPropagation()};function L(){window.addEventListener("touchmove",P,{passive:!1})}function R(){l&&(cancelAnimationFrame(l),l=void 0),window.removeEventListener("touchmove",P,{passive:!1})}function $(F){const{modalOverlayOpeningPadding:O,modalOverlayOpeningRadius:oe,modalOverlayOpeningXOffset:re=0,modalOverlayOpeningYOffset:B=0}=F.options,N=xg(F.target),_=tc(F.target),V=()=>{l=void 0,p(O,oe,re+N.left,B+N.top,_,F.target,F._resolvedExtraHighlightElements),l=requestAnimationFrame(V)};V(),L()}function J(F){is[F?"unshift":"push"](()=>{s=F,n(0,s)})}return e.$$set=F=>{"element"in F&&n(0,s=F.element),"openingProperties"in F&&n(4,o=F.openingProperties)},e.$$.update=()=>{e.$$.dirty&16&&n(2,a=_g(o))},[s,i,a,C,o,r,u,c,p,v,y,J]}class kg extends Qt{constructor(t){super(),Zt(this,t,Eg,Cg,Gt,{element:0,openingProperties:4,getElement:5,closeModalOpening:6,hide:7,positionModal:8,setupForStep:9,show:10})}get getElement(){return this.$$.ctx[5]}get closeModalOpening(){return this.$$.ctx[6]}get hide(){return this.$$.ctx[7]}get positionModal(){return this.$$.ctx[8]}get setupForStep(){return this.$$.ctx[9]}get show(){return this.$$.ctx[10]}}class Ag extends Bi{constructor(){super(),this.activeTour=void 0,Wi(this)}}class Mg extends Bi{constructor(t={}){super(),this.trackedEvents=["active","cancel","complete","show"],this.classPrefix=void 0,this.currentStep=void 0,this.focusedElBeforeOpen=void 0,this.id=void 0,this.modal=void 0,this.options=void 0,this.steps=void 0,Wi(this);const n={exitOnEsc:!0,keyboardNavigation:!0};return this.options=Object.assign({},n,t),this.classPrefix=Br(this.options.classPrefix),this.steps=[],this.addSteps(this.options.steps),["active","cancel","complete","inactive","show","start"].map(o=>{(i=>{this.on(i,l=>{l=l||{},l.tour=this,An.trigger(i,l)})})(o)}),this._setTourID(t.id),this}addStep(t,n){let s=t;return s instanceof bi?s.tour=this:s=new bi(this,s),it(n)?this.steps.push(s):this.steps.splice(n,0,s),s}addSteps(t){return Array.isArray(t)&&t.forEach(n=>{this.addStep(n)}),this}back(){const t=this.steps.indexOf(this.currentStep);this.show(t-1,!1)}async cancel(){if(this.options.confirmCancel){const t=this.options.confirmCancelMessage||"Are you sure you want to stop the tour?";let n;pn(this.options.confirmCancel)?n=await this.options.confirmCancel():n=window.confirm(t),n&&this._done("cancel")}else this._done("cancel")}complete(){this._done("complete")}getById(t){return this.steps.find(n=>n.id===t)}getCurrentStep(){return this.currentStep}hide(){const t=this.getCurrentStep();if(t)return t.hide()}isActive(){return An.activeTour===this}next(){const t=this.steps.indexOf(this.currentStep);t===this.steps.length-1?this.complete():this.show(t+1,!0)}removeStep(t){const n=this.getCurrentStep();this.steps.some((s,o)=>{if(s.id===t)return s.isOpen()&&s.hide(),s.destroy(),this.steps.splice(o,1),!0}),n&&n.id===t&&(this.currentStep=void 0,this.steps.length?this.show(0):this.cancel())}show(t=0,n=!0){const s=Rs(t)?this.getById(t):this.steps[t];s&&(this._updateStateBeforeShow(),pn(s.options.showOn)&&!s.options.showOn()?this._skipStep(s,n):(this.currentStep=s,this.trigger("show",{step:s,previous:this.currentStep}),s.show()))}async start(){this.trigger("start"),this.focusedElBeforeOpen=document.activeElement,this.currentStep=null,this.setupModal(),this._setupActiveTour(),this.next()}_done(t){const n=this.steps.indexOf(this.currentStep);if(Array.isArray(this.steps)&&this.steps.forEach(s=>s.destroy()),wg(this),this.trigger(t,{index:n}),An.activeTour=null,this.trigger("inactive",{tour:this}),this.modal&&this.modal.hide(),(t==="cancel"||t==="complete")&&this.modal){const s=document.querySelector(".shepherd-modal-overlay-container");s&&(s.remove(),this.modal=null)}es(this.focusedElBeforeOpen)&&this.focusedElBeforeOpen.focus()}_setupActiveTour(){this.trigger("active",{tour:this}),An.activeTour=this}setupModal(){this.modal=new kg({target:this.options.modalContainer||document.body,props:{styles:this.styles}})}_skipStep(t,n){const s=this.steps.indexOf(t);if(s===this.steps.length-1)this.complete();else{const o=n?s+1:s-1;this.show(o,n)}}_updateStateBeforeShow(){this.currentStep&&this.currentStep.hide(),this.isActive()||this._setupActiveTour()}_setTourID(t){const n=this.options.tourName||"tour",s=t||Hr();this.id=`${n}--${s}`}}const An=new Ag,nc=typeof window>"u";An.Step=nc?$h:bi;An.Tour=nc?Fh:Mg;const Rg=(...e)=>new An.Tour(...e),Dg={"aria-hidden":"true"},Og=ut({__name:"FirstPlayTour",setup(e,{expose:t}){const n=()=>{const o=Rg({useModalOverlay:!0,defaultStepOptions:{cancelIcon:{enabled:!0},scrollTo:{behavior:"smooth",block:"center"},highlightClass:"tour-highlight"}});return o.addStep({id:"add-red-players",title:"Click Add Red",attachTo:{element:".add-red",on:"right"},text:"Click the Add Red button to start adding attacking players. This opens the player setup dialog for your red (attacking) team.",advanceOn:{selector:".add-red",event:"click"},buttons:[{text:"Exit",action:o.cancel}]}),o.addStep({id:"set-attacking-and-count",title:"Set to attacking and add 4",attachTo:{element:".dialog-actions",on:"top"},text:"In the player dialog, make sure you are adding Red (attacking) players, then use the number field to set it to 4 and click Add 4 Players to place them on the pitch.",advanceOn:{selector:".dialog-actions .dialog-btn.confirm",event:"click"},buttons:[{text:"Exit",action:o.cancel}]}),o.addStep({id:"draw-paths",title:"Draw running lines",attachTo:{element:".rugby-pitch-container",on:"top"},text:"Triple-click a player to open their options, switch them to path mode, then drag on the pitch to sketch their running route.",buttons:[{text:"Back",action:o.back},{text:"Next",action:o.next},{text:"Exit",action:o.cancel}]}),o.addStep({id:"record-play",title:"Record the full play",attachTo:{element:".play-actions-container",on:"bottom"},text:"Open the Play Actions menu to run your phases. When you are ready, use Record Full Play to capture the entire movement as a recording.",buttons:[{text:"Exit",action:o.cancel}],advanceOn:{selector:".action-btn.record",event:"click"}}),o.addStep({id:"save-play",title:"Save and replay",text:"After recording finishes, give your play a name in the save dialog. You can then find it in Saved Plays and replay it any time.",buttons:[{text:"Back",action:o.back},{text:"Finish",action:o.complete}]}),o};return t({startTour:()=>{n().start()}}),(o,i)=>(le(),ae("div",Dg))}}),Ig={class:"play-actions-container"},$g={key:0,class:"popup-menu"},Fg={class:"popup-content"},qg={class:"action-section"},Lg={class:"action-buttons"},Bg=["disabled"],Ng={class:"action-section"},Hg={class:"action-buttons"},Wg=["disabled"],Vg=["disabled"],jg={class:"action-section"},Ug={class:"action-buttons"},zg=["disabled"],Yg=ut({__name:"PlayActionsMenu",props:{isRecording:{type:Boolean},isRunningCurrentPhase:{type:Boolean},isRunningFullPlay:{type:Boolean},hasAnySequencesInCurrentPhase:{type:Boolean},hasMultiplePhases:{type:Boolean},currentSequenceData:{},availableSequences:{},currentSequence:{}},emits:["run-current-phase","run-full-play","run-current-sequence","reset-current-sequence","record-full-play","show-tutorial"],setup(e,{emit:t}){const n=e,s=t,o=te(!1),i=()=>{o.value=!o.value},l=()=>{o.value=!1},a=r=>{switch(r){case"run-current-phase":s("run-current-phase");break;case"run-full-play":s("run-full-play");break;case"run-current-sequence":n.currentSequence&&s("run-current-sequence",n.currentSequence);break;case"reset-current-sequence":s("reset-current-sequence");break;case"record-full-play":s("record-full-play");break;case"show-tutorial":s("show-tutorial");break}l()};return(r,u)=>(le(),ae("div",Ig,[h("button",{"data-cy":"play-actions-trigger",class:Me(["popup-trigger-button",{active:o.value}]),onClick:i},[u[6]||(u[6]=h("svg",{class:"icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[h("polygon",{points:"5 3 19 12 5 21 5 3",fill:"currentColor"})],-1)),u[7]||(u[7]=h("span",null,"Play Actions",-1)),(le(),ae("svg",{class:Me(["chevron",{open:o.value}]),width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},u[5]||(u[5]=[h("polyline",{points:"6 9 12 15 18 9"},null,-1)]),2))],2),(le(),Mo(Oi,{to:"body"},[_e(hn,{name:"popup"},{default:Yt(()=>[o.value?(le(),ae("div",$g,[h("div",Fg,[h("div",qg,[u[10]||(u[10]=h("h3",{class:"section-title"},"Sequence Actions",-1)),h("div",Lg,[h("button",{"data-cy":"run-current-sequence-btn",onClick:u[0]||(u[0]=c=>a("run-current-sequence")),class:"action-btn",disabled:!r.currentSequenceData||r.currentSequenceData.activePlayerIds.length===0},u[8]||(u[8]=[h("svg",{class:"icon",viewBox:"0 0 24 24",fill:"currentColor"},[h("path",{d:"M8 5v14l11-7z"})],-1),h("span",null,"Run Sequence",-1)]),8,Bg),h("button",{onClick:u[1]||(u[1]=c=>a("reset-current-sequence")),class:"action-btn secondary"},u[9]||(u[9]=[h("svg",{class:"icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[h("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"})],-1),h("span",null,"Reset Sequence",-1)]))])]),u[16]||(u[16]=h("div",{class:"section-divider"},null,-1)),h("div",Ng,[u[13]||(u[13]=h("h3",{class:"section-title"},"Phase Actions",-1)),h("div",Hg,[h("button",{onClick:u[2]||(u[2]=c=>a("run-current-phase")),class:"action-btn primary",disabled:!r.hasAnySequencesInCurrentPhase||r.isRunningCurrentPhase},[u[11]||(u[11]=h("svg",{class:"icon",viewBox:"0 0 24 24",fill:"currentColor"},[h("path",{d:"M8 5v14l11-7z"})],-1)),h("span",null,Ee(r.isRunningCurrentPhase?"Running Phase...":"Run Current Phase"),1)],8,Wg),r.hasMultiplePhases?(le(),ae("button",{key:0,"data-cy":"run-full-play-btn",onClick:u[3]||(u[3]=c=>a("run-full-play")),class:"action-btn primary",disabled:r.isRunningCurrentPhase||r.isRunningFullPlay},[u[12]||(u[12]=h("svg",{class:"icon",viewBox:"0 0 24 24",fill:"currentColor"},[h("path",{d:"M5 5v14l7-7z"}),h("path",{d:"M12 5v14l7-7z"})],-1)),h("span",null,Ee(r.isRunningFullPlay?"Running Full Play...":"Run Full Play"),1)],8,Vg)):Ce("",!0)])]),u[17]||(u[17]=h("div",{class:"section-divider"},null,-1)),h("div",jg,[u[15]||(u[15]=h("h3",{class:"section-title"},"Recording",-1)),h("div",Ug,[h("button",{onClick:u[4]||(u[4]=c=>a("record-full-play")),class:"action-btn record",disabled:r.isRecording||r.isRunningCurrentPhase||r.isRunningFullPlay},[u[14]||(u[14]=h("svg",{class:"icon",viewBox:"0 0 24 24",fill:"currentColor"},[h("circle",{cx:"12",cy:"12",r:"8"})],-1)),h("span",null,Ee(r.isRecording?"Recording...":"Record Full Play"),1)],8,zg)])])])])):Ce("",!0)]),_:1}),_e(hn,{name:"backdrop"},{default:Yt(()=>[o.value?(le(),ae("div",{key:0,class:"popup-backdrop",onClick:l})):Ce("",!0)]),_:1})]))]))}}),Kg=vt(Yg,[["__scopeId","data-v-c183bc8e"]]),Xg={class:"phase-panel"},Jg={class:"phase-row"},Gg={ref:"chipsEl",role:"tablist","aria-label":"Phases"},Zg=["aria-selected","onClick"],Qg={class:"phase-tools"},ev={class:"pager"},tv=["disabled"],nv=["disabled"],sv={class:"mutations"},ds=10,ov=ut({__name:"PhaseManager",props:{phases:{},currentPhase:{},isSequenceMode:{type:Boolean}},emits:["phase-select","phase-add","phase-remove","phase-anchor-change"],setup(e,{emit:t}){const n=e,s=t,o=te(!1),i=te(null),l=te(0),a=Te(()=>n.phases.findIndex(y=>y.id===n.currentPhase)),r=Te(()=>Math.max(1,Math.ceil(n.phases.length/ds))),u=Te(()=>{const y=l.value*ds,P=y+ds;return n.phases.slice(y,P)}),c=Te(()=>{const y=n.phases.find(P=>P.id===n.currentPhase);return(y==null?void 0:y.name)||`Phase ${n.currentPhase}`}),p=()=>{s("phase-remove",n.currentPhase),o.value=!1},v=()=>{Ot(()=>{var R,$;const y=(R=i.value)==null?void 0:R.getBoundingClientRect(),P=($=i.value)==null?void 0:$.querySelector(".phase-tab.active");if(!y||!P){s("phase-anchor-change",0);return}const C=P.getBoundingClientRect(),L=C.left+C.width/2-y.left;s("phase-anchor-change",Math.max(0,L))})};return Jt(()=>{a.value>=0&&(l.value=Math.floor(a.value/ds)),v()}),Xe(()=>[n.currentPhase,n.phases.length],()=>{a.value>=0&&(l.value=Math.floor(a.value/ds)),v()}),(y,P)=>(le(),ae(Ke,null,[h("div",{class:"phase-tabs",ref_key:"barEl",ref:i},[P[5]||(P[5]=h("div",{class:"phase-instructions"},[h("p",{class:"instructions-text"},"Select, add, or remove phases.")],-1)),h("div",Xg,[h("div",Jg,[h("div",Gg,[(le(!0),ae(Ke,null,Fs(u.value,C=>(le(),ae("button",{key:C.id,class:Me(["phase-tab",{active:y.currentPhase===C.id}]),role:"tab","aria-selected":y.currentPhase===C.id?"true":"false",onClick:L=>y.$emit("phase-select",C.id)}," Phase "+Ee(C.id),11,Zg))),128))],512),h("div",Qg,[h("div",ev,[h("button",{class:"pager-btn",disabled:l.value===0,"aria-label":"Previous phase row",title:"Previous",onClick:P[0]||(P[0]=C=>{l.value=Math.max(0,l.value-1),v()})},"",8,tv),h("button",{class:"pager-btn",disabled:l.value>=r.value-1,"aria-label":"Next phase row",title:"Next",onClick:P[1]||(P[1]=C=>{l.value=Math.min(r.value-1,l.value+1),v()})},"",8,nv)]),h("div",sv,[h("button",{"data-cy":"add-phase-btn",class:"phase-tab add-phase",onClick:P[2]||(P[2]=C=>y.$emit("phase-add")),"aria-label":"Add Phase",title:"Add Phase"},"+"),y.phases.length>1?(le(),ae("button",{key:0,class:"phase-tab remove-phase",onClick:P[3]||(P[3]=C=>o.value=!0),"aria-label":"Remove Phase",title:"Remove Current Phase"},"-")):Ce("",!0)])])])])],512),_e(Ls,{show:o.value,title:"Remove Phase",message:`Are you sure you want to remove ${c.value}? This action cannot be undone.`,"confirm-text":"Remove Phase",onConfirm:p,onCancel:P[4]||(P[4]=C=>o.value=!1)},null,8,["show","message"])],64))}}),iv=vt(ov,[["__scopeId","data-v-cc5e69b3"]]),lv={class:"sequence-management-container"},av={class:"panel-header"},rv={class:"actions"},cv={class:"pager"},uv=["disabled"],dv=["disabled"],fv=["title"],hv=["aria-selected","onClick"],pv={key:0,class:"meta-bar"},gv={class:"meta-text"},fs=10,vv=ut({__name:"SequenceManager",props:{currentSequence:{},availableSequences:{},playersWithPaths:{},currentSequenceData:{},anchorX:{default:null}},emits:["select-sequence","add-sequence","remove-sequence"],setup(e,{emit:t}){const n=e,s=t,o=Te(()=>n.availableSequences.length===0?"Create a sequence to start building coordinated player movements":n.playersWithPaths.length>0?"Click any player to include/exclude them from the sequence":"Triple-click players to draw paths first, then click to include in sequence"),i=Te(()=>({"--anchor-x":n.anchorX!=null?`${n.anchorX}px`:"50%"})),l=P=>{s("select-sequence",P)},a=()=>{s("add-sequence")},r=te(!1),u=()=>{n.currentSequence&&s("remove-sequence",n.currentSequence),r.value=!1},c=te(0),p=Te(()=>n.availableSequences.findIndex(P=>P.id===n.currentSequence)),v=Te(()=>Math.max(1,Math.ceil(n.availableSequences.length/fs))),y=Te(()=>{const P=c.value*fs,C=P+fs;return n.availableSequences.slice(P,C)});return Jt(()=>{p.value>=0&&(c.value=Math.floor(p.value/fs))}),Xe(()=>[n.currentSequence,n.availableSequences.length],()=>{p.value>=0&&(c.value=Math.floor(p.value/fs))}),(P,C)=>(le(),ae("div",lv,[h("div",{class:"attached-panel",style:ls(i.value)},[h("div",av,[C[4]||(C[4]=h("div",{class:"label"},"Sequences",-1)),h("div",rv,[h("button",{"data-cy":"add-sequence-btn",class:"chip-btn add-seq",onClick:a,"aria-label":"Add Sequence",title:"Add Sequence"},"+"),P.availableSequences.length>0?(le(),ae("button",{key:0,class:"chip-btn remove-seq",onClick:C[0]||(C[0]=L=>r.value=!0),"aria-label":"Remove Current Sequence",title:"Remove Current Sequence"},"-")):Ce("",!0)]),h("div",cv,[h("button",{class:"pager-btn",disabled:c.value===0,"aria-label":"Previous sequence row",title:"Previous",onClick:C[1]||(C[1]=L=>c.value=Math.max(0,c.value-1))},"",8,uv),h("button",{class:"pager-btn",disabled:c.value>=v.value-1,"aria-label":"Next sequence row",title:"Next",onClick:C[2]||(C[2]=L=>c.value=Math.min(v.value-1,c.value+1))},"",8,dv)])]),h("div",{class:"chips",role:"tablist","aria-label":"Sequences",title:o.value},[(le(!0),ae(Ke,null,Fs(y.value,L=>(le(),ae("button",{key:L.id,class:Me(["capsule",{active:P.currentSequence===L.id}]),role:"tab","aria-selected":P.currentSequence===L.id?"true":"false",onClick:R=>l(L.id),"data-cy":"sequence-chip"}," Seq "+Ee(L.id),11,hv))),128))],8,fv),P.currentSequenceData?(le(),ae("div",pv,[h("span",gv,Ee((P.currentSequenceData.activePlayerIds||[]).length)+" active players",1)])):Ce("",!0)],4),_e(Ls,{show:r.value,title:"Remove Sequence",message:`Are you sure you want to remove Sequence ${P.currentSequence}? This action cannot be undone.`,"confirm-text":"Remove Sequence",onConfirm:u,onCancel:C[3]||(C[3]=L=>r.value=!1)},null,8,["show","message"])]))}}),mv=vt(vv,[["__scopeId","data-v-e66c3240"]]),yv={key:0,class:"player-controls"},bv={class:"player-list"},Pv=["onClick","disabled"],Sv={class:"player-icon"},wv={class:"player-status"},_v={key:0,class:"player-delay"},Cv={class:"player-actions"},xv=["disabled"],Tv=["disabled"],Ev=ut({__name:"PlayerManager",props:{players:{},availableSequences:{},currentSequenceData:{}},emits:["toggle-player-loop","select-all-players","deselect-all-players"],setup(e,{emit:t}){const n=e,s=t,o=c=>c.path&&c.path.length>0,i=Te(()=>n.players.some(c=>o(c))),l=Te(()=>n.players.some(c=>c.isLooping)),a=c=>{o(c)&&s("toggle-player-loop",c)},r=()=>{s("select-all-players")},u=()=>{s("deselect-all-players")};return(c,p)=>c.availableSequences.length>0?(le(),ae("div",yv,[p[2]||(p[2]=h("h4",{class:"section-title"},"Players Selected for Current Sequence",-1)),h("div",bv,[(le(!0),ae(Ke,null,Fs(c.players,v=>(le(),ae("div",{key:`${v.type}-${v.id}`,onClick:y=>a(v),class:Me(["player-control-btn",{active:v.isLooping,"no-path":!o(v),[v.type]:!0}]),disabled:!o(v)},[h("span",Sv,Ee(v.type==="attacking"?"R":"B")+Ee(v.id),1),h("span",wv,[ze(Ee(o(v)?"READY":"NEEDS PATH")+" ",1),o(v)&&v.sequenceDelay!==void 0&&v.sequenceDelay>0?(le(),ae("span",_v,Ee(v.sequenceDelay)+"ms ",1)):Ce("",!0)])],10,Pv))),128))]),h("div",Cv,[h("button",{"data-cy":"select-all-players-btn",onClick:r,class:"control-btn select-all",disabled:!i.value},p[0]||(p[0]=[h("span",{class:"icon"},"",-1),ze(" Select All ")]),8,xv),h("button",{onClick:u,class:"control-btn deselect-all",disabled:!l.value},p[1]||(p[1]=[h("span",{class:"icon"},"",-1),ze(" Deselect All ")]),8,Tv)])])):Ce("",!0)}}),kv=vt(Ev,[["__scopeId","data-v-329ae28f"]]),Av={class:"sequence-popup-container"},Mv={key:0,class:"popup-menu"},Rv={class:"popup-content"},Dv={class:"popup-section phase-section"},Ov={class:"section-content"},Iv={class:"popup-section sequence-section"},$v={class:"section-content"},Fv=ut({__name:"SequencePopupMenu",props:{phases:{},currentPhase:{},isSequenceMode:{type:Boolean},currentSequence:{},availableSequences:{},playersWithPaths:{},currentSequenceData:{},players:{}},emits:["phase-select","phase-add","phase-remove","select-sequence","add-sequence","remove-sequence","toggle-player-loop","select-all-players","deselect-all-players"],setup(e,{emit:t}){const n=te(!1),s=te(null),o=()=>{n.value=!n.value},i=()=>{n.value=!1};return(l,a)=>(le(),ae("div",Av,[h("button",{"data-cy":"sequence-manager-trigger",class:Me(["popup-trigger-button",{active:n.value}]),onClick:o},[a[11]||(a[11]=Yu('<svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-89a89dd8><rect x="3" y="3" width="7" height="7" rx="1" data-v-89a89dd8></rect><rect x="14" y="3" width="7" height="7" rx="1" data-v-89a89dd8></rect><rect x="3" y="14" width="7" height="7" rx="1" data-v-89a89dd8></rect><rect x="14" y="14" width="7" height="7" rx="1" data-v-89a89dd8></rect></svg><span data-v-89a89dd8>Sequence Manager</span>',2)),(le(),ae("svg",{class:Me(["chevron",{open:n.value}]),width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},a[10]||(a[10]=[h("polyline",{points:"6 9 12 15 18 9"},null,-1)]),2))],2),(le(),Mo(Oi,{to:"body"},[_e(hn,{name:"popup"},{default:Yt(()=>[n.value?(le(),ae("div",Mv,[h("div",Rv,[h("div",Dv,[a[12]||(a[12]=h("h3",{class:"section-title"},"Phases",-1)),h("div",Ov,[_e(iv,{phases:l.phases,"current-phase":l.currentPhase,"is-sequence-mode":l.isSequenceMode,onPhaseSelect:a[0]||(a[0]=r=>l.$emit("phase-select",r)),onPhaseAdd:a[1]||(a[1]=r=>l.$emit("phase-add")),onPhaseRemove:a[2]||(a[2]=r=>l.$emit("phase-remove",r)),onPhaseAnchorChange:a[3]||(a[3]=r=>s.value=r)},null,8,["phases","current-phase","is-sequence-mode"])])]),a[14]||(a[14]=h("div",{class:"section-divider"},null,-1)),h("div",Iv,[a[13]||(a[13]=h("h3",{class:"section-title"},"Sequences",-1)),h("div",$v,[_e(mv,{"current-sequence":l.currentSequence,"available-sequences":l.availableSequences,"players-with-paths":l.playersWithPaths,"current-sequence-data":l.currentSequenceData,"anchor-x":s.value,onSelectSequence:a[4]||(a[4]=r=>l.$emit("select-sequence",r)),onAddSequence:a[5]||(a[5]=r=>l.$emit("add-sequence")),onRemoveSequence:a[6]||(a[6]=r=>l.$emit("remove-sequence",r))},null,8,["current-sequence","available-sequences","players-with-paths","current-sequence-data","anchor-x"]),_e(kv,{players:l.players,"available-sequences":l.availableSequences,"current-sequence-data":l.currentSequenceData,onTogglePlayerLoop:a[7]||(a[7]=r=>l.$emit("toggle-player-loop",r)),onSelectAllPlayers:a[8]||(a[8]=r=>l.$emit("select-all-players")),onDeselectAllPlayers:a[9]||(a[9]=r=>l.$emit("deselect-all-players"))},null,8,["players","available-sequences","current-sequence-data"])])])])])):Ce("",!0)]),_:1}),_e(hn,{name:"backdrop"},{default:Yt(()=>[n.value?(le(),ae("div",{key:0,class:"popup-backdrop",onClick:i})):Ce("",!0)]),_:1})]))]))}}),qv=vt(Fv,[["__scopeId","data-v-89a89dd8"]]),Lv={class:"player-options-container"},Bv=["disabled"],Nv={key:0,class:"popup-menu","data-cy":"player-options-menu"},Hv={class:"popup-content"},Wv={class:"menu-title"},Vv={class:"option-section"},jv={class:"mode-buttons"},Uv={class:"option-section"},zv={class:"option-section"},Yv=["disabled"],Kv={key:0,class:"option-section"},Xv={class:"option-section"},Jv={class:"section-title"},Gv=["value"],Zv={class:"option-section"},Qv={class:"section-title"},em={class:"delay-buttons"},tm={class:"option-section"},nm=["disabled"],sm=ut({__name:"PlayerOptionsMenu",props:{selectedPlayer:{}},emits:["set-player-mode","toggle-path-visibility","update-player-speed","adjust-player-delay","reset-player-delay","clear-player-path","set-timed-pass","clear-timed-pass"],setup(e,{expose:t,emit:n}){const s=e,o=n,i=te(!1),l=()=>{s.selectedPlayer&&(i.value=!i.value)},a=()=>{s.selectedPlayer&&(i.value=!0)},r=()=>{i.value=!1};t({openPopup:a});const u=R=>{o("set-player-mode",R),r()},c=()=>{o("toggle-path-visibility")},p=R=>{const $=R.target;o("update-player-speed",parseInt($.value))},v=R=>{o("adjust-player-delay",R)},y=()=>{o("reset-player-delay")},P=()=>{o("clear-player-path"),r()},C=()=>{o("set-timed-pass"),r()},L=()=>{o("clear-timed-pass")};return(R,$)=>(le(),ae("div",Lv,[h("button",{"data-cy":"player-options-trigger",class:Me(["popup-trigger-button",{active:i.value,disabled:!R.selectedPlayer}]),onClick:l,disabled:!R.selectedPlayer},[$[6]||($[6]=h("svg",{class:"icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[h("circle",{cx:"12",cy:"12",r:"3"}),h("path",{d:"M12 1v6m0 6v6M1 12h6m6 0h6"})],-1)),h("span",null,Ee(R.selectedPlayer?`Player ${R.selectedPlayer.id}`:"Player Options"),1),(le(),ae("svg",{class:Me(["chevron",{open:i.value}]),width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},$[5]||($[5]=[h("polyline",{points:"6 9 12 15 18 9"},null,-1)]),2))],10,Bv),(le(),Mo(Oi,{to:"body"},[_e(hn,{name:"popup"},{default:Yt(()=>[i.value&&R.selectedPlayer?(le(),ae("div",Nv,[h("div",Hv,[h("h3",Wv,"Player "+Ee(R.selectedPlayer.id)+" Options",1),h("div",Vv,[$[9]||($[9]=h("h4",{class:"section-title"},"Mode",-1)),h("div",jv,[h("button",{onClick:$[0]||($[0]=J=>u("drag")),class:Me(["mode-btn",{active:R.selectedPlayer.mode==="drag"}])},$[7]||($[7]=[h("svg",{class:"icon",viewBox:"0 0 24 24"},[h("path",{d:"M12 3l3 3m-3-3l-3 3M12 3v6M12 21l3-3m-3 3l-3-3M12 15v6M3 12l3-3m-3 3l3 3M9 12H3M21 12l-3-3m3 3l-3 3M15 12h6",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",fill:"none"})],-1),h("span",null,"Drag Player",-1)]),2),h("button",{"data-cy":"path-mode-btn",onClick:$[1]||($[1]=J=>u("path")),class:Me(["mode-btn",{active:R.selectedPlayer.mode==="path"}])},$[8]||($[8]=[h("svg",{class:"icon",viewBox:"0 0 24 24"},[h("path",{d:"M4 20c4-8 12-8 16-16",stroke:"currentColor","stroke-linecap":"round",fill:"none"}),h("path",{d:"M14 4h6v6",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",fill:"none"})],-1),h("span",null,"Draw Path",-1)]),2)])]),h("div",Uv,[h("button",{onClick:c,class:"option-btn"},[$[10]||($[10]=h("svg",{class:"icon",viewBox:"0 0 24 24"},[h("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z",stroke:"currentColor",fill:"none"}),h("circle",{cx:"12",cy:"12",r:"3",fill:"currentColor"})],-1)),h("span",null,Ee(R.selectedPlayer.pathVisible!==!1?"Hide Path":"Show Path"),1)])]),h("div",zv,[h("button",{"data-cy":"timed-pass-btn",onClick:C,class:Me(["option-btn",{active:R.selectedPlayer.timedPass}]),disabled:!R.selectedPlayer.path||R.selectedPlayer.path.length===0},[$[11]||($[11]=h("svg",{class:"icon",viewBox:"0 0 24 24"},[h("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2",fill:"none"}),h("path",{d:"M12 6v6l4 2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round",fill:"none"})],-1)),h("span",null,Ee(R.selectedPlayer.timedPass?"Edit Timed Pass":"Set Timed Pass"),1)],10,Yv)]),R.selectedPlayer.timedPass?(le(),ae("div",Kv,[h("button",{onClick:L,class:"option-btn danger"},$[12]||($[12]=[h("svg",{class:"icon",viewBox:"0 0 24 24"},[h("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round",fill:"none"})],-1),h("span",null,"Clear Timed Pass",-1)]))])):Ce("",!0),$[15]||($[15]=h("div",{class:"section-divider"},null,-1)),h("div",Xv,[h("h4",Jv,"Speed: "+Ee(R.selectedPlayer.speed)+"%",1),h("input",{type:"range",min:"25",max:"200",step:"25",value:R.selectedPlayer.speed,onInput:p,class:"speed-slider"},null,40,Gv),$[13]||($[13]=h("div",{class:"speed-marks"},[h("span",null,"25%"),h("span",null,"100%"),h("span",null,"200%")],-1))]),h("div",Zv,[h("h4",Qv,"Delay: "+Ee(R.selectedPlayer.sequenceDelay||0)+"ms",1),h("div",em,[h("button",{onClick:$[2]||($[2]=J=>v(10)),class:"delay-btn"},"+10ms"),h("button",{onClick:$[3]||($[3]=J=>v(50)),class:"delay-btn"},"+50ms"),h("button",{onClick:$[4]||($[4]=J=>v(100)),class:"delay-btn"},"+100ms"),h("button",{onClick:y,class:"delay-btn reset"},"Reset")])]),$[16]||($[16]=h("div",{class:"section-divider"},null,-1)),h("div",tm,[h("button",{onClick:P,class:"option-btn danger",disabled:!R.selectedPlayer.path||R.selectedPlayer.path.length===0},$[14]||($[14]=[h("svg",{class:"icon",viewBox:"0 0 24 24"},[h("path",{d:"M9 3h6M4 7h16M6 7l1 12a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2l1-12M10 11v6M14 11v6",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",fill:"none"})],-1),h("span",null,"Clear Path",-1)]),8,nm)])])])):Ce("",!0)]),_:1}),_e(hn,{name:"backdrop"},{default:Yt(()=>[i.value?(le(),ae("div",{key:0,class:"popup-backdrop",onClick:r})):Ce("",!0)]),_:1})]))]))}}),om=vt(sm,[["__scopeId","data-v-33916808"]]);function im(){const e=Li(),t=()=>{e.updateActivity()};Jt(()=>{["mousedown","mousemove","keydown","scroll","touchstart","touchmove","touchend","click","focus","input"].forEach(s=>{document.addEventListener(s,t,{passive:!0})})}),Bn(()=>{["mousedown","mousemove","keydown","scroll","touchstart","touchmove","touchend","click","focus","input"].forEach(s=>{document.removeEventListener(s,t)})})}const lm={class:"app-bar",role:"banner"},am=["aria-expanded"],rm={key:0,class:"icon-24",viewBox:"0 0 24 24","aria-hidden":"true"},cm={key:1,class:"icon-24",viewBox:"0 0 24 24","aria-hidden":"true"},um={class:"sidebar-content"},dm={class:"player-controls"},fm={class:"menu-section"},hm={class:"add-row"},pm={class:"dropdown-row"},gm=["value"],vm={class:"menu-section"},mm={key:0,class:"plays-list"},ym={key:0,class:"no-plays"},bm={key:1,class:"play-items"},Pm={class:"play-name"},Sm={class:"play-actions"},wm=["onClick"],_m=["onClick"],Cm={key:0,class:"menu-section"},xm={key:1,class:"menu-section"},Tm={key:2,class:"menu-section"},Em={class:"menu-section"},km={key:0,class:"help-panel"},Am={class:"help-accordion"},Mm={class:"help-accordion-item"},Rm={key:0,class:"help-accordion-body"},Dm={class:"help-accordion-item"},Om={key:0,class:"help-accordion-body"},Im={class:"help-accordion-item"},$m={key:0,class:"help-accordion-body"},Fm={class:"help-accordion-item"},qm={key:0,class:"help-accordion-body"},Lm={class:"help-accordion-item"},Bm={key:0,class:"help-accordion-body"},Nm={class:"main-content"},Hm={key:0,class:"playback-screen"},Wm={class:"playback-header"},Vm={class:"playback-title"},jm={key:1,class:"pitch-container"},Um={key:2,class:"modal storage-quota"},zm={class:"modal-message"},Ym={class:"modal-actions"},Km=["disabled"],Xm=.5,Jm=2,Gm=.1,Zm=ut({__name:"App",setup(e){const t=te(!1),n=te(typeof window<"u"?window.innerWidth>=1024:!0),s=te(1),o=te(!1),i=te("attacking");te(!1),te(!1),te(0),te(0);const l=te(!1),a=te(!1),r=te(!1),u=te({setup:!0,paths:!1,phases:!1,zoom:!1,tutorial:!1}),c=z=>{u.value[z]=!u.value[z]},p=te(null),v=()=>{var z;(z=p.value)==null||z.startTour()},y=te(null),P=te([]),C=te([]);te([]);const L=te(!1),R=te(!1),$=te(!1),J=te(null),F=te("Storage is full. Please remove some saved plays, then retry saving your play."),O=sn(),oe=Li();im();const re=Te(()=>O.plays),B=te(null),N=te(null);Jt(async()=>{const z=()=>{oe.isSessionValid||(l.value&&(l.value=!1),P.value.length>0&&(P.value=[]),C.value.length>0&&(C.value=[]))};window.__squiggleExpiryTimer=window.setInterval(z,3e4);const x=()=>{n.value=window.innerWidth>=1024,n.value&&(t.value=!0)};window.addEventListener("resize",x),x(),window.__squiggleResizeHandler=x}),Xe(()=>oe.isSessionValid,z=>{z||(l.value=!1,P.value=[],C.value=[])});const _=()=>{t.value=!t.value},V=z=>{var x,pe;(pe=(x=B.value)==null?void 0:x.openAddPlayersDialog)==null||pe.call(x,z)},k=z=>{var x,pe;i.value=z,(pe=(x=B.value)==null?void 0:x.setAttacking)==null||pe.call(x,z)},ne=()=>{var z,x;(x=(z=B.value)==null?void 0:z.openClearPlayConfirm)==null||x.call(z)},se=async z=>{l.value&&!z?P.value.length>0&&(L.value=!0):!l.value&&z&&(P.value=[],C.value=[]),l.value=z},g=z=>{l.value&&(P.value=[...P.value,...z])},A=z=>{l.value&&(C.value=[...C.value,z])},M=()=>{N.value&&N.value.openPopup()},j=z=>{y.value=z,a.value=!1},Z=()=>{y.value=null},m=async z=>{try{await zs.deletePlay(z)}catch(x){console.error("Failed to delete play:",x)}},D=()=>{},G=async z=>{try{const x=P.value.reduce((I,d)=>{const f=`${d.playerId}-${d.timestamp}`;return I.has(f)||I.set(f,d),I},new Map),pe=C.value.reduce((I,d)=>(I.has(d.id)||I.set(d.id,d),I),new Map),T={name:z,playerStates:Array.from(x.values()),ballEvents:Array.from(pe.values()).sort((I,d)=>I.startTimestamp-d.startTimestamp)};await zs.createPlay(T),y.value=O.plays[O.plays.length-1]||null,L.value=!1,J.value=null,P.value=[],C.value=[]}catch(x){console.error("Failed to save play:",x),(x instanceof Error?x.message:"")==="STORAGE_QUOTA_EXCEEDED"?(J.value={name:z,playerStates:[...P.value],ballEvents:[...C.value]},$.value=!0):alert("Failed to save play. Please try again.")}},ee=()=>{L.value=!1,P.value=[],C.value=[]},W=async()=>{try{await zs.clearAllPlays(),y.value=null,alert("All plays cleared successfully!")}catch(z){console.error("Failed to clear plays:",z),alert("Failed to clear plays. Please try again.")}R.value=!1};Bn(()=>{const z=window.__squiggleExpiryTimer;z&&clearInterval(z);const x=window.__squiggleResizeHandler;x&&window.removeEventListener("resize",x)});const de=()=>{a.value=!0,t.value=!0,$.value=!1},Pe=async()=>{if(J.value)try{await zs.createPlay(J.value),y.value=O.plays[O.plays.length-1]||null,J.value=null,$.value=!1,alert("Play saved successfully!")}catch(z){const x=z instanceof Error?z.message:"";alert(x==="STORAGE_QUOTA_EXCEEDED"?"Storage is still full. Please remove more saved plays and try again.":"Failed to save play. Please try again.")}};return(z,x)=>{var pe,T,I,d,f,b,w,E,q,U,Y,X,K,fe,ie,he,ve,ye,ke,we,He,Ve,Je,Ye,Ge,Pt,Ze,et,Hn,qo,Lo;return le(),ae("div",{class:Me(["app-shell",{"with-sidebar":n.value&&t.value}])},[h("header",lm,[h("button",{"data-cy":"menu-btn",class:"icon-btn menu-btn",onClick:_,"aria-expanded":t.value?"true":"false","aria-label":"Toggle navigation menu"},[t.value?(le(),ae("svg",cm,x[17]||(x[17]=[h("path",{fill:"currentColor",d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},null,-1)]))):(le(),ae("svg",rm,x[16]||(x[16]=[h("path",{fill:"currentColor",d:"M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z"},null,-1)])))],8,am),x[18]||(x[18]=h("div",{class:"app-brand"},[h("span",{class:"app-title"},"Squiggle")],-1)),x[19]||(x[19]=h("div",{class:"app-spacer"},null,-1)),x[20]||(x[20]=h("div",{class:"app-actions",role:"toolbar","aria-label":"App actions"},null,-1))]),_e(gh),h("aside",{class:Me(["sidebar",{open:t.value,persistent:n.value}])},[h("div",um,[h("div",dm,[h("div",fm,[x[25]||(x[25]=h("div",{class:"section-title"},"Teams",-1)),h("div",hm,[h("button",{"data-cy":"add-red-btn",class:"nav-btn add-red",onClick:x[0]||(x[0]=Be=>V("attacking"))},x[21]||(x[21]=[h("svg",{class:"icon",viewBox:"0 0 24 24","aria-hidden":"true"},[h("path",{d:"M12 5v14M5 12h14",stroke:"currentColor","stroke-linecap":"round"})],-1),ze(" Add Red ")])),h("button",{class:"nav-btn add-blue",onClick:x[1]||(x[1]=Be=>V("defensive"))},x[22]||(x[22]=[h("svg",{class:"icon",viewBox:"0 0 24 24","aria-hidden":"true"},[h("path",{d:"M12 5v14M5 12h14",stroke:"currentColor","stroke-linecap":"round"})],-1),ze(" Add Blue ")]))]),h("div",pm,[x[24]||(x[24]=h("label",{for:"attacking-team-select",class:"dropdown-label"},"Attacking Team",-1)),h("select",{id:"attacking-team-select",class:"team-select",value:i.value,onChange:x[2]||(x[2]=Be=>k(Be.target.value))},x[23]||(x[23]=[h("option",{value:"attacking"},"Red",-1),h("option",{value:"defensive"},"Blue",-1)]),40,gm)])]),x[41]||(x[41]=h("div",{class:"section-divider"},null,-1)),h("div",vm,[h("button",{class:"nav-btn plays",onClick:x[3]||(x[3]=Be=>a.value=!a.value)},x[26]||(x[26]=[h("svg",{class:"icon",viewBox:"0 0 24 24","aria-hidden":"true"},[h("path",{d:"M4 6h16M4 12h16M4 18h16",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"})],-1),ze(" Saved Plays ")])),a.value?(le(),ae("div",mm,[re.value.length===0?(le(),ae("div",ym,"No saved plays")):(le(),ae("div",bm,[(le(!0),ae(Ke,null,Fs(re.value,Be=>(le(),ae("div",{key:Be.id,class:"play-item"},[h("span",Pm,Ee(Be.name),1),h("div",Sm,[h("button",{onClick:S=>j(Be),class:"play-action-btn",title:"View"},x[27]||(x[27]=[h("svg",{class:"icon",viewBox:"0 0 24 24","aria-hidden":"true"},[h("path",{d:"M8 5v14l11-7z",fill:"currentColor"})],-1)]),8,wm),h("button",{onClick:S=>m(Be.id),class:"play-action-btn",title:"Delete"},x[28]||(x[28]=[h("svg",{class:"icon",viewBox:"0 0 24 24","aria-hidden":"true"},[h("path",{d:"M9 3h6M4 7h16M6 7l1 12a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2l1-12M10 11v6M14 11v6",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),8,_m)])]))),128))]))])):Ce("",!0)]),x[42]||(x[42]=h("div",{class:"section-divider"},null,-1)),B.value?(le(),ae("div",Cm,[_e(Kg,{"is-recording":l.value,"is-running-current-phase":((T=(pe=B.value.animationState)==null?void 0:pe.isRunningCurrentPhase)==null?void 0:T.value)||!1,"is-running-full-play":((d=(I=B.value.animationState)==null?void 0:I.isRunningFullPlay)==null?void 0:d.value)||!1,"has-any-sequences-in-current-phase":((f=B.value.computedGameState)==null?void 0:f.hasAnySequencesInCurrentPhase)||!1,"has-multiple-phases":((E=(w=(b=B.value.gameState)==null?void 0:b.phases)==null?void 0:w.value)==null?void 0:E.length)>1,"current-sequence-data":((U=(q=B.value.gameState)==null?void 0:q.currentSequenceData)==null?void 0:U.value)||null,"available-sequences":((X=(Y=B.value.gameState)==null?void 0:Y.availableSequences)==null?void 0:X.value)||[],"current-sequence":((fe=(K=B.value.gameState)==null?void 0:K.currentSequence)==null?void 0:fe.value)||0,onRunCurrentPhase:B.value.handleRunCurrentPhase,onRunFullPlay:B.value.handleRunFullPlay,onRunCurrentSequence:B.value.handleSequenceRun,onResetCurrentSequence:B.value.handleSequenceReset,onRecordFullPlay:B.value.handleRecordFullPlay},null,8,["is-recording","is-running-current-phase","is-running-full-play","has-any-sequences-in-current-phase","has-multiple-phases","current-sequence-data","available-sequences","current-sequence","onRunCurrentPhase","onRunFullPlay","onRunCurrentSequence","onResetCurrentSequence","onRecordFullPlay"])])):Ce("",!0),x[43]||(x[43]=h("div",{class:"section-divider"},null,-1)),B.value?(le(),ae("div",xm,[_e(qv,{phases:((he=(ie=B.value.gameState)==null?void 0:ie.phases)==null?void 0:he.value)||[],"current-phase":((ye=(ve=B.value.gameState)==null?void 0:ve.currentPhase)==null?void 0:ye.value)||0,"is-sequence-mode":((we=(ke=B.value.gameState)==null?void 0:ke.isSequenceMode)==null?void 0:we.value)||!1,"current-sequence":((Ve=(He=B.value.gameState)==null?void 0:He.currentSequence)==null?void 0:Ve.value)||0,"available-sequences":((Ye=(Je=B.value.gameState)==null?void 0:Je.availableSequences)==null?void 0:Ye.value)||[],"players-with-paths":((Pt=(Ge=B.value.gameState)==null?void 0:Ge.playersWithPaths)==null?void 0:Pt.value)||[],"current-sequence-data":((et=(Ze=B.value.gameState)==null?void 0:Ze.currentSequenceData)==null?void 0:et.value)||null,players:((qo=(Hn=B.value.gameState)==null?void 0:Hn.players)==null?void 0:qo.value)||[],onPhaseSelect:B.value.handlePhaseSelect,onPhaseAdd:B.value.handlePhaseAdd,onPhaseRemove:B.value.handlePhaseRemove,onSelectSequence:B.value.handleSequenceSelect,onAddSequence:B.value.handleSequenceAdd,onRemoveSequence:B.value.handleSequenceRemove,onTogglePlayerLoop:B.value.handlePlayerToggleLoop,onSelectAllPlayers:B.value.handleSelectAllPlayers,onDeselectAllPlayers:B.value.handleDeselectAllPlayers},null,8,["phases","current-phase","is-sequence-mode","current-sequence","available-sequences","players-with-paths","current-sequence-data","players","onPhaseSelect","onPhaseAdd","onPhaseRemove","onSelectSequence","onAddSequence","onRemoveSequence","onTogglePlayerLoop","onSelectAllPlayers","onDeselectAllPlayers"])])):Ce("",!0),x[44]||(x[44]=h("div",{class:"section-divider"},null,-1)),B.value?(le(),ae("div",Tm,[_e(om,{ref_key:"playerOptionsMenu",ref:N,"selected-player":((Lo=B.value.uiState)==null?void 0:Lo.selectedPlayer)||null,onSetPlayerMode:B.value.handlePlayerOptionsMode,onTogglePathVisibility:B.value.handlePlayerOptionsPathVisibility,onUpdatePlayerSpeed:B.value.handlePlayerOptionsSpeed,onAdjustPlayerDelay:B.value.handlePlayerOptionsDelay,onResetPlayerDelay:B.value.handlePlayerOptionsDelayReset,onClearPlayerPath:B.value.handlePlayerOptionsClearPath,onSetTimedPass:B.value.handleSetTimedPass,onClearTimedPass:B.value.handleClearTimedPass},null,8,["selected-player","onSetPlayerMode","onTogglePathVisibility","onUpdatePlayerSpeed","onAdjustPlayerDelay","onResetPlayerDelay","onClearPlayerPath","onSetTimedPass","onClearTimedPass"])])):Ce("",!0),x[45]||(x[45]=h("div",{class:"section-divider"},null,-1)),h("div",{class:"menu-section"},[h("button",{"data-cy":"clear-play-btn",class:"nav-btn danger",onClick:ne},x[29]||(x[29]=[h("svg",{class:"icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[h("path",{d:"M9 3h6M4 7h16M6 7l1 12a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2l1-12M10 11v6M14 11v6","stroke-linecap":"round","stroke-linejoin":"round"})],-1),ze(" Clear Current Play ")]))]),h("div",Em,[h("button",{class:"nav-btn help-btn",onClick:x[4]||(x[4]=Be=>r.value=!r.value)},x[30]||(x[30]=[h("svg",{class:"icon",viewBox:"0 0 24 24","aria-hidden":"true"},[h("path",{d:"M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2Zm0 15a1.5 1.5 0 1 1 1.5-1.5A1.502 1.502 0 0 1 12 17Zm1.8-6.9-.9.78A1.75 1.75 0 0 0 12 12.75V13h-1.5v-.25a3.25 3.25 0 0 1 1.05-2.4l1.14-.99a1.75 1.75 0 1 0-2.89-1.32H8.3A3.25 3.25 0 1 1 14.2 10.1Z",fill:"currentColor"})],-1),ze(" Help & Tips ")])),r.value?(le(),ae("div",km,[h("div",Am,[h("div",Mm,[h("button",{type:"button",class:"help-accordion-header",onClick:x[5]||(x[5]=Be=>c("setup"))},[x[31]||(x[31]=h("span",null,"Setting up players",-1)),h("span",{class:Me(["help-chevron",{open:u.value.setup}])},"",2)]),u.value.setup?(le(),ae("div",Rm,x[32]||(x[32]=[h("p",{class:"help-text"},[ze(" Use "),h("strong",null,"Add Red"),ze(" / "),h("strong",null,"Add Blue"),ze(" to place players, then drag them on the canvas to position them. ")],-1)]))):Ce("",!0)]),h("div",Dm,[h("button",{type:"button",class:"help-accordion-header",onClick:x[6]||(x[6]=Be=>c("paths"))},[x[33]||(x[33]=h("span",null,"Drawing running lines",-1)),h("span",{class:Me(["help-chevron",{open:u.value.paths}])},"",2)]),u.value.paths?(le(),ae("div",Om,x[34]||(x[34]=[h("p",{class:"help-text"}," Triple-click a player to open options and switch them to path mode, then drag to sketch their route. ",-1)]))):Ce("",!0)]),h("div",Im,[h("button",{type:"button",class:"help-accordion-header",onClick:x[7]||(x[7]=Be=>c("phases"))},[x[35]||(x[35]=h("span",null,"Phases, sequences & actions",-1)),h("span",{class:Me(["help-chevron",{open:u.value.phases}])},"",2)]),u.value.phases?(le(),ae("div",$m,x[36]||(x[36]=[h("p",{class:"help-text"},[ze(" Build phases and sequences with the top menus, then use "),h("strong",null,"Play Actions"),ze(" to run the current phase or the full play. ")],-1)]))):Ce("",!0)]),h("div",Fm,[h("button",{type:"button",class:"help-accordion-header",onClick:x[8]||(x[8]=Be=>c("zoom"))},[x[37]||(x[37]=h("span",null,"Zoom & pan",-1)),h("span",{class:Me(["help-chevron",{open:u.value.zoom}])},"",2)]),u.value.zoom?(le(),ae("div",qm,x[38]||(x[38]=[h("p",{class:"help-text"}," Use the zoom icon on the canvas to zoom or toggle pan mode when working on large plays. ",-1)]))):Ce("",!0)]),h("div",Lm,[h("button",{type:"button",class:"help-accordion-header",onClick:x[9]||(x[9]=Be=>c("tutorial"))},[x[39]||(x[39]=h("span",null,"First play tutorial",-1)),h("span",{class:Me(["help-chevron",{open:u.value.tutorial}])},"",2)]),u.value.tutorial?(le(),ae("div",Bm,[x[40]||(x[40]=h("p",{class:"help-text"}," Walk through creating, recording, and saving your very first play step-by-step. ",-1)),h("button",{class:"nav-btn tutorial-btn",onClick:v}," Start First Play Tutorial ")])):Ce("",!0)])])])):Ce("",!0)])])])],2),!n.value&&t.value?(le(),ae("div",{key:0,class:"backdrop",onClick:x[10]||(x[10]=Be=>t.value=!1)})):Ce("",!0),h("main",Nm,[y.value?(le(),ae("div",Hm,[h("div",Wm,[h("button",{onClick:Z,class:"close-btn"}," Back to Match"),h("h2",Vm,Ee(y.value.name),1)]),_e(oh,{"playback-data":y.value.playerStates,"ball-events":y.value.ballEvents||[],onSequenceComplete:D},null,8,["playback-data","ball-events"])])):(le(),ae("div",jm,[_e(jf,{ref_key:"rugbyPitch",ref:B,"is-recording":l.value,"onUpdate:isRecording":se,"playback-data":[],zoom:s.value,"pan-mode":o.value,"zoom-min":Xm,"zoom-max":Jm,"zoom-step":Gm,"onUpdate:zoom":x[11]||(x[11]=Be=>s.value=Be),"onUpdate:panMode":x[12]||(x[12]=Be=>o.value=Be),"onUpdate:playerStates":g,"onRecord:ballEvent":A,onOpenPlayerMenu:M},null,8,["is-recording","zoom","pan-mode"])]))]),_e(fh,{show:L.value,onSave:G,onCancel:ee},null,8,["show"]),_e(Ls,{show:R.value,title:"Clear All Plays",message:"Are you sure you want to clear all plays? This action cannot be undone.","confirm-text":"Clear All Plays",onConfirm:W,onCancel:x[13]||(x[13]=Be=>R.value=!1)},null,8,["show"]),$.value?(le(),ae("div",{key:1,class:"modal-backdrop",onClick:x[14]||(x[14]=Be=>$.value=!1)})):Ce("",!0),$.value?(le(),ae("div",Um,[x[46]||(x[46]=h("h3",{class:"modal-title"},"Storage Is Full",-1)),h("p",zm,Ee(F.value),1),h("div",Ym,[h("button",{class:"modal-btn primary",onClick:de},"Manage Saved Plays"),h("button",{class:"modal-btn",disabled:!J.value,onClick:Pe},"Retry Save",8,Km),h("button",{class:"modal-btn",onClick:x[15]||(x[15]=Be=>$.value=!1)},"Cancel")])])):Ce("",!0),_e(Og,{ref_key:"firstPlayTour",ref:p},null,512)],2)}}}),sc=Ld(Zm),Qm=Hd();sc.use(Qm);sc.mount("#app");var pa;(pa=navigator.storage)!=null&&pa.persist&&navigator.storage.persist().catch(()=>{});
