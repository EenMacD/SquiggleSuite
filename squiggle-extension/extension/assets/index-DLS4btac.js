(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function _i(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const $e={},Xn=[],Ot=()=>{},ac=()=>!1,Po=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ci=e=>e.startsWith("onUpdate:"),et=Object.assign,xi=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},rc=Object.prototype.hasOwnProperty,Oe=(e,t)=>rc.call(e,t),me=Array.isArray,Jn=e=>$s(e)==="[object Map]",wo=e=>$s(e)==="[object Set]",sl=e=>$s(e)==="[object Date]",we=e=>typeof e=="function",He=e=>typeof e=="string",Ft=e=>typeof e=="symbol",qe=e=>e!==null&&typeof e=="object",ya=e=>(qe(e)||we(e))&&we(e.then)&&we(e.catch),ba=Object.prototype.toString,$s=e=>ba.call(e),cc=e=>$s(e).slice(8,-1),Pa=e=>$s(e)==="[object Object]",Ti=e=>He(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,gs=_i(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),So=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},uc=/-(\w)/g,hn=So(e=>e.replace(uc,(t,n)=>n?n.toUpperCase():"")),dc=/\B([A-Z])/g,bn=So(e=>e.replace(dc,"-$1").toLowerCase()),wa=So(e=>e.charAt(0).toUpperCase()+e.slice(1)),Wo=So(e=>e?`on${wa(e)}`:""),dn=(e,t)=>!Object.is(e,t),Js=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Sa=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},si=e=>{const t=parseFloat(e);return isNaN(t)?e:t},fc=e=>{const t=He(e)?Number(e):NaN;return isNaN(t)?e:t};let ol;const _o=()=>ol||(ol=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function as(e){if(me(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=He(s)?vc(s):as(s);if(o)for(const i in o)t[i]=o[i]}return t}else if(He(e)||qe(e))return e}const hc=/;(?![^(]*\))/g,pc=/:([^]+)/,gc=/\/\*[^]*?\*\//g;function vc(e){const t={};return e.replace(gc,"").split(hc).forEach(n=>{if(n){const s=n.split(pc);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Me(e){let t="";if(He(e))t=e;else if(me(e))for(let n=0;n<e.length;n++){const s=Me(e[n]);s&&(t+=s+" ")}else if(qe(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const mc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",yc=_i(mc);function _a(e){return!!e||e===""}function bc(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=Co(e[s],t[s]);return n}function Co(e,t){if(e===t)return!0;let n=sl(e),s=sl(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=Ft(e),s=Ft(t),n||s)return e===t;if(n=me(e),s=me(t),n||s)return n&&s?bc(e,t):!1;if(n=qe(e),s=qe(t),n||s){if(!n||!s)return!1;const o=Object.keys(e).length,i=Object.keys(t).length;if(o!==i)return!1;for(const l in e){const a=e.hasOwnProperty(l),r=t.hasOwnProperty(l);if(a&&!r||!a&&r||!Co(e[l],t[l]))return!1}}return String(e)===String(t)}function Ca(e,t){return e.findIndex(n=>Co(n,t))}const xa=e=>!!(e&&e.__v_isRef===!0),Ee=e=>He(e)?e:e==null?"":me(e)||qe(e)&&(e.toString===ba||!we(e.toString))?xa(e)?Ee(e.value):JSON.stringify(e,Ta,2):String(e),Ta=(e,t)=>xa(t)?Ta(e,t.value):Jn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,o],i)=>(n[Vo(s,i)+" =>"]=o,n),{})}:wo(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Vo(n))}:Ft(t)?Vo(t):qe(t)&&!me(t)&&!Pa(t)?String(t):t,Vo=(e,t="")=>{var n;return Ft(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ot;class Ea{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ot,!t&&ot&&(this.index=(ot.scopes||(ot.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=ot;try{return ot=this,t()}finally{ot=n}}}on(){++this._on===1&&(this.prevScope=ot,ot=this)}off(){this._on>0&&--this._on===0&&(ot=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function ka(e){return new Ea(e)}function Aa(){return ot}function Pc(e,t=!1){ot&&ot.cleanups.push(e)}let Le;const jo=new WeakSet;class Ma{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ot&&ot.active&&ot.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,jo.has(this)&&(jo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Da(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,il(this),Oa(this);const t=Le,n=_t;Le=this,_t=!0;try{return this.fn()}finally{Ia(this),Le=t,_t=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ai(t);this.deps=this.depsTail=void 0,il(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?jo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){oi(this)&&this.run()}get dirty(){return oi(this)}}let Ra=0,vs,ms;function Da(e,t=!1){if(e.flags|=8,t){e.next=ms,ms=e;return}e.next=vs,vs=e}function Ei(){Ra++}function ki(){if(--Ra>0)return;if(ms){let t=ms;for(ms=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;vs;){let t=vs;for(vs=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Oa(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ia(e){let t,n=e.depsTail,s=n;for(;s;){const o=s.prevDep;s.version===-1?(s===n&&(n=o),Ai(s),wc(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=o}e.deps=t,e.depsTail=n}function oi(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&($a(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function $a(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===xs)||(e.globalVersion=xs,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!oi(e))))return;e.flags|=2;const t=e.dep,n=Le,s=_t;Le=e,_t=!0;try{Oa(e);const o=e.fn(e._value);(t.version===0||dn(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{Le=n,_t=s,Ia(e),e.flags&=-3}}function Ai(e,t=!1){const{dep:n,prevSub:s,nextSub:o}=e;if(s&&(s.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Ai(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function wc(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let _t=!0;const Fa=[];function Kt(){Fa.push(_t),_t=!1}function Xt(){const e=Fa.pop();_t=e===void 0?!0:e}function il(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Le;Le=void 0;try{t()}finally{Le=n}}}let xs=0;class Sc{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Mi{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Le||!_t||Le===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Le)n=this.activeLink=new Sc(Le,this),Le.deps?(n.prevDep=Le.depsTail,Le.depsTail.nextDep=n,Le.depsTail=n):Le.deps=Le.depsTail=n,qa(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Le.depsTail,n.nextDep=void 0,Le.depsTail.nextDep=n,Le.depsTail=n,Le.deps===n&&(Le.deps=s)}return n}trigger(t){this.version++,xs++,this.notify(t)}notify(t){Ei();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ki()}}}function qa(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)qa(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const so=new WeakMap,Dn=Symbol(""),ii=Symbol(""),Ts=Symbol("");function it(e,t,n){if(_t&&Le){let s=so.get(e);s||so.set(e,s=new Map);let o=s.get(n);o||(s.set(n,o=new Mi),o.map=s,o.key=n),o.track()}}function jt(e,t,n,s,o,i){const l=so.get(e);if(!l){xs++;return}const a=r=>{r&&r.trigger()};if(Ei(),t==="clear")l.forEach(a);else{const r=me(e),u=r&&Ti(n);if(r&&n==="length"){const c=Number(s);l.forEach((p,m)=>{(m==="length"||m===Ts||!Ft(m)&&m>=c)&&a(p)})}else switch((n!==void 0||l.has(void 0))&&a(l.get(n)),u&&a(l.get(Ts)),t){case"add":r?u&&a(l.get("length")):(a(l.get(Dn)),Jn(e)&&a(l.get(ii)));break;case"delete":r||(a(l.get(Dn)),Jn(e)&&a(l.get(ii)));break;case"set":Jn(e)&&a(l.get(Dn));break}}ki()}function _c(e,t){const n=so.get(e);return n&&n.get(t)}function Vn(e){const t=Ae(e);return t===e?t:(it(t,"iterate",Ts),bt(e)?t:t.map(nt))}function xo(e){return it(e=Ae(e),"iterate",Ts),e}const Cc={__proto__:null,[Symbol.iterator](){return Uo(this,Symbol.iterator,nt)},concat(...e){return Vn(this).concat(...e.map(t=>me(t)?Vn(t):t))},entries(){return Uo(this,"entries",e=>(e[1]=nt(e[1]),e))},every(e,t){return Ht(this,"every",e,t,void 0,arguments)},filter(e,t){return Ht(this,"filter",e,t,n=>n.map(nt),arguments)},find(e,t){return Ht(this,"find",e,t,nt,arguments)},findIndex(e,t){return Ht(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ht(this,"findLast",e,t,nt,arguments)},findLastIndex(e,t){return Ht(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ht(this,"forEach",e,t,void 0,arguments)},includes(...e){return Yo(this,"includes",e)},indexOf(...e){return Yo(this,"indexOf",e)},join(e){return Vn(this).join(e)},lastIndexOf(...e){return Yo(this,"lastIndexOf",e)},map(e,t){return Ht(this,"map",e,t,void 0,arguments)},pop(){return cs(this,"pop")},push(...e){return cs(this,"push",e)},reduce(e,...t){return ll(this,"reduce",e,t)},reduceRight(e,...t){return ll(this,"reduceRight",e,t)},shift(){return cs(this,"shift")},some(e,t){return Ht(this,"some",e,t,void 0,arguments)},splice(...e){return cs(this,"splice",e)},toReversed(){return Vn(this).toReversed()},toSorted(e){return Vn(this).toSorted(e)},toSpliced(...e){return Vn(this).toSpliced(...e)},unshift(...e){return cs(this,"unshift",e)},values(){return Uo(this,"values",nt)}};function Uo(e,t,n){const s=xo(e),o=s[t]();return s!==e&&!bt(e)&&(o._next=o.next,o.next=()=>{const i=o._next();return i.value&&(i.value=n(i.value)),i}),o}const xc=Array.prototype;function Ht(e,t,n,s,o,i){const l=xo(e),a=l!==e&&!bt(e),r=l[t];if(r!==xc[t]){const p=r.apply(e,i);return a?nt(p):p}let u=n;l!==e&&(a?u=function(p,m){return n.call(this,nt(p),m,e)}:n.length>2&&(u=function(p,m){return n.call(this,p,m,e)}));const c=r.call(l,u,s);return a&&o?o(c):c}function ll(e,t,n,s){const o=xo(e);let i=n;return o!==e&&(bt(e)?n.length>3&&(i=function(l,a,r){return n.call(this,l,a,r,e)}):i=function(l,a,r){return n.call(this,l,nt(a),r,e)}),o[t](i,...s)}function Yo(e,t,n){const s=Ae(e);it(s,"iterate",Ts);const o=s[t](...n);return(o===-1||o===!1)&&Oi(n[0])?(n[0]=Ae(n[0]),s[t](...n)):o}function cs(e,t,n=[]){Kt(),Ei();const s=Ae(e)[t].apply(e,n);return ki(),Xt(),s}const Tc=_i("__proto__,__v_isRef,__isVue"),La=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ft));function Ec(e){Ft(e)||(e=String(e));const t=Ae(this);return it(t,"has",e),t.hasOwnProperty(e)}class Ba{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const o=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(o?i?qc:Va:i?Wa:Ha).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const l=me(t);if(!o){let r;if(l&&(r=Cc[n]))return r;if(n==="hasOwnProperty")return Ec}const a=Reflect.get(t,n,Ue(t)?t:s);return(Ft(n)?La.has(n):Tc(n))||(o||it(t,"get",n),i)?a:Ue(a)?l&&Ti(n)?a:a.value:qe(a)?o?ja(a):qn(a):a}}class Na extends Ba{constructor(t=!1){super(!1,t)}set(t,n,s,o){let i=t[n];if(!this._isShallow){const r=pn(i);if(!bt(s)&&!pn(s)&&(i=Ae(i),s=Ae(s)),!me(t)&&Ue(i)&&!Ue(s))return r?!1:(i.value=s,!0)}const l=me(t)&&Ti(n)?Number(n)<t.length:Oe(t,n),a=Reflect.set(t,n,s,Ue(t)?t:o);return t===Ae(o)&&(l?dn(s,i)&&jt(t,"set",n,s):jt(t,"add",n,s)),a}deleteProperty(t,n){const s=Oe(t,n);t[n];const o=Reflect.deleteProperty(t,n);return o&&s&&jt(t,"delete",n,void 0),o}has(t,n){const s=Reflect.has(t,n);return(!Ft(n)||!La.has(n))&&it(t,"has",n),s}ownKeys(t){return it(t,"iterate",me(t)?"length":Dn),Reflect.ownKeys(t)}}class kc extends Ba{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Ac=new Na,Mc=new kc,Rc=new Na(!0);const li=e=>e,Ws=e=>Reflect.getPrototypeOf(e);function Dc(e,t,n){return function(...s){const o=this.__v_raw,i=Ae(o),l=Jn(i),a=e==="entries"||e===Symbol.iterator&&l,r=e==="keys"&&l,u=o[e](...s),c=n?li:t?oo:nt;return!t&&it(i,"iterate",r?ii:Dn),{next(){const{value:p,done:m}=u.next();return m?{value:p,done:m}:{value:a?[c(p[0]),c(p[1])]:c(p),done:m}},[Symbol.iterator](){return this}}}}function Vs(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Oc(e,t){const n={get(o){const i=this.__v_raw,l=Ae(i),a=Ae(o);e||(dn(o,a)&&it(l,"get",o),it(l,"get",a));const{has:r}=Ws(l),u=t?li:e?oo:nt;if(r.call(l,o))return u(i.get(o));if(r.call(l,a))return u(i.get(a));i!==l&&i.get(o)},get size(){const o=this.__v_raw;return!e&&it(Ae(o),"iterate",Dn),Reflect.get(o,"size",o)},has(o){const i=this.__v_raw,l=Ae(i),a=Ae(o);return e||(dn(o,a)&&it(l,"has",o),it(l,"has",a)),o===a?i.has(o):i.has(o)||i.has(a)},forEach(o,i){const l=this,a=l.__v_raw,r=Ae(a),u=t?li:e?oo:nt;return!e&&it(r,"iterate",Dn),a.forEach((c,p)=>o.call(i,u(c),u(p),l))}};return et(n,e?{add:Vs("add"),set:Vs("set"),delete:Vs("delete"),clear:Vs("clear")}:{add(o){!t&&!bt(o)&&!pn(o)&&(o=Ae(o));const i=Ae(this);return Ws(i).has.call(i,o)||(i.add(o),jt(i,"add",o,o)),this},set(o,i){!t&&!bt(i)&&!pn(i)&&(i=Ae(i));const l=Ae(this),{has:a,get:r}=Ws(l);let u=a.call(l,o);u||(o=Ae(o),u=a.call(l,o));const c=r.call(l,o);return l.set(o,i),u?dn(i,c)&&jt(l,"set",o,i):jt(l,"add",o,i),this},delete(o){const i=Ae(this),{has:l,get:a}=Ws(i);let r=l.call(i,o);r||(o=Ae(o),r=l.call(i,o)),a&&a.call(i,o);const u=i.delete(o);return r&&jt(i,"delete",o,void 0),u},clear(){const o=Ae(this),i=o.size!==0,l=o.clear();return i&&jt(o,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=Dc(o,e,t)}),n}function Ri(e,t){const n=Oc(e,t);return(s,o,i)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(Oe(n,o)&&o in s?n:s,o,i)}const Ic={get:Ri(!1,!1)},$c={get:Ri(!1,!0)},Fc={get:Ri(!0,!1)};const Ha=new WeakMap,Wa=new WeakMap,Va=new WeakMap,qc=new WeakMap;function Lc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Bc(e){return e.__v_skip||!Object.isExtensible(e)?0:Lc(cc(e))}function qn(e){return pn(e)?e:Di(e,!1,Ac,Ic,Ha)}function Nc(e){return Di(e,!1,Rc,$c,Wa)}function ja(e){return Di(e,!0,Mc,Fc,Va)}function Di(e,t,n,s,o){if(!qe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=Bc(e);if(i===0)return e;const l=o.get(e);if(l)return l;const a=new Proxy(e,i===2?s:n);return o.set(e,a),a}function fn(e){return pn(e)?fn(e.__v_raw):!!(e&&e.__v_isReactive)}function pn(e){return!!(e&&e.__v_isReadonly)}function bt(e){return!!(e&&e.__v_isShallow)}function Oi(e){return e?!!e.__v_raw:!1}function Ae(e){const t=e&&e.__v_raw;return t?Ae(t):e}function Ii(e){return!Oe(e,"__v_skip")&&Object.isExtensible(e)&&Sa(e,"__v_skip",!0),e}const nt=e=>qe(e)?qn(e):e,oo=e=>qe(e)?ja(e):e;function Ue(e){return e?e.__v_isRef===!0:!1}function ee(e){return Hc(e,!1)}function Hc(e,t){return Ue(e)?e:new Wc(e,t)}class Wc{constructor(t,n){this.dep=new Mi,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Ae(t),this._value=n?t:nt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||bt(t)||pn(t);t=s?t:Ae(t),dn(t,n)&&(this._rawValue=t,this._value=s?t:nt(t),this.dep.trigger())}}function on(e){return Ue(e)?e.value:e}const Vc={get:(e,t,n)=>t==="__v_raw"?e:on(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return Ue(o)&&!Ue(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function Ua(e){return fn(e)?e:new Proxy(e,Vc)}function jc(e){const t=me(e)?new Array(e.length):{};for(const n in e)t[n]=Yc(e,n);return t}class Uc{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return _c(Ae(this._object),this._key)}}function Yc(e,t,n){const s=e[t];return Ue(s)?s:new Uc(e,t,n)}class zc{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Mi(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=xs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Le!==this)return Da(this,!0),!0}get value(){const t=this.dep.track();return $a(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Kc(e,t,n=!1){let s,o;return we(e)?s=e:(s=e.get,o=e.set),new zc(s,o,n)}const js={},io=new WeakMap;let En;function Xc(e,t=!1,n=En){if(n){let s=io.get(n);s||io.set(n,s=[]),s.push(e)}}function Jc(e,t,n=$e){const{immediate:s,deep:o,once:i,scheduler:l,augmentJob:a,call:r}=n,u=$=>o?$:bt($)||o===!1||o===0?Ut($,1):Ut($);let c,p,m,y,P=!1,C=!1;if(Ue(e)?(p=()=>e.value,P=bt(e)):fn(e)?(p=()=>u(e),P=!0):me(e)?(C=!0,P=e.some($=>fn($)||bt($)),p=()=>e.map($=>{if(Ue($))return $.value;if(fn($))return u($);if(we($))return r?r($,2):$()})):we(e)?t?p=r?()=>r(e,2):e:p=()=>{if(m){Kt();try{m()}finally{Xt()}}const $=En;En=c;try{return r?r(e,3,[y]):e(y)}finally{En=$}}:p=Ot,t&&o){const $=p,D=o===!0?1/0:o;p=()=>Ut($(),D)}const q=Aa(),M=()=>{c.stop(),q&&q.active&&xi(q.effects,c)};if(i&&t){const $=t;t=(...D)=>{$(...D),M()}}let I=C?new Array(e.length).fill(js):js;const J=$=>{if(!(!(c.flags&1)||!c.dirty&&!$))if(t){const D=c.run();if(o||P||(C?D.some((oe,re)=>dn(oe,I[re])):dn(D,I))){m&&m();const oe=En;En=c;try{const re=[D,I===js?void 0:C&&I[0]===js?[]:I,y];I=D,r?r(t,3,re):t(...re)}finally{En=oe}}}else c.run()};return a&&a(J),c=new Ma(p),c.scheduler=l?()=>l(J,!1):J,y=$=>Xc($,!1,c),m=c.onStop=()=>{const $=io.get(c);if($){if(r)r($,4);else for(const D of $)D();io.delete(c)}},t?s?J(!0):I=c.run():l?l(J.bind(null,!0),!0):c.run(),M.pause=c.pause.bind(c),M.resume=c.resume.bind(c),M.stop=M,M}function Ut(e,t=1/0,n){if(t<=0||!qe(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Ue(e))Ut(e.value,t,n);else if(me(e))for(let s=0;s<e.length;s++)Ut(e[s],t,n);else if(wo(e)||Jn(e))e.forEach(s=>{Ut(s,t,n)});else if(Pa(e)){for(const s in e)Ut(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Ut(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Fs(e,t,n,s){try{return s?e(...s):e()}catch(o){To(o,t,n)}}function Ct(e,t,n,s){if(we(e)){const o=Fs(e,t,n,s);return o&&ya(o)&&o.catch(i=>{To(i,t,n)}),o}if(me(e)){const o=[];for(let i=0;i<e.length;i++)o.push(Ct(e[i],t,n,s));return o}}function To(e,t,n,s=!0){const o=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||$e;if(t){let a=t.parent;const r=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const c=a.ec;if(c){for(let p=0;p<c.length;p++)if(c[p](e,r,u)===!1)return}a=a.parent}if(i){Kt(),Fs(i,null,10,[e,r,u]),Xt();return}}Gc(e,n,o,s,l)}function Gc(e,t,n,s=!0,o=!1){if(o)throw e;console.error(e)}const ct=[];let Rt=-1;const Gn=[];let rn=null,zn=0;const Ya=Promise.resolve();let lo=null;function It(e){const t=lo||Ya;return e?t.then(this?e.bind(this):e):t}function Zc(e){let t=Rt+1,n=ct.length;for(;t<n;){const s=t+n>>>1,o=ct[s],i=Es(o);i<e||i===e&&o.flags&2?t=s+1:n=s}return t}function $i(e){if(!(e.flags&1)){const t=Es(e),n=ct[ct.length-1];!n||!(e.flags&2)&&t>=Es(n)?ct.push(e):ct.splice(Zc(t),0,e),e.flags|=1,za()}}function za(){lo||(lo=Ya.then(Xa))}function Qc(e){me(e)?Gn.push(...e):rn&&e.id===-1?rn.splice(zn+1,0,e):e.flags&1||(Gn.push(e),e.flags|=1),za()}function al(e,t,n=Rt+1){for(;n<ct.length;n++){const s=ct[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;ct.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Ka(e){if(Gn.length){const t=[...new Set(Gn)].sort((n,s)=>Es(n)-Es(s));if(Gn.length=0,rn){rn.push(...t);return}for(rn=t,zn=0;zn<rn.length;zn++){const n=rn[zn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}rn=null,zn=0}}const Es=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Xa(e){try{for(Rt=0;Rt<ct.length;Rt++){const t=ct[Rt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Fs(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Rt<ct.length;Rt++){const t=ct[Rt];t&&(t.flags&=-2)}Rt=-1,ct.length=0,Ka(),lo=null,(ct.length||Gn.length)&&Xa()}}let ft=null,Ja=null;function ao(e){const t=ft;return ft=e,Ja=e&&e.type.__scopeId||null,t}function Jt(e,t=ft,n){if(!t||e._n)return e;const s=(...o)=>{s._d&&Pl(-1);const i=ao(t);let l;try{l=e(...o)}finally{ao(i),s._d&&Pl(1)}return l};return s._n=!0,s._c=!0,s._d=!0,s}function Gs(e,t){if(ft===null)return e;const n=Do(ft),s=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[i,l,a,r=$e]=t[o];i&&(we(i)&&(i={mounted:i,updated:i}),i.deep&&Ut(l),s.push({dir:i,instance:n,value:l,oldValue:void 0,arg:a,modifiers:r}))}return e}function _n(e,t,n,s){const o=e.dirs,i=t&&t.dirs;for(let l=0;l<o.length;l++){const a=o[l];i&&(a.oldValue=i[l].value);let r=a.dir[s];r&&(Kt(),Ct(r,n,8,[e.el,a,e,t]),Xt())}}const Ga=Symbol("_vte"),Za=e=>e.__isTeleport,ys=e=>e&&(e.disabled||e.disabled===""),rl=e=>e&&(e.defer||e.defer===""),cl=e=>typeof SVGElement<"u"&&e instanceof SVGElement,ul=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,ai=(e,t)=>{const n=e&&e.to;return He(n)?t?t(n):null:n},Qa={name:"Teleport",__isTeleport:!0,process(e,t,n,s,o,i,l,a,r,u){const{mc:c,pc:p,pbc:m,o:{insert:y,querySelector:P,createText:C,createComment:q}}=u,M=ys(t.props);let{shapeFlag:I,children:J,dynamicChildren:$}=t;if(e==null){const D=t.el=C(""),oe=t.anchor=C("");y(D,n,s),y(oe,n,s);const re=(B,_)=>{I&16&&(o&&o.isCE&&(o.ce._teleportTarget=B),c(J,B,_,o,i,l,a,r))},L=()=>{const B=t.target=ai(t.props,P),_=er(B,t,C,y);B&&(l!=="svg"&&cl(B)?l="svg":l!=="mathml"&&ul(B)&&(l="mathml"),M||(re(B,_),Zs(t,!1)))};M&&(re(n,oe),Zs(t,!0)),rl(t.props)?(t.el.__isMounted=!1,rt(()=>{L(),delete t.el.__isMounted},i)):L()}else{if(rl(t.props)&&e.el.__isMounted===!1){rt(()=>{Qa.process(e,t,n,s,o,i,l,a,r,u)},i);return}t.el=e.el,t.targetStart=e.targetStart;const D=t.anchor=e.anchor,oe=t.target=e.target,re=t.targetAnchor=e.targetAnchor,L=ys(e.props),B=L?n:oe,_=L?D:re;if(l==="svg"||cl(oe)?l="svg":(l==="mathml"||ul(oe))&&(l="mathml"),$?(m(e.dynamicChildren,$,B,o,i,l,a),Bi(e,t,!0)):r||p(e,t,B,_,o,i,l,a,!1),M)L?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Us(t,n,D,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const W=t.target=ai(t.props,P);W&&Us(t,W,null,u,0)}else L&&Us(t,oe,re,u,1);Zs(t,M)}},remove(e,t,n,{um:s,o:{remove:o}},i){const{shapeFlag:l,children:a,anchor:r,targetStart:u,targetAnchor:c,target:p,props:m}=e;if(p&&(o(u),o(c)),i&&o(r),l&16){const y=i||!ys(m);for(let P=0;P<a.length;P++){const C=a[P];s(C,t,n,y,!!C.dynamicChildren)}}},move:Us,hydrate:eu};function Us(e,t,n,{o:{insert:s},m:o},i=2){i===0&&s(e.targetAnchor,t,n);const{el:l,anchor:a,shapeFlag:r,children:u,props:c}=e,p=i===2;if(p&&s(l,t,n),(!p||ys(c))&&r&16)for(let m=0;m<u.length;m++)o(u[m],t,n,2);p&&s(a,t,n)}function eu(e,t,n,s,o,i,{o:{nextSibling:l,parentNode:a,querySelector:r,insert:u,createText:c}},p){const m=t.target=ai(t.props,r);if(m){const y=ys(t.props),P=m._lpa||m.firstChild;if(t.shapeFlag&16)if(y)t.anchor=p(l(e),t,a(e),n,s,o,i),t.targetStart=P,t.targetAnchor=P&&l(P);else{t.anchor=l(e);let C=P;for(;C;){if(C&&C.nodeType===8){if(C.data==="teleport start anchor")t.targetStart=C;else if(C.data==="teleport anchor"){t.targetAnchor=C,m._lpa=t.targetAnchor&&l(t.targetAnchor);break}}C=l(C)}t.targetAnchor||er(m,t,c,u),p(P&&l(P),t,m,n,s,o,i)}Zs(t,y)}return t.anchor&&l(t.anchor)}const Fi=Qa;function Zs(e,t){const n=e.ctx;if(n&&n.ut){let s,o;for(t?(s=e.el,o=e.anchor):(s=e.targetStart,o=e.targetAnchor);s&&s!==o;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function er(e,t,n,s){const o=t.targetStart=n(""),i=t.targetAnchor=n("");return o[Ga]=i,e&&(s(o,e),s(i,e)),i}const cn=Symbol("_leaveCb"),Ys=Symbol("_enterCb");function tu(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Qt(()=>{e.isMounted=!0}),rr(()=>{e.isUnmounting=!0}),e}const yt=[Function,Array],tr={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:yt,onEnter:yt,onAfterEnter:yt,onEnterCancelled:yt,onBeforeLeave:yt,onLeave:yt,onAfterLeave:yt,onLeaveCancelled:yt,onBeforeAppear:yt,onAppear:yt,onAfterAppear:yt,onAppearCancelled:yt},nr=e=>{const t=e.subTree;return t.component?nr(t.component):t},nu={name:"BaseTransition",props:tr,setup(e,{slots:t}){const n=Qu(),s=tu();return()=>{const o=t.default&&ir(t.default(),!0);if(!o||!o.length)return;const i=sr(o),l=Ae(e),{mode:a}=l;if(s.isLeaving)return zo(i);const r=dl(i);if(!r)return zo(i);let u=ri(r,l,s,n,p=>u=p);r.type!==ut&&ks(r,u);let c=n.subTree&&dl(n.subTree);if(c&&c.type!==ut&&!kn(r,c)&&nr(n).type!==ut){let p=ri(c,l,s,n);if(ks(c,p),a==="out-in"&&r.type!==ut)return s.isLeaving=!0,p.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,c=void 0},zo(i);a==="in-out"&&r.type!==ut?p.delayLeave=(m,y,P)=>{const C=or(s,c);C[String(c.key)]=c,m[cn]=()=>{y(),m[cn]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{P(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return i}}};function sr(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==ut){t=n;break}}return t}const su=nu;function or(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function ri(e,t,n,s,o){const{appear:i,mode:l,persisted:a=!1,onBeforeEnter:r,onEnter:u,onAfterEnter:c,onEnterCancelled:p,onBeforeLeave:m,onLeave:y,onAfterLeave:P,onLeaveCancelled:C,onBeforeAppear:q,onAppear:M,onAfterAppear:I,onAppearCancelled:J}=t,$=String(e.key),D=or(n,e),oe=(B,_)=>{B&&Ct(B,s,9,_)},re=(B,_)=>{const W=_[1];oe(B,_),me(B)?B.every(k=>k.length<=1)&&W():B.length<=1&&W()},L={mode:l,persisted:a,beforeEnter(B){let _=r;if(!n.isMounted)if(i)_=q||r;else return;B[cn]&&B[cn](!0);const W=D[$];W&&kn(e,W)&&W.el[cn]&&W.el[cn](),oe(_,[B])},enter(B){let _=u,W=c,k=p;if(!n.isMounted)if(i)_=M||u,W=I||c,k=J||p;else return;let se=!1;const ne=B[Ys]=v=>{se||(se=!0,v?oe(k,[B]):oe(W,[B]),L.delayedLeave&&L.delayedLeave(),B[Ys]=void 0)};_?re(_,[B,ne]):ne()},leave(B,_){const W=String(e.key);if(B[Ys]&&B[Ys](!0),n.isUnmounting)return _();oe(m,[B]);let k=!1;const se=B[cn]=ne=>{k||(k=!0,_(),ne?oe(C,[B]):oe(P,[B]),B[cn]=void 0,D[W]===e&&delete D[W])};D[W]=e,y?re(y,[B,se]):se()},clone(B){const _=ri(B,t,n,s,o);return o&&o(_),_}};return L}function zo(e){if(Eo(e))return e=gn(e),e.children=null,e}function dl(e){if(!Eo(e))return Za(e.type)&&e.children?sr(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&we(n.default))return n.default()}}function ks(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ks(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ir(e,t=!1,n){let s=[],o=0;for(let i=0;i<e.length;i++){let l=e[i];const a=n==null?l.key:String(n)+String(l.key!=null?l.key:i);l.type===Xe?(l.patchFlag&128&&o++,s=s.concat(ir(l.children,t,a))):(t||l.type!==ut)&&s.push(a!=null?gn(l,{key:a}):l)}if(o>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function dt(e,t){return we(e)?et({name:e.name},t,{setup:e}):e}function lr(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function ro(e,t,n,s,o=!1){if(me(e)){e.forEach((P,C)=>ro(P,t&&(me(t)?t[C]:t),n,s,o));return}if(bs(s)&&!o){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&ro(e,t,n,s.component.subTree);return}const i=s.shapeFlag&4?Do(s.component):s.el,l=o?null:i,{i:a,r}=e,u=t&&t.r,c=a.refs===$e?a.refs={}:a.refs,p=a.setupState,m=Ae(p),y=p===$e?()=>!1:P=>Oe(m,P);if(u!=null&&u!==r&&(He(u)?(c[u]=null,y(u)&&(p[u]=null)):Ue(u)&&(u.value=null)),we(r))Fs(r,a,12,[l,c]);else{const P=He(r),C=Ue(r);if(P||C){const q=()=>{if(e.f){const M=P?y(r)?p[r]:c[r]:r.value;o?me(M)&&xi(M,i):me(M)?M.includes(i)||M.push(i):P?(c[r]=[i],y(r)&&(p[r]=c[r])):(r.value=[i],e.k&&(c[e.k]=r.value))}else P?(c[r]=l,y(r)&&(p[r]=l)):C&&(r.value=l,e.k&&(c[e.k]=l))};l?(q.id=-1,rt(q,n)):q()}}}_o().requestIdleCallback;_o().cancelIdleCallback;const bs=e=>!!e.type.__asyncLoader,Eo=e=>e.type.__isKeepAlive;function ou(e,t){ar(e,"a",t)}function iu(e,t){ar(e,"da",t)}function ar(e,t,n=st){const s=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(ko(t,s,n),n){let o=n.parent;for(;o&&o.parent;)Eo(o.parent.vnode)&&lu(s,t,n,o),o=o.parent}}function lu(e,t,n,s){const o=ko(t,e,s,!0);Nn(()=>{xi(s[t],o)},n)}function ko(e,t,n=st,s=!1){if(n){const o=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...l)=>{Kt();const a=Ls(n),r=Ct(t,n,e,l);return a(),Xt(),r});return s?o.unshift(i):o.push(i),i}}const Zt=e=>(t,n=st)=>{(!Ms||e==="sp")&&ko(e,(...s)=>t(...s),n)},au=Zt("bm"),Qt=Zt("m"),ru=Zt("bu"),cu=Zt("u"),rr=Zt("bum"),Nn=Zt("um"),uu=Zt("sp"),du=Zt("rtg"),fu=Zt("rtc");function hu(e,t=st){ko("ec",e,t)}const pu=Symbol.for("v-ndc");function qs(e,t,n,s){let o;const i=n,l=me(e);if(l||He(e)){const a=l&&fn(e);let r=!1,u=!1;a&&(r=!bt(e),u=pn(e),e=xo(e)),o=new Array(e.length);for(let c=0,p=e.length;c<p;c++)o[c]=t(r?u?oo(nt(e[c])):nt(e[c]):e[c],c,void 0,i)}else if(typeof e=="number"){o=new Array(e);for(let a=0;a<e;a++)o[a]=t(a+1,a,void 0,i)}else if(qe(e))if(e[Symbol.iterator])o=Array.from(e,(a,r)=>t(a,r,void 0,i));else{const a=Object.keys(e);o=new Array(a.length);for(let r=0,u=a.length;r<u;r++){const c=a[r];o[r]=t(e[c],c,r,i)}}else o=[];return o}const ci=e=>e?Er(e)?Do(e):ci(e.parent):null,Ps=et(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ci(e.parent),$root:e=>ci(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ur(e),$forceUpdate:e=>e.f||(e.f=()=>{$i(e.update)}),$nextTick:e=>e.n||(e.n=It.bind(e.proxy)),$watch:e=>qu.bind(e)}),Ko=(e,t)=>e!==$e&&!e.__isScriptSetup&&Oe(e,t),gu={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:o,props:i,accessCache:l,type:a,appContext:r}=e;let u;if(t[0]!=="$"){const y=l[t];if(y!==void 0)switch(y){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return i[t]}else{if(Ko(s,t))return l[t]=1,s[t];if(o!==$e&&Oe(o,t))return l[t]=2,o[t];if((u=e.propsOptions[0])&&Oe(u,t))return l[t]=3,i[t];if(n!==$e&&Oe(n,t))return l[t]=4,n[t];ui&&(l[t]=0)}}const c=Ps[t];let p,m;if(c)return t==="$attrs"&&it(e.attrs,"get",""),c(e);if((p=a.__cssModules)&&(p=p[t]))return p;if(n!==$e&&Oe(n,t))return l[t]=4,n[t];if(m=r.config.globalProperties,Oe(m,t))return m[t]},set({_:e},t,n){const{data:s,setupState:o,ctx:i}=e;return Ko(o,t)?(o[t]=n,!0):s!==$e&&Oe(s,t)?(s[t]=n,!0):Oe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:o,propsOptions:i}},l){let a;return!!n[l]||e!==$e&&Oe(e,l)||Ko(t,l)||(a=i[0])&&Oe(a,l)||Oe(s,l)||Oe(Ps,l)||Oe(o.config.globalProperties,l)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Oe(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function fl(e){return me(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ui=!0;function vu(e){const t=ur(e),n=e.proxy,s=e.ctx;ui=!1,t.beforeCreate&&hl(t.beforeCreate,e,"bc");const{data:o,computed:i,methods:l,watch:a,provide:r,inject:u,created:c,beforeMount:p,mounted:m,beforeUpdate:y,updated:P,activated:C,deactivated:q,beforeDestroy:M,beforeUnmount:I,destroyed:J,unmounted:$,render:D,renderTracked:oe,renderTriggered:re,errorCaptured:L,serverPrefetch:B,expose:_,inheritAttrs:W,components:k,directives:se,filters:ne}=t;if(u&&mu(u,s,null),l)for(const R in l){const j=l[R];we(j)&&(s[R]=j.bind(n))}if(o){const R=o.call(n,n);qe(R)&&(e.data=qn(R))}if(ui=!0,i)for(const R in i){const j=i[R],Z=we(j)?j.bind(n,n):we(j.get)?j.get.bind(n,n):Ot,g=!we(j)&&we(j.set)?j.set.bind(n):Ot,V=Te({get:Z,set:g});Object.defineProperty(s,R,{enumerable:!0,configurable:!0,get:()=>V.value,set:te=>V.value=te})}if(a)for(const R in a)cr(a[R],s,n,R);if(r){const R=we(r)?r.call(n):r;Reflect.ownKeys(R).forEach(j=>{_u(j,R[j])})}c&&hl(c,e,"c");function A(R,j){me(j)?j.forEach(Z=>R(Z.bind(n))):j&&R(j.bind(n))}if(A(au,p),A(Qt,m),A(ru,y),A(cu,P),A(ou,C),A(iu,q),A(hu,L),A(fu,oe),A(du,re),A(rr,I),A(Nn,$),A(uu,B),me(_))if(_.length){const R=e.exposed||(e.exposed={});_.forEach(j=>{Object.defineProperty(R,j,{get:()=>n[j],set:Z=>n[j]=Z})})}else e.exposed||(e.exposed={});D&&e.render===Ot&&(e.render=D),W!=null&&(e.inheritAttrs=W),k&&(e.components=k),se&&(e.directives=se),B&&lr(e)}function mu(e,t,n=Ot){me(e)&&(e=di(e));for(const s in e){const o=e[s];let i;qe(o)?"default"in o?i=ws(o.from||s,o.default,!0):i=ws(o.from||s):i=ws(o),Ue(i)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:l=>i.value=l}):t[s]=i}}function hl(e,t,n){Ct(me(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function cr(e,t,n,s){let o=s.includes(".")?Sr(n,s):()=>n[s];if(He(e)){const i=t[e];we(i)&&Je(o,i)}else if(we(e))Je(o,e.bind(n));else if(qe(e))if(me(e))e.forEach(i=>cr(i,t,n,s));else{const i=we(e.handler)?e.handler.bind(n):t[e.handler];we(i)&&Je(o,i,e)}}function ur(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:o,optionsCache:i,config:{optionMergeStrategies:l}}=e.appContext,a=i.get(t);let r;return a?r=a:!o.length&&!n&&!s?r=t:(r={},o.length&&o.forEach(u=>co(r,u,l,!0)),co(r,t,l)),qe(t)&&i.set(t,r),r}function co(e,t,n,s=!1){const{mixins:o,extends:i}=t;i&&co(e,i,n,!0),o&&o.forEach(l=>co(e,l,n,!0));for(const l in t)if(!(s&&l==="expose")){const a=yu[l]||n&&n[l];e[l]=a?a(e[l],t[l]):t[l]}return e}const yu={data:pl,props:gl,emits:gl,methods:ps,computed:ps,beforeCreate:at,created:at,beforeMount:at,mounted:at,beforeUpdate:at,updated:at,beforeDestroy:at,beforeUnmount:at,destroyed:at,unmounted:at,activated:at,deactivated:at,errorCaptured:at,serverPrefetch:at,components:ps,directives:ps,watch:Pu,provide:pl,inject:bu};function pl(e,t){return t?e?function(){return et(we(e)?e.call(this,this):e,we(t)?t.call(this,this):t)}:t:e}function bu(e,t){return ps(di(e),di(t))}function di(e){if(me(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function at(e,t){return e?[...new Set([].concat(e,t))]:t}function ps(e,t){return e?et(Object.create(null),e,t):t}function gl(e,t){return e?me(e)&&me(t)?[...new Set([...e,...t])]:et(Object.create(null),fl(e),fl(t??{})):t}function Pu(e,t){if(!e)return t;if(!t)return e;const n=et(Object.create(null),e);for(const s in t)n[s]=at(e[s],t[s]);return n}function dr(){return{app:null,config:{isNativeTag:ac,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let wu=0;function Su(e,t){return function(s,o=null){we(s)||(s=et({},s)),o!=null&&!qe(o)&&(o=null);const i=dr(),l=new WeakSet,a=[];let r=!1;const u=i.app={_uid:wu++,_component:s,_props:o,_container:null,_context:i,_instance:null,version:ld,get config(){return i.config},set config(c){},use(c,...p){return l.has(c)||(c&&we(c.install)?(l.add(c),c.install(u,...p)):we(c)&&(l.add(c),c(u,...p))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,p){return p?(i.components[c]=p,u):i.components[c]},directive(c,p){return p?(i.directives[c]=p,u):i.directives[c]},mount(c,p,m){if(!r){const y=u._ceVNode||_e(s,o);return y.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),e(y,c,m),r=!0,u._container=c,c.__vue_app__=u,Do(y.component)}},onUnmount(c){a.push(c)},unmount(){r&&(Ct(a,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,p){return i.provides[c]=p,u},runWithContext(c){const p=On;On=u;try{return c()}finally{On=p}}};return u}}let On=null;function _u(e,t){if(st){let n=st.provides;const s=st.parent&&st.parent.provides;s===n&&(n=st.provides=Object.create(s)),n[e]=t}}function ws(e,t,n=!1){const s=st||ft;if(s||On){let o=On?On._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return n&&we(t)?t.call(s&&s.proxy):t}}function Cu(){return!!(st||ft||On)}const fr={},hr=()=>Object.create(fr),pr=e=>Object.getPrototypeOf(e)===fr;function xu(e,t,n,s=!1){const o={},i=hr();e.propsDefaults=Object.create(null),gr(e,t,o,i);for(const l in e.propsOptions[0])l in o||(o[l]=void 0);n?e.props=s?o:Nc(o):e.type.props?e.props=o:e.props=i,e.attrs=i}function Tu(e,t,n,s){const{props:o,attrs:i,vnode:{patchFlag:l}}=e,a=Ae(o),[r]=e.propsOptions;let u=!1;if((s||l>0)&&!(l&16)){if(l&8){const c=e.vnode.dynamicProps;for(let p=0;p<c.length;p++){let m=c[p];if(Ao(e.emitsOptions,m))continue;const y=t[m];if(r)if(Oe(i,m))y!==i[m]&&(i[m]=y,u=!0);else{const P=hn(m);o[P]=fi(r,a,P,y,e,!1)}else y!==i[m]&&(i[m]=y,u=!0)}}}else{gr(e,t,o,i)&&(u=!0);let c;for(const p in a)(!t||!Oe(t,p)&&((c=bn(p))===p||!Oe(t,c)))&&(r?n&&(n[p]!==void 0||n[c]!==void 0)&&(o[p]=fi(r,a,p,void 0,e,!0)):delete o[p]);if(i!==a)for(const p in i)(!t||!Oe(t,p))&&(delete i[p],u=!0)}u&&jt(e.attrs,"set","")}function gr(e,t,n,s){const[o,i]=e.propsOptions;let l=!1,a;if(t)for(let r in t){if(gs(r))continue;const u=t[r];let c;o&&Oe(o,c=hn(r))?!i||!i.includes(c)?n[c]=u:(a||(a={}))[c]=u:Ao(e.emitsOptions,r)||(!(r in s)||u!==s[r])&&(s[r]=u,l=!0)}if(i){const r=Ae(n),u=a||$e;for(let c=0;c<i.length;c++){const p=i[c];n[p]=fi(o,r,p,u[p],e,!Oe(u,p))}}return l}function fi(e,t,n,s,o,i){const l=e[n];if(l!=null){const a=Oe(l,"default");if(a&&s===void 0){const r=l.default;if(l.type!==Function&&!l.skipFactory&&we(r)){const{propsDefaults:u}=o;if(n in u)s=u[n];else{const c=Ls(o);s=u[n]=r.call(null,t),c()}}else s=r;o.ce&&o.ce._setProp(n,s)}l[0]&&(i&&!a?s=!1:l[1]&&(s===""||s===bn(n))&&(s=!0))}return s}const Eu=new WeakMap;function vr(e,t,n=!1){const s=n?Eu:t.propsCache,o=s.get(e);if(o)return o;const i=e.props,l={},a=[];let r=!1;if(!we(e)){const c=p=>{r=!0;const[m,y]=vr(p,t,!0);et(l,m),y&&a.push(...y)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!i&&!r)return qe(e)&&s.set(e,Xn),Xn;if(me(i))for(let c=0;c<i.length;c++){const p=hn(i[c]);vl(p)&&(l[p]=$e)}else if(i)for(const c in i){const p=hn(c);if(vl(p)){const m=i[c],y=l[p]=me(m)||we(m)?{type:m}:et({},m),P=y.type;let C=!1,q=!0;if(me(P))for(let M=0;M<P.length;++M){const I=P[M],J=we(I)&&I.name;if(J==="Boolean"){C=!0;break}else J==="String"&&(q=!1)}else C=we(P)&&P.name==="Boolean";y[0]=C,y[1]=q,(C||Oe(y,"default"))&&a.push(p)}}const u=[l,a];return qe(e)&&s.set(e,u),u}function vl(e){return e[0]!=="$"&&!gs(e)}const qi=e=>e[0]==="_"||e==="$stable",Li=e=>me(e)?e.map(Dt):[Dt(e)],ku=(e,t,n)=>{if(t._n)return t;const s=Jt((...o)=>Li(t(...o)),n);return s._c=!1,s},mr=(e,t,n)=>{const s=e._ctx;for(const o in e){if(qi(o))continue;const i=e[o];if(we(i))t[o]=ku(o,i,s);else if(i!=null){const l=Li(i);t[o]=()=>l}}},yr=(e,t)=>{const n=Li(t);e.slots.default=()=>n},br=(e,t,n)=>{for(const s in t)(n||!qi(s))&&(e[s]=t[s])},Au=(e,t,n)=>{const s=e.slots=hr();if(e.vnode.shapeFlag&32){const o=t._;o?(br(s,t,n),n&&Sa(s,"_",o,!0)):mr(t,s)}else t&&yr(e,t)},Mu=(e,t,n)=>{const{vnode:s,slots:o}=e;let i=!0,l=$e;if(s.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:br(o,t,n):(i=!t.$stable,mr(t,o)),l=t}else t&&(yr(e,t),l={default:1});if(i)for(const a in o)!qi(a)&&l[a]==null&&delete o[a]},rt=ju;function Ru(e){return Du(e)}function Du(e,t){const n=_o();n.__VUE__=!0;const{insert:s,remove:o,patchProp:i,createElement:l,createText:a,createComment:r,setText:u,setElementText:c,parentNode:p,nextSibling:m,setScopeId:y=Ot,insertStaticContent:P}=e,C=(d,f,b,S=null,E=null,F=null,Y=void 0,z=null,X=!!f.dynamicChildren)=>{if(d===f)return;d&&!kn(d,f)&&(S=U(d),te(d,E,F,!0),d=null),f.patchFlag===-2&&(X=!1,f.dynamicChildren=null);const{type:K,ref:ue,shapeFlag:ie}=f;switch(K){case Mo:q(d,f,b,S);break;case ut:M(d,f,b,S);break;case Qs:d==null&&I(f,b,S,Y);break;case Xe:k(d,f,b,S,E,F,Y,z,X);break;default:ie&1?D(d,f,b,S,E,F,Y,z,X):ie&6?se(d,f,b,S,E,F,Y,z,X):(ie&64||ie&128)&&K.process(d,f,b,S,E,F,Y,z,X,T)}ue!=null&&E&&ro(ue,d&&d.ref,F,f||d,!f)},q=(d,f,b,S)=>{if(d==null)s(f.el=a(f.children),b,S);else{const E=f.el=d.el;f.children!==d.children&&u(E,f.children)}},M=(d,f,b,S)=>{d==null?s(f.el=r(f.children||""),b,S):f.el=d.el},I=(d,f,b,S)=>{[d.el,d.anchor]=P(d.children,f,b,S,d.el,d.anchor)},J=({el:d,anchor:f},b,S)=>{let E;for(;d&&d!==f;)E=m(d),s(d,b,S),d=E;s(f,b,S)},$=({el:d,anchor:f})=>{let b;for(;d&&d!==f;)b=m(d),o(d),d=b;o(f)},D=(d,f,b,S,E,F,Y,z,X)=>{f.type==="svg"?Y="svg":f.type==="math"&&(Y="mathml"),d==null?oe(f,b,S,E,F,Y,z,X):B(d,f,E,F,Y,z,X)},oe=(d,f,b,S,E,F,Y,z)=>{let X,K;const{props:ue,shapeFlag:ie,transition:de,dirs:ve}=d;if(X=d.el=l(d.type,F,ue&&ue.is,ue),ie&8?c(X,d.children):ie&16&&L(d.children,X,null,S,E,Xo(d,F),Y,z),ve&&_n(d,null,S,"created"),re(X,d,d.scopeId,Y,S),ue){for(const ke in ue)ke!=="value"&&!gs(ke)&&i(X,ke,null,ue[ke],F,S);"value"in ue&&i(X,"value",null,ue.value,F),(K=ue.onVnodeBeforeMount)&&At(K,S,d)}ve&&_n(d,null,S,"beforeMount");const be=Ou(E,de);be&&de.beforeEnter(X),s(X,f,b),((K=ue&&ue.onVnodeMounted)||be||ve)&&rt(()=>{K&&At(K,S,d),be&&de.enter(X),ve&&_n(d,null,S,"mounted")},E)},re=(d,f,b,S,E)=>{if(b&&y(d,b),S)for(let F=0;F<S.length;F++)y(d,S[F]);if(E){let F=E.subTree;if(f===F||Cr(F.type)&&(F.ssContent===f||F.ssFallback===f)){const Y=E.vnode;re(d,Y,Y.scopeId,Y.slotScopeIds,E.parent)}}},L=(d,f,b,S,E,F,Y,z,X=0)=>{for(let K=X;K<d.length;K++){const ue=d[K]=z?un(d[K]):Dt(d[K]);C(null,ue,f,b,S,E,F,Y,z)}},B=(d,f,b,S,E,F,Y)=>{const z=f.el=d.el;let{patchFlag:X,dynamicChildren:K,dirs:ue}=f;X|=d.patchFlag&16;const ie=d.props||$e,de=f.props||$e;let ve;if(b&&Cn(b,!1),(ve=de.onVnodeBeforeUpdate)&&At(ve,b,f,d),ue&&_n(f,d,b,"beforeUpdate"),b&&Cn(b,!0),(ie.innerHTML&&de.innerHTML==null||ie.textContent&&de.textContent==null)&&c(z,""),K?_(d.dynamicChildren,K,z,b,S,Xo(f,E),F):Y||j(d,f,z,null,b,S,Xo(f,E),F,!1),X>0){if(X&16)W(z,ie,de,b,E);else if(X&2&&ie.class!==de.class&&i(z,"class",null,de.class,E),X&4&&i(z,"style",ie.style,de.style,E),X&8){const be=f.dynamicProps;for(let ke=0;ke<be.length;ke++){const Se=be[ke],Ne=ie[Se],We=de[Se];(We!==Ne||Se==="value")&&i(z,Se,Ne,We,E,b)}}X&1&&d.children!==f.children&&c(z,f.children)}else!Y&&K==null&&W(z,ie,de,b,E);((ve=de.onVnodeUpdated)||ue)&&rt(()=>{ve&&At(ve,b,f,d),ue&&_n(f,d,b,"updated")},S)},_=(d,f,b,S,E,F,Y)=>{for(let z=0;z<f.length;z++){const X=d[z],K=f[z],ue=X.el&&(X.type===Xe||!kn(X,K)||X.shapeFlag&198)?p(X.el):b;C(X,K,ue,null,S,E,F,Y,!0)}},W=(d,f,b,S,E)=>{if(f!==b){if(f!==$e)for(const F in f)!gs(F)&&!(F in b)&&i(d,F,f[F],null,E,S);for(const F in b){if(gs(F))continue;const Y=b[F],z=f[F];Y!==z&&F!=="value"&&i(d,F,z,Y,E,S)}"value"in b&&i(d,"value",f.value,b.value,E)}},k=(d,f,b,S,E,F,Y,z,X)=>{const K=f.el=d?d.el:a(""),ue=f.anchor=d?d.anchor:a("");let{patchFlag:ie,dynamicChildren:de,slotScopeIds:ve}=f;ve&&(z=z?z.concat(ve):ve),d==null?(s(K,b,S),s(ue,b,S),L(f.children||[],b,ue,E,F,Y,z,X)):ie>0&&ie&64&&de&&d.dynamicChildren?(_(d.dynamicChildren,de,b,E,F,Y,z),(f.key!=null||E&&f===E.subTree)&&Bi(d,f,!0)):j(d,f,b,ue,E,F,Y,z,X)},se=(d,f,b,S,E,F,Y,z,X)=>{f.slotScopeIds=z,d==null?f.shapeFlag&512?E.ctx.activate(f,b,S,Y,X):ne(f,b,S,E,F,Y,X):v(d,f,X)},ne=(d,f,b,S,E,F,Y)=>{const z=d.component=Zu(d,S,E);if(Eo(d)&&(z.ctx.renderer=T),ed(z,!1,Y),z.asyncDep){if(E&&E.registerDep(z,A,Y),!d.el){const X=z.subTree=_e(ut);M(null,X,f,b)}}else A(z,d,f,b,E,F,Y)},v=(d,f,b)=>{const S=f.component=d.component;if(Wu(d,f,b))if(S.asyncDep&&!S.asyncResolved){R(S,f,b);return}else S.next=f,S.update();else f.el=d.el,S.vnode=f},A=(d,f,b,S,E,F,Y)=>{const z=()=>{if(d.isMounted){let{next:ie,bu:de,u:ve,parent:be,vnode:ke}=d;{const Ke=Pr(d);if(Ke){ie&&(ie.el=ke.el,R(d,ie,Y)),Ke.asyncDep.then(()=>{d.isUnmounted||z()});return}}let Se=ie,Ne;Cn(d,!1),ie?(ie.el=ke.el,R(d,ie,Y)):ie=ke,de&&Js(de),(Ne=ie.props&&ie.props.onVnodeBeforeUpdate)&&At(Ne,be,ie,ke),Cn(d,!0);const We=yl(d),Ge=d.subTree;d.subTree=We,C(Ge,We,p(Ge.el),U(Ge),d,E,F),ie.el=We.el,Se===null&&Vu(d,We.el),ve&&rt(ve,E),(Ne=ie.props&&ie.props.onVnodeUpdated)&&rt(()=>At(Ne,be,ie,ke),E)}else{let ie;const{el:de,props:ve}=f,{bm:be,m:ke,parent:Se,root:Ne,type:We}=d,Ge=bs(f);Cn(d,!1),be&&Js(be),!Ge&&(ie=ve&&ve.onVnodeBeforeMount)&&At(ie,Se,f),Cn(d,!0);{Ne.ce&&Ne.ce._injectChildStyle(We);const Ke=d.subTree=yl(d);C(null,Ke,b,S,d,E,F),f.el=Ke.el}if(ke&&rt(ke,E),!Ge&&(ie=ve&&ve.onVnodeMounted)){const Ke=f;rt(()=>At(ie,Se,Ke),E)}(f.shapeFlag&256||Se&&bs(Se.vnode)&&Se.vnode.shapeFlag&256)&&d.a&&rt(d.a,E),d.isMounted=!0,f=b=S=null}};d.scope.on();const X=d.effect=new Ma(z);d.scope.off();const K=d.update=X.run.bind(X),ue=d.job=X.runIfDirty.bind(X);ue.i=d,ue.id=d.uid,X.scheduler=()=>$i(ue),Cn(d,!0),K()},R=(d,f,b)=>{f.component=d;const S=d.vnode.props;d.vnode=f,d.next=null,Tu(d,f.props,S,b),Mu(d,f.children,b),Kt(),al(d),Xt()},j=(d,f,b,S,E,F,Y,z,X=!1)=>{const K=d&&d.children,ue=d?d.shapeFlag:0,ie=f.children,{patchFlag:de,shapeFlag:ve}=f;if(de>0){if(de&128){g(K,ie,b,S,E,F,Y,z,X);return}else if(de&256){Z(K,ie,b,S,E,F,Y,z,X);return}}ve&8?(ue&16&&Pe(K,E,F),ie!==K&&c(b,ie)):ue&16?ve&16?g(K,ie,b,S,E,F,Y,z,X):Pe(K,E,F,!0):(ue&8&&c(b,""),ve&16&&L(ie,b,S,E,F,Y,z,X))},Z=(d,f,b,S,E,F,Y,z,X)=>{d=d||Xn,f=f||Xn;const K=d.length,ue=f.length,ie=Math.min(K,ue);let de;for(de=0;de<ie;de++){const ve=f[de]=X?un(f[de]):Dt(f[de]);C(d[de],ve,b,null,E,F,Y,z,X)}K>ue?Pe(d,E,F,!0,!1,ie):L(f,b,S,E,F,Y,z,X,ie)},g=(d,f,b,S,E,F,Y,z,X)=>{let K=0;const ue=f.length;let ie=d.length-1,de=ue-1;for(;K<=ie&&K<=de;){const ve=d[K],be=f[K]=X?un(f[K]):Dt(f[K]);if(kn(ve,be))C(ve,be,b,null,E,F,Y,z,X);else break;K++}for(;K<=ie&&K<=de;){const ve=d[ie],be=f[de]=X?un(f[de]):Dt(f[de]);if(kn(ve,be))C(ve,be,b,null,E,F,Y,z,X);else break;ie--,de--}if(K>ie){if(K<=de){const ve=de+1,be=ve<ue?f[ve].el:S;for(;K<=de;)C(null,f[K]=X?un(f[K]):Dt(f[K]),b,be,E,F,Y,z,X),K++}}else if(K>de)for(;K<=ie;)te(d[K],E,F,!0),K++;else{const ve=K,be=K,ke=new Map;for(K=be;K<=de;K++){const Qe=f[K]=X?un(f[K]):Dt(f[K]);Qe.key!=null&&ke.set(Qe.key,K)}let Se,Ne=0;const We=de-be+1;let Ge=!1,Ke=0;const Ze=new Array(We);for(K=0;K<We;K++)Ze[K]=0;for(K=ve;K<=ie;K++){const Qe=d[K];if(Ne>=We){te(Qe,E,F,!0);continue}let tt;if(Qe.key!=null)tt=ke.get(Qe.key);else for(Se=be;Se<=de;Se++)if(Ze[Se-be]===0&&kn(Qe,f[Se])){tt=Se;break}tt===void 0?te(Qe,E,F,!0):(Ze[tt-be]=K+1,tt>=Ke?Ke=tt:Ge=!0,C(Qe,f[tt],b,null,E,F,Y,z,X),Ne++)}const wt=Ge?Iu(Ze):Xn;for(Se=wt.length-1,K=We-1;K>=0;K--){const Qe=be+K,tt=f[Qe],Wn=Qe+1<ue?f[Qe+1].el:S;Ze[K]===0?C(null,tt,b,Wn,E,F,Y,z,X):Ge&&(Se<0||K!==wt[Se]?V(tt,b,Wn,2):Se--)}}},V=(d,f,b,S,E=null)=>{const{el:F,type:Y,transition:z,children:X,shapeFlag:K}=d;if(K&6){V(d.component.subTree,f,b,S);return}if(K&128){d.suspense.move(f,b,S);return}if(K&64){Y.move(d,f,b,T);return}if(Y===Xe){s(F,f,b);for(let ie=0;ie<X.length;ie++)V(X[ie],f,b,S);s(d.anchor,f,b);return}if(Y===Qs){J(d,f,b);return}if(S!==2&&K&1&&z)if(S===0)z.beforeEnter(F),s(F,f,b),rt(()=>z.enter(F),E);else{const{leave:ie,delayLeave:de,afterLeave:ve}=z,be=()=>{d.ctx.isUnmounted?o(F):s(F,f,b)},ke=()=>{ie(F,()=>{be(),ve&&ve()})};de?de(F,be,ke):ke()}else s(F,f,b)},te=(d,f,b,S=!1,E=!1)=>{const{type:F,props:Y,ref:z,children:X,dynamicChildren:K,shapeFlag:ue,patchFlag:ie,dirs:de,cacheIndex:ve}=d;if(ie===-2&&(E=!1),z!=null&&(Kt(),ro(z,null,b,d,!0),Xt()),ve!=null&&(f.renderCache[ve]=void 0),ue&256){f.ctx.deactivate(d);return}const be=ue&1&&de,ke=!bs(d);let Se;if(ke&&(Se=Y&&Y.onVnodeBeforeUnmount)&&At(Se,f,d),ue&6)fe(d.component,b,S);else{if(ue&128){d.suspense.unmount(b,S);return}be&&_n(d,null,f,"beforeUnmount"),ue&64?d.type.remove(d,f,b,T,S):K&&!K.hasOnce&&(F!==Xe||ie>0&&ie&64)?Pe(K,f,b,!1,!0):(F===Xe&&ie&384||!E&&ue&16)&&Pe(X,f,b),S&&G(d)}(ke&&(Se=Y&&Y.onVnodeUnmounted)||be)&&rt(()=>{Se&&At(Se,f,d),be&&_n(d,null,f,"unmounted")},b)},G=d=>{const{type:f,el:b,anchor:S,transition:E}=d;if(f===Xe){H(b,S);return}if(f===Qs){$(d);return}const F=()=>{o(b),E&&!E.persisted&&E.afterLeave&&E.afterLeave()};if(d.shapeFlag&1&&E&&!E.persisted){const{leave:Y,delayLeave:z}=E,X=()=>Y(b,F);z?z(d.el,F,X):X()}else F()},H=(d,f)=>{let b;for(;d!==f;)b=m(d),o(d),d=b;o(f)},fe=(d,f,b)=>{const{bum:S,scope:E,job:F,subTree:Y,um:z,m:X,a:K,parent:ue,slots:{__:ie}}=d;ml(X),ml(K),S&&Js(S),ue&&me(ie)&&ie.forEach(de=>{ue.renderCache[de]=void 0}),E.stop(),F&&(F.flags|=8,te(Y,d,f,b)),z&&rt(z,f),rt(()=>{d.isUnmounted=!0},f),f&&f.pendingBranch&&!f.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===f.pendingId&&(f.deps--,f.deps===0&&f.resolve())},Pe=(d,f,b,S=!1,E=!1,F=0)=>{for(let Y=F;Y<d.length;Y++)te(d[Y],f,b,S,E)},U=d=>{if(d.shapeFlag&6)return U(d.component.subTree);if(d.shapeFlag&128)return d.suspense.next();const f=m(d.anchor||d.el),b=f&&f[Ga];return b?m(b):f};let x=!1;const he=(d,f,b)=>{d==null?f._vnode&&te(f._vnode,null,null,!0):C(f._vnode||null,d,f,null,null,null,b),f._vnode=d,x||(x=!0,al(),Ka(),x=!1)},T={p:C,um:te,m:V,r:G,mt:ne,mc:L,pc:j,pbc:_,n:U,o:e};return{render:he,hydrate:void 0,createApp:Su(he)}}function Xo({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Cn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Ou(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Bi(e,t,n=!1){const s=e.children,o=t.children;if(me(s)&&me(o))for(let i=0;i<s.length;i++){const l=s[i];let a=o[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=o[i]=un(o[i]),a.el=l.el),!n&&a.patchFlag!==-2&&Bi(l,a)),a.type===Mo&&(a.el=l.el),a.type===ut&&!a.el&&(a.el=l.el)}}function Iu(e){const t=e.slice(),n=[0];let s,o,i,l,a;const r=e.length;for(s=0;s<r;s++){const u=e[s];if(u!==0){if(o=n[n.length-1],e[o]<u){t[s]=o,n.push(s);continue}for(i=0,l=n.length-1;i<l;)a=i+l>>1,e[n[a]]<u?i=a+1:l=a;u<e[n[i]]&&(i>0&&(t[s]=n[i-1]),n[i]=s)}}for(i=n.length,l=n[i-1];i-- >0;)n[i]=l,l=t[l];return n}function Pr(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Pr(t)}function ml(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const $u=Symbol.for("v-scx"),Fu=()=>ws($u);function Je(e,t,n){return wr(e,t,n)}function wr(e,t,n=$e){const{immediate:s,deep:o,flush:i,once:l}=n,a=et({},n),r=t&&s||!t&&i!=="post";let u;if(Ms){if(i==="sync"){const y=Fu();u=y.__watcherHandles||(y.__watcherHandles=[])}else if(!r){const y=()=>{};return y.stop=Ot,y.resume=Ot,y.pause=Ot,y}}const c=st;a.call=(y,P,C)=>Ct(y,c,P,C);let p=!1;i==="post"?a.scheduler=y=>{rt(y,c&&c.suspense)}:i!=="sync"&&(p=!0,a.scheduler=(y,P)=>{P?y():$i(y)}),a.augmentJob=y=>{t&&(y.flags|=4),p&&(y.flags|=2,c&&(y.id=c.uid,y.i=c))};const m=Jc(e,t,a);return Ms&&(u?u.push(m):r&&m()),m}function qu(e,t,n){const s=this.proxy,o=He(e)?e.includes(".")?Sr(s,e):()=>s[e]:e.bind(s,s);let i;we(t)?i=t:(i=t.handler,n=t);const l=Ls(this),a=wr(o,i.bind(s),n);return l(),a}function Sr(e,t){const n=t.split(".");return()=>{let s=e;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}const Lu=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${hn(t)}Modifiers`]||e[`${bn(t)}Modifiers`];function Bu(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||$e;let o=n;const i=t.startsWith("update:"),l=i&&Lu(s,t.slice(7));l&&(l.trim&&(o=n.map(c=>He(c)?c.trim():c)),l.number&&(o=n.map(si)));let a,r=s[a=Wo(t)]||s[a=Wo(hn(t))];!r&&i&&(r=s[a=Wo(bn(t))]),r&&Ct(r,e,6,o);const u=s[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Ct(u,e,6,o)}}function _r(e,t,n=!1){const s=t.emitsCache,o=s.get(e);if(o!==void 0)return o;const i=e.emits;let l={},a=!1;if(!we(e)){const r=u=>{const c=_r(u,t,!0);c&&(a=!0,et(l,c))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return!i&&!a?(qe(e)&&s.set(e,null),null):(me(i)?i.forEach(r=>l[r]=null):et(l,i),qe(e)&&s.set(e,l),l)}function Ao(e,t){return!e||!Po(t)?!1:(t=t.slice(2).replace(/Once$/,""),Oe(e,t[0].toLowerCase()+t.slice(1))||Oe(e,bn(t))||Oe(e,t))}function yl(e){const{type:t,vnode:n,proxy:s,withProxy:o,propsOptions:[i],slots:l,attrs:a,emit:r,render:u,renderCache:c,props:p,data:m,setupState:y,ctx:P,inheritAttrs:C}=e,q=ao(e);let M,I;try{if(n.shapeFlag&4){const $=o||s,D=$;M=Dt(u.call(D,$,c,p,y,m,P)),I=a}else{const $=t;M=Dt($.length>1?$(p,{attrs:a,slots:l,emit:r}):$(p,null)),I=t.props?a:Nu(a)}}catch($){Ss.length=0,To($,e,1),M=_e(ut)}let J=M;if(I&&C!==!1){const $=Object.keys(I),{shapeFlag:D}=J;$.length&&D&7&&(i&&$.some(Ci)&&(I=Hu(I,i)),J=gn(J,I,!1,!0))}return n.dirs&&(J=gn(J,null,!1,!0),J.dirs=J.dirs?J.dirs.concat(n.dirs):n.dirs),n.transition&&ks(J,n.transition),M=J,ao(q),M}const Nu=e=>{let t;for(const n in e)(n==="class"||n==="style"||Po(n))&&((t||(t={}))[n]=e[n]);return t},Hu=(e,t)=>{const n={};for(const s in e)(!Ci(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function Wu(e,t,n){const{props:s,children:o,component:i}=e,{props:l,children:a,patchFlag:r}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&r>=0){if(r&1024)return!0;if(r&16)return s?bl(s,l,u):!!l;if(r&8){const c=t.dynamicProps;for(let p=0;p<c.length;p++){const m=c[p];if(l[m]!==s[m]&&!Ao(u,m))return!0}}}else return(o||a)&&(!a||!a.$stable)?!0:s===l?!1:s?l?bl(s,l,u):!0:!!l;return!1}function bl(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const i=s[o];if(t[i]!==e[i]&&!Ao(n,i))return!0}return!1}function Vu({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const Cr=e=>e.__isSuspense;function ju(e,t){t&&t.pendingBranch?me(e)?t.effects.push(...e):t.effects.push(e):Qc(e)}const Xe=Symbol.for("v-fgt"),Mo=Symbol.for("v-txt"),ut=Symbol.for("v-cmt"),Qs=Symbol.for("v-stc"),Ss=[];let pt=null;function le(e=!1){Ss.push(pt=e?null:[])}function Uu(){Ss.pop(),pt=Ss[Ss.length-1]||null}let As=1;function Pl(e,t=!1){As+=e,e<0&&pt&&t&&(pt.hasOnce=!0)}function xr(e){return e.dynamicChildren=As>0?pt||Xn:null,Uu(),As>0&&pt&&pt.push(e),e}function ae(e,t,n,s,o,i){return xr(h(e,t,n,s,o,i,!0))}function Ro(e,t,n,s,o){return xr(_e(e,t,n,s,o,!0))}function uo(e){return e?e.__v_isVNode===!0:!1}function kn(e,t){return e.type===t.type&&e.key===t.key}const Tr=({key:e})=>e??null,eo=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?He(e)||Ue(e)||we(e)?{i:ft,r:e,k:t,f:!!n}:e:null);function h(e,t=null,n=null,s=0,o=null,i=e===Xe?0:1,l=!1,a=!1){const r={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Tr(t),ref:t&&eo(t),scopeId:Ja,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:ft};return a?(Ni(r,n),i&128&&e.normalize(r)):n&&(r.shapeFlag|=He(n)?8:16),As>0&&!l&&pt&&(r.patchFlag>0||i&6)&&r.patchFlag!==32&&pt.push(r),r}const _e=Yu;function Yu(e,t=null,n=null,s=0,o=null,i=!1){if((!e||e===pu)&&(e=ut),uo(e)){const a=gn(e,t,!0);return n&&Ni(a,n),As>0&&!i&&pt&&(a.shapeFlag&6?pt[pt.indexOf(e)]=a:pt.push(a)),a.patchFlag=-2,a}if(od(e)&&(e=e.__vccOpts),t){t=zu(t);let{class:a,style:r}=t;a&&!He(a)&&(t.class=Me(a)),qe(r)&&(Oi(r)&&!me(r)&&(r=et({},r)),t.style=as(r))}const l=He(e)?1:Cr(e)?128:Za(e)?64:qe(e)?4:we(e)?2:0;return h(e,t,n,s,o,l,i,!0)}function zu(e){return e?Oi(e)||pr(e)?et({},e):e:null}function gn(e,t,n=!1,s=!1){const{props:o,ref:i,patchFlag:l,children:a,transition:r}=e,u=t?Xu(o||{},t):o,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Tr(u),ref:t&&t.ref?n&&i?me(i)?i.concat(eo(t)):[i,eo(t)]:eo(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Xe?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:r,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&gn(e.ssContent),ssFallback:e.ssFallback&&gn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return r&&s&&ks(c,r.clone(c)),c}function ze(e=" ",t=0){return _e(Mo,null,e,t)}function Ku(e,t){const n=_e(Qs,null,e);return n.staticCount=t,n}function xe(e="",t=!1){return t?(le(),Ro(ut,null,e)):_e(ut,null,e)}function Dt(e){return e==null||typeof e=="boolean"?_e(ut):me(e)?_e(Xe,null,e.slice()):uo(e)?un(e):_e(Mo,null,String(e))}function un(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:gn(e)}function Ni(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(me(t))n=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),Ni(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!pr(t)?t._ctx=ft:o===3&&ft&&(ft.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else we(t)?(t={default:t,_ctx:ft},n=32):(t=String(t),s&64?(n=16,t=[ze(t)]):n=8);e.children=t,e.shapeFlag|=n}function Xu(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=Me([t.class,s.class]));else if(o==="style")t.style=as([t.style,s.style]);else if(Po(o)){const i=t[o],l=s[o];l&&i!==l&&!(me(i)&&i.includes(l))&&(t[o]=i?[].concat(i,l):l)}else o!==""&&(t[o]=s[o])}return t}function At(e,t,n,s=null){Ct(e,t,7,[n,s])}const Ju=dr();let Gu=0;function Zu(e,t,n){const s=e.type,o=(t?t.appContext:e.appContext)||Ju,i={uid:Gu++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ea(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:vr(s,o),emitsOptions:_r(s,o),emit:null,emitted:null,propsDefaults:$e,inheritAttrs:s.inheritAttrs,ctx:$e,data:$e,props:$e,attrs:$e,slots:$e,refs:$e,setupState:$e,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Bu.bind(null,i),e.ce&&e.ce(i),i}let st=null;const Qu=()=>st||ft;let fo,hi;{const e=_o(),t=(n,s)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(s),i=>{o.length>1?o.forEach(l=>l(i)):o[0](i)}};fo=t("__VUE_INSTANCE_SETTERS__",n=>st=n),hi=t("__VUE_SSR_SETTERS__",n=>Ms=n)}const Ls=e=>{const t=st;return fo(e),e.scope.on(),()=>{e.scope.off(),fo(t)}},wl=()=>{st&&st.scope.off(),fo(null)};function Er(e){return e.vnode.shapeFlag&4}let Ms=!1;function ed(e,t=!1,n=!1){t&&hi(t);const{props:s,children:o}=e.vnode,i=Er(e);xu(e,s,i,t),Au(e,o,n||t);const l=i?td(e,t):void 0;return t&&hi(!1),l}function td(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,gu);const{setup:s}=n;if(s){Kt();const o=e.setupContext=s.length>1?sd(e):null,i=Ls(e),l=Fs(s,e,0,[e.props,o]),a=ya(l);if(Xt(),i(),(a||e.sp)&&!bs(e)&&lr(e),a){if(l.then(wl,wl),t)return l.then(r=>{Sl(e,r)}).catch(r=>{To(r,e,0)});e.asyncDep=l}else Sl(e,l)}else kr(e)}function Sl(e,t,n){we(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:qe(t)&&(e.setupState=Ua(t)),kr(e)}function kr(e,t,n){const s=e.type;e.render||(e.render=s.render||Ot);{const o=Ls(e);Kt();try{vu(e)}finally{Xt(),o()}}}const nd={get(e,t){return it(e,"get",""),e[t]}};function sd(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,nd),slots:e.slots,emit:e.emit,expose:t}}function Do(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ua(Ii(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Ps)return Ps[n](e)},has(t,n){return n in t||n in Ps}})):e.proxy}function od(e){return we(e)&&"__vccOpts"in e}const Te=(e,t)=>Kc(e,t,Ms);function id(e,t,n){const s=arguments.length;return s===2?qe(t)&&!me(t)?uo(t)?_e(e,null,[t]):_e(e,t):_e(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&uo(n)&&(n=[n]),_e(e,t,n))}const ld="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let pi;const _l=typeof window<"u"&&window.trustedTypes;if(_l)try{pi=_l.createPolicy("vue",{createHTML:e=>e})}catch{}const Ar=pi?e=>pi.createHTML(e):e=>e,ad="http://www.w3.org/2000/svg",rd="http://www.w3.org/1998/Math/MathML",Vt=typeof document<"u"?document:null,Cl=Vt&&Vt.createElement("template"),cd={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const o=t==="svg"?Vt.createElementNS(ad,e):t==="mathml"?Vt.createElementNS(rd,e):n?Vt.createElement(e,{is:n}):Vt.createElement(e);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>Vt.createTextNode(e),createComment:e=>Vt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Vt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,o,i){const l=n?n.previousSibling:t.lastChild;if(o&&(o===i||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===i||!(o=o.nextSibling)););else{Cl.innerHTML=Ar(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=Cl.content;if(s==="svg"||s==="mathml"){const r=a.firstChild;for(;r.firstChild;)a.appendChild(r.firstChild);a.removeChild(r)}t.insertBefore(a,n)}return[l?l.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},sn="transition",us="animation",Rs=Symbol("_vtc"),Mr={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ud=et({},tr,Mr),dd=e=>(e.displayName="Transition",e.props=ud,e),vn=dd((e,{slots:t})=>id(su,fd(e),t)),xn=(e,t=[])=>{me(e)?e.forEach(n=>n(...t)):e&&e(...t)},xl=e=>e?me(e)?e.some(t=>t.length>1):e.length>1:!1;function fd(e){const t={};for(const k in e)k in Mr||(t[k]=e[k]);if(e.css===!1)return t;const{name:n="v",type:s,duration:o,enterFromClass:i=`${n}-enter-from`,enterActiveClass:l=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:r=i,appearActiveClass:u=l,appearToClass:c=a,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:y=`${n}-leave-to`}=e,P=hd(o),C=P&&P[0],q=P&&P[1],{onBeforeEnter:M,onEnter:I,onEnterCancelled:J,onLeave:$,onLeaveCancelled:D,onBeforeAppear:oe=M,onAppear:re=I,onAppearCancelled:L=J}=t,B=(k,se,ne,v)=>{k._enterCancelled=v,Tn(k,se?c:a),Tn(k,se?u:l),ne&&ne()},_=(k,se)=>{k._isLeaving=!1,Tn(k,p),Tn(k,y),Tn(k,m),se&&se()},W=k=>(se,ne)=>{const v=k?re:I,A=()=>B(se,k,ne);xn(v,[se,A]),Tl(()=>{Tn(se,k?r:i),Wt(se,k?c:a),xl(v)||El(se,s,C,A)})};return et(t,{onBeforeEnter(k){xn(M,[k]),Wt(k,i),Wt(k,l)},onBeforeAppear(k){xn(oe,[k]),Wt(k,r),Wt(k,u)},onEnter:W(!1),onAppear:W(!0),onLeave(k,se){k._isLeaving=!0;const ne=()=>_(k,se);Wt(k,p),k._enterCancelled?(Wt(k,m),Ml()):(Ml(),Wt(k,m)),Tl(()=>{k._isLeaving&&(Tn(k,p),Wt(k,y),xl($)||El(k,s,q,ne))}),xn($,[k,ne])},onEnterCancelled(k){B(k,!1,void 0,!0),xn(J,[k])},onAppearCancelled(k){B(k,!0,void 0,!0),xn(L,[k])},onLeaveCancelled(k){_(k),xn(D,[k])}})}function hd(e){if(e==null)return null;if(qe(e))return[Jo(e.enter),Jo(e.leave)];{const t=Jo(e);return[t,t]}}function Jo(e){return fc(e)}function Wt(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Rs]||(e[Rs]=new Set)).add(t)}function Tn(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[Rs];n&&(n.delete(t),n.size||(e[Rs]=void 0))}function Tl(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let pd=0;function El(e,t,n,s){const o=e._endId=++pd,i=()=>{o===e._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:l,timeout:a,propCount:r}=gd(e,t);if(!l)return s();const u=l+"end";let c=0;const p=()=>{e.removeEventListener(u,m),i()},m=y=>{y.target===e&&++c>=r&&p()};setTimeout(()=>{c<r&&p()},a+1),e.addEventListener(u,m)}function gd(e,t){const n=window.getComputedStyle(e),s=P=>(n[P]||"").split(", "),o=s(`${sn}Delay`),i=s(`${sn}Duration`),l=kl(o,i),a=s(`${us}Delay`),r=s(`${us}Duration`),u=kl(a,r);let c=null,p=0,m=0;t===sn?l>0&&(c=sn,p=l,m=i.length):t===us?u>0&&(c=us,p=u,m=r.length):(p=Math.max(l,u),c=p>0?l>u?sn:us:null,m=c?c===sn?i.length:r.length:0);const y=c===sn&&/\b(transform|all)(,|$)/.test(s(`${sn}Property`).toString());return{type:c,timeout:p,propCount:m,hasTransform:y}}function kl(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>Al(n)+Al(e[s])))}function Al(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Ml(){return document.body.offsetHeight}function vd(e,t,n){const s=e[Rs];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const ho=Symbol("_vod"),Rr=Symbol("_vsh"),md={beforeMount(e,{value:t},{transition:n}){e[ho]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):ds(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),ds(e,!0),s.enter(e)):s.leave(e,()=>{ds(e,!1)}):ds(e,t))},beforeUnmount(e,{value:t}){ds(e,t)}};function ds(e,t){e.style.display=t?e[ho]:"none",e[Rr]=!t}const yd=Symbol(""),bd=/(^|;)\s*display\s*:/;function Pd(e,t,n){const s=e.style,o=He(n);let i=!1;if(n&&!o){if(t)if(He(t))for(const l of t.split(";")){const a=l.slice(0,l.indexOf(":")).trim();n[a]==null&&to(s,a,"")}else for(const l in t)n[l]==null&&to(s,l,"");for(const l in n)l==="display"&&(i=!0),to(s,l,n[l])}else if(o){if(t!==n){const l=s[yd];l&&(n+=";"+l),s.cssText=n,i=bd.test(n)}}else t&&e.removeAttribute("style");ho in e&&(e[ho]=i?s.display:"",e[Rr]&&(s.display="none"))}const Rl=/\s*!important$/;function to(e,t,n){if(me(n))n.forEach(s=>to(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=wd(e,t);Rl.test(n)?e.setProperty(bn(s),n.replace(Rl,""),"important"):e[s]=n}}const Dl=["Webkit","Moz","ms"],Go={};function wd(e,t){const n=Go[t];if(n)return n;let s=hn(t);if(s!=="filter"&&s in e)return Go[t]=s;s=wa(s);for(let o=0;o<Dl.length;o++){const i=Dl[o]+s;if(i in e)return Go[t]=i}return t}const Ol="http://www.w3.org/1999/xlink";function Il(e,t,n,s,o,i=yc(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Ol,t.slice(6,t.length)):e.setAttributeNS(Ol,t,n):n==null||i&&!_a(n)?e.removeAttribute(t):e.setAttribute(t,i?"":Ft(n)?String(n):n)}function $l(e,t,n,s,o){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Ar(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?e.getAttribute("value")||"":e.value,r=n==null?e.type==="checkbox"?"on":"":String(n);(a!==r||!("_value"in e))&&(e.value=r),n==null&&e.removeAttribute(t),e._value=n;return}let l=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=_a(n):n==null&&a==="string"?(n="",l=!0):a==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(o||t)}function An(e,t,n,s){e.addEventListener(t,n,s)}function Sd(e,t,n,s){e.removeEventListener(t,n,s)}const Fl=Symbol("_vei");function _d(e,t,n,s,o=null){const i=e[Fl]||(e[Fl]={}),l=i[t];if(s&&l)l.value=s;else{const[a,r]=Cd(t);if(s){const u=i[t]=Ed(s,o);An(e,a,u,r)}else l&&(Sd(e,a,l,r),i[t]=void 0)}}const ql=/(?:Once|Passive|Capture)$/;function Cd(e){let t;if(ql.test(e)){t={};let s;for(;s=e.match(ql);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):bn(e.slice(2)),t]}let Zo=0;const xd=Promise.resolve(),Td=()=>Zo||(xd.then(()=>Zo=0),Zo=Date.now());function Ed(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Ct(kd(s,n.value),t,5,[s])};return n.value=e,n.attached=Td(),n}function kd(e,t){if(me(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const Ll=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Ad=(e,t,n,s,o,i)=>{const l=o==="svg";t==="class"?vd(e,s,l):t==="style"?Pd(e,n,s):Po(t)?Ci(t)||_d(e,t,n,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Md(e,t,s,l))?($l(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Il(e,t,s,l,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!He(s))?$l(e,hn(t),s,i,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Il(e,t,s,l))};function Md(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ll(t)&&we(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Ll(t)&&He(n)?!1:t in e}const po=e=>{const t=e.props["onUpdate:modelValue"]||!1;return me(t)?n=>Js(t,n):t};function Rd(e){e.target.composing=!0}function Bl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Zn=Symbol("_assign"),Dr={created(e,{modifiers:{lazy:t,trim:n,number:s}},o){e[Zn]=po(o);const i=s||o.props&&o.props.type==="number";An(e,t?"change":"input",l=>{if(l.target.composing)return;let a=e.value;n&&(a=a.trim()),i&&(a=si(a)),e[Zn](a)}),n&&An(e,"change",()=>{e.value=e.value.trim()}),t||(An(e,"compositionstart",Rd),An(e,"compositionend",Bl),An(e,"change",Bl))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:o,number:i}},l){if(e[Zn]=po(l),e.composing)return;const a=(i||e.type==="number")&&!/^0\d/.test(e.value)?si(e.value):e.value,r=t??"";a!==r&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||o&&e.value.trim()===r)||(e.value=r))}},Dd={deep:!0,created(e,t,n){e[Zn]=po(n),An(e,"change",()=>{const s=e._modelValue,o=Od(e),i=e.checked,l=e[Zn];if(me(s)){const a=Ca(s,o),r=a!==-1;if(i&&!r)l(s.concat(o));else if(!i&&r){const u=[...s];u.splice(a,1),l(u)}}else if(wo(s)){const a=new Set(s);i?a.add(o):a.delete(o),l(a)}else l(Or(e,i))})},mounted:Nl,beforeUpdate(e,t,n){e[Zn]=po(n),Nl(e,t,n)}};function Nl(e,{value:t,oldValue:n},s){e._modelValue=t;let o;if(me(t))o=Ca(t,s.props.value)>-1;else if(wo(t))o=t.has(s.props.value);else{if(t===n)return;o=Co(t,Or(e,!0))}e.checked!==o&&(e.checked=o)}function Od(e){return"_value"in e?e._value:e.value}function Or(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Id=["ctrl","shift","alt","meta"],$d={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Id.some(n=>e[`${n}Key`]&&!t.includes(n))},Ir=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(o,...i)=>{for(let l=0;l<t.length;l++){const a=$d[t[l]];if(a&&a(o,t))return}return e(o,...i)})},Fd={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},gi=(e,t)=>{const n=e._withKeys||(e._withKeys={}),s=t.join(".");return n[s]||(n[s]=o=>{if(!("key"in o))return;const i=bn(o.key);if(t.some(l=>l===i||Fd[l]===i))return e(o)})},qd=et({patchProp:Ad},cd);let Hl;function Ld(){return Hl||(Hl=Ru(qd))}const Bd=(...e)=>{const t=Ld().createApp(...e),{mount:n}=t;return t.mount=s=>{const o=Hd(s);if(!o)return;const i=t._component;!we(i)&&!i.render&&!i.template&&(i.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const l=n(o,!1,Nd(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),l},t};function Nd(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Hd(e){return He(e)?document.querySelector(e):e}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let $r;const Oo=e=>$r=e,Fr=Symbol();function vi(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var _s;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(_s||(_s={}));function Wd(){const e=ka(!0),t=e.run(()=>ee({}));let n=[],s=[];const o=Ii({install(i){Oo(o),o._a=i,i.provide(Fr,o),i.config.globalProperties.$pinia=o,s.forEach(l=>n.push(l)),s=[]},use(i){return this._a?n.push(i):s.push(i),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return o}const qr=()=>{};function Wl(e,t,n,s=qr){e.push(t);const o=()=>{const i=e.indexOf(t);i>-1&&(e.splice(i,1),s())};return!n&&Aa()&&Pc(o),o}function jn(e,...t){e.slice().forEach(n=>{n(...t)})}const Vd=e=>e(),Vl=Symbol(),Qo=Symbol();function mi(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,s)=>e.set(s,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const s=t[n],o=e[n];vi(o)&&vi(s)&&e.hasOwnProperty(n)&&!Ue(s)&&!fn(s)?e[n]=mi(o,s):e[n]=s}return e}const jd=Symbol();function Ud(e){return!vi(e)||!Object.prototype.hasOwnProperty.call(e,jd)}const{assign:ln}=Object;function Yd(e){return!!(Ue(e)&&e.effect)}function zd(e,t,n,s){const{state:o,actions:i,getters:l}=t,a=n.state.value[e];let r;function u(){a||(n.state.value[e]=o?o():{});const c=jc(n.state.value[e]);return ln(c,i,Object.keys(l||{}).reduce((p,m)=>(p[m]=Ii(Te(()=>{Oo(n);const y=n._s.get(e);return l[m].call(y,y)})),p),{}))}return r=Lr(e,u,t,n,s,!0),r}function Lr(e,t,n={},s,o,i){let l;const a=ln({actions:{}},n),r={deep:!0};let u,c,p=[],m=[],y;const P=s.state.value[e];!i&&!P&&(s.state.value[e]={}),ee({});let C;function q(L){let B;u=c=!1,typeof L=="function"?(L(s.state.value[e]),B={type:_s.patchFunction,storeId:e,events:y}):(mi(s.state.value[e],L),B={type:_s.patchObject,payload:L,storeId:e,events:y});const _=C=Symbol();It().then(()=>{C===_&&(u=!0)}),c=!0,jn(p,B,s.state.value[e])}const M=i?function(){const{state:B}=n,_=B?B():{};this.$patch(W=>{ln(W,_)})}:qr;function I(){l.stop(),p=[],m=[],s._s.delete(e)}const J=(L,B="")=>{if(Vl in L)return L[Qo]=B,L;const _=function(){Oo(s);const W=Array.from(arguments),k=[],se=[];function ne(R){k.push(R)}function v(R){se.push(R)}jn(m,{args:W,name:_[Qo],store:D,after:ne,onError:v});let A;try{A=L.apply(this&&this.$id===e?this:D,W)}catch(R){throw jn(se,R),R}return A instanceof Promise?A.then(R=>(jn(k,R),R)).catch(R=>(jn(se,R),Promise.reject(R))):(jn(k,A),A)};return _[Vl]=!0,_[Qo]=B,_},$={_p:s,$id:e,$onAction:Wl.bind(null,m),$patch:q,$reset:M,$subscribe(L,B={}){const _=Wl(p,L,B.detached,()=>W()),W=l.run(()=>Je(()=>s.state.value[e],k=>{(B.flush==="sync"?c:u)&&L({storeId:e,type:_s.direct,events:y},k)},ln({},r,B)));return _},$dispose:I},D=qn($);s._s.set(e,D);const re=(s._a&&s._a.runWithContext||Vd)(()=>s._e.run(()=>(l=ka()).run(()=>t({action:J}))));for(const L in re){const B=re[L];if(Ue(B)&&!Yd(B)||fn(B))i||(P&&Ud(B)&&(Ue(B)?B.value=P[L]:mi(B,P[L])),s.state.value[e][L]=B);else if(typeof B=="function"){const _=J(B,L);re[L]=_,a.actions[L]=B}}return ln(D,re),ln(Ae(D),re),Object.defineProperty(D,"$state",{get:()=>s.state.value[e],set:L=>{q(B=>{ln(B,L)})}}),s._p.forEach(L=>{ln(D,l.run(()=>L({store:D,app:s._a,pinia:s,options:a})))}),P&&i&&n.hydrate&&n.hydrate(D.$state,P),u=!0,c=!0,D}/*! #__NO_SIDE_EFFECTS__ */function Br(e,t,n){let s;const o=typeof t=="function";s=o?n:t;function i(l,a){const r=Cu();return l=l||(r?ws(Fr,null):null),l&&Oo(l),l=$r,l._s.has(e)||(o?Lr(e,t,s,l):zd(e,s,l)),l._s.get(e)}return i.$id=e,i}const St={BASE_WIDTH:1e3,FIELD_RATIO:70/100,PLAYER_RADIUS_RATIO:.02,BALL_RADIUS_RATIO:.015},Yt=(e,t)=>{const n=e/1.4,s=t,o=Math.min(n/70,s/100),i=o*70,l=o*100,a=(e-i)/2,r=(t-l)/2;return{fieldWidth:n,fieldHeight:s,actualFieldWidth:i,actualFieldHeight:l,fieldX:a,fieldY:r,squareSize:o,toRelativeX:u=>(u-a)/i,toRelativeY:u=>(u-r)/l,toAbsoluteX:u=>a+u*i,toAbsoluteY:u=>r+u*l}},Kd=(e,t,n=20)=>{const s=e-n*2,o=t-n*2,i=St.FIELD_RATIO;let l,a;s/o>i?(a=o,l=a*i):(l=s,a=l/i);const r=n+(s-l)/2,u=n+(o-a)/2;return{fieldWidth:l,fieldHeight:a,fieldX:r,fieldY:u,toRelativeX:c=>(c-r)/l,toRelativeY:c=>(c-u)/a,toAbsoluteX:c=>r+c*l,toAbsoluteY:c=>u+c*a}},jl={BASE_SPEED:100},Mt={ATTACKING:{PRIMARY:"#D84B4B",SECONDARY:"#E46363",LIGHT:"#F28C8C"},DEFENSIVE:{PRIMARY:"#3A57A5",SECONDARY:"#4867B5",LIGHT:"#6E86C9"},BALL:{PRIMARY:"#FFB300"},UI:{SELECTED:"#0D3B66"}},Xd=["width","height"],Jd=300,Gd=5,Zd=500,Qd=dt({__name:"RugbyCanvas",props:{players:{},ball:{},canvasConfig:{},uiState:{},isSequenceMode:{type:Boolean},isPlayRunning:{type:Boolean},currentPath:{},isDrawingPath:{type:Boolean},zoom:{},panMode:{type:Boolean}},emits:["player-click","player-double-click","player-long-press","ball-click","canvas-click","player-drag","ball-drag","path-draw","attach-ball"],setup(e,{expose:t,emit:n}){const s=e,o=n,i=ee(null);let l=null;const a=ee({isDown:!1,lastPosition:{x:0,y:0},lastClient:{x:0,y:0}}),r=ee({count:0,timer:null,lastPlayer:null,lastClickTime:0,dragStartPosition:null,longPressTimer:null});Qt(()=>{i.value&&(l=i.value.getContext("2d"),M()),window.addEventListener("keydown",C),window.addEventListener("keyup",q)}),Nn(()=>{r.value.timer&&clearTimeout(r.value.timer),window.removeEventListener("keydown",C),window.removeEventListener("keyup",q)}),Je([()=>s.players,()=>s.ball,()=>s.currentPath],()=>{It(()=>M())},{deep:!0}),Je(()=>s.zoom,()=>{P(),It(()=>M())}),Je(()=>[s.canvasConfig.width,s.canvasConfig.height],()=>{P(),It(()=>M())});const u=ee({x:0,y:0}),c=ee(!1),p=ee(!1),m=Te(()=>p.value||!!s.panMode),y=(v,A,R)=>Math.max(A,Math.min(R,v)),P=()=>{if(m.value||!l)return;const v=s.canvasConfig.width,A=s.canvasConfig.height,R=s.zoom??1,j=Yt(v,A),Z=j.actualFieldWidth,g=j.actualFieldHeight,V=j.fieldX,te=j.fieldY;if(Z*R>v){const G=v-(V+Z)*R,H=-V*R;u.value.x=y(u.value.x,G,H)}if(g*R>A){const G=A-(te+g)*R,H=-te*R;u.value.y=y(u.value.y,G,H)}},C=v=>{v.code==="Space"?p.value||(v.preventDefault(),p.value=!0):/^[0-9]$/.test(v.key)&&s.uiState.selectedPlayer&&o("attach-ball",s.uiState.selectedPlayer)},q=v=>{v.code==="Space"&&(v.preventDefault(),p.value=!1)},M=()=>{if(!i.value||!l)return;const{width:v,height:A}=s.canvasConfig,R=window.devicePixelRatio||1;(i.value.width!==Math.floor(v*R)||i.value.height!==Math.floor(A*R))&&(i.value.width=Math.floor(v*R),i.value.height=Math.floor(A*R),i.value.style.width=`${Math.round(v)}px`,i.value.style.height=`${Math.round(A)}px`),l.setTransform(R,0,0,R,0,0),l.clearRect(0,0,v,A),I(l,v,A),l.save();const j=s.zoom??1;P(),l.translate(u.value.x,u.value.y),l.scale(j,j),J(l),$(l),D(l),s.isSequenceMode&&oe(l),l.restore()},I=(v,A,R)=>{v.fillStyle="#0F172A",v.fillRect(0,0,A,R)},J=(v,A,R,j,Z)=>{const g=Yt(s.canvasConfig.width,s.canvasConfig.height),{actualFieldWidth:V,actualFieldHeight:te,fieldX:G,fieldY:H,squareSize:fe}=g,Pe=v.createLinearGradient(0,H,0,H+te);Pe.addColorStop(0,"#FFFFFF"),Pe.addColorStop(1,"#F5F7FA"),v.fillStyle=Pe,v.fillRect(G,H,V,te),v.shadowColor="rgba(0, 0, 0, 0.25)",v.shadowBlur=8,v.shadowOffsetY=2,v.strokeStyle="rgba(0, 0, 0, 0.12)",v.lineWidth=2,v.strokeRect(G+6,H+6,V-12,te-12),v.shadowColor="transparent",v.shadowBlur=0,v.shadowOffsetY=0,v.strokeStyle="rgba(0, 0, 0, 0.35)",v.lineWidth=1.5,v.beginPath(),v.setLineDash([20,14]),v.moveTo(G,H+te/2),v.lineTo(G+V,H+te/2),v.stroke(),v.setLineDash([]);const U=te*.22;v.beginPath(),v.setLineDash([20,14]),v.moveTo(G,H+U),v.lineTo(G+V,H+U),v.moveTo(G,H+te-U),v.lineTo(G+V,H+te-U),v.stroke(),v.setLineDash([]),v.beginPath(),v.lineWidth=2,v.moveTo(G,H),v.lineTo(G,H+te),v.moveTo(G+V,H),v.lineTo(G+V,H+te),v.stroke(),v.strokeStyle="rgba(0, 0, 0, 0.08)",v.lineWidth=1;for(let x=G;x<=G+V;x+=fe)v.beginPath(),v.moveTo(x,H),v.lineTo(x,H+te),v.stroke();for(let x=H;x<=H+te;x+=fe)v.beginPath(),v.moveTo(G,x),v.lineTo(G+V,x),v.stroke()},$=v=>{const A=s.canvasConfig.playerRadius;s.players.forEach(R=>{const j=R.isAnimating?A*1.15:A;v.shadowColor="rgba(0, 0, 0, 0.18)",v.shadowBlur=6,v.shadowOffsetY=3,v.beginPath(),v.arc(R.x,R.y+1.5,j,0,Math.PI*2),v.fillStyle="rgba(0, 0, 0, 0.14)",v.fill();const Z=R.type==="attacking"?Mt.ATTACKING:Mt.DEFENSIVE,g=v.createRadialGradient(R.x-j/2,R.y-j/2,0,R.x,R.y,j);g.addColorStop(0,Z.LIGHT),g.addColorStop(.5,Z.SECONDARY),g.addColorStop(1,Z.PRIMARY),v.shadowColor="transparent",v.beginPath(),v.arc(R.x,R.y,j,0,Math.PI*2),v.fillStyle=g,v.fill(),R.isSelected||R===s.uiState.selectedPlayer?(v.strokeStyle=Mt.UI.SELECTED,v.lineWidth=3,v.shadowColor="rgba(13, 59, 102, 0.35)",v.shadowBlur=6):(v.strokeStyle="rgba(255, 255, 255, 0.92)",v.lineWidth=1.25,v.shadowColor="transparent",v.shadowBlur=0),v.stroke(),v.shadowColor="transparent",v.shadowBlur=0,v.fillStyle="rgba(255, 255, 255, 1)";const V=Math.max(j*.8,12);v.font=`600 ${V}px -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif`,v.textAlign="center",v.textBaseline="middle",v.shadowColor="rgba(0, 0, 0, 0.2)",v.shadowBlur=2,v.shadowOffsetY=1;const te=R.assignedNumber!==void 0?R.assignedNumber.toString():R.id.toString();v.fillText(te,R.x,R.y),v.shadowColor="transparent",v.shadowBlur=0,v.shadowOffsetY=0,R.isLooping&&s.isSequenceMode&&(v.beginPath(),v.arc(R.x,R.y,j+6,0,Math.PI*2),v.strokeStyle=R.type==="attacking"?"rgba(255, 68, 68, 0.4)":"rgba(68, 68, 255, 0.4)",v.lineWidth=2,v.stroke())})},D=v=>{const A=s.canvasConfig.ballRadius;v.shadowColor="rgba(0, 0, 0, 0.2)",v.shadowBlur=8,v.shadowOffsetY=3,v.beginPath(),v.arc(s.ball.x,s.ball.y+1.5,A,0,Math.PI*2),v.fillStyle="rgba(0, 0, 0, 0.12)",v.fill(),v.shadowColor="transparent",v.beginPath(),v.arc(s.ball.x,s.ball.y,A,0,Math.PI*2),v.fillStyle=Mt.BALL.PRIMARY,v.fill(),v.beginPath(),v.arc(s.ball.x-A*.35,s.ball.y-A*.35,A*.2,0,Math.PI*2),v.fillStyle="rgba(255,255,255,0.25)",v.fill(),v.strokeStyle=s.uiState.selectedBall?"rgba(13,59,102,1)":"rgba(255,255,255,0.92)",v.lineWidth=s.uiState.selectedBall?2:1.25,v.stroke()},oe=v=>{if(!s.isPlayRunning&&(s.players.forEach(A=>{if(A.path&&A.path.length>0&&A.pathVisible!==!1){const R=A.type==="attacking"?Mt.ATTACKING.PRIMARY:Mt.DEFENSIVE.PRIMARY;v.beginPath(),v.strokeStyle=R,v.globalAlpha=.7,v.lineWidth=2,v.setLineDash([10,6]);const j=A.path[0];v.moveTo(j.x,j.y);for(let Z=1;Z<A.path.length;Z++){const g=A.path[Z];v.lineTo(g.x,g.y)}if(v.stroke(),v.globalAlpha=1,v.setLineDash([]),A.path.length>1){const Z=A.path[A.path.length-1],g=A.path[A.path.length-2],V=Z.x-g.x,te=Z.y-g.y,G=Math.atan2(te,V),H=15,fe=Math.PI/6;v.beginPath(),v.moveTo(Z.x,Z.y),v.lineTo(Z.x-H*Math.cos(G-fe),Z.y-H*Math.sin(G-fe)),v.moveTo(Z.x,Z.y),v.lineTo(Z.x-H*Math.cos(G+fe),Z.y-H*Math.sin(G+fe)),v.strokeStyle=R,v.lineWidth=2,v.stroke()}if(A.timedPass&&A.timedPass.position){const Z=A.timedPass.position,g=8;v.beginPath(),v.arc(Z.x,Z.y,g,0,Math.PI*2),v.fillStyle=Mt.BALL.PRIMARY,v.fill(),v.beginPath(),v.arc(Z.x,Z.y,g+3,0,Math.PI*2),v.strokeStyle=Mt.BALL.PRIMARY,v.lineWidth=2,v.stroke(),v.strokeStyle="#FFFFFF",v.lineWidth=1.5,v.beginPath(),v.moveTo(Z.x,Z.y),v.lineTo(Z.x,Z.y-g*.5),v.stroke(),v.beginPath(),v.moveTo(Z.x,Z.y),v.lineTo(Z.x+g*.4,Z.y-g*.2),v.stroke()}if(A.speed&&A.speed!==100){v.font='12px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',v.fillStyle=R,v.textAlign="center";const Z=A.isAnimating?s.canvasConfig.playerRadius*1.15:s.canvasConfig.playerRadius;v.fillText(`${A.speed}%`,A.x,A.y-Z-10)}}}),s.isDrawingPath&&s.currentPath.length>1)){const A=s.uiState.selectedPlayer;if(A){const R=A.type==="attacking"?Mt.ATTACKING.PRIMARY:Mt.DEFENSIVE.PRIMARY;v.beginPath(),v.strokeStyle=R,v.globalAlpha=.9,v.lineWidth=3,v.setLineDash([8,6]),v.moveTo(s.currentPath[0].x,s.currentPath[0].y),s.currentPath.slice(1).forEach(j=>{v.lineTo(j.x,j.y)}),v.stroke(),v.globalAlpha=1,v.setLineDash([]),s.currentPath.forEach((j,Z)=>{Z>0&&(v.beginPath(),v.arc(j.x,j.y,3,0,Math.PI*2),v.fillStyle=R,v.fill())})}}},re=v=>{if(!i.value)return;const A=W(v);if(a.value.isDown=!0,a.value.lastPosition=A,a.value.lastClient={x:v.clientX,y:v.clientY},p.value||s.panMode){c.value=!0;return}if(k(A)){o("ball-click",s.ball,v);return}const R=se(A);if(R){_(R,v);return}o("canvas-click",A,v)},L=v=>{if(!i.value||!a.value.isDown)return;const A=W(v);if(r.value.longPressTimer&&r.value.dragStartPosition){const R=A.x-r.value.dragStartPosition.x,j=A.y-r.value.dragStartPosition.y;Math.sqrt(R*R+j*j)>Gd&&(clearTimeout(r.value.longPressTimer),r.value.longPressTimer=null)}if(c.value){const R=i.value.getBoundingClientRect(),j=s.canvasConfig.width/R.width,Z=s.canvasConfig.height/R.height,g=v.clientX-a.value.lastClient.x,V=v.clientY-a.value.lastClient.y;u.value.x+=g*j,u.value.y+=V*Z,P(),requestAnimationFrame(M),a.value.lastPosition=A,a.value.lastClient={x:v.clientX,y:v.clientY};return}s.uiState.selectedBall?o("ball-drag",s.ball,A):s.uiState.selectedPlayer&&o("player-drag",s.uiState.selectedPlayer,A),a.value.lastPosition=A},B=()=>{a.value.isDown=!1,c.value=!1,r.value.longPressTimer&&(clearTimeout(r.value.longPressTimer),r.value.longPressTimer=null),s.isDrawingPath&&s.uiState.selectedPlayer&&s.currentPath.length>1&&o("path-draw",s.uiState.selectedPlayer,[...s.currentPath])},_=(v,A)=>{const R=Date.now(),j=W(A);if(r.value.lastPlayer===v&&R-r.value.lastClickTime<Jd){r.value.timer&&clearTimeout(r.value.timer),r.value.longPressTimer&&clearTimeout(r.value.longPressTimer),o("player-double-click",v,A),r.value.count=0,r.value.lastPlayer=null;return}r.value.lastPlayer=v,r.value.lastClickTime=R,r.value.dragStartPosition=j,o("player-click",v,A),r.value.longPressTimer=window.setTimeout(()=>{o("player-long-press",v,A)},Zd)},W=v=>{if(!i.value)return{x:0,y:0};const A=i.value.getBoundingClientRect(),R=s.canvasConfig.width/A.width,j=s.canvasConfig.height/A.height,Z=(v.clientX-A.left)*R,g=(v.clientY-A.top)*j,V=s.zoom??1;return{x:(Z-u.value.x)/V,y:(g-u.value.y)/V}},k=v=>{const A=s.ball.x-v.x,R=s.ball.y-v.y;return Math.sqrt(A*A+R*R)<=s.canvasConfig.ballRadius},se=v=>s.players.find(A=>{const R=A.x-v.x,j=A.y-v.y;return Math.sqrt(R*R+j*j)<=20})||null;return t({redraw:()=>{M()}}),(v,A)=>(le(),ae("div",{class:Me(["canvas-container",{panning:p.value||s.panMode,"panning-active":c.value}])},[h("canvas",{ref_key:"canvas",ref:i,width:v.canvasConfig.width,height:v.canvasConfig.height,onMousedown:re,onMousemove:L,onMouseup:B,onMouseleave:B},null,40,Xd)],2))}}),mt=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n},ef=mt(Qd,[["__scopeId","data-v-5d0642eb"]]),tf={key:1,class:"dialog","data-cy":"confirm-dialog"},nf={class:"dialog-content"},sf={class:"dialog-title"},of={class:"dialog-description"},lf={class:"dialog-actions"},af=dt({__name:"ConfirmDialog",props:{show:{type:Boolean},title:{},message:{},confirmText:{default:"Confirm"}},emits:["confirm","cancel"],setup(e,{emit:t}){const n=t,s=()=>{n("confirm")},o=()=>{n("cancel")};return(i,l)=>(le(),ae(Xe,null,[i.show?(le(),ae("div",{key:0,class:"dialog-backdrop",onClick:o})):xe("",!0),i.show?(le(),ae("div",tf,[h("div",nf,[h("h3",sf,Ee(i.title),1),h("p",of,Ee(i.message),1),h("div",lf,[h("button",{class:"dialog-btn cancel",onClick:o}," Cancel "),h("button",{"data-cy":"confirm-btn",class:"dialog-btn confirm",onClick:s},Ee(i.confirmText),1)])])])):xe("",!0)],64))}}),Bs=mt(af,[["__scopeId","data-v-7b17ec67"]]),rf={key:1,class:"dialog","data-cy":"player-dialog"},cf={class:"dialog-content"},uf={class:"dialog-title"},df={class:"number-input"},ff=["value"],hf={class:"formation-section"},pf={class:"formation-tabs"},gf={class:"formation-preview"},vf={class:"preview-header"},mf={class:"show-existing-toggle"},yf={key:0,class:"saved-formations"},bf={key:0,class:"no-formations"},Pf={key:1,class:"formations-list"},wf=["onClick"],Sf={class:"formation-info"},_f={class:"formation-name"},Cf={class:"formation-details"},xf=["onClick"],Tf={key:1,class:"save-formation-wrapper"},Ef=["aria-expanded"],kf={id:"save-formation-panel",class:"save-formation-section"},Af=["disabled"],Mf={class:"dialog-actions"},Ul=280,Yl=200,Rf=20,Df=dt({__name:"PlayerDialog",props:{showAttackingCount:{type:Boolean},showDefensiveCount:{type:Boolean},selectedAttackingCount:{},selectedDefensiveCount:{},existingPlayers:{default:()=>[]},canvasConfig:{default:()=>({fieldWidth:1e3,fieldHeight:1428,width:1400,height:1428})}},emits:["close-dialog","confirm-player-count","update:selectedAttackingCount","update:selectedDefensiveCount"],setup(e,{emit:t}){const n=e,s=t,o=ee(!1),i=ee("attacking"),l=ee(1),a=ee("default"),r=ee(!0),u=ee(null),c=ee([]),p=ee(!1),m=ee(-1),y=ee(""),P=ee([]),C=ee(!1),q=ee(!1),M=ee(null),I=ee(null),J=()=>Kd(Ul,Yl,Rf),$=Te(()=>{var d;return((d=n.existingPlayers)==null?void 0:d.filter(f=>f.type===i.value))||[]}),D=Te(()=>a.value==="custom"&&c.value.length>0),oe=Te(()=>D.value&&y.value.trim().length>0);Je(()=>n.showAttackingCount,d=>{d?(o.value=!0,i.value="attacking",l.value=n.selectedAttackingCount):n.showDefensiveCount||(o.value=!1)}),Je(()=>n.showDefensiveCount,d=>{d?(o.value=!0,i.value="defensive",l.value=n.selectedDefensiveCount):n.showAttackingCount||(o.value=!1)});const re=()=>{l.value<16&&(l.value++,_())},L=()=>{l.value>1&&(l.value--,_())},B=d=>{const f=d.target;let b=parseInt(f.value);isNaN(b)&&(b=1),b<1&&(b=1),b>16&&(b=16),l.value=b,_()},_=()=>{i.value==="attacking"?s("update:selectedAttackingCount",l.value):s("update:selectedDefensiveCount",l.value),It(()=>H())},W=d=>{const b=$.value.length+d,S=Math.floor(b/5),E=b%5,F=.5,Y=i.value==="attacking"?.75:.25,z=.08,X=.05;return{x:F+(E-2)*z,y:i.value==="attacking"?Y+S*X:Y-S*X}},k=()=>{const d=[];for(let f=0;f<l.value;f++)d.push(W(f));return d},se=()=>{var d;switch(a.value){case"custom":return c.value.length>0?c.value:k();case"saved":return((d=I.value)==null?void 0:d.positions)||k();default:return k()}},ne=()=>{if(a.value!=="custom")return;const d=l.value,f=c.value.length;if(f<d)for(let b=f;b<d;b++)c.value.push(W(b));else f>d&&(c.value=c.value.slice(0,d))},v=()=>{try{const d=localStorage.getItem(`formations_${i.value}`);P.value=d?JSON.parse(d):[]}catch(d){console.error("Failed to load saved formations:",d),P.value=[]}},A=()=>{if(!oe.value)return;const d={id:Date.now().toString(),name:y.value.trim(),positions:[...c.value],playerCount:l.value,type:i.value,createdAt:new Date};P.value.push(d);try{localStorage.setItem(`formations_${i.value}`,JSON.stringify(P.value)),y.value="",alert(`Formation "${d.name}" saved successfully!`)}catch(f){console.error("Failed to save formation:",f),alert("Failed to save formation. Please try again.")}},R=d=>{I.value=d,l.value=d.playerCount,_()},j=d=>{const f=P.value.find(b=>b.id===d);f&&(M.value=f,q.value=!0)},Z=()=>{var f;if(!M.value)return;const d=P.value.findIndex(b=>b.id===M.value.id);d!==-1&&(P.value.splice(d,1),localStorage.setItem(`formations_${i.value}`,JSON.stringify(P.value)),((f=I.value)==null?void 0:f.id)===M.value.id&&(I.value=null)),q.value=!1,M.value=null},g=d=>{if(a.value!=="custom")return;const f=u.value;if(!f)return;const b=f.getBoundingClientRect(),S=d.clientX-b.left,E=d.clientY-b.top,F=G(S,E);F!==-1&&(p.value=!0,m.value=F,f.style.cursor="grabbing")},V=d=>{if(a.value!=="custom")return;const f=u.value;if(!f)return;const b=f.getBoundingClientRect(),S=d.clientX-b.left,E=d.clientY-b.top;if(p.value&&m.value!==-1){const{fieldWidth:F,fieldHeight:Y,fieldX:z,fieldY:X}=J(),K=Math.max(0,Math.min(1,(S-z)/F)),ue=Math.max(0,Math.min(1,(E-X)/Y));c.value[m.value]={x:K,y:ue},H()}else{const F=G(S,E);f.style.cursor=F!==-1?"grab":"default"}},te=()=>{p.value=!1,m.value=-1,u.value&&(u.value.style.cursor="default")},G=(d,f)=>{if(a.value!=="custom")return-1;const b=se();for(let S=0;S<b.length;S++){const E=T(b[S].x,b[S].y);if(Math.sqrt(Math.pow(d-E.x,2)+Math.pow(f-E.y,2))<=10)return S}return-1},H=()=>{if(!u.value)return;const f=u.value.getContext("2d");f&&(f.clearRect(0,0,Ul,Yl),fe(f),r.value&&Pe(f),U(f))},fe=d=>{const{fieldWidth:f,fieldHeight:b,fieldX:S,fieldY:E}=J();d.fillStyle="rgba(34, 139, 34, 0.15)",d.fillRect(S,E,f,b),d.strokeStyle="rgba(255, 255, 255, 0.4)",d.lineWidth=1,d.strokeRect(S,E,f,b),d.beginPath(),d.setLineDash([3,2]),d.strokeStyle="rgba(255, 255, 255, 0.3)",d.moveTo(S,E+b/2),d.lineTo(S+f,E+b/2),d.stroke(),d.setLineDash([])},Pe=d=>{var f;(f=n.existingPlayers)==null||f.forEach(b=>{const S=O(0,0,b.x,b.y);d.beginPath(),d.arc(S.x+1,S.y+1,5,0,Math.PI*2),d.fillStyle="rgba(0, 0, 0, 0.2)",d.fill(),d.beginPath(),d.arc(S.x,S.y,5,0,Math.PI*2),d.fillStyle=b.type==="attacking"?"rgba(255, 68, 68, 0.4)":"rgba(68, 68, 255, 0.4)",d.fill(),d.strokeStyle="rgba(255, 255, 255, 0.6)",d.lineWidth=1,d.stroke(),d.fillStyle="rgba(255, 255, 255, 0.8)",d.font="8px -apple-system, BlinkMacSystemFont, sans-serif",d.textAlign="center",d.textBaseline="middle",d.fillText(b.id.toString(),S.x,S.y)})},U=d=>{se().forEach((b,S)=>{const E=T(b.x,b.y),F=$.value.length;d.beginPath(),d.arc(E.x+1,E.y+1,7,0,Math.PI*2),d.fillStyle="rgba(0, 0, 0, 0.3)",d.fill(),d.beginPath(),d.arc(E.x,E.y,7,0,Math.PI*2);const Y=p.value&&m.value===S;d.fillStyle=Y?i.value==="attacking"?"#FF6666":"#6666FF":i.value==="attacking"?"#FF4444":"#4444FF",d.fill(),d.strokeStyle="white",d.lineWidth=Y?3:2,d.stroke(),d.fillStyle="white",d.font="bold 9px -apple-system, BlinkMacSystemFont, sans-serif",d.textAlign="center",d.textBaseline="middle",d.fillText((F+S+1).toString(),E.x,E.y),a.value==="custom"&&!p.value&&(d.font="6px -apple-system, BlinkMacSystemFont, sans-serif",d.fillStyle="rgba(255, 255, 255, 0.7)",d.fillText("drag",E.x,E.y+15))})};Je([l,a,r,i,c,I],()=>{a.value==="custom"&&ne(),It(()=>H())},{deep:!0}),Je(o,d=>{d&&(v(),It(()=>{ne(),H()}))}),Je(a,d=>{d==="custom"?ne():d==="saved"&&v()});const x=()=>{c.value=[],I.value=null,y.value="",p.value=!1,m.value=-1,C.value=!1,s("close-dialog")},he=()=>{const d=se();s("confirm-player-count",{type:i.value,count:l.value,formation:{type:a.value,positions:d}}),x()},T=(d,f)=>{const{fieldWidth:b,fieldHeight:S,fieldX:E,fieldY:F}=J();return{x:E+d*b,y:F+f*S}},O=(d,f,b,S)=>{var z,X;const E=Yt(((z=n.canvasConfig)==null?void 0:z.width)||1400,((X=n.canvasConfig)==null?void 0:X.height)||1428),F=E.toRelativeX(b),Y=E.toRelativeY(S);return T(F,Y)};return(d,f)=>{var b;return le(),ae(Xe,null,[o.value?(le(),ae("div",{key:0,class:"dialog-backdrop",onClick:x})):xe("",!0),o.value?(le(),ae("div",rf,[h("div",cf,[h("h3",uf,Ee(i.value==="attacking"?"Add Red Players":"Add Blue Players"),1),h("div",df,[h("button",{class:"number-btn",onClick:L,"data-cy":"player-count-decrement"},"-"),h("input",{type:"number",value:l.value,onInput:B,min:"1",max:"16"},null,40,ff),h("button",{class:"number-btn",onClick:re,"data-cy":"player-count-increment"},"+")]),h("div",hf,[f[12]||(f[12]=h("h4",{class:"section-title"},"Formation",-1)),f[13]||(f[13]=h("p",{class:"section-description"}," Choose starting positions for new players ",-1)),h("div",pf,[h("button",{onClick:f[0]||(f[0]=S=>a.value="default"),class:Me([{active:a.value==="default"},"formation-tab"])}," Default ",2),h("button",{onClick:f[1]||(f[1]=S=>a.value="custom"),class:Me([{active:a.value==="custom"},"formation-tab"])}," Custom ",2),h("button",{onClick:f[2]||(f[2]=S=>a.value="saved"),class:Me([{active:a.value==="saved"},"formation-tab"]),disabled:!0}," Saved ",2)]),h("div",gf,[h("div",vf,[f[8]||(f[8]=h("span",{class:"preview-title"},"Field Preview",-1)),h("label",mf,[Gs(h("input",{type:"checkbox","onUpdate:modelValue":f[3]||(f[3]=S=>r.value=S),onChange:H},null,544),[[Dd,r.value]]),f[7]||(f[7]=h("span",{class:"toggle-text"},"Show existing players",-1))])]),h("canvas",{ref_key:"previewCanvas",ref:u,width:"280",height:"200",class:"mini-field",onMousedown:g,onMousemove:V,onMouseup:te,onMouseleave:te,style:as({cursor:a.value==="custom"?"grab":"default"})},null,36)]),a.value==="saved"?(le(),ae("div",yf,[P.value.length===0?(le(),ae("div",bf,f[9]||(f[9]=[h("p",null,"No saved formations yet.",-1),h("p",{class:"hint"},"Create custom formations and save them to use here.",-1)]))):(le(),ae("div",Pf,[(le(!0),ae(Xe,null,qs(P.value,S=>{var E;return le(),ae("div",{key:S.id,class:Me(["formation-item",{active:((E=I.value)==null?void 0:E.id)===S.id}]),onClick:F=>R(S)},[h("div",Sf,[h("span",_f,Ee(S.name),1),h("span",Cf,Ee(S.playerCount)+" players",1)]),h("button",{onClick:Ir(F=>j(S.id),["stop"]),class:"delete-formation-btn",title:"Delete formation"},"  ",8,xf)],10,wf)}),128))]))])):xe("",!0),D.value?(le(),ae("div",Tf,[h("button",{class:"save-formation-toggle",onClick:f[4]||(f[4]=S=>C.value=!C.value),"aria-expanded":C.value?"true":"false","aria-controls":"save-formation-panel"},[h("span",{class:Me(["chevron",{open:C.value}])},"",2),f[10]||(f[10]=ze(" Looking to save formation?? "))],8,Ef),_e(vn,{name:"fade-collapse"},{default:Jt(()=>[Gs(h("div",kf,[Gs(h("input",{"onUpdate:modelValue":f[5]||(f[5]=S=>y.value=S),placeholder:"Formation name (e.g., 'Attacking Line', 'Defensive Wall')",class:"formation-name-input",onKeyup:gi(A,["enter"])},null,544),[[Dr,y.value]]),h("button",{onClick:A,class:"save-formation-btn",disabled:!oe.value},f[11]||(f[11]=[h("span",{class:"icon"},"",-1),ze(" Save Formation ")]),8,Af)],512),[[md,C.value]])]),_:1})])):xe("",!0)]),h("div",Mf,[h("button",{class:"dialog-btn cancel",onClick:x},"Cancel"),h("button",{class:"dialog-btn confirm",onClick:he,"data-cy":"confirm-add-players"}," Add "+Ee(l.value)+" Player"+Ee(l.value>1?"s":""),1)])])])):xe("",!0),_e(Bs,{show:q.value,title:"Delete Formation",message:`Are you sure you want to delete formation '${(b=M.value)==null?void 0:b.name}'? This action cannot be undone.`,"confirm-text":"Delete Formation",onConfirm:Z,onCancel:f[6]||(f[6]=S=>q.value=!1)},null,8,["show","message"])],64)}}}),Of=mt(Df,[["__scopeId","data-v-49b0a0b6"]]);function If(){const e="squiggle_draft",t=ee([]),n=ee({x:0,y:0,attachedTo:null}),s=ee((()=>{try{const T=typeof window<"u"?localStorage.getItem("squiggle_attackingType"):null;return T==="defensive"||T==="attacking"?T:"attacking"}catch{return"attacking"}})()),o=ee([{id:1,name:"Phase 1",playerStates:[],ballState:{x:0,y:0,attachedTo:null},sequences:[{id:1,name:"Sequence 1",activePlayerIds:[],ballEvents:[],isActive:!1,playerData:{},ballState:{x:0,y:0,attachedTo:null},finalPlayerPositions:{},startingPlayerPositions:{}}]}]),i=ee(1),l=ee(1),a=ee(!0),r=ee(!1),u=ee(!1),c=qn({width:St.BASE_WIDTH*1.4,height:St.BASE_WIDTH/St.FIELD_RATIO,fieldWidth:St.BASE_WIDTH,fieldHeight:St.BASE_WIDTH/St.FIELD_RATIO,playerRadius:0,ballRadius:0}),p=Te(()=>o.value.find(T=>T.id===i.value)),m=Te(()=>{const T=p.value;return!T||!T.sequences?null:T.sequences.find(O=>O.id===l.value)}),y=Te(()=>{const T=p.value;return(T==null?void 0:T.sequences)||[]}),P=Te(()=>t.value.filter(T=>T.path&&T.path.length>0)),C=Te(()=>t.value.some(T=>T.path&&T.path.length>0)),q=Te(()=>{const T=p.value;return(T==null?void 0:T.sequences)&&T.sequences.length>0&&T.sequences.some(O=>O.activePlayerIds.length>0)}),M=()=>{try{const T={players:t.value,ball:n.value,phases:o.value,currentPhase:i.value,currentSequence:l.value};localStorage.setItem(e,JSON.stringify(T))}catch{}},I=()=>{console.log("[loadDraftIfPresent] CALLED");try{const T=localStorage.getItem(e);if(!T){console.log("[loadDraftIfPresent] No draft found");return}const O=JSON.parse(T);if(O&&O.players&&O.phases&&O.ball){console.log("[loadDraftIfPresent] Loading draft",{ballFromDraft:O.ball}),t.value=JSON.parse(JSON.stringify(O.players)),n.value=JSON.parse(JSON.stringify(O.ball)),o.value=JSON.parse(JSON.stringify(O.phases)),i.value=O.currentPhase||1,l.value=O.currentSequence||1,console.log("[loadDraftIfPresent] Ball after load",{x:n.value.x,y:n.value.y}),t.value.forEach(f=>{(!f.mode||f.mode==="drag")&&(f.mode="path")});const d=o.value.find(f=>f.id===1);d&&(!d.sequences||d.sequences.length===0)&&(d.sequences=[{id:1,name:"Sequence 1",activePlayerIds:[],ballEvents:[],isActive:!1,playerData:{},ballState:JSON.parse(JSON.stringify(n.value)),finalPlayerPositions:{},startingPlayerPositions:{}}])}}catch{}},J=()=>{try{localStorage.removeItem(e)}catch{}},$=T=>{s.value=T;try{localStorage.setItem("squiggle_attackingType",T)}catch{}},D=()=>{$(s.value==="attacking"?"defensive":"attacking")},oe=T=>{const O=p.value;if(!O||!O.sequences)return;const d=`${T.type}-${T.id}`;O.sequences.forEach(f=>{f.startingPlayerPositions||(f.startingPlayerPositions={}),f.startingPlayerPositions[d]={x:T.x,y:T.y}})},re=(T,O)=>{const d=t.value.filter(E=>E.type===T),f=d.length>0?Math.max(...d.map(E=>E.id))+1:1,b=_(T),S={...O,type:T,id:f,assignedNumber:b,isSelected:!1,speed:100,mode:"path",sequenceDelay:0,pathVisible:!0,originalPosition:{x:O.x,y:O.y},playStartPosition:{x:O.x,y:O.y}};t.value.push(S),oe(S),fe()},L=(T,O)=>{const d=t.value.findIndex(f=>f.id===T&&f.type===O);if(d!==-1){const f=p.value,b=`${O}-${T}`;f&&f.sequences&&f.sequences.forEach(S=>{S.startingPlayerPositions&&delete S.startingPlayerPositions[b]}),t.value.splice(d,1)}},B=T=>{const O={x:T.x,y:T.y};T.originalPosition={...O},T.playStartPosition={...O},oe(T)},_=T=>{const O=t.value.filter(d=>d.type===T).map(d=>d.assignedNumber).filter(d=>d!==void 0);for(let d=1;d<=9;d++)if(!O.includes(d))return d;if(!O.includes(0))return 0},W=T=>{n.value.x=T.x,n.value.y=T.y},k=(T,O={})=>{console.log("[setBallCarrier] CALLED",{player:T?`${T.type}-${T.id}`:null,playerPos:T?{x:T.x,y:T.y}:null,ballPosBefore:{x:n.value.x,y:n.value.y},opts:O});const d=O.updateTimedPassSource??!0,f=n.value.attachedTo,b=f&&t.value.find(S=>S.id===f.id&&S.type===f.type)||null;if(t.value.forEach(S=>{S.isCarryingBall=!1}),T){T.isCarryingBall=!0,n.value.attachedTo={type:T.type,id:T.id};const S=c.playerRadius;n.value.x=T.x+S*.8,n.value.y=T.y+S*.4}else{const S=n.value.x,E=n.value.y;n.value.attachedTo=null,n.value.x=S,n.value.y=E,console.log("[setBallCarrier] Ball detached, position preserved:",{x:n.value.x,y:n.value.y})}console.log("[setBallCarrier] AFTER",{ballPosAfter:{x:n.value.x,y:n.value.y},attachedTo:n.value.attachedTo}),d&&b&&T&&(b.id!==T.id||b.type!==T.type)&&t.value.forEach(S=>{if(S.timedPass&&S.timedPass.fromPlayerId===b.id&&S.timedPass.fromPlayerType===b.type){S.timedPass.fromPlayerId=T.id,S.timedPass.fromPlayerType=T.type;const E=m.value;if(E){const F=`${S.type}-${S.id}`,Y=E.playerData[F];Y!=null&&Y.timedPass&&Y.timedPass.fromPlayerId===b.id&&Y.timedPass.fromPlayerType===b.type&&(Y.timedPass.fromPlayerId=T.id,Y.timedPass.fromPlayerType=T.type)}}})},se=(T,O)=>{k(T,O)},ne=T=>{k(null,T)},v=T=>{j(),i.value=T,Z(T)},A=()=>{j();const T=o.value.length>0?Math.max(...o.value.map(O=>O.id))+1:1;o.value.push({id:T,name:`Phase ${T}`,playerStates:[],ballState:JSON.parse(JSON.stringify(n.value)),sequences:[]}),v(T),V()},R=T=>{if(o.value.length<=1)return!1;const O=o.value.findIndex(d=>d.id===T);if(O!==-1){o.value.splice(O,1);const d=Math.max(0,O-1);return o.value.length>0&&v(o.value[d].id),!0}return!1},j=()=>{const T=o.value.find(O=>O.id===i.value);T&&(T.playerStates=JSON.parse(JSON.stringify(t.value)),T.ballState=JSON.parse(JSON.stringify(n.value)),T.currentSequenceId=l.value)},Z=T=>{const O=o.value.find(d=>d.id===T);if(O){if(O.currentSequenceId&&O.sequences.some(d=>d.id===O.currentSequenceId)?l.value=O.currentSequenceId:l.value=O.sequences.length>0?O.sequences[0].id:1,O.playerStates.length>0)t.value=JSON.parse(JSON.stringify(O.playerStates)),n.value=JSON.parse(JSON.stringify(O.ballState));else if(T>1){const d=o.value.find(f=>f.id===T-1);d&&d.playerStates.length>0&&(t.value=JSON.parse(JSON.stringify(d.playerStates)),n.value=JSON.parse(JSON.stringify(d.ballState)),t.value.forEach(f=>{f.originalPosition={x:f.x,y:f.y},f.path=[],f.mode="path",f.isSelected=!1,f.timedPass=void 0}))}if(O.sequences&&O.sequences.length>0){const d=O.sequences.find(f=>f.id===l.value);d&&d.activePlayerIds&&t.value.forEach(f=>{const b=`${f.type}-${f.id}`;f.isLooping=d.activePlayerIds.includes(b)})}}},g=T=>{l.value=T;const O=m.value;O&&(G(O),t.value.forEach(d=>{const f=`${d.type}-${d.id}`;d.isLooping=O.activePlayerIds.includes(f)}))},V=()=>{const T=p.value;if(!T)return;const O=T.sequences.length>0?Math.max(...T.sequences.map(b=>b.id))+1:1,d={x:n.value.x,y:n.value.y,attachedTo:n.value.attachedTo?{...n.value.attachedTo}:null};console.log("[addSequence] Creating new sequence with ball state:",d);const f={id:O,name:`Sequence ${O}`,activePlayerIds:[],ballEvents:[],isActive:!1,playerData:{},ballState:d,finalPlayerPositions:{},startingPlayerPositions:{}};t.value.forEach(b=>{const S=`${b.type}-${b.id}`;f.startingPlayerPositions[S]={x:b.x,y:b.y}}),T.sequences.push(f),g(O)},te=T=>{const O=p.value;if(!O||O.sequences.length===0)return!1;const d=O.sequences.findIndex(f=>f.id===T);if(d!==-1){if(O.sequences.splice(d,1),O.sequences.length>0){const f=Math.max(0,d-1);g(O.sequences[f].id)}else l.value=1;return!0}return!1},G=T=>{console.log("[loadPlayerDataFromSequence] CALLED",{sequenceName:T.name,hasBallState:!!T.ballState,ballStateSaved:T.ballState,ballPosBefore:{x:n.value.x,y:n.value.y}}),T.playerData&&(t.value.forEach(O=>{const d=`${O.type}-${O.id}`,f=T.playerData[d];f?(O.path=f.path?[...f.path]:[],O.speed=f.speed||100,O.sequenceDelay=f.sequenceDelay||0,O.mode=f.mode||"path",O.isLooping=T.activePlayerIds.includes(d),O.timedPass=f.timedPass?JSON.parse(JSON.stringify(f.timedPass)):void 0):(O.path=[],O.originalPosition={x:O.x,y:O.y},O.speed=100,O.sequenceDelay=0,O.mode="path",O.isLooping=!1,O.timedPass=void 0)}),T.ballState&&(console.log("[loadPlayerDataFromSequence] Restoring ball state from sequence",T.ballState),n.value.x=T.ballState.x,n.value.y=T.ballState.y,n.value.attachedTo=T.ballState.attachedTo?{...T.ballState.attachedTo}:null),console.log("[loadPlayerDataFromSequence] AFTER",{ballPosAfter:{x:n.value.x,y:n.value.y}}))},H=(T,O)=>{c.width=T,c.height=O,c.fieldWidth=T/1.4,c.fieldHeight=O,fe(),n.value.x=c.fieldWidth*.5,n.value.y=c.fieldHeight*.5,o.value.forEach(d=>{d.sequences&&d.sequences.forEach(f=>{f.ballState&&f.ballState.x===0&&f.ballState.y===0&&(f.ballState.x=n.value.x,f.ballState.y=n.value.y)})})},fe=()=>{c.playerRadius=Math.min(c.width,c.height)*St.PLAYER_RADIUS_RATIO,c.ballRadius=Math.min(c.width,c.height)*St.BALL_RADIUS_RATIO},Pe=()=>{const T=t.value.map(f=>({...f,relativeX:f.x/c.fieldWidth,relativeY:f.y/c.fieldHeight}));u.value=!u.value;const O=c.width/1.4,d=c.height;t.value=T.map(f=>({...f,x:f.relativeX*O,y:f.relativeY*d}))},U=()=>{const T=Date.now(),{width:O,fieldWidth:d,fieldHeight:f}=c,b=(O-d)/2,S=(c.height-f)/2;return[{playerId:"ball",position:{x:n.value.x,y:n.value.y},relativePosition:{x:(n.value.x-b)/d,y:(n.value.y-S)/f},timestamp:T,ballState:{position:{x:n.value.x,y:n.value.y},attachedTo:n.value.attachedTo?{...n.value.attachedTo}:null}},...t.value.map(E=>({playerId:`${E.type}-${E.id}`,position:{x:E.x,y:E.y},relativePosition:{x:(E.x-b)/d,y:(E.y-S)/f},timestamp:T}))]},x=async T=>{try{j();const O={name:T,phases:o.value,players:t.value,ball:n.value,currentPhase:i.value,currentSequence:l.value,canvasConfig:{...c}};return(await fetch("http://localhost:8080/api/plays",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:T,playerStates:U(),gameData:O})})).ok}catch(O){return console.error("Failed to save game state:",O),!1}},he=()=>{t.value=[],n.value={x:c.fieldWidth*.5,y:c.fieldHeight*.5,attachedTo:null},o.value=[{id:1,name:"Phase 1",playerStates:[],ballState:{x:0,y:0,attachedTo:null},sequences:[{id:1,name:"Sequence 1",activePlayerIds:[],ballEvents:[],isActive:!1,playerData:{},ballState:{x:0,y:0,attachedTo:null},finalPlayerPositions:{},startingPlayerPositions:{}}]}],i.value=1,l.value=1,a.value=!0,r.value=!1,J()};return I(),Je([t,o,n,i,l],M,{deep:!0}),{players:t,ball:n,phases:o,currentPhase:i,currentSequence:l,isSequenceMode:a,isRecording:r,isFullscreen:u,canvasConfig:c,attackingType:s,currentPhaseData:p,currentSequenceData:m,availableSequences:y,playersWithPaths:P,hasAnyPaths:C,hasAnySequencesInCurrentPhase:q,addPlayer:re,removePlayer:L,updateBallPosition:W,setBallCarrier:k,attachBallToPlayer:se,detachBall:ne,selectPhase:v,addPhase:A,removePhase:R,selectSequence:g,addSequence:V,removeSequence:te,updateCanvasSize:H,toggleFullscreen:Pe,getPlayerStates:U,resetToDefaults:he,capturePlayerStartingPosition:B,saveGameState:x,clearDraft:J,persistDraft:M,setAttackingType:$,toggleAttackingType:D}}function $f(e,t,n,s,o,i){const l=ee({isRunning:!1,type:"none",currentStep:0,totalSteps:0}),a=Te(()=>l.value.isRunning),r=Te(()=>l.value.type==="phase"),u=Te(()=>l.value.type==="fullPlay"),c=_=>{let W=0;for(let k=1;k<_.length;k++){const se=_[k].x-_[k-1].x,ne=_[k].y-_[k-1].y;W+=Math.sqrt(se*se+ne*ne)}return W},p=(_,W)=>{const k=[];let se=0;k.push({..._[0],timestamp:0});for(let ne=1;ne<_.length;ne++){const v=_[ne-1],A=_[ne],R=A.x-v.x,j=A.y-v.y,Z=Math.sqrt(R*R+j*j);se+=Z;const g=c(_),V=se/g*W;k.push({x:A.x,y:A.y,timestamp:V})}return k},m=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`ball_evt_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,y="easeOutCubic",P=(_,W,k,se)=>{var ne,v,A,R;return{id:m(),type:k.eventType??"pass",fromPlayerId:((ne=k.fromPlayer)==null?void 0:ne.id)??null,fromPlayerType:((v=k.fromPlayer)==null?void 0:v.type)??null,toPlayerId:((A=k.toPlayer)==null?void 0:A.id)??null,toPlayerType:((R=k.toPlayer)==null?void 0:R.type)??null,startPosition:{..._},endPosition:{...W},startTimestamp:Date.now(),durationMs:se,easing:k.easing??y}},C=(_,W)=>e.value.find(k=>k.type===_&&k.id===W)||null,q=()=>{const _=t.value.attachedTo;return _?C(_.type,_.id):null},M=_=>_.fromPlayerId===void 0||_.fromPlayerType===void 0?null:C(_.fromPlayerType,_.fromPlayerId),I=(_,W={})=>new Promise(k=>{if(!_.path||_.path.length===0||!_.originalPosition||!_.speed){k();return}if(W.hasTimedPass&&!_.timedPass){k();return}_.isAnimating=!0;const se=Date.now(),ne=c(_.path),v=jl.BASE_SPEED*_.speed/100,A=ne/v*1e3,R=p(_.path,A);let j=0,Z=se;const g=n.value.playerRadius;let V=!1;const te=()=>{const G=Date.now()-se;if(G>=A||j>=R.length-1){_.isAnimating=!1;const H=R[R.length-1];_.x=H.x,_.y=H.y,_.isCarryingBall&&(t.value.x=_.x+g*.8,t.value.y=_.y+g*.4),W.isRecording&&B(!0),k();return}for(;j<R.length-1&&R[j+1].timestamp!==void 0&&G>=R[j+1].timestamp;)j++;if(W.hasTimedPass&&!V&&_.timedPass&&j>=_.timedPass.pathIndex){const H=M(_.timedPass),fe=q();if(!H||fe&&fe.id===H.id&&fe.type===H.type){V=!0;const U=fe||H;U&&(U.isCarryingBall=!1);const x=U?D(U):{x:t.value.x,y:t.value.y};$(x,_,{fromPlayer:U??void 0,toPlayer:_,recordEvent:W.isRecording}).then(()=>{_.isCarryingBall=!0})}}if(j<R.length-1){const H=R[j],fe=R[j+1];if(H.timestamp!==void 0&&fe.timestamp!==void 0){const Pe=(G-H.timestamp)/(fe.timestamp-H.timestamp),U=Math.max(0,Math.min(1,Pe));if(_.x=H.x+(fe.x-H.x)*U,_.y=H.y+(fe.y-H.y)*U,_.isCarryingBall){const x=_.x+g*.8,he=_.y+g*.4;j===0&&G<100&&console.log("[animatePlayerPath] Ball following player",{player:`${_.type}-${_.id}`,playerPos:{x:_.x,y:_.y},ballPos:{x,y:he}}),t.value.x=x,t.value.y=he}}}W.isRecording&&Date.now()-Z>100&&(B(W.isRecording),Z=Date.now()),requestAnimationFrame(te)};te()}),J=(_,W)=>{switch(W){case"linear":return _;case"easeOutCubic":default:return 1-Math.pow(1-_,3)}},$=(_,W,k={})=>new Promise(se=>{console.log("[animateBallPass] START",{fromPos:_,toPlayer:`${W.type}-${W.id}`,toPlayerPos:{x:W.x,y:W.y},currentBallPos:{x:t.value.x,y:t.value.y},options:k}),o(null,{updateTimedPassSource:!1}),k.fromPlayer&&(k.fromPlayer.isCarryingBall=!1);const ne=Date.now(),v=k.duration??600,A=k.easing??y,R=D(W);if(console.log("[animateBallPass] Target hand position",R),k.recordEvent&&i){const g=P(_,R,{...k,toPlayer:W},v);i(g)}let j=ne;const Z=()=>{const g=Date.now()-ne,V=Math.min(g/v,1),te=J(V,A);t.value.x=_.x+(R.x-_.x)*te,t.value.y=_.y+(R.y-_.y)*te,V===0&&console.log("[animateBallPass] First frame",{elapsed:g,progress:V,easeProgress:te,ballPos:{x:t.value.x,y:t.value.y}}),Date.now()-j>100&&(B(!0),j=Date.now()),V<1?requestAnimationFrame(Z):(console.log("[animateBallPass] END",{finalBallPos:{x:t.value.x,y:t.value.y},toPlayer:`${W.type}-${W.id}`}),o(W,{updateTimedPassSource:!1}),B(!0),se())};Z()}),D=_=>({x:_.x+n.value.playerRadius*.8,y:_.y+n.value.playerRadius*.4}),oe=async(_,W={})=>{if(console.log("[animateBallToPlayer] START",{targetPlayer:`${_.type}-${_.id}`,targetPlayerPos:{x:_.x,y:_.y},currentBallPos:{x:t.value.x,y:t.value.y},ballAttachedTo:t.value.attachedTo}),t.value.attachedTo){const v=e.value.find(A=>A.type===t.value.attachedTo.type&&A.id===t.value.attachedTo.id);if(v&&v!==_){console.log("[animateBallToPlayer] Passing from existing carrier",{fromPlayer:`${v.type}-${v.id}`,fromPlayerPos:{x:v.x,y:v.y}}),await $(D(v),_,{fromPlayer:v,toPlayer:_,recordEvent:W.recordEvent!==!1});return}}const k={x:t.value.x,y:t.value.y},se=D(_);console.log("[animateBallToPlayer] Moving ball",{currentPos:k,targetPos:se});const ne=Math.hypot(se.x-k.x,se.y-k.y);if(console.log("[animateBallToPlayer] Distance to target",ne),ne<5){console.log("[animateBallToPlayer] Distance < 5, setting carrier immediately"),o(_,{updateTimedPassSource:!1});return}return new Promise(v=>{const A=Date.now(),R=600;let j=A;const Z=()=>{const g=Date.now()-A,V=Math.min(g/R,1),te=1-Math.pow(1-V,3);t.value.x=k.x+(se.x-k.x)*te,t.value.y=k.y+(se.y-k.y)*te,V===0&&console.log("[animateBallToPlayer] First frame",{ballPos:{x:t.value.x,y:t.value.y}}),Date.now()-j>100&&(B(!0),j=Date.now()),V<1?requestAnimationFrame(Z):(console.log("[animateBallToPlayer] END",{finalBallPos:{x:t.value.x,y:t.value.y}}),o(_,{updateTimedPassSource:!1}),B(!0),v())};Z()})},re=()=>{e.value.forEach(_=>{_.isLooping&&(_.isLooping=!1,_.loopStartTime=void 0,_.originalPosition&&(_.x=_.originalPosition.x,_.y=_.originalPosition.y))})},L=async(_,W,k,se=!1,ne=!1)=>{console.log("[executeSequence] START",{sequenceName:_.name,ballPosAtStart:{x:t.value.x,y:t.value.y},ballAttachedTo:t.value.attachedTo,activePlayerIds:_.activePlayerIds,isMultiSequenceExecution:se,isRecording:ne});const v=_.activePlayerIds.length>0,A=_.ballEvents&&_.ballEvents.length>0;if(!v&&!A){console.log("[executeSequence] No active players or ball events, exiting");return}if(l.value.isRunning=!0,ne&&B(!0),!v&&A){for(const g of _.ballEvents){const V=W.find(G=>G.id===g.fromPlayerId),te=W.find(G=>G.id===g.toPlayerId);if(te){const G=g.startPosition||(V?{x:V.x,y:V.y}:{x:t.value.x,y:t.value.y});await $(G,te,{recordEvent:!1,duration:g.durationMs,easing:g.easing}),ne&&B(!0),await new Promise(H=>setTimeout(H,500))}}l.value.isRunning=!1;return}const R=W.filter(g=>{const V=`${g.type}-${g.id}`;return _.activePlayerIds.includes(V)&&g.path&&g.path.length>0});if(R.length===0){l.value.isRunning=!1;return}if(W.forEach(g=>{g.isCarryingBall=!1}),_.ballState&&_.ballState.attachedTo){const g=W.find(te=>{var G,H;return te.type===((G=_.ballState.attachedTo)==null?void 0:G.type)&&te.id===((H=_.ballState.attachedTo)==null?void 0:H.id)}),V=t.value.attachedTo?W.find(te=>{var G,H;return te.type===((G=t.value.attachedTo)==null?void 0:G.type)&&te.id===((H=t.value.attachedTo)==null?void 0:H.id)}):null;console.log("[executeSequence] Ball carrier check",{savedCarrier:g?`${g.type}-${g.id}`:null,currentCarrier:V?`${V.type}-${V.id}`:null,needsRestore:g!==V}),g&&g!==V?(console.log("[executeSequence] Restoring ball to saved carrier"),se?(await oe(g,{recordEvent:ne}),o(g,{updateTimedPassSource:!1}),ne&&B(!0)):(o(g,{updateTimedPassSource:!1}),t.value.x=g.x+n.value.playerRadius*.8,t.value.y=g.y+n.value.playerRadius*.4)):console.log("[executeSequence] Ball already with correct carrier, skipping restoration")}let j=t.value.attachedTo?W.find(g=>{var V,te;return g.type===((V=t.value.attachedTo)==null?void 0:V.type)&&g.id===((te=t.value.attachedTo)==null?void 0:te.id)}):null;j&&(j.isCarryingBall=!0);const Z=R.map(async g=>{var G,H;const V=g.sequenceDelay||0;V>0&&await new Promise(fe=>setTimeout(fe,V)),c(g.path),jl.BASE_SPEED*(g.speed||100)/100;const te=((G=t.value.attachedTo)==null?void 0:G.type)===g.type&&((H=t.value.attachedTo)==null?void 0:H.id)===g.id;return g.timedPass?I(g,{isRecording:ne,hasTimedPass:!0}):te?(g.isCarryingBall=!0,I(g,{isRecording:ne})):I(g,{isRecording:ne})});await Promise.all(Z),ne&&B(!0),l.value.isRunning=!1},B=_=>{if(!_)return;const W=Date.now(),k=n.value.width,se=n.value.height,ne=n.value.fieldWidth,v=n.value.fieldHeight,A=(k-ne)/2,R=(se-v)/2,j=[{playerId:"ball",position:{x:t.value.x,y:t.value.y},relativePosition:{x:(t.value.x-A)/ne,y:(t.value.y-R)/v},timestamp:W,ballState:{position:{x:t.value.x,y:t.value.y},attachedTo:t.value.attachedTo?{...t.value.attachedTo}:null}},...e.value.map(Z=>({playerId:`${Z.type}-${Z.id}`,position:{x:Z.x,y:Z.y},relativePosition:{x:(Z.x-A)/ne,y:(Z.y-R)/v},timestamp:W}))];s("update:playerStates",j)};return{animationState:l,isPlayRunning:a,isRunningCurrentPhase:r,isRunningFullPlay:u,animatePlayerPath:I,animateBallPass:$,animateBallToPlayer:oe,stopAllPlayerLoops:re,executeSequence:L,calculatePathLength:c,emitPlayerStates:B}}const an=Br("plays",()=>{const e=ee([]),t=()=>{try{const r=localStorage.getItem("squiggle_plays");if(r){const u=JSON.parse(r);e.value=Array.isArray(u)?u.map(c=>({...c,ballEvents:Array.isArray(c.ballEvents)?c.ballEvents:[]})):[]}}catch(r){console.error("Failed to load plays from local storage:",r),e.value=[]}},n=()=>{try{localStorage.setItem("squiggle_plays",JSON.stringify(e.value))}catch(r){throw r}},s=r=>{const u={id:`play_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:r.name,createdAt:new Date().toISOString(),playerStates:r.playerStates,ballEvents:r.ballEvents},c=[...e.value,u],p=JSON.stringify(c);try{return localStorage.setItem("squiggle_plays",p),e.value=c,u}catch(m){const y=(m==null?void 0:m.name)||"";throw y==="QuotaExceededError"||y==="NS_ERROR_DOM_QUOTA_REACHED"||y==="SecurityError"?new Error("STORAGE_QUOTA_EXCEEDED"):m instanceof Error?m:new Error("Failed to save play")}},o=()=>e.value,i=r=>e.value.find(u=>u.id===r)||null,l=r=>{const u=e.value.findIndex(c=>c.id===r);if(u!==-1){e.value.splice(u,1);try{n()}catch(c){console.error("Failed to persist deletion:",c)}}},a=()=>{e.value=[],localStorage.removeItem("squiggle_plays")};return t(),{plays:e,createPlay:s,listPlays:o,getPlay:i,deletePlay:l,clearPlays:a}}),zs={async createPlay(e){const t=an();try{return t.createPlay(e)}catch(n){throw new Error(n instanceof Error?n.message:"Failed to create play")}},async listPlays(){const e=an();try{return e.listPlays()}catch(t){throw new Error(t instanceof Error?t.message:"Failed to fetch plays")}},async getPlay(e){const t=an();try{const n=t.getPlay(e);if(!n)throw new Error("Play not found");return n}catch(n){throw new Error(n instanceof Error?n.message:"Failed to fetch play")}},async deletePlay(e){const t=an();try{t.deletePlay(e)}catch(n){throw new Error(n instanceof Error?n.message:"Failed to delete play")}},async exportPlays(){const t=an().listPlays();if(t.length===0)throw new Error("No plays to export");const n={version:"1.0",exportedAt:new Date().toISOString(),plays:t,metadata:{totalPlays:t.length,appName:"Squiggle Rugby Play Designer"}},s=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),o=URL.createObjectURL(s),i=document.createElement("a");i.href=o;const l=new Date,a=r=>String(r).padStart(2,"0");i.download=`squiggle-plays-${l.getFullYear()}${a(l.getMonth()+1)}${a(l.getDate())}-${a(l.getHours())}${a(l.getMinutes())}${a(l.getSeconds())}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)},async importPlays(e){const t=an();return new Promise((n,s)=>{const o=new FileReader;o.onload=i=>{var l;try{const a=(l=i.target)==null?void 0:l.result,r=JSON.parse(a);if(!r.plays||!Array.isArray(r.plays))throw new Error("Invalid file format: missing plays array");if(r.plays.length===0)throw new Error("No plays found in the file");let u=0;const c=[];r.plays.forEach((p,m)=>{try{if(!p.name||typeof p.name!="string"){c.push(`Play ${m+1}: Missing or invalid name`);return}if(!p.playerStates||!Array.isArray(p.playerStates)){c.push(`Play ${m+1}: Missing or invalid player states`);return}const y=p.playerStates.filter(q=>q&&q.playerId&&q.position&&typeof q.position.x=="number"&&typeof q.position.y=="number"&&q.timestamp);if(y.length===0){c.push(`Play ${m+1}: No valid player states found`);return}const P=Array.isArray(p.ballEvents)?p.ballEvents.filter(q=>q&&typeof q.id=="string"&&typeof q.startTimestamp=="number"&&q.startPosition&&typeof q.startPosition.x=="number"&&typeof q.startPosition.y=="number"&&q.endPosition&&typeof q.endPosition.x=="number"&&typeof q.endPosition.y=="number"&&typeof q.durationMs=="number"&&typeof q.type=="string"):[],C={name:p.name,playerStates:y,ballEvents:P};t.createPlay(C),u++}catch(y){c.push(`Play ${m+1}: ${y instanceof Error?y.message:"Unknown error"}`)}}),n({success:u,errors:c})}catch(a){s(new Error(`Failed to parse JSON file: ${a instanceof Error?a.message:"Unknown error"}`))}},o.onerror=()=>{s(new Error("Failed to read file"))},o.readAsText(e)})},async clearAllPlays(){an().clearPlays()}},Ff={class:"canvas-wrapper"},qf={class:"zoom-pan-content"},Lf={class:"control-section"},Bf={class:"zoom-controls"},Nf=["disabled"],Hf={class:"zoom-display"},Wf=["disabled"],Vf={class:"control-section"},jf=dt({__name:"RugbyPitch",props:{zoom:{default:1},panMode:{type:Boolean,default:!1},zoomMin:{default:.5},zoomMax:{default:2},zoomStep:{default:.1},isModalActive:{type:Boolean,default:!1},isRecording:{type:Boolean,default:!1},playbackData:{default:()=>[]}},emits:["update:playerStates","update:is-recording","update:zoom","update:panMode","record:ball-event","open-player-menu"],setup(e,{expose:t,emit:n}){const s=e,o=n,i=If(),l=w=>{s.isRecording&&o("record:ball-event",w)},a=$f(i.players,i.ball,Te(()=>i.canvasConfig),(w,...N)=>{w==="update:playerStates"?o("update:playerStates",N[0]):w==="update:is-recording"&&o("update:is-recording",N[0])},i.setBallCarrier,l),r=qn({showAttackingCount:!1,showDefensiveCount:!1,selectedPlayer:null,selectedBall:!1,isDragging:!1,isDrawingPath:!1,currentPath:[],dragOffset:{x:0,y:0},isSettingTimedPass:!1}),u=qn({showPlayerDialog:!1,playerDialogType:"attacking",playerDialogCount:1}),c=ee(null),p=ee(null),m=w=>i.setAttackingType(w),y=ee(!1),P=ee(!1),C=ee(null),q=Te(()=>({...i,isMinimized:!1,hasAnySequencesInCurrentPhase:i.hasAnySequencesInCurrentPhase.value,hasAnyPaths:i.hasAnyPaths.value,availableSequences:i.availableSequences.value,currentPhaseData:i.currentPhaseData.value,currentSequenceData:i.currentSequenceData.value,playersWithPaths:i.playersWithPaths.value})),M=()=>{const w={};return i.players.value.forEach(N=>{const Q=`${N.type}-${N.id}`,ce=N.playStartPosition||N.originalPosition;ce&&(w[Q]={x:ce.x,y:ce.y})}),w},I=w=>({x:w.x+i.canvasConfig.playerRadius*.8,y:w.y+i.canvasConfig.playerRadius*.4}),J=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`seq_evt_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,$=(w,N)=>{i.players.value.forEach(Q=>{var ye;const ce=`${Q.type}-${Q.id}`;if((ye=w.startingPlayerPositions)!=null&&ye[ce]){const ge=w.startingPlayerPositions[ce];Q.x=ge.x,Q.y=ge.y}else N[ce]&&(Q.x=N[ce].x,Q.y=N[ce].y)})},D=w=>{if(!w.ballState){console.log("[resetSequenceBallState] No saved ball state");return}if(console.log("[resetSequenceBallState] Restoring ball state",w.ballState),i.ball.value.x=w.ballState.x,i.ball.value.y=w.ballState.y,w.ballState.attachedTo){const N=i.players.value.find(Q=>{var ce,ye;return Q.type===((ce=w.ballState.attachedTo)==null?void 0:ce.type)&&Q.id===((ye=w.ballState.attachedTo)==null?void 0:ye.id)});N?i.setBallCarrier(N,{updateTimedPassSource:!1}):(console.log("[resetSequenceBallState] Carrier not found, ball detached"),i.ball.value.attachedTo=null)}else i.ball.value.attachedTo=null},oe=()=>{const w=Math.min(s.zoom+s.zoomStep,s.zoomMax);o("update:zoom",w)},re=()=>{const w=Math.max(s.zoom-s.zoomStep,s.zoomMin);o("update:zoom",w)},L=()=>{o("update:panMode",!s.panMode)},B=w=>{P.value&&C.value&&!C.value.contains(w.target)&&(P.value=!1)},_=w=>{u.showPlayerDialog=!0,u.playerDialogType=w,u.playerDialogCount=1},W=()=>{if(!s.isRecording&&i.isSequenceMode.value&&i.availableSequences.value.length>0){k();return}const w=!s.isRecording;if(o("update:is-recording",w),w){const N=i.getPlayerStates();o("update:playerStates",N)}},k=async()=>{if(a.isRunningFullPlay.value||s.isRecording)return;o("update:is-recording",!0);const w=i.getPlayerStates();o("update:playerStates",w);try{await se({recordStates:!0})}finally{o("update:is-recording",!1)}},se=async({recordStates:w=!1}={})=>{var ge;const N=()=>{if(!w)return;const pe=i.getPlayerStates();o("update:playerStates",pe)};a.stopAllPlayerLoops();const Q=[...i.phases.value].sort((pe,Ce)=>pe.id-Ce.id).filter(pe=>pe.sequences&&pe.sequences.length>0),ce=M();i.ball.value.x=i.canvasConfig.fieldWidth*.5,i.ball.value.y=i.canvasConfig.fieldHeight*.5,i.ball.value.attachedTo=null,N();let ye=!1;for(let pe=0;pe<Q.length;pe++){const Re=[...Q[pe].sequences||[]].sort((De,Ye)=>De.id-Ye.id);for(const De of Re){if($(De,ce),!ye){ye=!0;let Ye;if(De.activePlayerIds&&De.activePlayerIds.length>0){const Nt=De.activePlayerIds[0],[No,Ho]=Nt.split("-");Ye=i.players.value.find(kt=>kt.type===No&&kt.id===parseInt(Ho))}Ye&&(De.ballState={x:Ye.x+i.canvasConfig.playerRadius*.8,y:Ye.y+i.canvasConfig.playerRadius*.4,attachedTo:{type:Ye.type,id:Ye.id}},await a.animateBallToPlayer(Ye,{recordEvent:w}),N())}De.playerData&&Object.entries(De.playerData).forEach(([Ye,Nt])=>{const[No,Ho]=Ye.split("-"),kt=i.players.value.find(nl=>nl.type===No&&nl.id===parseInt(Ho));kt&&(kt.path=Nt.path?[...Nt.path]:[],kt.speed=Nt.speed,kt.sequenceDelay=Nt.sequenceDelay,kt.mode=Nt.mode,kt.timedPass=Nt.timedPass?JSON.parse(JSON.stringify(Nt.timedPass)):void 0,kt.isLooping=De.activePlayerIds.includes(Ye))}),(ge=c.value)==null||ge.redraw(),N(),await a.executeSequence(De,i.players.value,()=>{var Ye;return(Ye=c.value)==null?void 0:Ye.redraw()},!0,w),N(),await new Promise(Ye=>setTimeout(Ye,800)),N()}pe===Q.length-1||(await new Promise(De=>setTimeout(De,1500)),N())}},ne=async()=>{const w=i.currentPhaseData.value;if(!w||!w.sequences||w.sequences.length===0)return;a.stopAllPlayerLoops();const N=[...w.sequences].sort((ge,pe)=>ge.id-pe.id),Q=N[0];i.selectSequence(Q.id);const ce=M();let ye=0;try{for(const ge of N)ye++,$(ge,ce),ge.playerData&&Object.entries(ge.playerData).forEach(([pe,Ce])=>{const[Re,Ve]=pe.split("-"),De=i.players.value.find(Ye=>Ye.type===Re&&Ye.id===parseInt(Ve));De&&(De.path=Ce.path?[...Ce.path]:[],De.speed=Ce.speed,De.sequenceDelay=Ce.sequenceDelay,De.mode=Ce.mode,De.timedPass=Ce.timedPass?JSON.parse(JSON.stringify(Ce.timedPass)):void 0,De.isLooping=ge.activePlayerIds.includes(pe))}),await a.executeSequence(ge,i.players.value,()=>{var pe;return(pe=c.value)==null?void 0:pe.redraw()},!0),await new Promise(pe=>setTimeout(pe,500))}finally{}},v=async()=>{await se()},A=()=>{var N;const w=i.currentSequenceData.value;w&&(i.players.value.forEach(Q=>{if(Q.path&&Q.path.length>0){Q.isLooping=!0;const ce=`${Q.type}-${Q.id}`;w.activePlayerIds.includes(ce)||w.activePlayerIds.push(ce),w.playerData[ce]={path:Q.path?[...Q.path]:[],originalPosition:Q.originalPosition||{x:Q.x,y:Q.y},speed:Q.speed||100,sequenceDelay:Q.sequenceDelay||0,mode:Q.mode||"drag",position:{x:Q.x,y:Q.y},timedPass:Q.timedPass?JSON.parse(JSON.stringify(Q.timedPass)):void 0}}}),(N=c.value)==null||N.redraw())},R=()=>{var N;const w=i.currentSequenceData.value;w&&(i.players.value.forEach(Q=>{Q.isLooping=!1;const ce=`${Q.type}-${Q.id}`,ye=w.activePlayerIds.indexOf(ce);ye>-1&&w.activePlayerIds.splice(ye,1),delete w.playerData[ce]}),(N=c.value)==null||N.redraw())},j=w=>{i.selectPhase(w)},Z=()=>{i.addPhase()},g=w=>{i.removePhase(w)},V=w=>{i.selectSequence(w)},te=()=>{i.addSequence()},G=w=>{i.removeSequence(w)},H=async w=>{var ce;const N=i.availableSequences.value.find(ye=>ye.id===w);if(!N)return;a.stopAllPlayerLoops();const Q=M();$(N,Q),N.playerData&&Object.entries(N.playerData).forEach(([ye,ge])=>{const[pe,Ce]=ye.split("-"),Re=i.players.value.find(Ve=>Ve.type===pe&&Ve.id===parseInt(Ce));Re&&(Re.path=ge.path?[...ge.path]:[],Re.speed=ge.speed,Re.sequenceDelay=ge.sequenceDelay,Re.mode=ge.mode,Re.timedPass=ge.timedPass?JSON.parse(JSON.stringify(ge.timedPass)):void 0,Re.isLooping=N.activePlayerIds.includes(ye))}),(ce=c.value)==null||ce.redraw(),await a.executeSequence(N,i.players.value,()=>{var ye;return(ye=c.value)==null?void 0:ye.redraw()})},fe=()=>{var N;a.stopAllPlayerLoops(),i.players.value.forEach(Q=>{Q.originalPosition&&(Q.x=Q.originalPosition.x,Q.y=Q.originalPosition.y),Q.isLooping=!1});const w=i.currentSequenceData.value;w&&D(w),(N=c.value)==null||N.redraw()},Pe=()=>{var w;y.value=!1,i.resetToDefaults(),(w=c.value)==null||w.redraw()},U=w=>{var Q;if(!w.path||w.path.length===0)return;w.isLooping=!w.isLooping;const N=i.currentSequenceData.value;if(N){const ce=`${w.type}-${w.id}`;if(w.isLooping)N.activePlayerIds.includes(ce)||N.activePlayerIds.push(ce),N.playerData[ce]={path:w.path?[...w.path]:[],originalPosition:w.originalPosition||{x:w.x,y:w.y},speed:w.speed||100,sequenceDelay:w.sequenceDelay||0,mode:w.mode||"drag",position:{x:w.x,y:w.y},timedPass:w.timedPass?JSON.parse(JSON.stringify(w.timedPass)):void 0};else{w.timedPass=void 0;const ye=N.activePlayerIds.indexOf(ce);ye>-1&&N.activePlayerIds.splice(ye,1),delete N.playerData[ce]}}(Q=c.value)==null||Q.redraw()},x=(w,N)=>{const Q=N.target.getBoundingClientRect(),ce=i.canvasConfig.width/Q.width,ye=i.canvasConfig.height/Q.height,ge=(N.clientX-Q.left)*ce,pe=(N.clientY-Q.top)*ye;if(i.players.value.forEach(Ce=>Ce.isSelected=!1),r.selectedPlayer=w,w.isSelected=!0,r.selectedBall=!1,w.mode==="path"){if(w.path&&w.path.length>0){r.isDrawingPath=!1,r.isDragging=!1;return}r.isDragging||(r.isDragging=!0,r.isDrawingPath=!0,w.path||(w.path=[]),w.originalPosition={x:w.x,y:w.y},r.currentPath=[{x:w.x,y:w.y}],r.dragOffset={x:ge-w.x,y:pe-w.y})}else r.isDragging||(r.isDragging=!0,r.isDrawingPath=!1,r.dragOffset={x:ge-w.x,y:pe-w.y})},he=w=>{w.mode||(w.mode="path"),w.speed||(w.speed=100),w.pathVisible===void 0&&(w.pathVisible=!0),w.originalPosition||(w.originalPosition={x:w.x,y:w.y}),i.players.value.forEach(N=>N.isSelected=!1),w.isSelected=!0,r.selectedPlayer=w,o("open-player-menu")},T=w=>{i.setBallCarrier(w)},O=(w,N)=>{he(w)},d=(w,N)=>{he(w)},f=(w,N)=>{r.selectedBall=!0,r.selectedPlayer=null,r.isDragging=!0;const Q=N.target.getBoundingClientRect(),ce=i.canvasConfig.width/Q.width,ye=i.canvasConfig.height/Q.height,ge=(N.clientX-Q.left)*ce,pe=(N.clientY-Q.top)*ye;r.dragOffset={x:ge-w.x,y:pe-w.y}},b=(w,N)=>{var Q;if(r.isSettingTimedPass&&r.selectedPlayer&&r.selectedPlayer.path){const ce=r.selectedPlayer.path;let ye=0,ge=1/0;for(let pe=0;pe<ce.length;pe++){const Ce=ce[pe].x-w.x,Re=ce[pe].y-w.y,Ve=Math.sqrt(Ce*Ce+Re*Re);Ve<ge&&(ge=Ve,ye=pe)}if(ge<30){const pe=i.ball.value.attachedTo,Ce=pe?{id:pe.id,type:pe.type}:null;if(!Ce){console.warn("Attach the ball to the intended passer before setting a timed pass.");return}const Re={pathIndex:ye,position:{x:ce[ye].x,y:ce[ye].y},fromPlayerId:Ce==null?void 0:Ce.id,fromPlayerType:Ce==null?void 0:Ce.type},Ve=i.currentSequenceData.value;if(Ve){const De=`${r.selectedPlayer.type}-${r.selectedPlayer.id}`;Ve.playerData[De]||(Ve.playerData[De]={path:r.selectedPlayer.path?[...r.selectedPlayer.path]:[],originalPosition:r.selectedPlayer.originalPosition||{x:r.selectedPlayer.x,y:r.selectedPlayer.y},speed:r.selectedPlayer.speed||100,sequenceDelay:r.selectedPlayer.sequenceDelay||0,mode:r.selectedPlayer.mode||"drag",position:{x:r.selectedPlayer.x,y:r.selectedPlayer.y},timedPass:void 0}),Ve.playerData[De].timedPass=JSON.parse(JSON.stringify(Re))}r.selectedPlayer.timedPass=Re,r.isSettingTimedPass=!1,(Q=c.value)==null||Q.redraw()}return}i.players.value.forEach(ce=>ce.isSelected=!1),r.selectedPlayer=null,r.selectedBall=!1,r.isSettingTimedPass=!1},S=(w,N)=>{if(r.isDrawingPath&&w.mode==="path"){const Q={x:N.x,y:N.y},ce=r.currentPath[r.currentPath.length-1];(!ce||Math.sqrt(Math.pow(Q.x-ce.x,2)+Math.pow(Q.y-ce.y,2))>15)&&r.currentPath.push(Q)}else w.x=N.x-r.dragOffset.x,w.y=N.y-r.dragOffset.y,p.value=w,w.isCarryingBall&&i.setBallCarrier(w,{updateTimedPassSource:!a.isPlayRunning.value});if(s.isRecording){const Q=i.getPlayerStates();o("update:playerStates",Q)}},E=(w,N)=>{i.updateBallPosition({x:N.x-r.dragOffset.x,y:N.y-r.dragOffset.y});const Q=i.canvasConfig.playerRadius*1.2;let ce=null,ye=1/0;if(i.players.value.forEach(ge=>{const pe=ge.x-w.x,Ce=ge.y-w.y,Re=Math.sqrt(pe*pe+Ce*Ce);Re<ye&&Re<Q&&(ye=Re,ce=ge)}),ce?i.attachBallToPlayer(ce,{updateTimedPassSource:!a.isPlayRunning.value}):i.detachBall({updateTimedPassSource:!a.isPlayRunning.value}),s.isRecording){const ge=i.getPlayerStates();o("update:playerStates",ge)}},F=(w,N)=>{if(w.path=[...N],w.timedPass=void 0,N.length>0){w.isLooping=!0;const Q=i.currentSequenceData.value;if(Q){const ce=`${w.type}-${w.id}`;Q.activePlayerIds.includes(ce)||Q.activePlayerIds.push(ce),Q.playerData[ce]={path:[...N],originalPosition:w.originalPosition||{x:w.x,y:w.y},speed:w.speed||100,sequenceDelay:w.sequenceDelay||0,mode:w.mode||"drag",position:{x:w.x,y:w.y},timedPass:w.timedPass?JSON.parse(JSON.stringify(w.timedPass)):void 0}}}r.currentPath=[],r.isDrawingPath=!1,r.selectedPlayer=null},Y=w=>{var ge;const{type:N,count:Q,formation:ce}=w,ye=Yt(i.canvasConfig.width,i.canvasConfig.height);for(let pe=0;pe<Q;pe++){const Ce=ce.positions[pe],Re={x:ye.toAbsoluteX(Ce.x),y:ye.toAbsoluteY(Ce.y)};i.addPlayer(N,Re)}u.showPlayerDialog=!1,(ge=c.value)==null||ge.redraw()},z=()=>{u.showPlayerDialog=!1},X=w=>{var N;r.selectedPlayer&&(r.selectedPlayer.mode=w,w==="path"&&!r.selectedPlayer.path&&(r.selectedPlayer.path=[]),(N=c.value)==null||N.redraw())},K=w=>{var N;r.selectedPlayer&&(r.selectedPlayer.speed=w,(N=c.value)==null||N.redraw())},ue=w=>{var N;r.selectedPlayer&&(r.selectedPlayer.sequenceDelay=w,(N=c.value)==null||N.redraw())},ie=()=>{var w;r.selectedPlayer&&(r.selectedPlayer.sequenceDelay=0,(w=c.value)==null||w.redraw())},de=()=>{var w;r.selectedPlayer&&(r.selectedPlayer.path=[],r.selectedPlayer.mode="drag",r.selectedPlayer.timedPass=void 0,(w=c.value)==null||w.redraw())},ve=()=>{var w;r.selectedPlayer&&(r.selectedPlayer.pathVisible=r.selectedPlayer.pathVisible===!1,(w=c.value)==null||w.redraw())},be=()=>{if(r.selectedPlayer&&r.selectedPlayer.path&&r.selectedPlayer.path.length>0){const N=i.players.value.filter(Q=>Q.isLooping).find(Q=>{var ce,ye;return Q.timedPass&&Q.id!==((ce=r.selectedPlayer)==null?void 0:ce.id)&&Q.type===((ye=r.selectedPlayer)==null?void 0:ye.type)});if(N){alert(`Only one timed pass is allowed per sequence. Player ${N.assignedNumber||N.id} already has a timed pass set. Clear it first to set a new one.`);return}r.isSettingTimedPass=!0}},ke=()=>{var w;r.selectedPlayer&&(r.selectedPlayer.timedPass=void 0,(w=c.value)==null||w.redraw())},Se=()=>{r.isDragging&&(r.isDragging=!1,!r.isDrawingPath&&p.value&&i.capturePlayerStartingPosition(p.value),p.value=null)},Ne=w=>{if(s.isModalActive||!/^[0-9]$/.test(w.key))return;const N=parseInt(w.key),Q=i.attackingType.value,ye=i.players.value.filter(ge=>ge.assignedNumber===N&&ge.type===Q).sort((ge,pe)=>ge.id-pe.id)[0]||i.players.value.find(ge=>ge.assignedNumber===N);if(ye){const ge=i.ball.value.attachedTo?i.players.value.find(pe=>{var Ce,Re;return pe.type===((Ce=i.ball.value.attachedTo)==null?void 0:Ce.type)&&pe.id===((Re=i.ball.value.attachedTo)==null?void 0:Re.id)}):null;if(a.animateBallToPlayer(ye),ge&&ge!==ye){const pe=i.currentSequenceData.value;if(pe){pe.ballEvents||(pe.ballEvents=[]);const Ce=I(ge),Re=I(ye),Ve=Yt(i.canvasConfig.width,i.canvasConfig.height),De={id:J(),type:"pass",fromPlayerId:ge.id,fromPlayerType:ge.type,toPlayerId:ye.id,toPlayerType:ye.type,startPosition:{x:Ve.toRelativeX(Ce.x),y:Ve.toRelativeY(Ce.y)},endPosition:{x:Ve.toRelativeX(Re.x),y:Ve.toRelativeY(Re.y)},startTimestamp:Date.now(),durationMs:600,easing:"easeOutCubic"};pe.ballEvents.push(De),i.setBallCarrier(ye),pe.ballState=JSON.parse(JSON.stringify(i.ball.value))}}w.preventDefault()}},We=async()=>{const w=prompt("Enter a name for this play:");if(!w)return;const N=await i.saveGameState(w);alert(N?"Play saved successfully!":"Failed to save play. Please try again.")};Qt(()=>{window.addEventListener("resize",Ge),window.addEventListener("keydown",Ne),window.addEventListener("mouseup",Se),document.addEventListener("click",B),Ke(),i.isSequenceMode.value&&i.availableSequences.value.length===0&&i.addSequence(),Je(()=>s.playbackData,w=>{w.length>0?Qe():tt()},{immediate:!0})}),Nn(()=>{window.removeEventListener("resize",Ge),window.removeEventListener("keydown",Ne),window.removeEventListener("mouseup",Se),document.removeEventListener("click",B),tt(),a.stopAllPlayerLoops()});const Ge=()=>{Ke()},Ke=()=>{var Re,Ve,De;const w=(Ve=(Re=c.value)==null?void 0:Re.$el)==null?void 0:Ve.parentElement;if(!w)return;const N=w.clientWidth,Q=70/100;let ce,ye;const ge=Math.min(N-40,1e3);ce=Math.round(ge*1.4);const pe=Math.round(ge/Q),Ce=Math.round(ge*.2);ye=pe+Ce*2,i.updateCanvasSize(ce,ye),(De=c.value)==null||De.redraw()};let Ze=null,wt=0;const Qe=()=>{s.playbackData.length!==0&&(i.resetToDefaults(),wt=0,Ze=window.setInterval(()=>{if(wt>=s.playbackData.length){tt();return}s.playbackData[wt],wt++},100))},tt=()=>{Ze&&(clearInterval(Ze),Ze=null),wt=0};return t({openAddPlayersDialog:w=>{_(w)},setAttacking:m,toggleRecording:()=>{W()},saveCurrentPlay:()=>{We()},openClearPlayConfirm:()=>{y.value=!0},gameState:i,animationState:a,computedGameState:q,uiState:r,handleRunCurrentPhase:ne,handleRunFullPlay:v,handleSequenceRun:H,handleSequenceReset:fe,handleRecordFullPlay:k,handlePhaseSelect:j,handlePhaseAdd:Z,handlePhaseRemove:g,handleSequenceSelect:V,handleSequenceAdd:te,handleSequenceRemove:G,handlePlayerToggleLoop:U,handleSelectAllPlayers:A,handleDeselectAllPlayers:R,handlePlayerOptionsMode:X,handlePlayerOptionsPathVisibility:ve,handlePlayerOptionsSpeed:K,handlePlayerOptionsDelay:ue,handlePlayerOptionsDelayReset:ie,handlePlayerOptionsClearPath:de,handleSetTimedPass:be,handleClearTimedPass:ke}),(w,N)=>(le(),ae("div",{class:Me(["rugby-pitch-container",{minimized:!1}])},[_e(Of,{"show-attacking-count":u.showPlayerDialog&&u.playerDialogType==="attacking","show-defensive-count":u.showPlayerDialog&&u.playerDialogType==="defensive","selected-attacking-count":u.playerDialogCount,"selected-defensive-count":u.playerDialogCount,"existing-players":on(i).players.value,"canvas-config":on(i).canvasConfig,onCloseDialog:z,onConfirmPlayerCount:Y},null,8,["show-attacking-count","show-defensive-count","selected-attacking-count","selected-defensive-count","existing-players","canvas-config"]),h("div",Ff,[h("div",{class:"zoom-pan-container",ref_key:"zoomPanContainer",ref:C},[h("button",{class:Me(["zoom-pan-trigger",{active:P.value}]),onClick:N[0]||(N[0]=Q=>P.value=!P.value),title:"Zoom & Pan Controls"},N[3]||(N[3]=[h("svg",{width:"18",height:"18",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[h("circle",{cx:"7",cy:"7",r:"5",stroke:"currentColor","stroke-width":"1.5"}),h("path",{d:"M11 11L14 14",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1)]),2),_e(vn,{name:"popup"},{default:Jt(()=>[P.value?(le(),ae("div",{key:0,class:"zoom-pan-menu",onClick:N[1]||(N[1]=Ir(()=>{},["stop"]))},[h("div",qf,[h("div",Lf,[N[6]||(N[6]=h("div",{class:"section-label"},"Zoom",-1)),h("div",Bf,[h("button",{class:"control-btn",onClick:re,disabled:s.zoom<=s.zoomMin,title:"Zoom Out"},N[4]||(N[4]=[h("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[h("path",{d:"M4 8H12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)]),8,Nf),h("div",Hf,Ee(Math.round(s.zoom*100))+"% ",1),h("button",{class:"control-btn",onClick:oe,disabled:s.zoom>=s.zoomMax,title:"Zoom In"},N[5]||(N[5]=[h("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[h("path",{d:"M8 4V12M4 8H12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)]),8,Wf)])]),h("div",Vf,[N[8]||(N[8]=h("div",{class:"section-label"},"Pan Mode",-1)),h("button",{class:Me(["pan-toggle-btn",{active:s.panMode}]),onClick:L},[N[7]||(N[7]=h("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[h("path",{d:"M9 3L5 7M5 7L9 11M5 7H15M15 21L19 17M19 17L15 13M19 17H9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),h("span",null,Ee(s.panMode?"Pan On":"Pan Off"),1)],2)])])])):xe("",!0)]),_:1})],512),_e(ef,{ref_key:"rugbyCanvas",ref:c,players:on(i).players.value,ball:on(i).ball.value,"canvas-config":on(i).canvasConfig,"ui-state":r,"is-sequence-mode":on(i).isSequenceMode.value,"is-play-running":on(a).isPlayRunning.value,"current-path":r.currentPath,"is-drawing-path":r.isDrawingPath,zoom:s.zoom,"pan-mode":s.panMode,onPlayerClick:x,onPlayerDoubleClick:O,onPlayerLongPress:d,onBallClick:f,onCanvasClick:b,onPlayerDrag:S,onBallDrag:E,onPathDraw:F,onAttachBall:T},null,8,["players","ball","canvas-config","ui-state","is-sequence-mode","is-play-running","current-path","is-drawing-path","zoom","pan-mode"])]),_e(Bs,{show:y.value,title:"Start from scratch",message:"Are you sure you want to clear the current play? This will remove players, paths, and sequences for the in-progress play.","confirm-text":"Clear Current Play",onConfirm:Pe,onCancel:N[2]||(N[2]=Q=>y.value=!1)},null,8,["show"])]))}}),Uf=mt(jf,[["__scopeId","data-v-ed6ce64d"]]),Yf={class:"playback-controls"},zf={class:"control-group"},Kf={class:"icon",viewBox:"0 0 24 24","aria-hidden":"true"},Xf={key:0,d:"M9 3H3v6M15 3h6v6M9 21H3v-6M21 15v6h-6",stroke:"currentColor","stroke-linecap":"round"},Jf=["disabled"],Gf={key:0,class:"icon",viewBox:"0 0 24 24","aria-hidden":"true"},Zf={key:0,class:"pb-timeline"},Qf={class:"pb-timeline__track"},eh={class:"pb-timeline__labels"},th={class:"canvas-container"},nh=["width","height"],sh=10,oh=dt({__name:"PlaybackViewer",props:{playbackData:{},ballEvents:{}},emits:["sequenceComplete"],setup(e,{emit:t}){const n=e,s=t,o=ee(null),i=ee(800),l=ee(600),a=ee(!1),r=ee([]),u=ee(new Map),c=ee({x:0,y:0,attachedTo:null});let p=[],m=0,y=null,P=0;const C=ee(null),q=ee(0),M=ee(!1),I=(g,V="easeOutCubic")=>{switch(V){case"linear":return g;case"easeOutCubic":default:return 1-Math.pow(1-g,3)}},J=()=>{p=[...n.ballEvents??[]].sort((g,V)=>g.startTimestamp-V.startTimestamp),m=0,y=null,P=0},$=(g,V,te)=>{const G=Yt(i.value,l.value);for(;!y&&m<p.length&&p[m].startTimestamp<=g;)y=p[m++],P=y.startTimestamp+y.durationMs;if(y){if(g>=P){const H={x:G.toAbsoluteX(y.endPosition.x),y:G.toAbsoluteY(y.endPosition.y)},fe=y.toPlayerId!==null&&y.toPlayerType!==null?{type:y.toPlayerType,id:y.toPlayerId}:null;return y=null,P=0,$(g,H,fe)}if(g>=y.startTimestamp){const H=Math.max(0,Math.min(1,(g-y.startTimestamp)/y.durationMs)),fe=I(H,y.easing),Pe=G.toAbsoluteX(y.startPosition.x),U=G.toAbsoluteY(y.startPosition.y),x=G.toAbsoluteX(y.endPosition.x),he=G.toAbsoluteY(y.endPosition.y);return{x:Pe+(x-Pe)*fe,y:U+(he-U)*fe,attachedTo:null}}}return{...V,attachedTo:te}},D=Te(()=>{const g=n.playbackData.length||1;return Math.min(100,Math.max(0,q.value/g*100))}),oe=Te(()=>{if(n.playbackData.length===0)return"0s";const g=n.playbackData[0].timestamp,V=n.playbackData[n.playbackData.length-1].timestamp;return`${Math.max(0,Math.round((V-g)/1e3))}s`}),re=ee(!1),L=ee(null),B=ee([]),_=()=>{const g=window.innerWidth,V=window.innerHeight,te=St.FIELD_RATIO,G=Math.round(V*.9),H=Math.round(G*te),fe=Math.round(H*1.4);if(fe>Math.round(g*.9)){const x=Math.round(g*.9),he=Math.round(x/1.4),T=Math.round(he/te),d=Math.round(he*.2)*2;return{width:x,height:T+d}}const U=Math.round(H*.2)*2;return{width:fe,height:G+U}},W=()=>{if(a.value){const g=_();i.value=Math.round(g.width),l.value=Math.round(g.height)}else{const g=St.FIELD_RATIO,V=Math.round(Math.min(window.innerWidth*.96,1400)),te=Math.round(V/1.4);i.value=V;const G=Math.round(te*.2),H=Math.round(te/g);l.value=H+G*2}requestAnimationFrame(ne)},k=()=>{a.value=!a.value,W()},se=()=>{a.value&&W()},ne=()=>{if(!o.value)return;const g=o.value.getContext("2d");if(!g)return;const V=window.devicePixelRatio||1;(o.value.width!==Math.floor(i.value*V)||o.value.height!==Math.floor(l.value*V))&&(o.value.width=Math.floor(i.value*V),o.value.height=Math.floor(l.value*V),o.value.style.width=`${Math.round(i.value)}px`,o.value.style.height=`${Math.round(l.value)}px`),g.setTransform(V,0,0,V,0,0),g.clearRect(0,0,i.value,l.value);const te=Yt(i.value,l.value),G=te.fieldX,H=te.fieldY,fe=te.actualFieldWidth,Pe=te.actualFieldHeight,U=te.squareSize,x=te.squareSize;g.fillStyle="#000000",g.fillRect(0,0,i.value,l.value),g.imageSmoothingEnabled=!0,g.imageSmoothingQuality="high";const he=g.createLinearGradient(0,H,0,H+Pe);he.addColorStop(0,"#FFFFFF"),he.addColorStop(1,"#F5F7FA"),g.fillStyle=he,g.fillRect(G,H,fe,Pe),g.shadowColor="rgba(0, 0, 0, 0.25)",g.shadowBlur=8,g.shadowOffsetY=3,g.strokeStyle="rgba(0, 0, 0, 0.12)",g.lineWidth=2,g.strokeRect(G+6,H+6,fe-12,Pe-12),g.shadowColor="transparent",g.shadowBlur=0,g.shadowOffsetY=0,g.strokeStyle="rgba(0, 0, 0, 0.35)",g.lineWidth=1.5,g.beginPath(),g.setLineDash([20,14]),g.moveTo(G,H+Pe/2),g.lineTo(G+fe,H+Pe/2),g.stroke(),g.setLineDash([]);const T=Pe*.22;g.beginPath(),g.setLineDash([20,14]),g.moveTo(G,H+T),g.lineTo(G+fe,H+T),g.moveTo(G,H+Pe-T),g.lineTo(G+fe,H+Pe-T),g.stroke(),g.setLineDash([]),g.beginPath(),g.lineWidth=2,g.moveTo(G,H),g.lineTo(G,H+Pe),g.moveTo(G+fe,H),g.lineTo(G+fe,H+Pe),g.stroke(),g.strokeStyle="rgba(0, 0, 0, 0.08)",g.lineWidth=1;for(let f=G;f<=G+fe;f+=U)g.beginPath(),g.moveTo(f,H),g.lineTo(f,H+Pe),g.stroke();for(let f=H;f<=H+Pe;f+=x)g.beginPath(),g.moveTo(G,f),g.lineTo(G+fe,f),g.stroke();r.value.forEach(f=>{const b=`${f.type}-${f.id}`,S=u.value.get(b)||[];for(let E=1;E<S.length;E++){const F=S[E-1],Y=S[E];g.beginPath(),g.moveTo(F.x,F.y),g.lineTo(Y.x,Y.y);const z=f.type==="attacking"?"#D84B4B":"#3A57A5";g.strokeStyle=z,g.globalAlpha=E/S.length*.35,g.lineWidth=2,g.stroke(),g.globalAlpha=1}});const O=Math.min(fe,Pe)*.02;r.value.forEach(f=>{const b=f.x,S=f.y;g.shadowColor="rgba(0, 0, 0, 0.25)",g.shadowBlur=12,g.shadowOffsetY=4,g.beginPath(),g.arc(b,S+2,O,0,Math.PI*2),g.fillStyle="rgba(0, 0, 0, 0.15)",g.fill();const E=g.createRadialGradient(b-O/2,S-O/2,0,b,S,O);f.type==="attacking"?(E.addColorStop(0,"#F28C8C"),E.addColorStop(.5,"#E46363"),E.addColorStop(1,"#D84B4B")):(E.addColorStop(0,"#6E86C9"),E.addColorStop(.5,"#4867B5"),E.addColorStop(1,"#3A57A5")),g.shadowColor="transparent",g.beginPath(),g.arc(b,S,O,0,Math.PI*2),g.fillStyle=E,g.fill(),g.strokeStyle="rgba(255, 255, 255, 0.98)",g.lineWidth=1.5,g.stroke(),g.textRendering="geometricPrecision",g.imageSmoothingEnabled=!0,g.imageSmoothingQuality="high",g.fillStyle="rgba(255, 255, 255, 1)";const F=Math.max(O*.8,12);if(g.font=`600 ${F}px -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif`,g.textAlign="center",g.textBaseline="middle",g.shadowColor="rgba(0, 0, 0, 0.2)",g.shadowBlur=2,g.shadowOffsetY=1,g.fillText(f.id.toString(),b,S),g.shadowColor="transparent",g.shadowBlur=0,g.shadowOffsetY=0,c.value.attachedTo&&c.value.attachedTo.type===f.type&&c.value.attachedTo.id===f.id){const Y=f.type==="attacking"?"rgba(216,75,75,0.9)":"rgba(58,87,165,0.9)";g.shadowColor=Y,g.shadowBlur=14,g.beginPath(),g.arc(b,S,O*1.35,0,Math.PI*2),g.strokeStyle=Y,g.lineWidth=3,g.stroke(),g.shadowBlur=0}});const d=O*.75;g.shadowColor="rgba(0, 0, 0, 0.25)",g.shadowBlur=12,g.shadowOffsetY=4,g.beginPath(),g.arc(c.value.x,c.value.y+2,d,0,Math.PI*2),g.fillStyle="rgba(0, 0, 0, 0.15)",g.fill(),g.shadowColor="transparent",g.beginPath(),g.arc(c.value.x,c.value.y,d,0,Math.PI*2),g.fillStyle="#FFB300",g.fill(),g.beginPath(),g.arc(c.value.x-d*.35,c.value.y-d*.35,d*.2,0,Math.PI*2),g.fillStyle="rgba(255,255,255,0.25)",g.fill(),g.strokeStyle="rgba(255, 255, 255, 0.98)",g.lineWidth=1.5,g.stroke()},v=()=>{if(n.playbackData.length===0||M.value)return;M.value=!0,r.value=[],u.value.clear();const g=Yt(i.value,l.value);c.value={x:g.fieldX+g.actualFieldWidth*.5,y:g.fieldY+g.actualFieldHeight*.5,attachedTo:null},new Set(n.playbackData.filter(U=>U.playerId!=="ball").map(U=>U.playerId)).forEach(U=>{const[x,he]=U.split("-"),T=n.playbackData.find(O=>O.playerId===U);if(T){const O=T.relativePosition?g.fieldX+T.relativePosition.x*g.actualFieldWidth:T.position.x,d=T.relativePosition?g.fieldY+T.relativePosition.y*g.actualFieldHeight:T.position.y;r.value.push({x:O,y:d,type:x,id:parseInt(he)})}}),J();const te=Array.from(new Set(n.playbackData.map(U=>U.timestamp))).sort((U,x)=>U-x);let G=0;const H=U=>{const x=new Map;return U.forEach(he=>{if(he.playerId==="ball")return;const T=he.relativePosition?he.relativePosition.x:(he.position.x-g.fieldX)/g.actualFieldWidth,O=he.relativePosition?he.relativePosition.y:(he.position.y-g.fieldY)/g.actualFieldHeight;x.set(he.playerId,{rx:T,ry:O,hasRel:!!he.relativePosition,px:he.position.x,py:he.position.y})}),x},fe=U=>{if(!U)return{rx:.5,ry:.5,hasRel:!1,px:c.value.x,py:c.value.y};const x=U.relativePosition?U.relativePosition.x:(U.position.x-g.fieldX)/g.actualFieldWidth,he=U.relativePosition?U.relativePosition.y:(U.position.y-g.fieldY)/g.actualFieldHeight;return{rx:x,ry:he,hasRel:!!U.relativePosition,px:U.position.x,py:U.position.y}},Pe=U=>{if(U>=te.length-1){A(),s("sequenceComplete");return}const x=te[U],he=te[U+1],T=n.playbackData.filter(z=>z.timestamp===x),O=n.playbackData.filter(z=>z.timestamp===he),d=H(T),f=H(O),b=fe(T.find(z=>z.playerId==="ball")),S=fe(O.find(z=>z.playerId==="ball")),E=performance.now(),F=Math.max(1,he-x),Y=z=>{const X=Math.min(1,(z-E)/F);r.value.forEach(be=>{const ke=`${be.type}-${be.id}`,Se=d.get(ke),Ne=f.get(ke);if(Se&&Ne){const We=Se.rx+(Ne.rx-Se.rx)*X,Ge=Se.ry+(Ne.ry-Se.ry)*X;be.x=g.fieldX+We*g.actualFieldWidth,be.y=g.fieldY+Ge*g.actualFieldHeight;const Ke=`${be.type}-${be.id}`,Ze=u.value.get(Ke)||[];Ze.push({x:be.x,y:be.y}),Ze.length>sh&&Ze.shift(),u.value.set(Ke,Ze)}});const K=b.rx+(S.rx-b.rx)*X,ue=b.ry+(S.ry-b.ry)*X,ie={x:g.fieldX+K*g.actualFieldWidth,y:g.fieldY+ue*g.actualFieldHeight},de=x+(he-x)*X,ve=$(de,ie,c.value.attachedTo);c.value.x=ve.x,c.value.y=ve.y,c.value.attachedTo=ve.attachedTo,requestAnimationFrame(ne),X<1&&M.value?C.value=requestAnimationFrame(Y):(q.value=n.playbackData.findIndex(be=>be.timestamp===he),G=U+1,Pe(G))};C.value=requestAnimationFrame(Y)};Pe(0)},A=()=>{C.value&&(cancelAnimationFrame(C.value),C.value=null),M.value=!1,q.value=0,p=[],m=0,y=null,P=0,re.value&&Z()},R=async()=>{if(re.value)return;const g=window.innerHeight>=window.innerWidth;await j({orientation:g?"portrait":"landscape"}),M.value||v()},j=async g=>{if(!o.value)return;const V={w:i.value,h:l.value,fs:a.value};if((g==null?void 0:g.orientation)==="portrait"){a.value=!1;const H=g.width??1080,fe=g.height??1920;i.value=H,l.value=fe,await new Promise(Pe=>requestAnimationFrame(()=>{ne(),Pe(null)}))}const te=o.value.captureStream?o.value.captureStream(60):null;if(!te){alert("Recording not supported in this browser");return}let G="video/webm;codecs=vp9";(!window.MediaRecorder||!MediaRecorder.isTypeSupported(G))&&(G=MediaRecorder.isTypeSupported("video/webm;codecs=vp8")?"video/webm;codecs=vp8":"video/webm"),B.value=[],L.value=new MediaRecorder(te,{mimeType:G,videoBitsPerSecond:8e6}),L.value.ondataavailable=H=>{H.data&&H.data.size>0&&B.value.push(H.data)},L.value.onstop=()=>{const H=new Date,fe=T=>String(T).padStart(2,"0"),Pe=`squiggle-playback-${H.getFullYear()}${fe(H.getMonth()+1)}${fe(H.getDate())}-${fe(H.getHours())}${fe(H.getMinutes())}${fe(H.getSeconds())}.webm`,U=new Blob(B.value,{type:G}),x=URL.createObjectURL(U),he=document.createElement("a");he.href=x,he.download=Pe,document.body.appendChild(he),he.click(),document.body.removeChild(he),URL.revokeObjectURL(x),re.value=!1,a.value=V.fs,i.value=V.w,l.value=V.h,requestAnimationFrame(ne)},L.value.start(100),re.value=!0},Z=()=>{var g;(g=L.value)==null||g.stop()};return Qt(()=>{window.addEventListener("resize",se),W();const g=Yt(i.value,l.value);c.value={x:g.fieldX+g.actualFieldWidth*.5,y:g.fieldY+g.actualFieldHeight*.5,attachedTo:null},ne()}),Nn(()=>{window.removeEventListener("resize",se),A()}),Je(r,()=>{requestAnimationFrame(ne)},{deep:!0}),(g,V)=>(le(),ae("div",{class:Me(["playback-viewer",{fullscreen:a.value}])},[h("div",Yf,[h("div",zf,[h("button",{onClick:k,class:Me(["pb-btn ghost minimize",{"fullscreen-btn":a.value}])},[(le(),ae("svg",Kf,[a.value?xe("",!0):(le(),ae("path",Xf))])),ze(" "+Ee(a.value?"Exit Fullscreen":"Fullscreen"),1)],2),h("button",{onClick:v,class:"pb-btn primary run-sequence",disabled:M.value||n.playbackData.length===0},[M.value?xe("",!0):(le(),ae("svg",Gf,V[0]||(V[0]=[h("path",{d:"M8 5v14l11-7z",fill:"currentColor"},null,-1)]))),ze(" "+Ee(M.value?"Running...":"Run Sequence"),1)],8,Jf),h("button",{onClick:R,class:"pb-btn primary"},V[1]||(V[1]=[h("svg",{class:"icon",viewBox:"0 0 24 24","aria-hidden":"true"},[h("path",{d:"M12 3v12m0 0l-4-4m4 4l4-4M5 21h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2z",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"})],-1),ze(" Download ")]))])]),n.playbackData.length>0?(le(),ae("div",Zf,[h("div",Qf,[h("div",{class:"pb-timeline__progress",style:as({width:D.value+"%"})},null,4)]),h("div",eh,[V[2]||(V[2]=h("span",null,"0s",-1)),h("span",null,Ee(oe.value),1)])])):xe("",!0),h("div",th,[h("canvas",{ref_key:"pitchCanvas",ref:o,width:i.value,height:l.value},null,8,nh)])],2))}}),ih=mt(oh,[["__scopeId","data-v-9fc49fd0"]]),lh={key:1,class:"dialog"},ah={class:"dialog-content"},rh={class:"input-section"},ch={class:"input-hint"},uh={class:"dialog-actions"},dh=["disabled"],fh=dt({__name:"SavePlayDialog",props:{show:{type:Boolean}},emits:["save","cancel"],setup(e,{emit:t}){const n=e,s=t,o=ee(""),i=ee(null),l=Te(()=>o.value.trim().length>0),a=()=>{l.value&&(s("save",o.value.trim()),r())},r=()=>{o.value="",s("cancel")};return Je(()=>n.show,u=>{u&&It(()=>{var c;(c=i.value)==null||c.focus()})}),(u,c)=>(le(),ae(Xe,null,[u.show?(le(),ae("div",{key:0,class:"dialog-backdrop",onClick:r})):xe("",!0),u.show?(le(),ae("div",lh,[h("div",ah,[c[3]||(c[3]=h("h3",{class:"dialog-title"}," Save Recorded Play ",-1)),c[4]||(c[4]=h("p",{class:"dialog-description"}," Your play has been recorded successfully! Give it a name to save it to your collection. ",-1)),h("div",rh,[c[1]||(c[1]=h("label",{class:"input-label"},"Play Name",-1)),Gs(h("input",{ref_key:"playNameInput",ref:i,"onUpdate:modelValue":c[0]||(c[0]=p=>o.value=p),type:"text",placeholder:"Enter a name for this play...",class:"play-name-input",onKeyup:[gi(a,["enter"]),gi(r,["escape"])],maxlength:"50"},null,544),[[Dr,o.value]]),h("div",ch,Ee(o.value.length)+"/50 characters ",1)]),h("div",uh,[h("button",{class:"dialog-btn cancel",onClick:r}," Cancel "),h("button",{class:"dialog-btn save",onClick:a,disabled:!l.value},c[2]||(c[2]=[h("svg",{class:"icon",viewBox:"0 0 24 24","aria-hidden":"true"},[h("path",{d:"M12 3v12m0 0l-4-4m4 4l4-4M5 21h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2z",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"})],-1),ze(" Save Play ")]),8,dh)])])])):xe("",!0)],64))}}),hh=mt(fh,[["__scopeId","data-v-703e2531"]]),Hi=Br("session",()=>{const e=typeof window<"u"&&parseInt(localStorage.getItem("squiggle_lastActivity")||"",10)||Date.now(),t=ee(e),n=20*60*1e3,s=()=>{t.value=Date.now();try{localStorage.setItem("squiggle_lastActivity",String(t.value))}catch{}},o=Te(()=>Date.now()-t.value<n),i=Te(()=>{const l=n-(Date.now()-t.value);return Math.max(0,Math.floor(l/1e3))});return{updateActivity:s,isSessionValid:o,remainingTime:i}}),ph={key:0,class:"session-warning"},gh=dt({__name:"SessionStatus",setup(e){const t=Hi(),n=Te(()=>t.remainingTime),s=Te(()=>n.value<=120&&n.value>0),o=i=>{const l=Math.floor(i/60),a=i%60;return`${l}:${a.toString().padStart(2,"0")}`};return(i,l)=>s.value?(le(),ae("div",ph,"  Session expires in "+Ee(o(n.value)),1)):xe("",!0)}}),vh=mt(gh,[["__scopeId","data-v-16fc07d7"]]);/*! shepherd.js 14.4.0 */function mh(e){return e instanceof Element}function ts(e){return e instanceof HTMLElement}function mn(e){return typeof e=="function"}function Ds(e){return typeof e=="string"}function lt(e){return e===void 0}class Wi{on(t,n,s,o=!1){var i;return lt(this.bindings)&&(this.bindings={}),lt(this.bindings[t])&&(this.bindings[t]=[]),(i=this.bindings[t])==null||i.push({handler:n,ctx:s,once:o}),this}once(t,n,s){return this.on(t,n,s,!0)}off(t,n){if(lt(this.bindings)||lt(this.bindings[t]))return this;if(lt(n))delete this.bindings[t];else{var s;(s=this.bindings[t])==null||s.forEach((o,i)=>{if(o.handler===n){var l;(l=this.bindings[t])==null||l.splice(i,1)}})}return this}trigger(t,...n){if(!lt(this.bindings)&&this.bindings[t]){var s;(s=this.bindings[t])==null||s.forEach((o,i)=>{const{ctx:l,handler:a,once:r}=o,u=l||this;if(a.apply(u,n),r){var c;(c=this.bindings[t])==null||c.splice(i,1)}})}return this}}function ht(){return ht=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ht.apply(null,arguments)}function Vi(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.includes(s))continue;n[s]=e[s]}return n}const Pn={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")};Pn.defaultMerge;function yh(e,t){return t}function bh(e,t){return e.filter(n=>n!==void 0)}var zl;(function(e){e[e.NOT=0]="NOT",e[e.RECORD=1]="RECORD",e[e.ARRAY=2]="ARRAY",e[e.SET=3]="SET",e[e.MAP=4]="MAP",e[e.OTHER=5]="OTHER"})(zl||(zl={}));function Kl(e){return typeof e!="object"||e===null?0:Array.isArray(e)?2:Sh(e)?1:e instanceof Set?3:e instanceof Map?4:5}function Ph(e){const t=new Set;for(const n of e)for(const s of[...Object.keys(n),...Object.getOwnPropertySymbols(n)])t.add(s);return t}function wh(e,t){return typeof e=="object"&&Object.prototype.propertyIsEnumerable.call(e,t)}function Nr(e){return{*[Symbol.iterator](){for(const t of e)for(const n of t)yield n}}}const Xl=new Set(["[object Object]","[object Module]"]);function Sh(e){if(!Xl.has(Object.prototype.toString.call(e)))return!1;const{constructor:t}=e;if(t===void 0)return!0;const n=t.prototype;return!(n===null||typeof n!="object"||!Xl.has(Object.prototype.toString.call(n))||!n.hasOwnProperty("isPrototypeOf"))}function _h(e,t,n){const s={};for(const o of Ph(e)){const i=[];for(const r of e)wh(r,o)&&i.push(r[o]);if(i.length===0)continue;const l=t.metaDataUpdater(n,{key:o,parents:e}),a=Hr(i,t,l);a!==Pn.skip&&(o==="__proto__"?Object.defineProperty(s,o,{value:a,configurable:!0,enumerable:!0,writable:!0}):s[o]=a)}return s}function Ch(e){return e.flat()}function xh(e){return new Set(Nr(e))}function Th(e){return new Map(Nr(e))}function Eh(e){return e.at(-1)}const Ks={mergeRecords:_h,mergeArrays:Ch,mergeSets:xh,mergeMaps:Th,mergeOthers:Eh};function ji(...e){return kh({})(...e)}function kh(e,t){const n=Ah(e,s);function s(...o){return Hr(o,n,t)}return s}function Ah(e,t){var n,s,o;return{defaultMergeFunctions:Ks,mergeFunctions:ht({},Ks,Object.fromEntries(Object.entries(e).filter(([i,l])=>Object.hasOwn(Ks,i)).map(([i,l])=>l===!1?[i,Ks.mergeOthers]:[i,l]))),metaDataUpdater:(n=e.metaDataUpdater)!=null?n:yh,deepmerge:t,useImplicitDefaultMerging:(s=e.enableImplicitDefaultMerging)!=null?s:!1,filterValues:e.filterValues===!1?void 0:(o=e.filterValues)!=null?o:bh,actions:Pn}}function Hr(e,t,n){var s;const o=(s=t.filterValues==null?void 0:t.filterValues(e,n))!=null?s:e;if(o.length===0)return;if(o.length===1)return ei(o,t,n);const i=Kl(o[0]);if(i!==0&&i!==5){for(let l=1;l<o.length;l++)if(Kl(o[l])!==i)return ei(o,t,n)}switch(i){case 1:return Mh(o,t,n);case 2:return Rh(o,t,n);case 3:return Dh(o,t,n);case 4:return Oh(o,t,n);default:return ei(o,t,n)}}function Mh(e,t,n){const s=t.mergeFunctions.mergeRecords(e,t,n);return s===Pn.defaultMerge||t.useImplicitDefaultMerging&&s===void 0&&t.mergeFunctions.mergeRecords!==t.defaultMergeFunctions.mergeRecords?t.defaultMergeFunctions.mergeRecords(e,t,n):s}function Rh(e,t,n){const s=t.mergeFunctions.mergeArrays(e,t,n);return s===Pn.defaultMerge||t.useImplicitDefaultMerging&&s===void 0&&t.mergeFunctions.mergeArrays!==t.defaultMergeFunctions.mergeArrays?t.defaultMergeFunctions.mergeArrays(e):s}function Dh(e,t,n){const s=t.mergeFunctions.mergeSets(e,t,n);return s===Pn.defaultMerge||t.useImplicitDefaultMerging&&s===void 0&&t.mergeFunctions.mergeSets!==t.defaultMergeFunctions.mergeSets?t.defaultMergeFunctions.mergeSets(e):s}function Oh(e,t,n){const s=t.mergeFunctions.mergeMaps(e,t,n);return s===Pn.defaultMerge||t.useImplicitDefaultMerging&&s===void 0&&t.mergeFunctions.mergeMaps!==t.defaultMergeFunctions.mergeMaps?t.defaultMergeFunctions.mergeMaps(e):s}function ei(e,t,n){const s=t.mergeFunctions.mergeOthers(e,t,n);return s===Pn.defaultMerge||t.useImplicitDefaultMerging&&s===void 0&&t.mergeFunctions.mergeOthers!==t.defaultMergeFunctions.mergeOthers?t.defaultMergeFunctions.mergeOthers(e):s}function Ui(e){const t=Object.getOwnPropertyNames(e.constructor.prototype);for(let n=0;n<t.length;n++){const s=t[n],o=e[s];s!=="constructor"&&typeof o=="function"&&(e[s]=o.bind(e))}return e}function Ih(e,t){return n=>{if(e.isOpen()){const s=e.el&&n.currentTarget===e.el;(!lt(t)&&n.currentTarget.matches(t)||s)&&e.tour.next()}}}function $h(e){const{event:t,selector:n}=e.options.advanceOn||{};if(t){const s=Ih(e,n);let o=null;if(!lt(n)&&(o=document.querySelector(n),!o))return console.error(`No element was found for the selector supplied to advanceOn: ${n}`);o?(o.addEventListener(t,s),e.on("destroy",()=>o.removeEventListener(t,s))):(document.body.addEventListener(t,s,!0),e.on("destroy",()=>document.body.removeEventListener(t,s,!0)))}else return console.error("advanceOn was defined, but no event name was passed.")}class Fh{constructor(t){}}class qh{constructor(t,n){}}function Wr(e){return!Ds(e)||e===""?"":e.charAt(e.length-1)!=="-"?`${e}-`:e}function Lh(e){const t=e.options.attachTo||{},n=Object.assign({},t);if(mn(n.element)&&(n.element=n.element.call(e)),Ds(n.element)){try{n.element=document.querySelector(n.element)}catch{}n.element||console.error(`The element for this Shepherd step was not found ${t.element}`)}return n}function Bh(e){return e.options.extraHighlights?e.options.extraHighlights.flatMap(t=>Array.from(document.querySelectorAll(t))):[]}function Vr(e){return e==null?!0:!e.element||!e.on}function jr(){let e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const n=(e+Math.random()*16)%16|0;return e=Math.floor(e/16),(t=="x"?n:n&3|8).toString(16)})}const Nh=["top","right","bottom","left"],Jl=["start","end"],Gl=Nh.reduce((e,t)=>e.concat(t,t+"-"+Jl[0],t+"-"+Jl[1]),[]),ns=Math.min,In=Math.max,go=Math.round,Xs=Math.floor,$t=e=>({x:e,y:e}),Hh={left:"right",right:"left",bottom:"top",top:"bottom"},Wh={start:"end",end:"start"};function yi(e,t,n){return In(e,ns(t,n))}function Ln(e,t){return typeof e=="function"?e(t):e}function Gt(e){return e.split("-")[0]}function zt(e){return e.split("-")[1]}function Yi(e){return e==="x"?"y":"x"}function zi(e){return e==="y"?"height":"width"}function ss(e){return["top","bottom"].includes(Gt(e))?"y":"x"}function Ki(e){return Yi(ss(e))}function Ur(e,t,n){n===void 0&&(n=!1);const s=zt(e),o=Ki(e),i=zi(o);let l=o==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(l=mo(l)),[l,mo(l)]}function Vh(e){const t=mo(e);return[vo(e),t,vo(t)]}function vo(e){return e.replace(/start|end/g,t=>Wh[t])}function jh(e,t,n){const s=["left","right"],o=["right","left"],i=["top","bottom"],l=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:s:t?s:o;case"left":case"right":return t?i:l;default:return[]}}function Uh(e,t,n,s){const o=zt(e);let i=jh(Gt(e),n==="start",s);return o&&(i=i.map(l=>l+"-"+o),t&&(i=i.concat(i.map(vo)))),i}function mo(e){return e.replace(/left|right|bottom|top/g,t=>Hh[t])}function Yh(e){return ht({top:0,right:0,bottom:0,left:0},e)}function Yr(e){return typeof e!="number"?Yh(e):{top:e,right:e,bottom:e,left:e}}function yo(e){const{x:t,y:n,width:s,height:o}=e;return{width:s,height:o,top:n,left:t,right:t+s,bottom:n+o,x:t,y:n}}const zh=["crossAxis","alignment","allowedPlacements","autoAlignment"],Kh=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],Xh=["mainAxis","crossAxis","limiter"];function Zl(e,t,n){let{reference:s,floating:o}=e;const i=ss(t),l=Ki(t),a=zi(l),r=Gt(t),u=i==="y",c=s.x+s.width/2-o.width/2,p=s.y+s.height/2-o.height/2,m=s[a]/2-o[a]/2;let y;switch(r){case"top":y={x:c,y:s.y-o.height};break;case"bottom":y={x:c,y:s.y+s.height};break;case"right":y={x:s.x+s.width,y:p};break;case"left":y={x:s.x-o.width,y:p};break;default:y={x:s.x,y:s.y}}switch(zt(t)){case"start":y[l]-=m*(n&&u?-1:1);break;case"end":y[l]+=m*(n&&u?-1:1);break}return y}const Jh=async(e,t,n)=>{const{placement:s="bottom",strategy:o="absolute",middleware:i=[],platform:l}=n,a=i.filter(Boolean),r=await(l.isRTL==null?void 0:l.isRTL(t));let u=await l.getElementRects({reference:e,floating:t,strategy:o}),{x:c,y:p}=Zl(u,s,r),m=s,y={},P=0;for(let C=0;C<a.length;C++){const{name:q,fn:M}=a[C],{x:I,y:J,data:$,reset:D}=await M({x:c,y:p,initialPlacement:s,placement:m,strategy:o,middlewareData:y,rects:u,platform:l,elements:{reference:e,floating:t}});c=I??c,p=J??p,y=ht({},y,{[q]:ht({},y[q],$)}),D&&P<=50&&(P++,typeof D=="object"&&(D.placement&&(m=D.placement),D.rects&&(u=D.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:o}):D.rects),{x:c,y:p}=Zl(u,m,r)),C=-1)}return{x:c,y:p,placement:m,strategy:o,middlewareData:y}};async function Xi(e,t){var n;t===void 0&&(t={});const{x:s,y:o,platform:i,rects:l,elements:a,strategy:r}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:p="floating",altBoundary:m=!1,padding:y=0}=Ln(t,e),P=Yr(y),q=a[m?p==="floating"?"reference":"floating":p],M=yo(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(q)))==null||n?q:q.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:r})),I=p==="floating"?{x:s,y:o,width:l.floating.width,height:l.floating.height}:l.reference,J=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),$=await(i.isElement==null?void 0:i.isElement(J))?await(i.getScale==null?void 0:i.getScale(J))||{x:1,y:1}:{x:1,y:1},D=yo(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:I,offsetParent:J,strategy:r}):I);return{top:(M.top-D.top+P.top)/$.y,bottom:(D.bottom-M.bottom+P.bottom)/$.y,left:(M.left-D.left+P.left)/$.x,right:(D.right-M.right+P.right)/$.x}}const Gh=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:o,rects:i,platform:l,elements:a,middlewareData:r}=t,{element:u,padding:c=0}=Ln(e,t)||{};if(u==null)return{};const p=Yr(c),m={x:n,y:s},y=Ki(o),P=zi(y),C=await l.getDimensions(u),q=y==="y",M=q?"top":"left",I=q?"bottom":"right",J=q?"clientHeight":"clientWidth",$=i.reference[P]+i.reference[y]-m[y]-i.floating[P],D=m[y]-i.reference[y],oe=await(l.getOffsetParent==null?void 0:l.getOffsetParent(u));let re=oe?oe[J]:0;(!re||!await(l.isElement==null?void 0:l.isElement(oe)))&&(re=a.floating[J]||i.floating[P]);const L=$/2-D/2,B=re/2-C[P]/2-1,_=ns(p[M],B),W=ns(p[I],B),k=_,se=re-C[P]-W,ne=re/2-C[P]/2+L,v=yi(k,ne,se),A=!r.arrow&&zt(o)!=null&&ne!==v&&i.reference[P]/2-(ne<k?_:W)-C[P]/2<0,R=A?ne<k?ne-k:ne-se:0;return{[y]:m[y]+R,data:ht({[y]:v,centerOffset:ne-v-R},A&&{alignmentOffset:R}),reset:A}}});function Zh(e,t,n){return(e?[...n.filter(o=>zt(o)===e),...n.filter(o=>zt(o)!==e)]:n.filter(o=>Gt(o)===o)).filter(o=>e?zt(o)===e||(t?vo(o)!==o:!1):!0)}const Qh=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(n){var s,o,i;const{rects:l,middlewareData:a,placement:r,platform:u,elements:c}=n,p=Ln(t,n),{crossAxis:m=!1,alignment:y,allowedPlacements:P=Gl,autoAlignment:C=!0}=p,q=Vi(p,zh),M=y!==void 0||P===Gl?Zh(y||null,C,P):P,I=await Xi(n,q),J=((s=a.autoPlacement)==null?void 0:s.index)||0,$=M[J];if($==null)return{};const D=Ur($,l,await(u.isRTL==null?void 0:u.isRTL(c.floating)));if(r!==$)return{reset:{placement:M[0]}};const oe=[I[Gt($)],I[D[0]],I[D[1]]],re=[...((o=a.autoPlacement)==null?void 0:o.overflows)||[],{placement:$,overflows:oe}],L=M[J+1];if(L)return{data:{index:J+1,overflows:re},reset:{placement:L}};const B=re.map(k=>{const se=zt(k.placement);return[k.placement,se&&m?k.overflows.slice(0,2).reduce((ne,v)=>ne+v,0):k.overflows[0],k.overflows]}).sort((k,se)=>k[1]-se[1]),W=((i=B.filter(k=>k[2].slice(0,zt(k[0])?2:3).every(se=>se<=0))[0])==null?void 0:i[0])||B[0][0];return W!==r?{data:{index:J+1,overflows:re},reset:{placement:W}}:{}}}},ep=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(n){var s,o;const{placement:i,middlewareData:l,rects:a,initialPlacement:r,platform:u,elements:c}=n,p=Ln(t,n),{mainAxis:m=!0,crossAxis:y=!0,fallbackPlacements:P,fallbackStrategy:C="bestFit",fallbackAxisSideDirection:q="none",flipAlignment:M=!0}=p,I=Vi(p,Kh);if((s=l.arrow)!=null&&s.alignmentOffset)return{};const J=Gt(i),$=ss(r),D=Gt(r)===r,oe=await(u.isRTL==null?void 0:u.isRTL(c.floating)),re=P||(D||!M?[mo(r)]:Vh(r)),L=q!=="none";!P&&L&&re.push(...Uh(r,M,q,oe));const B=[r,...re],_=await Xi(n,I),W=[];let k=((o=l.flip)==null?void 0:o.overflows)||[];if(m&&W.push(_[J]),y){const A=Ur(i,a,oe);W.push(_[A[0]],_[A[1]])}if(k=[...k,{placement:i,overflows:W}],!W.every(A=>A<=0)){var se,ne;const A=(((se=l.flip)==null?void 0:se.index)||0)+1,R=B[A];if(R)return{data:{index:A,overflows:k},reset:{placement:R}};let j=(ne=k.filter(Z=>Z.overflows[0]<=0).sort((Z,g)=>Z.overflows[1]-g.overflows[1])[0])==null?void 0:ne.placement;if(!j)switch(C){case"bestFit":{var v;const Z=(v=k.filter(g=>{if(L){const V=ss(g.placement);return V===$||V==="y"}return!0}).map(g=>[g.placement,g.overflows.filter(V=>V>0).reduce((V,te)=>V+te,0)]).sort((g,V)=>g[1]-V[1])[0])==null?void 0:v[0];Z&&(j=Z);break}case"initialPlacement":j=r;break}if(i!==j)return{reset:{placement:j}}}return{}}}},tp=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(n){const{x:s,y:o,placement:i}=n,l=Ln(t,n),{mainAxis:a=!0,crossAxis:r=!1,limiter:u={fn:I=>{let{x:J,y:$}=I;return{x:J,y:$}}}}=l,c=Vi(l,Xh),p={x:s,y:o},m=await Xi(n,c),y=ss(Gt(i)),P=Yi(y);let C=p[P],q=p[y];if(a){const I=P==="y"?"top":"left",J=P==="y"?"bottom":"right",$=C+m[I],D=C-m[J];C=yi($,C,D)}if(r){const I=y==="y"?"top":"left",J=y==="y"?"bottom":"right",$=q+m[I],D=q-m[J];q=yi($,q,D)}const M=u.fn(ht({},n,{[P]:C,[y]:q}));return ht({},M,{data:{x:M.x-s,y:M.y-o}})}}},np=function(t){return t===void 0&&(t={}),{options:t,fn(n){const{x:s,y:o,placement:i,rects:l,middlewareData:a}=n,{offset:r=0,mainAxis:u=!0,crossAxis:c=!0}=Ln(t,n),p={x:s,y:o},m=ss(i),y=Yi(m);let P=p[y],C=p[m];const q=Ln(r,n),M=typeof q=="number"?{mainAxis:q,crossAxis:0}:ht({mainAxis:0,crossAxis:0},q);if(u){const $=y==="y"?"height":"width",D=l.reference[y]-l.floating[$]+M.mainAxis,oe=l.reference[y]+l.reference[$]-M.mainAxis;P<D?P=D:P>oe&&(P=oe)}if(c){var I,J;const $=y==="y"?"width":"height",D=["top","left"].includes(Gt(i)),oe=l.reference[m]-l.floating[$]+(D&&((I=a.offset)==null?void 0:I[m])||0)+(D?0:M.crossAxis),re=l.reference[m]+l.reference[$]+(D?0:((J=a.offset)==null?void 0:J[m])||0)-(D?M.crossAxis:0);C<oe?C=oe:C>re&&(C=re)}return{[y]:P,[m]:C}}}};function Io(){return typeof window<"u"}function rs(e){return zr(e)?(e.nodeName||"").toLowerCase():"#document"}function gt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Bt(e){var t;return(t=(zr(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function zr(e){return Io()?e instanceof Node||e instanceof gt(e).Node:!1}function xt(e){return Io()?e instanceof Element||e instanceof gt(e).Element:!1}function qt(e){return Io()?e instanceof HTMLElement||e instanceof gt(e).HTMLElement:!1}function Ql(e){return!Io()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof gt(e).ShadowRoot}function Ns(e){const{overflow:t,overflowX:n,overflowY:s,display:o}=Tt(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!["inline","contents"].includes(o)}function sp(e){return["table","td","th"].includes(rs(e))}function $o(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Ji(e){const t=Gi(),n=xt(e)?Tt(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(s=>(n.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(n.contain||"").includes(s))}function op(e){let t=yn(e);for(;qt(t)&&!os(t);){if(Ji(t))return t;if($o(t))return null;t=yn(t)}return null}function Gi(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function os(e){return["html","body","#document"].includes(rs(e))}function Tt(e){return gt(e).getComputedStyle(e)}function Fo(e){return xt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function yn(e){if(rs(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Ql(e)&&e.host||Bt(e);return Ql(t)?t.host:t}function Kr(e){const t=yn(e);return os(t)?e.ownerDocument?e.ownerDocument.body:e.body:qt(t)&&Ns(t)?t:Kr(t)}function Os(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=Kr(e),i=o===((s=e.ownerDocument)==null?void 0:s.body),l=gt(o);if(i){const a=bi(l);return t.concat(l,l.visualViewport||[],Ns(o)?o:[],a&&n?Os(a):[])}return t.concat(o,Os(o,[],n))}function bi(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Xr(e){const t=Tt(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const o=qt(e),i=o?e.offsetWidth:n,l=o?e.offsetHeight:s,a=go(n)!==i||go(s)!==l;return a&&(n=i,s=l),{width:n,height:s,$:a}}function Zi(e){return xt(e)?e:e.contextElement}function Qn(e){const t=Zi(e);if(!qt(t))return $t(1);const n=t.getBoundingClientRect(),{width:s,height:o,$:i}=Xr(t);let l=(i?go(n.width):n.width)/s,a=(i?go(n.height):n.height)/o;return(!l||!Number.isFinite(l))&&(l=1),(!a||!Number.isFinite(a))&&(a=1),{x:l,y:a}}const ip=$t(0);function Jr(e){const t=gt(e);return!Gi()||!t.visualViewport?ip:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function lp(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==gt(e)?!1:t}function Bn(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),i=Zi(e);let l=$t(1);t&&(s?xt(s)&&(l=Qn(s)):l=Qn(e));const a=lp(i,n,s)?Jr(i):$t(0);let r=(o.left+a.x)/l.x,u=(o.top+a.y)/l.y,c=o.width/l.x,p=o.height/l.y;if(i){const m=gt(i),y=s&&xt(s)?gt(s):s;let P=m,C=bi(P);for(;C&&s&&y!==P;){const q=Qn(C),M=C.getBoundingClientRect(),I=Tt(C),J=M.left+(C.clientLeft+parseFloat(I.paddingLeft))*q.x,$=M.top+(C.clientTop+parseFloat(I.paddingTop))*q.y;r*=q.x,u*=q.y,c*=q.x,p*=q.y,r+=J,u+=$,P=gt(C),C=bi(P)}}return yo({width:c,height:p,x:r,y:u})}function Qi(e,t){const n=Fo(e).scrollLeft;return t?t.left+n:Bn(Bt(e)).left+n}function Gr(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),o=s.left+t.scrollLeft-(n?0:Qi(e,s)),i=s.top+t.scrollTop;return{x:o,y:i}}function ap(e){let{elements:t,rect:n,offsetParent:s,strategy:o}=e;const i=o==="fixed",l=Bt(s),a=t?$o(t.floating):!1;if(s===l||a&&i)return n;let r={scrollLeft:0,scrollTop:0},u=$t(1);const c=$t(0),p=qt(s);if((p||!p&&!i)&&((rs(s)!=="body"||Ns(l))&&(r=Fo(s)),qt(s))){const y=Bn(s);u=Qn(s),c.x=y.x+s.clientLeft,c.y=y.y+s.clientTop}const m=l&&!p&&!i?Gr(l,r,!0):$t(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-r.scrollLeft*u.x+c.x+m.x,y:n.y*u.y-r.scrollTop*u.y+c.y+m.y}}function rp(e){return Array.from(e.getClientRects())}function cp(e){const t=Bt(e),n=Fo(e),s=e.ownerDocument.body,o=In(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),i=In(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let l=-n.scrollLeft+Qi(e);const a=-n.scrollTop;return Tt(s).direction==="rtl"&&(l+=In(t.clientWidth,s.clientWidth)-o),{width:o,height:i,x:l,y:a}}function up(e,t){const n=gt(e),s=Bt(e),o=n.visualViewport;let i=s.clientWidth,l=s.clientHeight,a=0,r=0;if(o){i=o.width,l=o.height;const u=Gi();(!u||u&&t==="fixed")&&(a=o.offsetLeft,r=o.offsetTop)}return{width:i,height:l,x:a,y:r}}function dp(e,t){const n=Bn(e,!0,t==="fixed"),s=n.top+e.clientTop,o=n.left+e.clientLeft,i=qt(e)?Qn(e):$t(1),l=e.clientWidth*i.x,a=e.clientHeight*i.y,r=o*i.x,u=s*i.y;return{width:l,height:a,x:r,y:u}}function ea(e,t,n){let s;if(t==="viewport")s=up(e,n);else if(t==="document")s=cp(Bt(e));else if(xt(t))s=dp(t,n);else{const o=Jr(e);s={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return yo(s)}function Zr(e,t){const n=yn(e);return n===t||!xt(n)||os(n)?!1:Tt(n).position==="fixed"||Zr(n,t)}function fp(e,t){const n=t.get(e);if(n)return n;let s=Os(e,[],!1).filter(a=>xt(a)&&rs(a)!=="body"),o=null;const i=Tt(e).position==="fixed";let l=i?yn(e):e;for(;xt(l)&&!os(l);){const a=Tt(l),r=Ji(l);!r&&a.position==="fixed"&&(o=null),(i?!r&&!o:!r&&a.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Ns(l)&&!r&&Zr(e,l))?s=s.filter(c=>c!==l):o=a,l=yn(l)}return t.set(e,s),s}function hp(e){let{element:t,boundary:n,rootBoundary:s,strategy:o}=e;const l=[...n==="clippingAncestors"?$o(t)?[]:fp(t,this._c):[].concat(n),s],a=l[0],r=l.reduce((u,c)=>{const p=ea(t,c,o);return u.top=In(p.top,u.top),u.right=ns(p.right,u.right),u.bottom=ns(p.bottom,u.bottom),u.left=In(p.left,u.left),u},ea(t,a,o));return{width:r.right-r.left,height:r.bottom-r.top,x:r.left,y:r.top}}function pp(e){const{width:t,height:n}=Xr(e);return{width:t,height:n}}function gp(e,t,n){const s=qt(t),o=Bt(t),i=n==="fixed",l=Bn(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const r=$t(0);if(s||!s&&!i)if((rs(t)!=="body"||Ns(o))&&(a=Fo(t)),s){const m=Bn(t,!0,i,t);r.x=m.x+t.clientLeft,r.y=m.y+t.clientTop}else o&&(r.x=Qi(o));const u=o&&!s&&!i?Gr(o,a):$t(0),c=l.left+a.scrollLeft-r.x-u.x,p=l.top+a.scrollTop-r.y-u.y;return{x:c,y:p,width:l.width,height:l.height}}function ti(e){return Tt(e).position==="static"}function ta(e,t){if(!qt(e)||Tt(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Bt(e)===n&&(n=n.ownerDocument.body),n}function Qr(e,t){const n=gt(e);if($o(e))return n;if(!qt(e)){let o=yn(e);for(;o&&!os(o);){if(xt(o)&&!ti(o))return o;o=yn(o)}return n}let s=ta(e,t);for(;s&&sp(s)&&ti(s);)s=ta(s,t);return s&&os(s)&&ti(s)&&!Ji(s)?n:s||op(e)||n}const vp=async function(t){const n=this.getOffsetParent||Qr,s=this.getDimensions,o=await s(t.floating);return{reference:gp(t.reference,await n(t.floating),t.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function mp(e){return Tt(e).direction==="rtl"}const yp={convertOffsetParentRelativeRectToViewportRelativeRect:ap,getDocumentElement:Bt,getClippingRect:hp,getOffsetParent:Qr,getElementRects:vp,getClientRects:rp,getDimensions:pp,getScale:Qn,isElement:xt,isRTL:mp};function bp(e,t){let n=null,s;const o=Bt(e);function i(){var a;clearTimeout(s),(a=n)==null||a.disconnect(),n=null}function l(a,r){a===void 0&&(a=!1),r===void 0&&(r=1),i();const{left:u,top:c,width:p,height:m}=e.getBoundingClientRect();if(a||t(),!p||!m)return;const y=Xs(c),P=Xs(o.clientWidth-(u+p)),C=Xs(o.clientHeight-(c+m)),q=Xs(u),I={rootMargin:-y+"px "+-P+"px "+-C+"px "+-q+"px",threshold:In(0,ns(1,r))||1};let J=!0;function $(D){const oe=D[0].intersectionRatio;if(oe!==r){if(!J)return l();oe?l(!1,oe):s=setTimeout(()=>{l(!1,1e-7)},1e3)}J=!1}try{n=new IntersectionObserver($,ht({},I,{root:o.ownerDocument}))}catch{n=new IntersectionObserver($,I)}n.observe(e)}return l(!0),i}function Pp(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:r=!1}=s,u=Zi(e),c=o||i?[...u?Os(u):[],...Os(t)]:[];c.forEach(M=>{o&&M.addEventListener("scroll",n,{passive:!0}),i&&M.addEventListener("resize",n)});const p=u&&a?bp(u,n):null;let m=-1,y=null;l&&(y=new ResizeObserver(M=>{let[I]=M;I&&I.target===u&&y&&(y.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var J;(J=y)==null||J.observe(t)})),n()}),u&&!r&&y.observe(u),y.observe(t));let P,C=r?Bn(e):null;r&&q();function q(){const M=Bn(e);C&&(M.x!==C.x||M.y!==C.y||M.width!==C.width||M.height!==C.height)&&n(),C=M,P=requestAnimationFrame(q)}return n(),()=>{var M;c.forEach(I=>{o&&I.removeEventListener("scroll",n),i&&I.removeEventListener("resize",n)}),p==null||p(),(M=y)==null||M.disconnect(),y=null,r&&cancelAnimationFrame(P)}}const wp=Qh,Sp=tp,_p=ep,Cp=Gh,xp=np,Tp=(e,t,n)=>{const s=new Map,o=ht({platform:yp},n),i=ht({},o.platform,{_c:s});return Jh(e,t,ht({},o,{platform:i}))};function Ep(e){e.cleanup&&e.cleanup();const t=e._getResolvedAttachToOptions();let n=t.element;const s=Op(t,e),o=Vr(t);return o&&(n=document.body,e.shepherdElementComponent.getElement().classList.add("shepherd-centered")),e.cleanup=Pp(n,e.el,()=>{if(!e.el){e.cleanup==null||e.cleanup();return}Mp(n,e,s,o)}),e.target=t.element,s}function kp(e,t){return{floatingUIOptions:ji(e.floatingUIOptions||{},t.floatingUIOptions||{})}}function Ap(e){e.cleanup&&e.cleanup(),e.cleanup=null}function Mp(e,t,n,s){return Tp(e,t.el,n).then(Rp(t,s)).then(o=>new Promise(i=>{setTimeout(()=>i(o),300)})).then(o=>{o!=null&&o.el&&o.el.focus({preventScroll:!0})})}function Rp(e,t){return({x:n,y:s,placement:o,middlewareData:i})=>(e.el&&(t?Object.assign(e.el.style,{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}):Object.assign(e.el.style,{position:"absolute",left:`${n}px`,top:`${s}px`}),e.el.dataset.popperPlacement=o,Dp(e.el,i)),e)}function Dp(e,t){const n=e.querySelector(".shepherd-arrow");if(ts(n)&&t.arrow){const{x:s,y:o}=t.arrow;Object.assign(n.style,{left:s!=null?`${s}px`:"",top:o!=null?`${o}px`:""})}}function Op(e,t){var n,s,o;const i={strategy:"absolute"};i.middleware=[];const l=Ip(t),a=Vr(e),r=(n=e.on)==null?void 0:n.includes("auto"),u=(e==null||(s=e.on)==null?void 0:s.includes("-start"))||(e==null||(o=e.on)==null?void 0:o.includes("-end"));if(!a){if(r){var c;i.middleware.push(wp({crossAxis:!0,alignment:u?e==null||(c=e.on)==null?void 0:c.split("-").pop():null}))}else i.middleware.push(_p());i.middleware.push(Sp({limiter:xp(),crossAxis:!0})),l&&i.middleware.push(Cp({element:l,padding:u?4:0})),r||(i.placement=e.on)}return ji(i,t.options.floatingUIOptions||{})}function Ip(e){return e.options.arrow&&e.el?e.el.querySelector(".shepherd-arrow"):!1}function vt(){}function $p(e,t){for(const n in t)e[n]=t[n];return e}function ec(e){return e()}function na(){return Object.create(null)}function Hs(e){e.forEach(ec)}function el(e){return typeof e=="function"}function en(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Fp(e){return Object.keys(e).length===0}function is(e,t){e.appendChild(t)}function Et(e,t,n){e.insertBefore(t,n||null)}function Pt(e){e.parentNode&&e.parentNode.removeChild(e)}function qp(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function Lt(e){return document.createElement(e)}function sa(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function tc(e){return document.createTextNode(e)}function bo(){return tc(" ")}function Lp(){return tc("")}function qo(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function Fe(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const Bp=["width","height"];function oa(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const s in t)t[s]==null?e.removeAttribute(s):s==="style"?e.style.cssText=t[s]:s==="__value"?e.value=e[s]=t[s]:n[s]&&n[s].set&&Bp.indexOf(s)===-1?e[s]=t[s]:Fe(e,s,t[s])}function Np(e){return Array.from(e.childNodes)}function Un(e,t,n){e.classList.toggle(t,!!n)}let Is;function Cs(e){Is=e}function nc(){if(!Is)throw new Error("Function called outside component initialization");return Is}function Hp(e){nc().$$.on_mount.push(e)}function tl(e){nc().$$.after_update.push(e)}const Kn=[],ls=[];let es=[];const ia=[],Wp=Promise.resolve();let Pi=!1;function Vp(){Pi||(Pi=!0,Wp.then(sc))}function wi(e){es.push(e)}const ni=new Set;let Yn=0;function sc(){if(Yn!==0)return;const e=Is;do{try{for(;Yn<Kn.length;){const t=Kn[Yn];Yn++,Cs(t),jp(t.$$)}}catch(t){throw Kn.length=0,Yn=0,t}for(Cs(null),Kn.length=0,Yn=0;ls.length;)ls.pop()();for(let t=0;t<es.length;t+=1){const n=es[t];ni.has(n)||(ni.add(n),n())}es.length=0}while(Kn.length);for(;ia.length;)ia.pop()();Pi=!1,ni.clear(),Cs(e)}function jp(e){if(e.fragment!==null){e.update(),Hs(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(wi)}}function Up(e){const t=[],n=[];es.forEach(s=>e.indexOf(s)===-1?t.push(s):n.push(s)),n.forEach(s=>s()),es=t}const no=new Set;let Mn;function $n(){Mn={r:0,c:[],p:Mn}}function Fn(){Mn.r||Hs(Mn.c),Mn=Mn.p}function Ie(e,t){e&&e.i&&(no.delete(e),e.i(t))}function je(e,t,n,s){if(e&&e.o){if(no.has(e))return;no.add(e),Mn.c.push(()=>{no.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}else s&&s()}function la(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Yp(e,t){const n={},s={},o={$$scope:1};let i=e.length;for(;i--;){const l=e[i],a=t[i];if(a){for(const r in l)r in a||(s[r]=1);for(const r in a)o[r]||(n[r]=a[r],o[r]=1);e[i]=a}else for(const r in l)o[r]=1}for(const l in s)l in n||(n[l]=void 0);return n}function Hn(e){e&&e.c()}function wn(e,t,n){const{fragment:s,after_update:o}=e.$$;s&&s.m(t,n),wi(()=>{const i=e.$$.on_mount.map(ec).filter(el);e.$$.on_destroy?e.$$.on_destroy.push(...i):Hs(i),e.$$.on_mount=[]}),o.forEach(wi)}function Sn(e,t){const n=e.$$;n.fragment!==null&&(Up(n.after_update),Hs(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function zp(e,t){e.$$.dirty[0]===-1&&(Kn.push(e),Vp(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function tn(e,t,n,s,o,i,l=null,a=[-1]){const r=Is;Cs(e);const u=e.$$={fragment:null,ctx:[],props:i,update:vt,not_equal:o,bound:na(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(r?r.$$.context:[])),callbacks:na(),dirty:a,skip_bound:!1,root:t.target||r.$$.root};l&&l(u.root);let c=!1;if(u.ctx=n?n(e,t.props||{},(p,m,...y)=>{const P=y.length?y[0]:m;return u.ctx&&o(u.ctx[p],u.ctx[p]=P)&&(!u.skip_bound&&u.bound[p]&&u.bound[p](P),c&&zp(e,p)),m}):[],u.update(),c=!0,Hs(u.before_update),u.fragment=s?s(u.ctx):!1,t.target){if(t.hydrate){const p=Np(t.target);u.fragment&&u.fragment.l(p),p.forEach(Pt)}else u.fragment&&u.fragment.c();t.intro&&Ie(e.$$.fragment),wn(e,t.target,t.anchor),sc()}Cs(r)}class nn{constructor(){this.$$=void 0,this.$$set=void 0}$destroy(){Sn(this,1),this.$destroy=vt}$on(t,n){if(!el(n))return vt;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const o=s.indexOf(n);o!==-1&&s.splice(o,1)}}$set(t){this.$$set&&!Fp(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Kp="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Kp);function Xp(e){let t,n,s,o,i;return{c(){t=Lt("button"),Fe(t,"aria-label",n=e[3]?e[3]:null),Fe(t,"class",s=`${e[1]||""} shepherd-button ${e[4]?"shepherd-button-secondary":""}`),t.disabled=e[2],Fe(t,"tabindex","0"),Fe(t,"type","button")},m(l,a){Et(l,t,a),t.innerHTML=e[5],o||(i=qo(t,"click",function(){el(e[0])&&e[0].apply(this,arguments)}),o=!0)},p(l,[a]){e=l,a&32&&(t.innerHTML=e[5]),a&8&&n!==(n=e[3]?e[3]:null)&&Fe(t,"aria-label",n),a&18&&s!==(s=`${e[1]||""} shepherd-button ${e[4]?"shepherd-button-secondary":""}`)&&Fe(t,"class",s),a&4&&(t.disabled=e[2])},i:vt,o:vt,d(l){l&&Pt(t),o=!1,i()}}}function Jp(e,t,n){let{config:s,step:o}=t,i,l,a,r,u,c;function p(m){return mn(m)?m=m.call(o):m}return e.$$set=m=>{"config"in m&&n(6,s=m.config),"step"in m&&n(7,o=m.step)},e.$$.update=()=>{e.$$.dirty&192&&(n(0,i=s.action?s.action.bind(o.tour):null),n(1,l=s.classes),n(2,a=s.disabled?p(s.disabled):!1),n(3,r=s.label?p(s.label):null),n(4,u=s.secondary),n(5,c=s.text?p(s.text):null))},[i,l,a,r,u,c,s,o]}class Gp extends nn{constructor(t){super(),tn(this,t,Jp,Xp,en,{config:6,step:7})}}function aa(e,t,n){const s=e.slice();return s[2]=t[n],s}function ra(e){let t,n,s=la(e[1]),o=[];for(let l=0;l<s.length;l+=1)o[l]=ca(aa(e,s,l));const i=l=>je(o[l],1,1,()=>{o[l]=null});return{c(){for(let l=0;l<o.length;l+=1)o[l].c();t=Lp()},m(l,a){for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(l,a);Et(l,t,a),n=!0},p(l,a){if(a&3){s=la(l[1]);let r;for(r=0;r<s.length;r+=1){const u=aa(l,s,r);o[r]?(o[r].p(u,a),Ie(o[r],1)):(o[r]=ca(u),o[r].c(),Ie(o[r],1),o[r].m(t.parentNode,t))}for($n(),r=s.length;r<o.length;r+=1)i(r);Fn()}},i(l){if(!n){for(let a=0;a<s.length;a+=1)Ie(o[a]);n=!0}},o(l){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)je(o[a]);n=!1},d(l){l&&Pt(t),qp(o,l)}}}function ca(e){let t,n;return t=new Gp({props:{config:e[2],step:e[0]}}),{c(){Hn(t.$$.fragment)},m(s,o){wn(t,s,o),n=!0},p(s,o){const i={};o&2&&(i.config=s[2]),o&1&&(i.step=s[0]),t.$set(i)},i(s){n||(Ie(t.$$.fragment,s),n=!0)},o(s){je(t.$$.fragment,s),n=!1},d(s){Sn(t,s)}}}function Zp(e){let t,n,s=e[1]&&ra(e);return{c(){t=Lt("footer"),s&&s.c(),Fe(t,"class","shepherd-footer")},m(o,i){Et(o,t,i),s&&s.m(t,null),n=!0},p(o,[i]){o[1]?s?(s.p(o,i),i&2&&Ie(s,1)):(s=ra(o),s.c(),Ie(s,1),s.m(t,null)):s&&($n(),je(s,1,1,()=>{s=null}),Fn())},i(o){n||(Ie(s),n=!0)},o(o){je(s),n=!1},d(o){o&&Pt(t),s&&s.d()}}}function Qp(e,t,n){let s,{step:o}=t;return e.$$set=i=>{"step"in i&&n(0,o=i.step)},e.$$.update=()=>{e.$$.dirty&1&&n(1,s=o.options.buttons)},[o,s]}class eg extends nn{constructor(t){super(),tn(this,t,Qp,Zp,en,{step:0})}}function tg(e){let t,n,s,o,i;return{c(){t=Lt("button"),n=Lt("span"),n.textContent="",Fe(n,"aria-hidden","true"),Fe(t,"aria-label",s=e[0].label?e[0].label:"Close Tour"),Fe(t,"class","shepherd-cancel-icon"),Fe(t,"type","button")},m(l,a){Et(l,t,a),is(t,n),o||(i=qo(t,"click",e[1]),o=!0)},p(l,[a]){a&1&&s!==(s=l[0].label?l[0].label:"Close Tour")&&Fe(t,"aria-label",s)},i:vt,o:vt,d(l){l&&Pt(t),o=!1,i()}}}function ng(e,t,n){let{cancelIcon:s,step:o}=t;const i=l=>{l.preventDefault(),o.cancel()};return e.$$set=l=>{"cancelIcon"in l&&n(0,s=l.cancelIcon),"step"in l&&n(2,o=l.step)},[s,i,o]}class sg extends nn{constructor(t){super(),tn(this,t,ng,tg,en,{cancelIcon:0,step:2})}}function og(e){let t;return{c(){t=Lt("h3"),Fe(t,"id",e[1]),Fe(t,"class","shepherd-title")},m(n,s){Et(n,t,s),e[3](t)},p(n,[s]){s&2&&Fe(t,"id",n[1])},i:vt,o:vt,d(n){n&&Pt(t),e[3](null)}}}function ig(e,t,n){let{labelId:s,element:o,title:i}=t;tl(()=>{mn(i)&&n(2,i=i()),n(0,o.innerHTML=i,o)});function l(a){ls[a?"unshift":"push"](()=>{o=a,n(0,o)})}return e.$$set=a=>{"labelId"in a&&n(1,s=a.labelId),"element"in a&&n(0,o=a.element),"title"in a&&n(2,i=a.title)},[o,s,i,l]}class lg extends nn{constructor(t){super(),tn(this,t,ig,og,en,{labelId:1,element:0,title:2})}}function ua(e){let t,n;return t=new lg({props:{labelId:e[0],title:e[2]}}),{c(){Hn(t.$$.fragment)},m(s,o){wn(t,s,o),n=!0},p(s,o){const i={};o&1&&(i.labelId=s[0]),o&4&&(i.title=s[2]),t.$set(i)},i(s){n||(Ie(t.$$.fragment,s),n=!0)},o(s){je(t.$$.fragment,s),n=!1},d(s){Sn(t,s)}}}function da(e){let t,n;return t=new sg({props:{cancelIcon:e[3],step:e[1]}}),{c(){Hn(t.$$.fragment)},m(s,o){wn(t,s,o),n=!0},p(s,o){const i={};o&8&&(i.cancelIcon=s[3]),o&2&&(i.step=s[1]),t.$set(i)},i(s){n||(Ie(t.$$.fragment,s),n=!0)},o(s){je(t.$$.fragment,s),n=!1},d(s){Sn(t,s)}}}function ag(e){let t,n,s,o=e[2]&&ua(e),i=e[3]&&e[3].enabled&&da(e);return{c(){t=Lt("header"),o&&o.c(),n=bo(),i&&i.c(),Fe(t,"class","shepherd-header")},m(l,a){Et(l,t,a),o&&o.m(t,null),is(t,n),i&&i.m(t,null),s=!0},p(l,[a]){l[2]?o?(o.p(l,a),a&4&&Ie(o,1)):(o=ua(l),o.c(),Ie(o,1),o.m(t,n)):o&&($n(),je(o,1,1,()=>{o=null}),Fn()),l[3]&&l[3].enabled?i?(i.p(l,a),a&8&&Ie(i,1)):(i=da(l),i.c(),Ie(i,1),i.m(t,null)):i&&($n(),je(i,1,1,()=>{i=null}),Fn())},i(l){s||(Ie(o),Ie(i),s=!0)},o(l){je(o),je(i),s=!1},d(l){l&&Pt(t),o&&o.d(),i&&i.d()}}}function rg(e,t,n){let{labelId:s,step:o}=t,i,l;return e.$$set=a=>{"labelId"in a&&n(0,s=a.labelId),"step"in a&&n(1,o=a.step)},e.$$.update=()=>{e.$$.dirty&2&&(n(2,i=o.options.title),n(3,l=o.options.cancelIcon))},[s,o,i,l]}class cg extends nn{constructor(t){super(),tn(this,t,rg,ag,en,{labelId:0,step:1})}}function ug(e){let t;return{c(){t=Lt("div"),Fe(t,"class","shepherd-text"),Fe(t,"id",e[1])},m(n,s){Et(n,t,s),e[3](t)},p(n,[s]){s&2&&Fe(t,"id",n[1])},i:vt,o:vt,d(n){n&&Pt(t),e[3](null)}}}function dg(e,t,n){let{descriptionId:s,element:o,step:i}=t;tl(()=>{let{text:a}=i.options;mn(a)&&(a=a.call(i)),ts(a)?o.appendChild(a):n(0,o.innerHTML=a,o)});function l(a){ls[a?"unshift":"push"](()=>{o=a,n(0,o)})}return e.$$set=a=>{"descriptionId"in a&&n(1,s=a.descriptionId),"element"in a&&n(0,o=a.element),"step"in a&&n(2,i=a.step)},[o,s,i,l]}class fg extends nn{constructor(t){super(),tn(this,t,dg,ug,en,{descriptionId:1,element:0,step:2})}}function fa(e){let t,n;return t=new cg({props:{labelId:e[1],step:e[2]}}),{c(){Hn(t.$$.fragment)},m(s,o){wn(t,s,o),n=!0},p(s,o){const i={};o&2&&(i.labelId=s[1]),o&4&&(i.step=s[2]),t.$set(i)},i(s){n||(Ie(t.$$.fragment,s),n=!0)},o(s){je(t.$$.fragment,s),n=!1},d(s){Sn(t,s)}}}function ha(e){let t,n;return t=new fg({props:{descriptionId:e[0],step:e[2]}}),{c(){Hn(t.$$.fragment)},m(s,o){wn(t,s,o),n=!0},p(s,o){const i={};o&1&&(i.descriptionId=s[0]),o&4&&(i.step=s[2]),t.$set(i)},i(s){n||(Ie(t.$$.fragment,s),n=!0)},o(s){je(t.$$.fragment,s),n=!1},d(s){Sn(t,s)}}}function pa(e){let t,n;return t=new eg({props:{step:e[2]}}),{c(){Hn(t.$$.fragment)},m(s,o){wn(t,s,o),n=!0},p(s,o){const i={};o&4&&(i.step=s[2]),t.$set(i)},i(s){n||(Ie(t.$$.fragment,s),n=!0)},o(s){je(t.$$.fragment,s),n=!1},d(s){Sn(t,s)}}}function hg(e){let t,n=!lt(e[2].options.title)||e[2].options.cancelIcon&&e[2].options.cancelIcon.enabled,s,o=!lt(e[2].options.text),i,l=Array.isArray(e[2].options.buttons)&&e[2].options.buttons.length,a,r=n&&fa(e),u=o&&ha(e),c=l&&pa(e);return{c(){t=Lt("div"),r&&r.c(),s=bo(),u&&u.c(),i=bo(),c&&c.c(),Fe(t,"class","shepherd-content")},m(p,m){Et(p,t,m),r&&r.m(t,null),is(t,s),u&&u.m(t,null),is(t,i),c&&c.m(t,null),a=!0},p(p,[m]){m&4&&(n=!lt(p[2].options.title)||p[2].options.cancelIcon&&p[2].options.cancelIcon.enabled),n?r?(r.p(p,m),m&4&&Ie(r,1)):(r=fa(p),r.c(),Ie(r,1),r.m(t,s)):r&&($n(),je(r,1,1,()=>{r=null}),Fn()),m&4&&(o=!lt(p[2].options.text)),o?u?(u.p(p,m),m&4&&Ie(u,1)):(u=ha(p),u.c(),Ie(u,1),u.m(t,i)):u&&($n(),je(u,1,1,()=>{u=null}),Fn()),m&4&&(l=Array.isArray(p[2].options.buttons)&&p[2].options.buttons.length),l?c?(c.p(p,m),m&4&&Ie(c,1)):(c=pa(p),c.c(),Ie(c,1),c.m(t,null)):c&&($n(),je(c,1,1,()=>{c=null}),Fn())},i(p){a||(Ie(r),Ie(u),Ie(c),a=!0)},o(p){je(r),je(u),je(c),a=!1},d(p){p&&Pt(t),r&&r.d(),u&&u.d(),c&&c.d()}}}function pg(e,t,n){let{descriptionId:s,labelId:o,step:i}=t;return e.$$set=l=>{"descriptionId"in l&&n(0,s=l.descriptionId),"labelId"in l&&n(1,o=l.labelId),"step"in l&&n(2,i=l.step)},[s,o,i]}class gg extends nn{constructor(t){super(),tn(this,t,pg,hg,en,{descriptionId:0,labelId:1,step:2})}}function ga(e){let t;return{c(){t=Lt("div"),Fe(t,"class","shepherd-arrow"),Fe(t,"data-popper-arrow","")},m(n,s){Et(n,t,s)},d(n){n&&Pt(t)}}}function vg(e){let t,n,s,o,i,l,a,r,u=e[4].options.arrow&&e[4].options.attachTo&&e[4].options.attachTo.element&&e[4].options.attachTo.on&&ga();s=new gg({props:{descriptionId:e[2],labelId:e[3],step:e[4]}});let c=[{"aria-describedby":o=lt(e[4].options.text)?null:e[2]},{"aria-labelledby":i=e[4].options.title?e[3]:null},e[1],{open:"true"}],p={};for(let m=0;m<c.length;m+=1)p=$p(p,c[m]);return{c(){t=Lt("dialog"),u&&u.c(),n=bo(),Hn(s.$$.fragment),oa(t,p),Un(t,"shepherd-has-cancel-icon",e[5]),Un(t,"shepherd-has-title",e[6]),Un(t,"shepherd-element",!0)},m(m,y){Et(m,t,y),u&&u.m(t,null),is(t,n),wn(s,t,null),e[13](t),l=!0,a||(r=qo(t,"keydown",e[7]),a=!0)},p(m,[y]){m[4].options.arrow&&m[4].options.attachTo&&m[4].options.attachTo.element&&m[4].options.attachTo.on?u||(u=ga(),u.c(),u.m(t,n)):u&&(u.d(1),u=null);const P={};y&4&&(P.descriptionId=m[2]),y&8&&(P.labelId=m[3]),y&16&&(P.step=m[4]),s.$set(P),oa(t,p=Yp(c,[(!l||y&20&&o!==(o=lt(m[4].options.text)?null:m[2]))&&{"aria-describedby":o},(!l||y&24&&i!==(i=m[4].options.title?m[3]:null))&&{"aria-labelledby":i},y&2&&m[1],{open:"true"}])),Un(t,"shepherd-has-cancel-icon",m[5]),Un(t,"shepherd-has-title",m[6]),Un(t,"shepherd-element",!0)},i(m){l||(Ie(s.$$.fragment,m),l=!0)},o(m){je(s.$$.fragment,m),l=!1},d(m){m&&Pt(t),u&&u.d(),Sn(s),e[13](null),a=!1,r()}}}const mg=9,yg=27,bg=37,Pg=39;function va(e){return e.split(" ").filter(t=>!!t.length)}function wg(e,t,n){let{classPrefix:s,element:o,descriptionId:i,firstFocusableElement:l,focusableElements:a,labelId:r,lastFocusableElement:u,step:c,dataStepId:p}=t,m,y,P;const C=()=>o;Hp(()=>{n(1,p={[`data-${s}shepherd-step-id`]:c.id}),n(9,a=o.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')),n(8,l=a[0]),n(10,u=a[a.length-1])}),tl(()=>{P!==c.options.classes&&q()});function q(){M(P),P=c.options.classes,I(P)}function M(D){if(Ds(D)){const oe=va(D);oe.length&&o.classList.remove(...oe)}}function I(D){if(Ds(D)){const oe=va(D);oe.length&&o.classList.add(...oe)}}const J=D=>{const{tour:oe}=c;switch(D.keyCode){case mg:if(a.length===0){D.preventDefault();break}D.shiftKey?(document.activeElement===l||document.activeElement.classList.contains("shepherd-element"))&&(D.preventDefault(),u.focus()):document.activeElement===u&&(D.preventDefault(),l.focus());break;case yg:oe.options.exitOnEsc&&(D.preventDefault(),D.stopPropagation(),c.cancel());break;case bg:oe.options.keyboardNavigation&&(D.preventDefault(),D.stopPropagation(),oe.back());break;case Pg:oe.options.keyboardNavigation&&(D.preventDefault(),D.stopPropagation(),oe.next());break}};function $(D){ls[D?"unshift":"push"](()=>{o=D,n(0,o)})}return e.$$set=D=>{"classPrefix"in D&&n(11,s=D.classPrefix),"element"in D&&n(0,o=D.element),"descriptionId"in D&&n(2,i=D.descriptionId),"firstFocusableElement"in D&&n(8,l=D.firstFocusableElement),"focusableElements"in D&&n(9,a=D.focusableElements),"labelId"in D&&n(3,r=D.labelId),"lastFocusableElement"in D&&n(10,u=D.lastFocusableElement),"step"in D&&n(4,c=D.step),"dataStepId"in D&&n(1,p=D.dataStepId)},e.$$.update=()=>{e.$$.dirty&16&&(n(5,m=c.options&&c.options.cancelIcon&&c.options.cancelIcon.enabled),n(6,y=c.options&&c.options.title))},[o,p,i,r,c,m,y,J,l,a,u,s,C,$]}class Sg extends nn{constructor(t){super(),tn(this,t,wg,vg,en,{classPrefix:11,element:0,descriptionId:2,firstFocusableElement:8,focusableElements:9,labelId:3,lastFocusableElement:10,step:4,dataStepId:1,getElement:12})}get getElement(){return this.$$.ctx[12]}}class Si extends Wi{constructor(t,n={}){return super(),this._resolvedAttachTo=void 0,this._resolvedExtraHighlightElements=void 0,this.classPrefix=void 0,this.el=void 0,this.target=void 0,this.tour=void 0,this.tour=t,this.classPrefix=this.tour.options?Wr(this.tour.options.classPrefix):"",this.styles=t.styles,this._resolvedAttachTo=null,Ui(this),this._setOptions(n),this}cancel(){this.tour.cancel(),this.trigger("cancel")}complete(){this.tour.complete(),this.trigger("complete")}destroy(){Ap(this),ts(this.el)&&(this.el.remove(),this.el=null),this._updateStepTargetOnHide(),this.trigger("destroy")}getTour(){return this.tour}hide(){var t;(t=this.tour.modal)==null||t.hide(),this.trigger("before-hide"),this.el&&(this.el.hidden=!0),this._updateStepTargetOnHide(),this.trigger("hide")}_resolveExtraHiglightElements(){return this._resolvedExtraHighlightElements=Bh(this),this._resolvedExtraHighlightElements}_resolveAttachToOptions(){return this._resolvedAttachTo=Lh(this),this._resolvedAttachTo}_getResolvedAttachToOptions(){return this._resolvedAttachTo===null?this._resolveAttachToOptions():this._resolvedAttachTo}isOpen(){return!!(this.el&&!this.el.hidden)}show(){return mn(this.options.beforeShowPromise)?Promise.resolve(this.options.beforeShowPromise()).then(()=>this._show()):Promise.resolve(this._show())}updateStepOptions(t){Object.assign(this.options,t),this.shepherdElementComponent&&this.shepherdElementComponent.$set({step:this})}getElement(){return this.el}getTarget(){return this.target}_createTooltipContent(){const t=`${this.id}-description`,n=`${this.id}-label`;return this.shepherdElementComponent=new Sg({target:this.tour.options.stepsContainer||document.body,props:{classPrefix:this.classPrefix,descriptionId:t,labelId:n,step:this,styles:this.styles}}),this.shepherdElementComponent.getElement()}_scrollTo(t){const{element:n}=this._getResolvedAttachToOptions();mn(this.options.scrollToHandler)?this.options.scrollToHandler(n):mh(n)&&typeof n.scrollIntoView=="function"&&n.scrollIntoView(t)}_getClassOptions(t){const n=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions,s=t.classes?t.classes:"",o=n&&n.classes?n.classes:"",i=[...s.split(" "),...o.split(" ")],l=new Set(i);return Array.from(l).join(" ").trim()}_setOptions(t={}){let n=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions;n=ji({},n||{}),this.options=Object.assign({arrow:!0},n,t,kp(n,t));const{when:s}=this.options;this.options.classes=this._getClassOptions(t),this.destroy(),this.id=this.options.id||`step-${jr()}`,s&&Object.keys(s).forEach(o=>{this.on(o,s[o],this)})}_setupElements(){lt(this.el)||this.destroy(),this.el=this._createTooltipContent(),this.options.advanceOn&&$h(this),Ep(this)}_show(){var t;this.trigger("before-show"),this._resolveAttachToOptions(),this._resolveExtraHiglightElements(),this._setupElements(),this.tour.modal||this.tour.setupModal(),(t=this.tour.modal)==null||t.setupForStep(this),this._styleTargetElementForStep(this),this.el&&(this.el.hidden=!1),this.options.scrollTo&&setTimeout(()=>{this._scrollTo(this.options.scrollTo)}),this.el&&(this.el.hidden=!1);const n=this.shepherdElementComponent.getElement(),s=this.target||document.body,o=this._resolvedExtraHighlightElements;s.classList.add(`${this.classPrefix}shepherd-enabled`),s.classList.add(`${this.classPrefix}shepherd-target`),n.classList.add("shepherd-enabled"),o==null||o.forEach(i=>{i.classList.add(`${this.classPrefix}shepherd-enabled`),i.classList.add(`${this.classPrefix}shepherd-target`)}),this.trigger("show")}_styleTargetElementForStep(t){const n=t.target,s=t._resolvedExtraHighlightElements;if(!n)return;const o=t.options.highlightClass;o&&(n.classList.add(o),s==null||s.forEach(i=>i.classList.add(o))),n.classList.remove("shepherd-target-click-disabled"),s==null||s.forEach(i=>i.classList.remove("shepherd-target-click-disabled")),t.options.canClickTarget===!1&&(n.classList.add("shepherd-target-click-disabled"),s==null||s.forEach(i=>i.classList.add("shepherd-target-click-disabled")))}_updateStepTargetOnHide(){const t=this.target||document.body,n=this._resolvedExtraHighlightElements,s=this.options.highlightClass;s&&(t.classList.remove(s),n==null||n.forEach(o=>o.classList.remove(s))),t.classList.remove("shepherd-target-click-disabled",`${this.classPrefix}shepherd-enabled`,`${this.classPrefix}shepherd-target`),n==null||n.forEach(o=>{o.classList.remove("shepherd-target-click-disabled",`${this.classPrefix}shepherd-enabled`,`${this.classPrefix}shepherd-target`)})}}function _g(e){if(e){const{steps:t}=e;t.forEach(n=>{n.options&&n.options.canClickTarget===!1&&n.options.attachTo&&(ts(n.target)&&n.target.classList.remove("shepherd-target-click-disabled"),n._resolvedExtraHighlightElements&&n._resolvedExtraHighlightElements.forEach(s=>{ts(s)&&s.classList.remove("shepherd-target-click-disabled")}))})}}function Cg(e){let t="";const{innerWidth:n,innerHeight:s}=window;return e.forEach(o=>{const{width:i,height:l,x:a=0,y:r=0,r:u=0}=o,{topLeft:c=0,topRight:p=0,bottomRight:m=0,bottomLeft:y=0}=typeof u=="number"?{topLeft:u,topRight:u,bottomRight:u,bottomLeft:u}:u;t+=`M${a+c},${r}      a${c},${c},0,0,0-${c},${c}      V${l+r-y}      a${y},${y},0,0,0,${y},${y}      H${i+a-m}      a${m},${m},0,0,0,${m}-${m}      V${r+p}      a${p},${p},0,0,0-${p}-${p}      Z`}),`M${n},${s}          H0          V0          H${n}          V${s}          Z          ${t}`.replace(/\s/g,"")}function xg(e){let t,n,s,o,i;return{c(){t=sa("svg"),n=sa("path"),Fe(n,"d",e[2]),Fe(t,"class",s=`${e[1]?"shepherd-modal-is-visible":""} shepherd-modal-overlay-container`)},m(l,a){Et(l,t,a),is(t,n),e[11](t),o||(i=qo(t,"touchmove",e[3]),o=!0)},p(l,[a]){a&4&&Fe(n,"d",l[2]),a&2&&s!==(s=`${l[1]?"shepherd-modal-is-visible":""} shepherd-modal-overlay-container`)&&Fe(t,"class",s)},i:vt,o:vt,d(l){l&&Pt(t),e[11](null),o=!1,i()}}}function oc(e){if(!e)return null;const n=e instanceof HTMLElement&&window.getComputedStyle(e).overflowY;return n!=="hidden"&&n!=="visible"&&e.scrollHeight>=e.clientHeight?e:oc(e.parentElement)}function Tg(e){let t={top:0,left:0};if(!e)return t;let n=e.ownerDocument.defaultView;for(;n!==window.top;){var s;const l=(s=n)==null?void 0:s.frameElement;if(l){var o,i;const a=l.getBoundingClientRect();t.top+=a.top+((o=a.scrollTop)!=null?o:0),t.left+=a.left+((i=a.scrollLeft)!=null?i:0)}n=n.parent}return t}function Eg(e,t){const n=e.getBoundingClientRect();let s=n.y||n.top,o=n.bottom||s+n.height;if(t){const l=t.getBoundingClientRect(),a=l.y||l.top,r=l.bottom||a+l.height;s=Math.max(s,a),o=Math.min(o,r)}const i=Math.max(o-s,0);return{y:s,height:i}}function kg(e,t,n){let{element:s,openingProperties:o}=t,i=!1,l,a;u();const r=()=>s;function u(){n(4,o=[{width:0,height:0,x:0,y:0,r:0}])}function c(){n(1,i=!1),M()}function p($=0,D=0,oe=0,re=0,L,B,_){if(B){const W=[B,..._||[]];n(4,o=[]);for(const k of W){if(!k||W.indexOf(k)!==W.lastIndexOf(k))continue;const{y:se,height:ne}=Eg(k,L),{x:v,width:A,left:R}=k.getBoundingClientRect();W.some(Z=>{if(Z===k)return!1;const g=Z.getBoundingClientRect();return v>=g.left&&v+A<=g.right&&se>=g.top&&se+ne<=g.bottom})||o.push({width:A+$*2,height:ne+$*2,x:(v||R)+oe-$,y:se+re-$,r:D})}}else u()}function m($){M(),$.tour.options.useModalOverlay?(I($),y()):c()}function y(){n(1,i=!0)}const P=$=>{$.preventDefault()},C=$=>{$.stopPropagation()};function q(){window.addEventListener("touchmove",P,{passive:!1})}function M(){l&&(cancelAnimationFrame(l),l=void 0),window.removeEventListener("touchmove",P,{passive:!1})}function I($){const{modalOverlayOpeningPadding:D,modalOverlayOpeningRadius:oe,modalOverlayOpeningXOffset:re=0,modalOverlayOpeningYOffset:L=0}=$.options,B=Tg($.target),_=oc($.target),W=()=>{l=void 0,p(D,oe,re+B.left,L+B.top,_,$.target,$._resolvedExtraHighlightElements),l=requestAnimationFrame(W)};W(),q()}function J($){ls[$?"unshift":"push"](()=>{s=$,n(0,s)})}return e.$$set=$=>{"element"in $&&n(0,s=$.element),"openingProperties"in $&&n(4,o=$.openingProperties)},e.$$.update=()=>{e.$$.dirty&16&&n(2,a=Cg(o))},[s,i,a,C,o,r,u,c,p,m,y,J]}class Ag extends nn{constructor(t){super(),tn(this,t,kg,xg,en,{element:0,openingProperties:4,getElement:5,closeModalOpening:6,hide:7,positionModal:8,setupForStep:9,show:10})}get getElement(){return this.$$.ctx[5]}get closeModalOpening(){return this.$$.ctx[6]}get hide(){return this.$$.ctx[7]}get positionModal(){return this.$$.ctx[8]}get setupForStep(){return this.$$.ctx[9]}get show(){return this.$$.ctx[10]}}class Mg extends Wi{constructor(){super(),this.activeTour=void 0,Ui(this)}}class Rg extends Wi{constructor(t={}){super(),this.trackedEvents=["active","cancel","complete","show"],this.classPrefix=void 0,this.currentStep=void 0,this.focusedElBeforeOpen=void 0,this.id=void 0,this.modal=void 0,this.options=void 0,this.steps=void 0,Ui(this);const n={exitOnEsc:!0,keyboardNavigation:!0};return this.options=Object.assign({},n,t),this.classPrefix=Wr(this.options.classPrefix),this.steps=[],this.addSteps(this.options.steps),["active","cancel","complete","inactive","show","start"].map(o=>{(i=>{this.on(i,l=>{l=l||{},l.tour=this,Rn.trigger(i,l)})})(o)}),this._setTourID(t.id),this}addStep(t,n){let s=t;return s instanceof Si?s.tour=this:s=new Si(this,s),lt(n)?this.steps.push(s):this.steps.splice(n,0,s),s}addSteps(t){return Array.isArray(t)&&t.forEach(n=>{this.addStep(n)}),this}back(){const t=this.steps.indexOf(this.currentStep);this.show(t-1,!1)}async cancel(){if(this.options.confirmCancel){const t=this.options.confirmCancelMessage||"Are you sure you want to stop the tour?";let n;mn(this.options.confirmCancel)?n=await this.options.confirmCancel():n=window.confirm(t),n&&this._done("cancel")}else this._done("cancel")}complete(){this._done("complete")}getById(t){return this.steps.find(n=>n.id===t)}getCurrentStep(){return this.currentStep}hide(){const t=this.getCurrentStep();if(t)return t.hide()}isActive(){return Rn.activeTour===this}next(){const t=this.steps.indexOf(this.currentStep);t===this.steps.length-1?this.complete():this.show(t+1,!0)}removeStep(t){const n=this.getCurrentStep();this.steps.some((s,o)=>{if(s.id===t)return s.isOpen()&&s.hide(),s.destroy(),this.steps.splice(o,1),!0}),n&&n.id===t&&(this.currentStep=void 0,this.steps.length?this.show(0):this.cancel())}show(t=0,n=!0){const s=Ds(t)?this.getById(t):this.steps[t];s&&(this._updateStateBeforeShow(),mn(s.options.showOn)&&!s.options.showOn()?this._skipStep(s,n):(this.currentStep=s,this.trigger("show",{step:s,previous:this.currentStep}),s.show()))}async start(){this.trigger("start"),this.focusedElBeforeOpen=document.activeElement,this.currentStep=null,this.setupModal(),this._setupActiveTour(),this.next()}_done(t){const n=this.steps.indexOf(this.currentStep);if(Array.isArray(this.steps)&&this.steps.forEach(s=>s.destroy()),_g(this),this.trigger(t,{index:n}),Rn.activeTour=null,this.trigger("inactive",{tour:this}),this.modal&&this.modal.hide(),(t==="cancel"||t==="complete")&&this.modal){const s=document.querySelector(".shepherd-modal-overlay-container");s&&(s.remove(),this.modal=null)}ts(this.focusedElBeforeOpen)&&this.focusedElBeforeOpen.focus()}_setupActiveTour(){this.trigger("active",{tour:this}),Rn.activeTour=this}setupModal(){this.modal=new Ag({target:this.options.modalContainer||document.body,props:{styles:this.styles}})}_skipStep(t,n){const s=this.steps.indexOf(t);if(s===this.steps.length-1)this.complete();else{const o=n?s+1:s-1;this.show(o,n)}}_updateStateBeforeShow(){this.currentStep&&this.currentStep.hide(),this.isActive()||this._setupActiveTour()}_setTourID(t){const n=this.options.tourName||"tour",s=t||jr();this.id=`${n}--${s}`}}const Rn=new Mg,ic=typeof window>"u";Rn.Step=ic?Fh:Si;Rn.Tour=ic?qh:Rg;const Dg=(...e)=>new Rn.Tour(...e),Og={"aria-hidden":"true"},Ig=dt({__name:"FirstPlayTour",setup(e,{expose:t}){const n=()=>{const o=Dg({useModalOverlay:!0,defaultStepOptions:{cancelIcon:{enabled:!0},scrollTo:{behavior:"smooth",block:"center"},highlightClass:"tour-highlight"}});return o.addStep({id:"add-red-players",title:"Click Add Red",attachTo:{element:".add-red",on:"right"},text:"Click the Add Red button to start adding attacking players. This opens the player setup dialog for your red (attacking) team.",advanceOn:{selector:".add-red",event:"click"},buttons:[{text:"Exit",action:o.cancel}]}),o.addStep({id:"set-attacking-and-count",title:"Set to attacking and add 4",attachTo:{element:".dialog-actions",on:"top"},text:"In the player dialog, make sure you are adding Red (attacking) players, then use the number field to set it to 4 and click Add 4 Players to place them on the pitch.",advanceOn:{selector:".dialog-actions .dialog-btn.confirm",event:"click"},buttons:[{text:"Exit",action:o.cancel}]}),o.addStep({id:"draw-paths",title:"Draw running lines",attachTo:{element:".rugby-pitch-container",on:"top"},text:"Triple-click a player to open their options, switch them to path mode, then drag on the pitch to sketch their running route.",buttons:[{text:"Back",action:o.back},{text:"Next",action:o.next},{text:"Exit",action:o.cancel}]}),o.addStep({id:"record-play",title:"Record the full play",attachTo:{element:".play-actions-container",on:"bottom"},text:"Open the Play Actions menu to run your phases. When you are ready, use Record Full Play to capture the entire movement as a recording.",buttons:[{text:"Exit",action:o.cancel}],advanceOn:{selector:".action-btn.record",event:"click"}}),o.addStep({id:"save-play",title:"Save and replay",text:"After recording finishes, give your play a name in the save dialog. You can then find it in Saved Plays and replay it any time.",buttons:[{text:"Back",action:o.back},{text:"Finish",action:o.complete}]}),o};return t({startTour:()=>{n().start()}}),(o,i)=>(le(),ae("div",Og))}}),$g={class:"play-actions-container"},Fg={key:0,class:"popup-menu"},qg={class:"popup-content"},Lg={class:"action-section"},Bg={class:"action-buttons"},Ng=["disabled"],Hg={class:"action-section"},Wg={class:"action-buttons"},Vg=["disabled"],jg=["disabled"],Ug={class:"action-section"},Yg={class:"action-buttons"},zg=["disabled"],Kg=dt({__name:"PlayActionsMenu",props:{isRecording:{type:Boolean},isRunningCurrentPhase:{type:Boolean},isRunningFullPlay:{type:Boolean},hasAnySequencesInCurrentPhase:{type:Boolean},hasMultiplePhases:{type:Boolean},currentSequenceData:{},availableSequences:{},currentSequence:{}},emits:["run-current-phase","run-full-play","run-current-sequence","reset-current-sequence","record-full-play","show-tutorial"],setup(e,{emit:t}){const n=e,s=t,o=ee(!1),i=()=>{o.value=!o.value},l=()=>{o.value=!1},a=r=>{switch(r){case"run-current-phase":s("run-current-phase");break;case"run-full-play":s("run-full-play");break;case"run-current-sequence":n.currentSequence&&s("run-current-sequence",n.currentSequence);break;case"reset-current-sequence":s("reset-current-sequence");break;case"record-full-play":s("record-full-play");break;case"show-tutorial":s("show-tutorial");break}l()};return(r,u)=>(le(),ae("div",$g,[h("button",{"data-cy":"play-actions-trigger",class:Me(["popup-trigger-button",{active:o.value}]),onClick:i},[u[6]||(u[6]=h("svg",{class:"icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[h("polygon",{points:"5 3 19 12 5 21 5 3",fill:"currentColor"})],-1)),u[7]||(u[7]=h("span",null,"Play Actions",-1)),(le(),ae("svg",{class:Me(["chevron",{open:o.value}]),width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},u[5]||(u[5]=[h("polyline",{points:"6 9 12 15 18 9"},null,-1)]),2))],2),(le(),Ro(Fi,{to:"body"},[_e(vn,{name:"popup"},{default:Jt(()=>[o.value?(le(),ae("div",Fg,[h("div",qg,[h("div",Lg,[u[10]||(u[10]=h("h3",{class:"section-title"},"Sequence Actions",-1)),h("div",Bg,[h("button",{"data-cy":"run-current-sequence-btn",onClick:u[0]||(u[0]=c=>a("run-current-sequence")),class:"action-btn",disabled:!r.currentSequenceData||r.currentSequenceData.activePlayerIds.length===0},u[8]||(u[8]=[h("svg",{class:"icon",viewBox:"0 0 24 24",fill:"currentColor"},[h("path",{d:"M8 5v14l11-7z"})],-1),h("span",null,"Run Sequence",-1)]),8,Ng),h("button",{onClick:u[1]||(u[1]=c=>a("reset-current-sequence")),class:"action-btn secondary"},u[9]||(u[9]=[h("svg",{class:"icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[h("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"})],-1),h("span",null,"Reset Sequence",-1)]))])]),u[16]||(u[16]=h("div",{class:"section-divider"},null,-1)),h("div",Hg,[u[13]||(u[13]=h("h3",{class:"section-title"},"Phase Actions",-1)),h("div",Wg,[h("button",{onClick:u[2]||(u[2]=c=>a("run-current-phase")),class:"action-btn primary",disabled:!r.hasAnySequencesInCurrentPhase||r.isRunningCurrentPhase},[u[11]||(u[11]=h("svg",{class:"icon",viewBox:"0 0 24 24",fill:"currentColor"},[h("path",{d:"M8 5v14l11-7z"})],-1)),h("span",null,Ee(r.isRunningCurrentPhase?"Running Phase...":"Run Current Phase"),1)],8,Vg),r.hasMultiplePhases?(le(),ae("button",{key:0,"data-cy":"run-full-play-btn",onClick:u[3]||(u[3]=c=>a("run-full-play")),class:"action-btn primary",disabled:r.isRunningCurrentPhase||r.isRunningFullPlay},[u[12]||(u[12]=h("svg",{class:"icon",viewBox:"0 0 24 24",fill:"currentColor"},[h("path",{d:"M5 5v14l7-7z"}),h("path",{d:"M12 5v14l7-7z"})],-1)),h("span",null,Ee(r.isRunningFullPlay?"Running Full Play...":"Run Full Play"),1)],8,jg)):xe("",!0)])]),u[17]||(u[17]=h("div",{class:"section-divider"},null,-1)),h("div",Ug,[u[15]||(u[15]=h("h3",{class:"section-title"},"Recording",-1)),h("div",Yg,[h("button",{onClick:u[4]||(u[4]=c=>a("record-full-play")),class:"action-btn record",disabled:r.isRecording||r.isRunningCurrentPhase||r.isRunningFullPlay},[u[14]||(u[14]=h("svg",{class:"icon",viewBox:"0 0 24 24",fill:"currentColor"},[h("circle",{cx:"12",cy:"12",r:"8"})],-1)),h("span",null,Ee(r.isRecording?"Recording...":"Record Full Play"),1)],8,zg)])])])])):xe("",!0)]),_:1}),_e(vn,{name:"backdrop"},{default:Jt(()=>[o.value?(le(),ae("div",{key:0,class:"popup-backdrop",onClick:l})):xe("",!0)]),_:1})]))]))}}),Xg=mt(Kg,[["__scopeId","data-v-c183bc8e"]]),Jg={class:"phase-panel"},Gg={class:"phase-row"},Zg={ref:"chipsEl",role:"tablist","aria-label":"Phases"},Qg=["aria-selected","onClick"],ev={class:"phase-tools"},tv={class:"pager"},nv=["disabled"],sv=["disabled"],ov={class:"mutations"},fs=10,iv=dt({__name:"PhaseManager",props:{phases:{},currentPhase:{},isSequenceMode:{type:Boolean}},emits:["phase-select","phase-add","phase-remove","phase-anchor-change"],setup(e,{emit:t}){const n=e,s=t,o=ee(!1),i=ee(null),l=ee(0),a=Te(()=>n.phases.findIndex(y=>y.id===n.currentPhase)),r=Te(()=>Math.max(1,Math.ceil(n.phases.length/fs))),u=Te(()=>{const y=l.value*fs,P=y+fs;return n.phases.slice(y,P)}),c=Te(()=>{const y=n.phases.find(P=>P.id===n.currentPhase);return(y==null?void 0:y.name)||`Phase ${n.currentPhase}`}),p=()=>{s("phase-remove",n.currentPhase),o.value=!1},m=()=>{It(()=>{var M,I;const y=(M=i.value)==null?void 0:M.getBoundingClientRect(),P=(I=i.value)==null?void 0:I.querySelector(".phase-tab.active");if(!y||!P){s("phase-anchor-change",0);return}const C=P.getBoundingClientRect(),q=C.left+C.width/2-y.left;s("phase-anchor-change",Math.max(0,q))})};return Qt(()=>{a.value>=0&&(l.value=Math.floor(a.value/fs)),m()}),Je(()=>[n.currentPhase,n.phases.length],()=>{a.value>=0&&(l.value=Math.floor(a.value/fs)),m()}),(y,P)=>(le(),ae(Xe,null,[h("div",{class:"phase-tabs",ref_key:"barEl",ref:i},[P[5]||(P[5]=h("div",{class:"phase-instructions"},[h("p",{class:"instructions-text"},"Select, add, or remove phases.")],-1)),h("div",Jg,[h("div",Gg,[h("div",Zg,[(le(!0),ae(Xe,null,qs(u.value,C=>(le(),ae("button",{key:C.id,class:Me(["phase-tab",{active:y.currentPhase===C.id}]),role:"tab","aria-selected":y.currentPhase===C.id?"true":"false",onClick:q=>y.$emit("phase-select",C.id)}," Phase "+Ee(C.id),11,Qg))),128))],512),h("div",ev,[h("div",tv,[h("button",{class:"pager-btn",disabled:l.value===0,"aria-label":"Previous phase row",title:"Previous",onClick:P[0]||(P[0]=C=>{l.value=Math.max(0,l.value-1),m()})},"",8,nv),h("button",{class:"pager-btn",disabled:l.value>=r.value-1,"aria-label":"Next phase row",title:"Next",onClick:P[1]||(P[1]=C=>{l.value=Math.min(r.value-1,l.value+1),m()})},"",8,sv)]),h("div",ov,[h("button",{"data-cy":"add-phase-btn",class:"phase-tab add-phase",onClick:P[2]||(P[2]=C=>y.$emit("phase-add")),"aria-label":"Add Phase",title:"Add Phase"},"+"),y.phases.length>1?(le(),ae("button",{key:0,class:"phase-tab remove-phase",onClick:P[3]||(P[3]=C=>o.value=!0),"aria-label":"Remove Phase",title:"Remove Current Phase"},"-")):xe("",!0)])])])])],512),_e(Bs,{show:o.value,title:"Remove Phase",message:`Are you sure you want to remove ${c.value}? This action cannot be undone.`,"confirm-text":"Remove Phase",onConfirm:p,onCancel:P[4]||(P[4]=C=>o.value=!1)},null,8,["show","message"])],64))}}),lv=mt(iv,[["__scopeId","data-v-cc5e69b3"]]),av={class:"sequence-management-container"},rv={class:"panel-header"},cv={class:"actions"},uv={class:"pager"},dv=["disabled"],fv=["disabled"],hv=["title"],pv=["aria-selected","onClick"],gv={key:0,class:"meta-bar"},vv={class:"meta-text"},hs=10,mv=dt({__name:"SequenceManager",props:{currentSequence:{},availableSequences:{},playersWithPaths:{},currentSequenceData:{},anchorX:{default:null}},emits:["select-sequence","add-sequence","remove-sequence"],setup(e,{emit:t}){const n=e,s=t,o=Te(()=>n.availableSequences.length===0?"Create a sequence to start building coordinated player movements":n.playersWithPaths.length>0?"Click any player to include/exclude them from the sequence":"Triple-click players to draw paths first, then click to include in sequence"),i=Te(()=>({"--anchor-x":n.anchorX!=null?`${n.anchorX}px`:"50%"})),l=P=>{s("select-sequence",P)},a=()=>{s("add-sequence")},r=ee(!1),u=()=>{n.currentSequence&&s("remove-sequence",n.currentSequence),r.value=!1},c=ee(0),p=Te(()=>n.availableSequences.findIndex(P=>P.id===n.currentSequence)),m=Te(()=>Math.max(1,Math.ceil(n.availableSequences.length/hs))),y=Te(()=>{const P=c.value*hs,C=P+hs;return n.availableSequences.slice(P,C)});return Qt(()=>{p.value>=0&&(c.value=Math.floor(p.value/hs))}),Je(()=>[n.currentSequence,n.availableSequences.length],()=>{p.value>=0&&(c.value=Math.floor(p.value/hs))}),(P,C)=>(le(),ae("div",av,[h("div",{class:"attached-panel",style:as(i.value)},[h("div",rv,[C[4]||(C[4]=h("div",{class:"label"},"Sequences",-1)),h("div",cv,[h("button",{"data-cy":"add-sequence-btn",class:"chip-btn add-seq",onClick:a,"aria-label":"Add Sequence",title:"Add Sequence"},"+"),P.availableSequences.length>0?(le(),ae("button",{key:0,class:"chip-btn remove-seq",onClick:C[0]||(C[0]=q=>r.value=!0),"aria-label":"Remove Current Sequence",title:"Remove Current Sequence"},"-")):xe("",!0)]),h("div",uv,[h("button",{class:"pager-btn",disabled:c.value===0,"aria-label":"Previous sequence row",title:"Previous",onClick:C[1]||(C[1]=q=>c.value=Math.max(0,c.value-1))},"",8,dv),h("button",{class:"pager-btn",disabled:c.value>=m.value-1,"aria-label":"Next sequence row",title:"Next",onClick:C[2]||(C[2]=q=>c.value=Math.min(m.value-1,c.value+1))},"",8,fv)])]),h("div",{class:"chips",role:"tablist","aria-label":"Sequences",title:o.value},[(le(!0),ae(Xe,null,qs(y.value,q=>(le(),ae("button",{key:q.id,class:Me(["capsule",{active:P.currentSequence===q.id}]),role:"tab","aria-selected":P.currentSequence===q.id?"true":"false",onClick:M=>l(q.id),"data-cy":"sequence-chip"}," Seq "+Ee(q.id),11,pv))),128))],8,hv),P.currentSequenceData?(le(),ae("div",gv,[h("span",vv,Ee((P.currentSequenceData.activePlayerIds||[]).length)+" active players",1)])):xe("",!0)],4),_e(Bs,{show:r.value,title:"Remove Sequence",message:`Are you sure you want to remove Sequence ${P.currentSequence}? This action cannot be undone.`,"confirm-text":"Remove Sequence",onConfirm:u,onCancel:C[3]||(C[3]=q=>r.value=!1)},null,8,["show","message"])]))}}),yv=mt(mv,[["__scopeId","data-v-e66c3240"]]),bv={key:0,class:"player-controls"},Pv={class:"player-list"},wv=["onClick","disabled"],Sv={class:"player-icon"},_v={class:"player-status"},Cv={key:0,class:"player-delay"},xv={class:"player-actions"},Tv=["disabled"],Ev=["disabled"],kv=dt({__name:"PlayerManager",props:{players:{},availableSequences:{},currentSequenceData:{}},emits:["toggle-player-loop","select-all-players","deselect-all-players"],setup(e,{emit:t}){const n=e,s=t,o=c=>c.path&&c.path.length>0,i=Te(()=>n.players.some(c=>o(c))),l=Te(()=>n.players.some(c=>c.isLooping)),a=c=>{o(c)&&s("toggle-player-loop",c)},r=()=>{s("select-all-players")},u=()=>{s("deselect-all-players")};return(c,p)=>c.availableSequences.length>0?(le(),ae("div",bv,[p[2]||(p[2]=h("h4",{class:"section-title"},"Players Selected for Current Sequence",-1)),h("div",Pv,[(le(!0),ae(Xe,null,qs(c.players,m=>(le(),ae("div",{key:`${m.type}-${m.id}`,onClick:y=>a(m),class:Me(["player-control-btn",{active:m.isLooping,"no-path":!o(m),[m.type]:!0}]),disabled:!o(m)},[h("span",Sv,Ee(m.type==="attacking"?"R":"B")+Ee(m.id),1),h("span",_v,[ze(Ee(o(m)?"READY":"NEEDS PATH")+" ",1),o(m)&&m.sequenceDelay!==void 0&&m.sequenceDelay>0?(le(),ae("span",Cv,Ee(m.sequenceDelay)+"ms ",1)):xe("",!0)])],10,wv))),128))]),h("div",xv,[h("button",{"data-cy":"select-all-players-btn",onClick:r,class:"control-btn select-all",disabled:!i.value},p[0]||(p[0]=[h("span",{class:"icon"},"",-1),ze(" Select All ")]),8,Tv),h("button",{onClick:u,class:"control-btn deselect-all",disabled:!l.value},p[1]||(p[1]=[h("span",{class:"icon"},"",-1),ze(" Deselect All ")]),8,Ev)])])):xe("",!0)}}),Av=mt(kv,[["__scopeId","data-v-329ae28f"]]),Mv={class:"sequence-popup-container"},Rv={key:0,class:"popup-menu"},Dv={class:"popup-content"},Ov={class:"popup-section phase-section"},Iv={class:"section-content"},$v={class:"popup-section sequence-section"},Fv={class:"section-content"},qv=dt({__name:"SequencePopupMenu",props:{phases:{},currentPhase:{},isSequenceMode:{type:Boolean},currentSequence:{},availableSequences:{},playersWithPaths:{},currentSequenceData:{},players:{}},emits:["phase-select","phase-add","phase-remove","select-sequence","add-sequence","remove-sequence","toggle-player-loop","select-all-players","deselect-all-players"],setup(e,{emit:t}){const n=ee(!1),s=ee(null),o=()=>{n.value=!n.value},i=()=>{n.value=!1};return(l,a)=>(le(),ae("div",Mv,[h("button",{"data-cy":"sequence-manager-trigger",class:Me(["popup-trigger-button",{active:n.value}]),onClick:o},[a[11]||(a[11]=Ku('<svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-89a89dd8><rect x="3" y="3" width="7" height="7" rx="1" data-v-89a89dd8></rect><rect x="14" y="3" width="7" height="7" rx="1" data-v-89a89dd8></rect><rect x="3" y="14" width="7" height="7" rx="1" data-v-89a89dd8></rect><rect x="14" y="14" width="7" height="7" rx="1" data-v-89a89dd8></rect></svg><span data-v-89a89dd8>Sequence Manager</span>',2)),(le(),ae("svg",{class:Me(["chevron",{open:n.value}]),width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},a[10]||(a[10]=[h("polyline",{points:"6 9 12 15 18 9"},null,-1)]),2))],2),(le(),Ro(Fi,{to:"body"},[_e(vn,{name:"popup"},{default:Jt(()=>[n.value?(le(),ae("div",Rv,[h("div",Dv,[h("div",Ov,[a[12]||(a[12]=h("h3",{class:"section-title"},"Phases",-1)),h("div",Iv,[_e(lv,{phases:l.phases,"current-phase":l.currentPhase,"is-sequence-mode":l.isSequenceMode,onPhaseSelect:a[0]||(a[0]=r=>l.$emit("phase-select",r)),onPhaseAdd:a[1]||(a[1]=r=>l.$emit("phase-add")),onPhaseRemove:a[2]||(a[2]=r=>l.$emit("phase-remove",r)),onPhaseAnchorChange:a[3]||(a[3]=r=>s.value=r)},null,8,["phases","current-phase","is-sequence-mode"])])]),a[14]||(a[14]=h("div",{class:"section-divider"},null,-1)),h("div",$v,[a[13]||(a[13]=h("h3",{class:"section-title"},"Sequences",-1)),h("div",Fv,[_e(yv,{"current-sequence":l.currentSequence,"available-sequences":l.availableSequences,"players-with-paths":l.playersWithPaths,"current-sequence-data":l.currentSequenceData,"anchor-x":s.value,onSelectSequence:a[4]||(a[4]=r=>l.$emit("select-sequence",r)),onAddSequence:a[5]||(a[5]=r=>l.$emit("add-sequence")),onRemoveSequence:a[6]||(a[6]=r=>l.$emit("remove-sequence",r))},null,8,["current-sequence","available-sequences","players-with-paths","current-sequence-data","anchor-x"]),_e(Av,{players:l.players,"available-sequences":l.availableSequences,"current-sequence-data":l.currentSequenceData,onTogglePlayerLoop:a[7]||(a[7]=r=>l.$emit("toggle-player-loop",r)),onSelectAllPlayers:a[8]||(a[8]=r=>l.$emit("select-all-players")),onDeselectAllPlayers:a[9]||(a[9]=r=>l.$emit("deselect-all-players"))},null,8,["players","available-sequences","current-sequence-data"])])])])])):xe("",!0)]),_:1}),_e(vn,{name:"backdrop"},{default:Jt(()=>[n.value?(le(),ae("div",{key:0,class:"popup-backdrop",onClick:i})):xe("",!0)]),_:1})]))]))}}),Lv=mt(qv,[["__scopeId","data-v-89a89dd8"]]),Bv={class:"player-options-container"},Nv=["disabled"],Hv={key:0,class:"popup-menu","data-cy":"player-options-menu"},Wv={class:"popup-content"},Vv={class:"menu-title"},jv={class:"option-section"},Uv={class:"mode-buttons"},Yv={class:"option-section"},zv={class:"option-section"},Kv=["disabled"],Xv={key:0,class:"option-section"},Jv={class:"option-section"},Gv={class:"section-title"},Zv=["value"],Qv={class:"option-section"},em={class:"section-title"},tm={class:"delay-buttons"},nm={class:"option-section"},sm=["disabled"],om=dt({__name:"PlayerOptionsMenu",props:{selectedPlayer:{}},emits:["set-player-mode","toggle-path-visibility","update-player-speed","adjust-player-delay","reset-player-delay","clear-player-path","set-timed-pass","clear-timed-pass"],setup(e,{expose:t,emit:n}){const s=e,o=n,i=ee(!1),l=()=>{s.selectedPlayer&&(i.value=!i.value)},a=()=>{s.selectedPlayer&&(i.value=!0)},r=()=>{i.value=!1};t({openPopup:a});const u=M=>{o("set-player-mode",M),r()},c=()=>{o("toggle-path-visibility")},p=M=>{const I=M.target;o("update-player-speed",parseInt(I.value))},m=M=>{o("adjust-player-delay",M)},y=()=>{o("reset-player-delay")},P=()=>{o("clear-player-path"),r()},C=()=>{o("set-timed-pass"),r()},q=()=>{o("clear-timed-pass")};return(M,I)=>(le(),ae("div",Bv,[h("button",{"data-cy":"player-options-trigger",class:Me(["popup-trigger-button",{active:i.value,disabled:!M.selectedPlayer}]),onClick:l,disabled:!M.selectedPlayer},[I[6]||(I[6]=h("svg",{class:"icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[h("circle",{cx:"12",cy:"12",r:"3"}),h("path",{d:"M12 1v6m0 6v6M1 12h6m6 0h6"})],-1)),h("span",null,Ee(M.selectedPlayer?`Player ${M.selectedPlayer.id}`:"Player Options"),1),(le(),ae("svg",{class:Me(["chevron",{open:i.value}]),width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},I[5]||(I[5]=[h("polyline",{points:"6 9 12 15 18 9"},null,-1)]),2))],10,Nv),(le(),Ro(Fi,{to:"body"},[_e(vn,{name:"popup"},{default:Jt(()=>[i.value&&M.selectedPlayer?(le(),ae("div",Hv,[h("div",Wv,[h("h3",Vv,"Player "+Ee(M.selectedPlayer.id)+" Options",1),h("div",jv,[I[9]||(I[9]=h("h4",{class:"section-title"},"Mode",-1)),h("div",Uv,[h("button",{onClick:I[0]||(I[0]=J=>u("drag")),class:Me(["mode-btn",{active:M.selectedPlayer.mode==="drag"}])},I[7]||(I[7]=[h("svg",{class:"icon",viewBox:"0 0 24 24"},[h("path",{d:"M12 3l3 3m-3-3l-3 3M12 3v6M12 21l3-3m-3 3l-3-3M12 15v6M3 12l3-3m-3 3l3 3M9 12H3M21 12l-3-3m3 3l-3 3M15 12h6",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",fill:"none"})],-1),h("span",null,"Drag Player",-1)]),2),h("button",{"data-cy":"path-mode-btn",onClick:I[1]||(I[1]=J=>u("path")),class:Me(["mode-btn",{active:M.selectedPlayer.mode==="path"}])},I[8]||(I[8]=[h("svg",{class:"icon",viewBox:"0 0 24 24"},[h("path",{d:"M4 20c4-8 12-8 16-16",stroke:"currentColor","stroke-linecap":"round",fill:"none"}),h("path",{d:"M14 4h6v6",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",fill:"none"})],-1),h("span",null,"Draw Path",-1)]),2)])]),h("div",Yv,[h("button",{onClick:c,class:"option-btn"},[I[10]||(I[10]=h("svg",{class:"icon",viewBox:"0 0 24 24"},[h("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z",stroke:"currentColor",fill:"none"}),h("circle",{cx:"12",cy:"12",r:"3",fill:"currentColor"})],-1)),h("span",null,Ee(M.selectedPlayer.pathVisible!==!1?"Hide Path":"Show Path"),1)])]),h("div",zv,[h("button",{"data-cy":"timed-pass-btn",onClick:C,class:Me(["option-btn",{active:M.selectedPlayer.timedPass}]),disabled:!M.selectedPlayer.path||M.selectedPlayer.path.length===0},[I[11]||(I[11]=h("svg",{class:"icon",viewBox:"0 0 24 24"},[h("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2",fill:"none"}),h("path",{d:"M12 6v6l4 2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round",fill:"none"})],-1)),h("span",null,Ee(M.selectedPlayer.timedPass?"Edit Timed Pass":"Set Timed Pass"),1)],10,Kv)]),M.selectedPlayer.timedPass?(le(),ae("div",Xv,[h("button",{onClick:q,class:"option-btn danger"},I[12]||(I[12]=[h("svg",{class:"icon",viewBox:"0 0 24 24"},[h("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round",fill:"none"})],-1),h("span",null,"Clear Timed Pass",-1)]))])):xe("",!0),I[15]||(I[15]=h("div",{class:"section-divider"},null,-1)),h("div",Jv,[h("h4",Gv,"Speed: "+Ee(M.selectedPlayer.speed)+"%",1),h("input",{type:"range",min:"25",max:"200",step:"25",value:M.selectedPlayer.speed,onInput:p,class:"speed-slider"},null,40,Zv),I[13]||(I[13]=h("div",{class:"speed-marks"},[h("span",null,"25%"),h("span",null,"100%"),h("span",null,"200%")],-1))]),h("div",Qv,[h("h4",em,"Delay: "+Ee(M.selectedPlayer.sequenceDelay||0)+"ms",1),h("div",tm,[h("button",{onClick:I[2]||(I[2]=J=>m(10)),class:"delay-btn"},"+10ms"),h("button",{onClick:I[3]||(I[3]=J=>m(50)),class:"delay-btn"},"+50ms"),h("button",{onClick:I[4]||(I[4]=J=>m(100)),class:"delay-btn"},"+100ms"),h("button",{onClick:y,class:"delay-btn reset"},"Reset")])]),I[16]||(I[16]=h("div",{class:"section-divider"},null,-1)),h("div",nm,[h("button",{onClick:P,class:"option-btn danger",disabled:!M.selectedPlayer.path||M.selectedPlayer.path.length===0},I[14]||(I[14]=[h("svg",{class:"icon",viewBox:"0 0 24 24"},[h("path",{d:"M9 3h6M4 7h16M6 7l1 12a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2l1-12M10 11v6M14 11v6",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",fill:"none"})],-1),h("span",null,"Clear Path",-1)]),8,sm)])])])):xe("",!0)]),_:1}),_e(vn,{name:"backdrop"},{default:Jt(()=>[i.value?(le(),ae("div",{key:0,class:"popup-backdrop",onClick:r})):xe("",!0)]),_:1})]))]))}}),im=mt(om,[["__scopeId","data-v-33916808"]]);function lm(){const e=Hi(),t=()=>{e.updateActivity()};Qt(()=>{["mousedown","mousemove","keydown","scroll","touchstart","touchmove","touchend","click","focus","input"].forEach(s=>{document.addEventListener(s,t,{passive:!0})})}),Nn(()=>{["mousedown","mousemove","keydown","scroll","touchstart","touchmove","touchend","click","focus","input"].forEach(s=>{document.removeEventListener(s,t)})})}const am={class:"app-bar",role:"banner"},rm=["aria-expanded"],cm={key:0,class:"icon-24",viewBox:"0 0 24 24","aria-hidden":"true"},um={key:1,class:"icon-24",viewBox:"0 0 24 24","aria-hidden":"true"},dm={class:"sidebar-content"},fm={class:"player-controls"},hm={class:"menu-section"},pm={class:"add-row"},gm={class:"dropdown-row"},vm=["value"],mm={class:"menu-section"},ym={key:0,class:"plays-list"},bm={key:0,class:"no-plays"},Pm={key:1,class:"play-items"},wm={class:"play-name"},Sm={class:"play-actions"},_m=["onClick"],Cm=["onClick"],xm={key:0,class:"menu-section"},Tm={key:1,class:"menu-section"},Em={key:2,class:"menu-section"},km={class:"menu-section"},Am={key:0,class:"help-panel"},Mm={class:"help-accordion"},Rm={class:"help-accordion-item"},Dm={key:0,class:"help-accordion-body"},Om={class:"help-accordion-item"},Im={key:0,class:"help-accordion-body"},$m={class:"help-accordion-item"},Fm={key:0,class:"help-accordion-body"},qm={class:"help-accordion-item"},Lm={key:0,class:"help-accordion-body"},Bm={class:"help-accordion-item"},Nm={key:0,class:"help-accordion-body"},Hm={class:"main-content"},Wm={key:0,class:"playback-screen"},Vm={class:"playback-header"},jm={class:"playback-title"},Um={key:1,class:"pitch-container"},Ym={key:2,class:"modal storage-quota"},zm={class:"modal-message"},Km={class:"modal-actions"},Xm=["disabled"],Jm=.5,Gm=2,Zm=.1,Qm=dt({__name:"App",setup(e){const t=ee(!1),n=ee(typeof window<"u"?window.innerWidth>=1024:!0),s=ee(1),o=ee(!1),i=ee("attacking");ee(!1),ee(!1),ee(0),ee(0);const l=ee(!1),a=ee(!1),r=ee(!1),u=ee({setup:!0,paths:!1,phases:!1,zoom:!1,tutorial:!1}),c=U=>{u.value[U]=!u.value[U]},p=ee(null),m=()=>{var U;(U=p.value)==null||U.startTour()},y=ee(null),P=ee([]),C=ee([]);ee([]);const q=ee(!1),M=ee(!1),I=ee(!1),J=ee(null),$=ee("Storage is full. Please remove some saved plays, then retry saving your play."),D=an(),oe=Hi();lm();const re=Te(()=>D.plays),L=ee(null),B=ee(null);Qt(async()=>{const U=()=>{oe.isSessionValid||(l.value&&(l.value=!1),P.value.length>0&&(P.value=[]),C.value.length>0&&(C.value=[]))};window.__squiggleExpiryTimer=window.setInterval(U,3e4);const x=()=>{n.value=window.innerWidth>=1024,n.value&&(t.value=!0)};window.addEventListener("resize",x),x(),window.__squiggleResizeHandler=x}),Je(()=>oe.isSessionValid,U=>{U||(l.value=!1,P.value=[],C.value=[])});const _=()=>{t.value=!t.value},W=U=>{var x,he;(he=(x=L.value)==null?void 0:x.openAddPlayersDialog)==null||he.call(x,U)},k=U=>{var x,he;i.value=U,(he=(x=L.value)==null?void 0:x.setAttacking)==null||he.call(x,U)},se=()=>{var U,x;(x=(U=L.value)==null?void 0:U.openClearPlayConfirm)==null||x.call(U)},ne=async U=>{l.value&&!U?P.value.length>0&&(q.value=!0):!l.value&&U&&(P.value=[],C.value=[]),l.value=U},v=U=>{l.value&&(P.value=[...P.value,...U])},A=U=>{l.value&&(C.value=[...C.value,U])},R=()=>{B.value&&B.value.openPopup()},j=U=>{y.value=U,a.value=!1},Z=()=>{y.value=null},g=async U=>{try{await zs.deletePlay(U)}catch(x){console.error("Failed to delete play:",x)}},V=()=>{},te=async U=>{try{const x=P.value.reduce((O,d)=>{const f=`${d.playerId}-${d.timestamp}`;return O.has(f)||O.set(f,d),O},new Map),he=C.value.reduce((O,d)=>(O.has(d.id)||O.set(d.id,d),O),new Map),T={name:U,playerStates:Array.from(x.values()),ballEvents:Array.from(he.values()).sort((O,d)=>O.startTimestamp-d.startTimestamp)};await zs.createPlay(T),y.value=D.plays[D.plays.length-1]||null,q.value=!1,J.value=null,P.value=[],C.value=[]}catch(x){console.error("Failed to save play:",x),(x instanceof Error?x.message:"")==="STORAGE_QUOTA_EXCEEDED"?(J.value={name:U,playerStates:[...P.value],ballEvents:[...C.value]},I.value=!0):alert("Failed to save play. Please try again.")}},G=()=>{q.value=!1,P.value=[],C.value=[]},H=async()=>{try{await zs.clearAllPlays(),y.value=null,alert("All plays cleared successfully!")}catch(U){console.error("Failed to clear plays:",U),alert("Failed to clear plays. Please try again.")}M.value=!1};Nn(()=>{const U=window.__squiggleExpiryTimer;U&&clearInterval(U);const x=window.__squiggleResizeHandler;x&&window.removeEventListener("resize",x)});const fe=()=>{a.value=!0,t.value=!0,I.value=!1},Pe=async()=>{if(J.value)try{await zs.createPlay(J.value),y.value=D.plays[D.plays.length-1]||null,J.value=null,I.value=!1,alert("Play saved successfully!")}catch(U){const x=U instanceof Error?U.message:"";alert(x==="STORAGE_QUOTA_EXCEEDED"?"Storage is still full. Please remove more saved plays and try again.":"Failed to save play. Please try again.")}};return(U,x)=>{var he,T,O,d,f,b,S,E,F,Y,z,X,K,ue,ie,de,ve,be,ke,Se,Ne,We,Ge,Ke,Ze,wt,Qe,tt,Wn,Lo,Bo;return le(),ae("div",{class:Me(["app-shell",{"with-sidebar":n.value&&t.value}])},[h("header",am,[h("button",{"data-cy":"menu-btn",class:"icon-btn menu-btn",onClick:_,"aria-expanded":t.value?"true":"false","aria-label":"Toggle navigation menu"},[t.value?(le(),ae("svg",um,x[17]||(x[17]=[h("path",{fill:"currentColor",d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},null,-1)]))):(le(),ae("svg",cm,x[16]||(x[16]=[h("path",{fill:"currentColor",d:"M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z"},null,-1)])))],8,rm),x[18]||(x[18]=h("div",{class:"app-brand"},[h("span",{class:"app-title"},"Squiggle")],-1)),x[19]||(x[19]=h("div",{class:"app-spacer"},null,-1)),x[20]||(x[20]=h("div",{class:"app-actions",role:"toolbar","aria-label":"App actions"},null,-1))]),_e(vh),h("aside",{class:Me(["sidebar",{open:t.value,persistent:n.value}])},[h("div",dm,[h("div",fm,[h("div",hm,[x[25]||(x[25]=h("div",{class:"section-title"},"Teams",-1)),h("div",pm,[h("button",{"data-cy":"add-red-btn",class:"nav-btn add-red",onClick:x[0]||(x[0]=Be=>W("attacking"))},x[21]||(x[21]=[h("svg",{class:"icon",viewBox:"0 0 24 24","aria-hidden":"true"},[h("path",{d:"M12 5v14M5 12h14",stroke:"currentColor","stroke-linecap":"round"})],-1),ze(" Add Red ")])),h("button",{class:"nav-btn add-blue",onClick:x[1]||(x[1]=Be=>W("defensive"))},x[22]||(x[22]=[h("svg",{class:"icon",viewBox:"0 0 24 24","aria-hidden":"true"},[h("path",{d:"M12 5v14M5 12h14",stroke:"currentColor","stroke-linecap":"round"})],-1),ze(" Add Blue ")]))]),h("div",gm,[x[24]||(x[24]=h("label",{for:"attacking-team-select",class:"dropdown-label"},"Attacking Team",-1)),h("select",{id:"attacking-team-select",class:"team-select",value:i.value,onChange:x[2]||(x[2]=Be=>k(Be.target.value))},x[23]||(x[23]=[h("option",{value:"attacking"},"Red",-1),h("option",{value:"defensive"},"Blue",-1)]),40,vm)])]),x[41]||(x[41]=h("div",{class:"section-divider"},null,-1)),h("div",mm,[h("button",{class:"nav-btn plays",onClick:x[3]||(x[3]=Be=>a.value=!a.value)},x[26]||(x[26]=[h("svg",{class:"icon",viewBox:"0 0 24 24","aria-hidden":"true"},[h("path",{d:"M4 6h16M4 12h16M4 18h16",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"})],-1),ze(" Saved Plays ")])),a.value?(le(),ae("div",ym,[re.value.length===0?(le(),ae("div",bm,"No saved plays")):(le(),ae("div",Pm,[(le(!0),ae(Xe,null,qs(re.value,Be=>(le(),ae("div",{key:Be.id,class:"play-item"},[h("span",wm,Ee(Be.name),1),h("div",Sm,[h("button",{onClick:w=>j(Be),class:"play-action-btn",title:"View"},x[27]||(x[27]=[h("svg",{class:"icon",viewBox:"0 0 24 24","aria-hidden":"true"},[h("path",{d:"M8 5v14l11-7z",fill:"currentColor"})],-1)]),8,_m),h("button",{onClick:w=>g(Be.id),class:"play-action-btn",title:"Delete"},x[28]||(x[28]=[h("svg",{class:"icon",viewBox:"0 0 24 24","aria-hidden":"true"},[h("path",{d:"M9 3h6M4 7h16M6 7l1 12a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2l1-12M10 11v6M14 11v6",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),8,Cm)])]))),128))]))])):xe("",!0)]),x[42]||(x[42]=h("div",{class:"section-divider"},null,-1)),L.value?(le(),ae("div",xm,[_e(Xg,{"is-recording":l.value,"is-running-current-phase":((T=(he=L.value.animationState)==null?void 0:he.isRunningCurrentPhase)==null?void 0:T.value)||!1,"is-running-full-play":((d=(O=L.value.animationState)==null?void 0:O.isRunningFullPlay)==null?void 0:d.value)||!1,"has-any-sequences-in-current-phase":((f=L.value.computedGameState)==null?void 0:f.hasAnySequencesInCurrentPhase)||!1,"has-multiple-phases":((E=(S=(b=L.value.gameState)==null?void 0:b.phases)==null?void 0:S.value)==null?void 0:E.length)>1,"current-sequence-data":((Y=(F=L.value.gameState)==null?void 0:F.currentSequenceData)==null?void 0:Y.value)||null,"available-sequences":((X=(z=L.value.gameState)==null?void 0:z.availableSequences)==null?void 0:X.value)||[],"current-sequence":((ue=(K=L.value.gameState)==null?void 0:K.currentSequence)==null?void 0:ue.value)||0,onRunCurrentPhase:L.value.handleRunCurrentPhase,onRunFullPlay:L.value.handleRunFullPlay,onRunCurrentSequence:L.value.handleSequenceRun,onResetCurrentSequence:L.value.handleSequenceReset,onRecordFullPlay:L.value.handleRecordFullPlay},null,8,["is-recording","is-running-current-phase","is-running-full-play","has-any-sequences-in-current-phase","has-multiple-phases","current-sequence-data","available-sequences","current-sequence","onRunCurrentPhase","onRunFullPlay","onRunCurrentSequence","onResetCurrentSequence","onRecordFullPlay"])])):xe("",!0),x[43]||(x[43]=h("div",{class:"section-divider"},null,-1)),L.value?(le(),ae("div",Tm,[_e(Lv,{phases:((de=(ie=L.value.gameState)==null?void 0:ie.phases)==null?void 0:de.value)||[],"current-phase":((be=(ve=L.value.gameState)==null?void 0:ve.currentPhase)==null?void 0:be.value)||0,"is-sequence-mode":((Se=(ke=L.value.gameState)==null?void 0:ke.isSequenceMode)==null?void 0:Se.value)||!1,"current-sequence":((We=(Ne=L.value.gameState)==null?void 0:Ne.currentSequence)==null?void 0:We.value)||0,"available-sequences":((Ke=(Ge=L.value.gameState)==null?void 0:Ge.availableSequences)==null?void 0:Ke.value)||[],"players-with-paths":((wt=(Ze=L.value.gameState)==null?void 0:Ze.playersWithPaths)==null?void 0:wt.value)||[],"current-sequence-data":((tt=(Qe=L.value.gameState)==null?void 0:Qe.currentSequenceData)==null?void 0:tt.value)||null,players:((Lo=(Wn=L.value.gameState)==null?void 0:Wn.players)==null?void 0:Lo.value)||[],onPhaseSelect:L.value.handlePhaseSelect,onPhaseAdd:L.value.handlePhaseAdd,onPhaseRemove:L.value.handlePhaseRemove,onSelectSequence:L.value.handleSequenceSelect,onAddSequence:L.value.handleSequenceAdd,onRemoveSequence:L.value.handleSequenceRemove,onTogglePlayerLoop:L.value.handlePlayerToggleLoop,onSelectAllPlayers:L.value.handleSelectAllPlayers,onDeselectAllPlayers:L.value.handleDeselectAllPlayers},null,8,["phases","current-phase","is-sequence-mode","current-sequence","available-sequences","players-with-paths","current-sequence-data","players","onPhaseSelect","onPhaseAdd","onPhaseRemove","onSelectSequence","onAddSequence","onRemoveSequence","onTogglePlayerLoop","onSelectAllPlayers","onDeselectAllPlayers"])])):xe("",!0),x[44]||(x[44]=h("div",{class:"section-divider"},null,-1)),L.value?(le(),ae("div",Em,[_e(im,{ref_key:"playerOptionsMenu",ref:B,"selected-player":((Bo=L.value.uiState)==null?void 0:Bo.selectedPlayer)||null,onSetPlayerMode:L.value.handlePlayerOptionsMode,onTogglePathVisibility:L.value.handlePlayerOptionsPathVisibility,onUpdatePlayerSpeed:L.value.handlePlayerOptionsSpeed,onAdjustPlayerDelay:L.value.handlePlayerOptionsDelay,onResetPlayerDelay:L.value.handlePlayerOptionsDelayReset,onClearPlayerPath:L.value.handlePlayerOptionsClearPath,onSetTimedPass:L.value.handleSetTimedPass,onClearTimedPass:L.value.handleClearTimedPass},null,8,["selected-player","onSetPlayerMode","onTogglePathVisibility","onUpdatePlayerSpeed","onAdjustPlayerDelay","onResetPlayerDelay","onClearPlayerPath","onSetTimedPass","onClearTimedPass"])])):xe("",!0),x[45]||(x[45]=h("div",{class:"section-divider"},null,-1)),h("div",{class:"menu-section"},[h("button",{"data-cy":"clear-play-btn",class:"nav-btn danger",onClick:se},x[29]||(x[29]=[h("svg",{class:"icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true"},[h("path",{d:"M9 3h6M4 7h16M6 7l1 12a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2l1-12M10 11v6M14 11v6","stroke-linecap":"round","stroke-linejoin":"round"})],-1),ze(" Clear Current Play ")]))]),h("div",km,[h("button",{class:"nav-btn help-btn",onClick:x[4]||(x[4]=Be=>r.value=!r.value)},x[30]||(x[30]=[h("svg",{class:"icon",viewBox:"0 0 24 24","aria-hidden":"true"},[h("path",{d:"M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2Zm0 15a1.5 1.5 0 1 1 1.5-1.5A1.502 1.502 0 0 1 12 17Zm1.8-6.9-.9.78A1.75 1.75 0 0 0 12 12.75V13h-1.5v-.25a3.25 3.25 0 0 1 1.05-2.4l1.14-.99a1.75 1.75 0 1 0-2.89-1.32H8.3A3.25 3.25 0 1 1 14.2 10.1Z",fill:"currentColor"})],-1),ze(" Help & Tips ")])),r.value?(le(),ae("div",Am,[h("div",Mm,[h("div",Rm,[h("button",{type:"button",class:"help-accordion-header",onClick:x[5]||(x[5]=Be=>c("setup"))},[x[31]||(x[31]=h("span",null,"Setting up players",-1)),h("span",{class:Me(["help-chevron",{open:u.value.setup}])},"",2)]),u.value.setup?(le(),ae("div",Dm,x[32]||(x[32]=[h("p",{class:"help-text"},[ze(" Use "),h("strong",null,"Add Red"),ze(" / "),h("strong",null,"Add Blue"),ze(" to place players, then drag them on the canvas to position them. ")],-1)]))):xe("",!0)]),h("div",Om,[h("button",{type:"button",class:"help-accordion-header",onClick:x[6]||(x[6]=Be=>c("paths"))},[x[33]||(x[33]=h("span",null,"Drawing running lines",-1)),h("span",{class:Me(["help-chevron",{open:u.value.paths}])},"",2)]),u.value.paths?(le(),ae("div",Im,x[34]||(x[34]=[h("p",{class:"help-text"}," Triple-click a player to open options and switch them to path mode, then drag to sketch their route. ",-1)]))):xe("",!0)]),h("div",$m,[h("button",{type:"button",class:"help-accordion-header",onClick:x[7]||(x[7]=Be=>c("phases"))},[x[35]||(x[35]=h("span",null,"Phases, sequences & actions",-1)),h("span",{class:Me(["help-chevron",{open:u.value.phases}])},"",2)]),u.value.phases?(le(),ae("div",Fm,x[36]||(x[36]=[h("p",{class:"help-text"},[ze(" Build phases and sequences with the top menus, then use "),h("strong",null,"Play Actions"),ze(" to run the current phase or the full play. ")],-1)]))):xe("",!0)]),h("div",qm,[h("button",{type:"button",class:"help-accordion-header",onClick:x[8]||(x[8]=Be=>c("zoom"))},[x[37]||(x[37]=h("span",null,"Zoom & pan",-1)),h("span",{class:Me(["help-chevron",{open:u.value.zoom}])},"",2)]),u.value.zoom?(le(),ae("div",Lm,x[38]||(x[38]=[h("p",{class:"help-text"}," Use the zoom icon on the canvas to zoom or toggle pan mode when working on large plays. ",-1)]))):xe("",!0)]),h("div",Bm,[h("button",{type:"button",class:"help-accordion-header",onClick:x[9]||(x[9]=Be=>c("tutorial"))},[x[39]||(x[39]=h("span",null,"First play tutorial",-1)),h("span",{class:Me(["help-chevron",{open:u.value.tutorial}])},"",2)]),u.value.tutorial?(le(),ae("div",Nm,[x[40]||(x[40]=h("p",{class:"help-text"}," Walk through creating, recording, and saving your very first play step-by-step. ",-1)),h("button",{class:"nav-btn tutorial-btn",onClick:m}," Start First Play Tutorial ")])):xe("",!0)])])])):xe("",!0)])])])],2),!n.value&&t.value?(le(),ae("div",{key:0,class:"backdrop",onClick:x[10]||(x[10]=Be=>t.value=!1)})):xe("",!0),h("main",Hm,[y.value?(le(),ae("div",Wm,[h("div",Vm,[h("button",{onClick:Z,class:"close-btn"}," Back to Match"),h("h2",jm,Ee(y.value.name),1)]),_e(ih,{"playback-data":y.value.playerStates,"ball-events":y.value.ballEvents||[],onSequenceComplete:V},null,8,["playback-data","ball-events"])])):(le(),ae("div",Um,[_e(Uf,{ref_key:"rugbyPitch",ref:L,"is-recording":l.value,"onUpdate:isRecording":ne,"playback-data":[],zoom:s.value,"pan-mode":o.value,"zoom-min":Jm,"zoom-max":Gm,"zoom-step":Zm,"is-modal-active":q.value,"onUpdate:zoom":x[11]||(x[11]=Be=>s.value=Be),"onUpdate:panMode":x[12]||(x[12]=Be=>o.value=Be),"onUpdate:playerStates":v,"onRecord:ballEvent":A,onOpenPlayerMenu:R},null,8,["is-recording","zoom","pan-mode","is-modal-active"])]))]),_e(hh,{show:q.value,onSave:te,onCancel:G},null,8,["show"]),_e(Bs,{show:M.value,title:"Clear All Plays",message:"Are you sure you want to clear all plays? This action cannot be undone.","confirm-text":"Clear All Plays",onConfirm:H,onCancel:x[13]||(x[13]=Be=>M.value=!1)},null,8,["show"]),I.value?(le(),ae("div",{key:1,class:"modal-backdrop",onClick:x[14]||(x[14]=Be=>I.value=!1)})):xe("",!0),I.value?(le(),ae("div",Ym,[x[46]||(x[46]=h("h3",{class:"modal-title"},"Storage Is Full",-1)),h("p",zm,Ee($.value),1),h("div",Km,[h("button",{class:"modal-btn primary",onClick:fe},"Manage Saved Plays"),h("button",{class:"modal-btn",disabled:!J.value,onClick:Pe},"Retry Save",8,Xm),h("button",{class:"modal-btn",onClick:x[15]||(x[15]=Be=>I.value=!1)},"Cancel")])])):xe("",!0),_e(Ig,{ref_key:"firstPlayTour",ref:p},null,512)],2)}}}),lc=Bd(Qm),ey=Wd();lc.use(ey);lc.mount("#app");var ma;(ma=navigator.storage)!=null&&ma.persist&&navigator.storage.persist().catch(()=>{});
